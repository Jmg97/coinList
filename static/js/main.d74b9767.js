/*! For license information please see main.d74b9767.js.LICENSE.txt */
!function(){var t={472:function(t){t.exports="object"==typeof self?self.FormData:window.FormData},463:function(t,e,i){"use strict";var r=i(791),o=i(296);function n(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function _(t,e,i,r,o,n,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=n,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new _(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new _(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new _(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new _(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new _(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new _(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new _(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new _(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new _(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function m(t){return t[1].toUpperCase()}function b(t,e,i,r){var o=g.hasOwnProperty(e)?g[e]:null;(null!==o?0!==o.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,i,r){if(null===e||"undefined"===typeof e||function(t,e,i,r){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,r))return!0;if(r)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,o,r)&&(i=null),r||null===o?function(t){return!!c.call(f,t)||!c.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):o.mustUseProperty?t[o.propertyName]=null===i?3!==o.type&&"":i:(e=o.attributeName,r=o.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(o=o.type)||4===o&&!0===i?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,m);g[e]=new _(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,m);g[e]=new _(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,m);g[e]=new _(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new _(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new _(t,1,!1,t.toLowerCase(),null,!0,!0)}));var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),C=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function F(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=M&&t[M]||t["@@iterator"])?t:null}var N,V=Object.assign;function B(t){if(void 0===N)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+t}var A=!1;function $(t,e){if(!t||A)return"";A=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var o=u.stack.split("\n"),n=r.stack.split("\n"),s=o.length-1,a=n.length-1;1<=s&&0<=a&&o[s]!==n[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==n[a]){if(1!==s||1!==a)do{if(s--,0>--a||o[s]!==n[a]){var l="\n"+o[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{A=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?B(t):""}function j(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=$(t.type,!1);case 11:return t=$(t.type.render,!1);case 1:return t=$(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case x:return"Fragment";case C:return"Portal";case S:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case k:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case O:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case D:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case T:e=t._payload,t=t._init;try{return H(t(e))}catch(i){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function U(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function z(t){t._valueTracker||(t._valueTracker=function(t){var e=U(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var o=i.get,n=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(t){r=""+t,n.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=U(t)?t.checked?"true":"false":t.value),(t=r)!==i&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var i=e.checked;return V({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function X(t,e){var i=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;i=G(null!=e.value?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){Q(t,e);var i=G(e.value),r=e.type;if(null!=i)"number"===r?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,i):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function tt(t,e,i){"number"===e&&q(t.ownerDocument)===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var et=Array.isArray;function it(t,e,i,r){if(t=t.options,e){e={};for(var o=0;o<i.length;o++)e["$"+i[o]]=!0;for(i=0;i<t.length;i++)o=e.hasOwnProperty("$"+t[i].value),t[i].selected!==o&&(t[i].selected=o),o&&r&&(t[i].defaultSelected=!0)}else{for(i=""+G(i),e=null,o=0;o<t.length;o++){if(t[o].value===i)return t[o].selected=!0,void(r&&(t[o].defaultSelected=!0));null!==e||t[o].disabled||(e=t[o])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(n(91));return V({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ot(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(n(92));if(et(i)){if(1<i.length)throw Error(n(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:G(i)}}function nt(t,e){var i=G(e.value),r=G(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ht,ct=(ht=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,r){MSApp.execUnsafeLocalFunction((function(){return ht(t,e)}))}:ht);function dt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function _t(t,e,i){return null==e||"boolean"===typeof e||""===e?"":i||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var r=0===i.indexOf("--"),o=_t(i,e[i],r);"float"===i&&(i="cssFloat"),r?t.setProperty(i,o):t[i]=o}}Object.keys(pt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var yt=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(n(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(n(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(n(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,xt=null,It=null;function St(t){if(t=bo(t)){if("function"!==typeof Ct)throw Error(n(280));var e=t.stateNode;e&&(e=wo(e),Ct(t.stateNode,t.type,e))}}function Et(t){xt?It?It.push(t):It=[t]:xt=t}function kt(){if(xt){var t=xt,e=It;if(It=xt=null,St(t),e)for(t=0;t<e.length;t++)St(e[t])}}function Ot(t,e){return t(e)}function Rt(){}var Pt=!1;function Dt(t,e,i){if(Pt)return t(e,i);Pt=!0;try{return Ot(t,e,i)}finally{Pt=!1,(null!==xt||null!==It)&&(Rt(),kt())}}function Tt(t,e){var i=t.stateNode;if(null===i)return null;var r=wo(i);if(null===r)return null;i=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(i&&"function"!==typeof i)throw Error(n(231,e,typeof i));return i}var Lt=!1;if(h)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch(ht){Lt=!1}function Ft(t,e,i,r,o,n,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(h){this.onError(h)}}var Nt=!1,Vt=null,Bt=!1,At=null,$t={onError:function(t){Nt=!0,Vt=t}};function jt(t,e,i,r,o,n,s,a,l){Nt=!1,Vt=null,Ft.apply($t,arguments)}function Ht(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Ht(t)!==t)throw Error(n(188))}function Ut(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(n(188));return e!==t?null:t}for(var i=t,r=e;;){var o=i.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){i=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===i)return Gt(o),t;if(s===r)return Gt(o),e;s=s.sibling}throw Error(n(188))}if(i.return!==r.return)i=o,r=s;else{for(var a=!1,l=o.child;l;){if(l===i){a=!0,i=o,r=s;break}if(l===r){a=!0,r=o,i=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===i){a=!0,i=s,r=o;break}if(l===r){a=!0,r=s,i=o;break}l=l.sibling}if(!a)throw Error(n(189))}}if(i.alternate!==r)throw Error(n(190))}if(3!==i.tag)throw Error(n(188));return i.stateNode.current===i?t:e}(t))?zt(t):null}function zt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=zt(t);if(null!==e)return e;t=t.sibling}return null}var Yt=o.unstable_scheduleCallback,qt=o.unstable_cancelCallback,Kt=o.unstable_shouldYield,Xt=o.unstable_requestPaint,Qt=o.unstable_now,Jt=o.unstable_getCurrentPriorityLevel,Zt=o.unstable_ImmediatePriority,te=o.unstable_UserBlockingPriority,ee=o.unstable_NormalPriority,ie=o.unstable_LowPriority,re=o.unstable_IdlePriority,oe=null,ne=null;var se=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ue=64,he=4194304;function ce(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var i=t.pendingLanes;if(0===i)return 0;var r=0,o=t.suspendedLanes,n=t.pingedLanes,s=268435455&i;if(0!==s){var a=s&~o;0!==a?r=ce(a):0!==(n&=s)&&(r=ce(n))}else 0!==(s=i&~o)?r=ce(s):0!==n&&(r=ce(n));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&o)&&((o=r&-r)>=(n=e&-e)||16===o&&0!==(4194240&n)))return e;if(0!==(4&r)&&(r|=16&i),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)o=1<<(i=31-se(e)),r|=t[i],e&=~o;return r}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function _e(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ge(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function ye(t,e,i){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=i}function me(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var r=31-se(i),o=1<<r;o&e|t[r]&e&&(t[r]|=e),i&=~o}}var be=0;function ve(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,Ce,xe,Ie,Se,Ee=!1,ke=[],Oe=null,Re=null,Pe=null,De=new Map,Te=new Map,Le=[],Me="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fe(t,e){switch(t){case"focusin":case"focusout":Oe=null;break;case"dragenter":case"dragleave":Re=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":De.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Te.delete(e.pointerId)}}function Ne(t,e,i,r,o,n){return null===t||t.nativeEvent!==n?(t={blockedOn:e,domEventName:i,eventSystemFlags:r,nativeEvent:n,targetContainers:[o]},null!==e&&(null!==(e=bo(e))&&Ce(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==o&&-1===e.indexOf(o)&&e.push(o),t)}function Ve(t){var e=mo(t.target);if(null!==e){var i=Ht(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=Wt(i)))return t.blockedOn=e,void Se(t.priority,(function(){xe(i)}))}else if(3===e&&i.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function Be(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i)return null!==(e=bo(i))&&Ce(e),t.blockedOn=i,!1;var r=new(i=t.nativeEvent).constructor(i.type,i);vt=r,i.target.dispatchEvent(r),vt=null,e.shift()}return!0}function Ae(t,e,i){Be(t)&&i.delete(e)}function $e(){Ee=!1,null!==Oe&&Be(Oe)&&(Oe=null),null!==Re&&Be(Re)&&(Re=null),null!==Pe&&Be(Pe)&&(Pe=null),De.forEach(Ae),Te.forEach(Ae)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Ee||(Ee=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,$e)))}function He(t){function e(e){return je(e,t)}if(0<ke.length){je(ke[0],t);for(var i=1;i<ke.length;i++){var r=ke[i];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Oe&&je(Oe,t),null!==Re&&je(Re,t),null!==Pe&&je(Pe,t),De.forEach(e),Te.forEach(e),i=0;i<Le.length;i++)(r=Le[i]).blockedOn===t&&(r.blockedOn=null);for(;0<Le.length&&null===(i=Le[0]).blockedOn;)Ve(i),null===i.blockedOn&&Le.shift()}var We=v.ReactCurrentBatchConfig,Ge=!0;function Ue(t,e,i,r){var o=be,n=We.transition;We.transition=null;try{be=1,Ye(t,e,i,r)}finally{be=o,We.transition=n}}function ze(t,e,i,r){var o=be,n=We.transition;We.transition=null;try{be=4,Ye(t,e,i,r)}finally{be=o,We.transition=n}}function Ye(t,e,i,r){if(Ge){var o=Ke(t,e,i,r);if(null===o)Wr(t,e,r,qe,i),Fe(t,r);else if(function(t,e,i,r,o){switch(e){case"focusin":return Oe=Ne(Oe,t,e,i,r,o),!0;case"dragenter":return Re=Ne(Re,t,e,i,r,o),!0;case"mouseover":return Pe=Ne(Pe,t,e,i,r,o),!0;case"pointerover":var n=o.pointerId;return De.set(n,Ne(De.get(n)||null,t,e,i,r,o)),!0;case"gotpointercapture":return n=o.pointerId,Te.set(n,Ne(Te.get(n)||null,t,e,i,r,o)),!0}return!1}(o,t,e,i,r))r.stopPropagation();else if(Fe(t,r),4&e&&-1<Me.indexOf(t)){for(;null!==o;){var n=bo(o);if(null!==n&&we(n),null===(n=Ke(t,e,i,r))&&Wr(t,e,r,qe,i),n===o)break;o=n}null!==o&&r.stopPropagation()}else Wr(t,e,r,null,i)}}var qe=null;function Ke(t,e,i,r){if(qe=null,null!==(t=mo(t=wt(r))))if(null===(e=Ht(t)))t=null;else if(13===(i=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===i){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Xe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ie:return 16;case re:return 536870912;default:return 16}default:return 16}}var Qe=null,Je=null,Ze=null;function ti(){if(Ze)return Ze;var t,e,i=Je,r=i.length,o="value"in Qe?Qe.value:Qe.textContent,n=o.length;for(t=0;t<r&&i[t]===o[t];t++);var s=r-t;for(e=1;e<=s&&i[r-e]===o[n-e];e++);return Ze=o.slice(t,1<e?1-e:void 0)}function ei(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function ii(){return!0}function ri(){return!1}function oi(t){function e(e,i,r,o,n){for(var s in this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=n,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?ii:ri,this.isPropagationStopped=ri,this}return V(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),e}var ni,si,ai,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=oi(li),hi=V({},li,{view:0,detail:0}),ci=oi(hi),di=V({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ii,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ai&&(ai&&"mousemove"===t.type?(ni=t.screenX-ai.screenX,si=t.screenY-ai.screenY):si=ni=0,ai=t),ni)},movementY:function(t){return"movementY"in t?t.movementY:si}}),pi=oi(di),fi=oi(V({},di,{dataTransfer:0})),_i=oi(V({},hi,{relatedTarget:0})),gi=oi(V({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=V({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mi=oi(yi),bi=oi(V({},li,{data:0})),vi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xi(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ci[t])&&!!e[t]}function Ii(){return xi}var Si=V({},hi,{key:function(t){if(t.key){var e=vi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ei(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ii,charCode:function(t){return"keypress"===t.type?ei(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ei(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ei=oi(Si),ki=oi(V({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Oi=oi(V({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ii})),Ri=oi(V({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pi=V({},di,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Di=oi(Pi),Ti=[9,13,27,32],Li=h&&"CompositionEvent"in window,Mi=null;h&&"documentMode"in document&&(Mi=document.documentMode);var Fi=h&&"TextEvent"in window&&!Mi,Ni=h&&(!Li||Mi&&8<Mi&&11>=Mi),Vi=String.fromCharCode(32),Bi=!1;function Ai(t,e){switch(t){case"keyup":return-1!==Ti.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $i(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var ji=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hi[t.type]:"textarea"===e}function Gi(t,e,i,r){Et(r),0<(e=Ur(e,"onChange")).length&&(i=new ui("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var Ui=null,zi=null;function Yi(t){Vr(t,0)}function qi(t){if(Y(vo(t)))return t}function Ki(t,e){if("change"===t)return e}var Xi=!1;if(h){var Qi;if(h){var Ji="oninput"in document;if(!Ji){var Zi=document.createElement("div");Zi.setAttribute("oninput","return;"),Ji="function"===typeof Zi.oninput}Qi=Ji}else Qi=!1;Xi=Qi&&(!document.documentMode||9<document.documentMode)}function tr(){Ui&&(Ui.detachEvent("onpropertychange",er),zi=Ui=null)}function er(t){if("value"===t.propertyName&&qi(zi)){var e=[];Gi(e,zi,t,wt(t)),Dt(Yi,e)}}function ir(t,e,i){"focusin"===t?(tr(),zi=i,(Ui=e).attachEvent("onpropertychange",er)):"focusout"===t&&tr()}function rr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qi(zi)}function or(t,e){if("click"===t)return qi(e)}function nr(t,e){if("input"===t||"change"===t)return qi(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ar(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var o=i[r];if(!c.call(e,o)||!sr(t[o],e[o]))return!1}return!0}function lr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var i,r=lr(t);for(t=0;r;){if(3===r.nodeType){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=lr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function cr(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var i="string"===typeof e.contentWindow.location.href}catch(r){i=!1}if(!i)break;e=q((t=e.contentWindow).document)}return e}function dr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=cr(),i=t.focusedElem,r=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&hr(i.ownerDocument.documentElement,i)){if(null!==r&&dr(i))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if((t=(e=i.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var o=i.textContent.length,n=Math.min(r.start,o);r=void 0===r.end?n:Math.min(r.end,o),!t.extend&&n>r&&(o=r,r=n,n=o),o=ur(i,n);var s=ur(i,r);o&&s&&(1!==t.rangeCount||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(o.node,o.offset),t.removeAllRanges(),n>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=i;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<e.length;i++)(t=e[i]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fr=h&&"documentMode"in document&&11>=document.documentMode,_r=null,gr=null,yr=null,mr=!1;function br(t,e,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;mr||null==_r||_r!==q(r)||("selectionStart"in(r=_r)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ar(yr,r)||(yr=r,0<(r=Ur(gr,"onSelect")).length&&(e=new ui("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=_r)))}function vr(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var wr={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Cr={},xr={};function Ir(t){if(Cr[t])return Cr[t];if(!wr[t])return t;var e,i=wr[t];for(e in i)if(i.hasOwnProperty(e)&&e in xr)return Cr[t]=i[e];return t}h&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Sr=Ir("animationend"),Er=Ir("animationiteration"),kr=Ir("animationstart"),Or=Ir("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){Rr.set(t,e),l(e,[t])}for(var Tr=0;Tr<Pr.length;Tr++){var Lr=Pr[Tr];Dr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(kr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Or,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Nr(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,function(t,e,i,r,o,s,a,l,u){if(jt.apply(this,arguments),Nt){if(!Nt)throw Error(n(198));var h=Vt;Nt=!1,Vt=null,Bt||(Bt=!0,At=h)}}(r,e,void 0,t),t.currentTarget=null}function Vr(t,e){e=0!==(4&e);for(var i=0;i<t.length;i++){var r=t[i],o=r.event;r=r.listeners;t:{var n=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==n&&o.isPropagationStopped())break t;Nr(o,a,u),n=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==n&&o.isPropagationStopped())break t;Nr(o,a,u),n=l}}}if(Bt)throw t=At,Bt=!1,At=null,t}function Br(t,e){var i=e[_o];void 0===i&&(i=e[_o]=new Set);var r=t+"__bubble";i.has(r)||(Hr(e,t,2,!1),i.add(r))}function Ar(t,e,i){var r=0;e&&(r|=4),Hr(i,t,r,e)}var $r="_reactListening"+Math.random().toString(36).slice(2);function jr(t){if(!t[$r]){t[$r]=!0,s.forEach((function(e){"selectionchange"!==e&&(Fr.has(e)||Ar(e,!1,t),Ar(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[$r]||(e[$r]=!0,Ar("selectionchange",!1,e))}}function Hr(t,e,i,r){switch(Xe(e)){case 1:var o=Ue;break;case 4:o=ze;break;default:o=Ye}i=o.bind(null,e,i,t),o=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(o=!0),r?void 0!==o?t.addEventListener(e,i,{capture:!0,passive:o}):t.addEventListener(e,i,!0):void 0!==o?t.addEventListener(e,i,{passive:o}):t.addEventListener(e,i,!1)}function Wr(t,e,i,r,o){var n=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=mo(a)))return;if(5===(l=s.tag)||6===l){r=n=s;continue t}a=a.parentNode}}r=r.return}Dt((function(){var r=n,o=wt(i),s=[];t:{var a=Rr.get(t);if(void 0!==a){var l=ui,u=t;switch(t){case"keypress":if(0===ei(i))break t;case"keydown":case"keyup":l=Ei;break;case"focusin":u="focus",l=_i;break;case"focusout":u="blur",l=_i;break;case"beforeblur":case"afterblur":l=_i;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Oi;break;case Sr:case Er:case kr:l=gi;break;case Or:l=Ri;break;case"scroll":l=ci;break;case"wheel":l=Di;break;case"copy":case"cut":case"paste":l=mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=ki}var h=0!==(4&e),c=!h&&"scroll"===t,d=h?null!==a?a+"Capture":null:a;h=[];for(var p,f=r;null!==f;){var _=(p=f).stateNode;if(5===p.tag&&null!==_&&(p=_,null!==d&&(null!=(_=Tt(f,d))&&h.push(Gr(f,_,p)))),c)break;f=f.return}0<h.length&&(a=new l(a,u,null,i,o),s.push({event:a,listeners:h}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||i===vt||!(u=i.relatedTarget||i.fromElement)||!mo(u)&&!u[fo])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=i.relatedTarget||i.toElement)?mo(u):null)&&(u!==(c=Ht(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(h=pi,_="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(h=ki,_="onPointerLeave",d="onPointerEnter",f="pointer"),c=null==l?a:vo(l),p=null==u?a:vo(u),(a=new h(_,f+"leave",l,i,o)).target=c,a.relatedTarget=p,_=null,mo(o)===r&&((h=new h(d,f+"enter",u,i,o)).target=p,h.relatedTarget=c,_=h),c=_,l&&u)t:{for(d=u,f=0,p=h=l;p;p=zr(p))f++;for(p=0,_=d;_;_=zr(_))p++;for(;0<f-p;)h=zr(h),f--;for(;0<p-f;)d=zr(d),p--;for(;f--;){if(h===d||null!==d&&h===d.alternate)break t;h=zr(h),d=zr(d)}h=null}else h=null;null!==l&&Yr(s,a,l,h,!1),null!==u&&null!==c&&Yr(s,c,u,h,!0)}if("select"===(l=(a=r?vo(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Ki;else if(Wi(a))if(Xi)g=nr;else{g=rr;var y=ir}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(t,r))?Gi(s,g,i,o):(y&&y(t,a,r),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=r?vo(r):window,t){case"focusin":(Wi(y)||"true"===y.contentEditable)&&(_r=y,gr=r,yr=null);break;case"focusout":yr=gr=_r=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,br(s,i,o);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(s,i,o)}var m;if(Li)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else ji?Ai(t,i)&&(b="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(b="onCompositionStart");b&&(Ni&&"ko"!==i.locale&&(ji||"onCompositionStart"!==b?"onCompositionEnd"===b&&ji&&(m=ti()):(Je="value"in(Qe=o)?Qe.value:Qe.textContent,ji=!0)),0<(y=Ur(r,b)).length&&(b=new bi(b,t,null,i,o),s.push({event:b,listeners:y}),m?b.data=m:null!==(m=$i(i))&&(b.data=m))),(m=Fi?function(t,e){switch(t){case"compositionend":return $i(e);case"keypress":return 32!==e.which?null:(Bi=!0,Vi);case"textInput":return(t=e.data)===Vi&&Bi?null:t;default:return null}}(t,i):function(t,e){if(ji)return"compositionend"===t||!Li&&Ai(t,e)?(t=ti(),Ze=Je=Qe=null,ji=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ni&&"ko"!==e.locale?null:e.data}}(t,i))&&(0<(r=Ur(r,"onBeforeInput")).length&&(o=new bi("onBeforeInput","beforeinput",null,i,o),s.push({event:o,listeners:r}),o.data=m))}Vr(s,e)}))}function Gr(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Ur(t,e){for(var i=e+"Capture",r=[];null!==t;){var o=t,n=o.stateNode;5===o.tag&&null!==n&&(o=n,null!=(n=Tt(t,i))&&r.unshift(Gr(t,n,o)),null!=(n=Tt(t,e))&&r.push(Gr(t,n,o))),t=t.return}return r}function zr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yr(t,e,i,r,o){for(var n=e._reactName,s=[];null!==i&&i!==r;){var a=i,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,o?null!=(l=Tt(i,n))&&s.unshift(Gr(i,l,a)):o||null!=(l=Tt(i,n))&&s.push(Gr(i,l,a))),i=i.return}0!==s.length&&t.push({event:e,listeners:s})}var qr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Xr(t){return("string"===typeof t?t:""+t).replace(qr,"\n").replace(Kr,"")}function Qr(t,e,i){if(e=Xr(e),Xr(t)!==e&&i)throw Error(n(425))}function Jr(){}var Zr=null,to=null;function eo(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var io="function"===typeof setTimeout?setTimeout:void 0,ro="function"===typeof clearTimeout?clearTimeout:void 0,oo="function"===typeof Promise?Promise:void 0,no="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oo?function(t){return oo.resolve(null).then(t).catch(so)}:io;function so(t){setTimeout((function(){throw t}))}function ao(t,e){var i=e,r=0;do{var o=i.nextSibling;if(t.removeChild(i),o&&8===o.nodeType)if("/$"===(i=o.data)){if(0===r)return t.removeChild(o),void He(e);r--}else"$"!==i&&"$?"!==i&&"$!"!==i||r++;i=o}while(i);He(e)}function lo(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function uo(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),co="__reactFiber$"+ho,po="__reactProps$"+ho,fo="__reactContainer$"+ho,_o="__reactEvents$"+ho,go="__reactListeners$"+ho,yo="__reactHandles$"+ho;function mo(t){var e=t[co];if(e)return e;for(var i=t.parentNode;i;){if(e=i[fo]||i[co]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=uo(t);null!==t;){if(i=t[co])return i;t=uo(t)}return e}i=(t=i).parentNode}return null}function bo(t){return!(t=t[co]||t[fo])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function vo(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(n(33))}function wo(t){return t[po]||null}var Co=[],xo=-1;function Io(t){return{current:t}}function So(t){0>xo||(t.current=Co[xo],Co[xo]=null,xo--)}function Eo(t,e){xo++,Co[xo]=t.current,t.current=e}var ko={},Oo=Io(ko),Ro=Io(!1),Po=ko;function Do(t,e){var i=t.type.contextTypes;if(!i)return ko;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o,n={};for(o in i)n[o]=e[o];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function To(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Lo(){So(Ro),So(Oo)}function Mo(t,e,i){if(Oo.current!==ko)throw Error(n(168));Eo(Oo,e),Eo(Ro,i)}function Fo(t,e,i){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return i;for(var o in r=r.getChildContext())if(!(o in e))throw Error(n(108,W(t)||"Unknown",o));return V({},i,r)}function No(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ko,Po=Oo.current,Eo(Oo,t),Eo(Ro,Ro.current),!0}function Vo(t,e,i){var r=t.stateNode;if(!r)throw Error(n(169));i?(t=Fo(t,e,Po),r.__reactInternalMemoizedMergedChildContext=t,So(Ro),So(Oo),Eo(Oo,t)):So(Ro),Eo(Ro,i)}var Bo=null,Ao=!1,$o=!1;function jo(t){null===Bo?Bo=[t]:Bo.push(t)}function Ho(){if(!$o&&null!==Bo){$o=!0;var t=0,e=be;try{var i=Bo;for(be=1;t<i.length;t++){var r=i[t];do{r=r(!0)}while(null!==r)}Bo=null,Ao=!1}catch(o){throw null!==Bo&&(Bo=Bo.slice(t+1)),Yt(Zt,Ho),o}finally{be=e,$o=!1}}return null}var Wo=[],Go=0,Uo=null,zo=0,Yo=[],qo=0,Ko=null,Xo=1,Qo="";function Jo(t,e){Wo[Go++]=zo,Wo[Go++]=Uo,Uo=t,zo=e}function Zo(t,e,i){Yo[qo++]=Xo,Yo[qo++]=Qo,Yo[qo++]=Ko,Ko=t;var r=Xo;t=Qo;var o=32-se(r)-1;r&=~(1<<o),i+=1;var n=32-se(e)+o;if(30<n){var s=o-o%5;n=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Xo=1<<32-se(e)+o|i<<o|r,Qo=n+t}else Xo=1<<n|i<<o|r,Qo=t}function tn(t){null!==t.return&&(Jo(t,1),Zo(t,1,0))}function en(t){for(;t===Uo;)Uo=Wo[--Go],Wo[Go]=null,zo=Wo[--Go],Wo[Go]=null;for(;t===Ko;)Ko=Yo[--qo],Yo[qo]=null,Qo=Yo[--qo],Yo[qo]=null,Xo=Yo[--qo],Yo[qo]=null}var rn=null,on=null,nn=!1,sn=null;function an(t,e){var i=Du(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,null===(e=t.deletions)?(t.deletions=[i],t.flags|=16):e.push(i)}function ln(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,rn=t,on=lo(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,rn=t,on=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(i=null!==Ko?{id:Xo,overflow:Qo}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},(i=Du(18,null,null,0)).stateNode=e,i.return=t,t.child=i,rn=t,on=null,!0);default:return!1}}function un(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function hn(t){if(nn){var e=on;if(e){var i=e;if(!ln(t,e)){if(un(t))throw Error(n(418));e=lo(i.nextSibling);var r=rn;e&&ln(t,e)?an(r,i):(t.flags=-4097&t.flags|2,nn=!1,rn=t)}}else{if(un(t))throw Error(n(418));t.flags=-4097&t.flags|2,nn=!1,rn=t}}}function cn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;rn=t}function dn(t){if(t!==rn)return!1;if(!nn)return cn(t),nn=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!eo(t.type,t.memoizedProps)),e&&(e=on)){if(un(t))throw pn(),Error(n(418));for(;e;)an(t,e),e=lo(e.nextSibling)}if(cn(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(n(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){on=lo(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}on=null}}else on=rn?lo(t.stateNode.nextSibling):null;return!0}function pn(){for(var t=on;t;)t=lo(t.nextSibling)}function fn(){on=rn=null,nn=!1}function _n(t){null===sn?sn=[t]:sn.push(t)}var gn=v.ReactCurrentBatchConfig;function yn(t,e){if(t&&t.defaultProps){for(var i in e=V({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}return e}var mn=Io(null),bn=null,vn=null,wn=null;function Cn(){wn=vn=bn=null}function xn(t){var e=mn.current;So(mn),t._currentValue=e}function In(t,e,i){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===i)break;t=t.return}}function Sn(t,e){bn=t,wn=vn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(va=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(wn!==t)if(t={context:t,memoizedValue:e,next:null},null===vn){if(null===bn)throw Error(n(308));vn=t,bn.dependencies={lanes:0,firstContext:t}}else vn=vn.next=t;return e}var kn=null;function On(t){null===kn?kn=[t]:kn.push(t)}function Rn(t,e,i,r){var o=e.interleaved;return null===o?(i.next=i,On(e)):(i.next=o.next,o.next=i),e.interleaved=i,Pn(t,r)}function Pn(t,e){t.lanes|=e;var i=t.alternate;for(null!==i&&(i.lanes|=e),i=t,t=t.return;null!==t;)t.childLanes|=e,null!==(i=t.alternate)&&(i.childLanes|=e),i=t,t=t.return;return 3===i.tag?i.stateNode:null}var Dn=!1;function Tn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ln(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fn(t,e,i){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var o=r.pending;return null===o?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Pn(t,i)}return null===(o=r.interleaved)?(e.next=e,On(r)):(e.next=o.next,o.next=e),r.interleaved=e,Pn(t,i)}function Nn(t,e,i){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&i))){var r=e.lanes;i|=r&=t.pendingLanes,e.lanes=i,me(t,i)}}function Vn(t,e){var i=t.updateQueue,r=t.alternate;if(null!==r&&i===(r=r.updateQueue)){var o=null,n=null;if(null!==(i=i.firstBaseUpdate)){do{var s={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===n?o=n=s:n=n.next=s,i=i.next}while(null!==i);null===n?o=n=e:n=n.next=e}else o=n=e;return i={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:n,shared:r.shared,effects:r.effects},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Bn(t,e,i,r){var o=t.updateQueue;Dn=!1;var n=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?n=u:s.next=u,s=l;var h=t.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===a?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(null!==n){var c=o.baseState;for(s=0,h=u=l=null,a=n;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,_=a;switch(d=e,p=i,_.tag){case 1:if("function"===typeof(f=_.payload)){c=f.call(p,c,d);break t}c=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=_.payload)?f.call(p,c,d):f)||void 0===d)break t;c=V({},c,d);break t;case 2:Dn=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=o.effects)?o.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(u=h=p,l=c):h=h.next=p,s|=d;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(d=a).next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}if(null===h&&(l=c),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=h,null!==(e=o.shared.interleaved)){o=e;do{s|=o.lane,o=o.next}while(o!==e)}else null===n&&(o.shared.lanes=0);Nl|=s,t.lanes=s,t.memoizedState=c}}function An(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(null!==o){if(r.callback=null,r=i,"function"!==typeof o)throw Error(n(191,o));o.call(r)}}}var $n=(new r.Component).refs;function jn(t,e,i,r){i=null===(i=i(r,e=t.memoizedState))||void 0===i?e:V({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var Hn={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=tu(),o=eu(t),n=Mn(r,o);n.payload=e,void 0!==i&&null!==i&&(n.callback=i),null!==(e=Fn(t,n,o))&&(iu(e,t,o,r),Nn(e,t,o))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=tu(),o=eu(t),n=Mn(r,o);n.tag=1,n.payload=e,void 0!==i&&null!==i&&(n.callback=i),null!==(e=Fn(t,n,o))&&(iu(e,t,o,r),Nn(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=tu(),r=eu(t),o=Mn(i,r);o.tag=2,void 0!==e&&null!==e&&(o.callback=e),null!==(e=Fn(t,o,r))&&(iu(e,t,r,i),Nn(e,t,r))}};function Wn(t,e,i,r,o,n,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,n,s):!e.prototype||!e.prototype.isPureReactComponent||(!ar(i,r)||!ar(o,n))}function Gn(t,e,i){var r=!1,o=ko,n=e.contextType;return"object"===typeof n&&null!==n?n=En(n):(o=To(e)?Po:Oo.current,n=(r=null!==(r=e.contextTypes)&&void 0!==r)?Do(t,o):ko),e=new e(i,n),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Hn,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=n),e}function Un(t,e,i,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&Hn.enqueueReplaceState(e,e.state,null)}function zn(t,e,i,r){var o=t.stateNode;o.props=i,o.state=t.memoizedState,o.refs=$n,Tn(t);var n=e.contextType;"object"===typeof n&&null!==n?o.context=En(n):(n=To(e)?Po:Oo.current,o.context=Do(t,n)),o.state=t.memoizedState,"function"===typeof(n=e.getDerivedStateFromProps)&&(jn(t,e,n,i),o.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(e=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),e!==o.state&&Hn.enqueueReplaceState(o,o.state,null),Bn(t,i,o,r),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308)}function Yn(t,e,i){if(null!==(t=i.ref)&&"function"!==typeof t&&"object"!==typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(n(309));var r=i.stateNode}if(!r)throw Error(n(147,t));var o=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=o.refs;e===$n&&(e=o.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(n(284));if(!i._owner)throw Error(n(290,t))}return t}function qn(t,e){throw t=Object.prototype.toString.call(e),Error(n(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kn(t){return(0,t._init)(t._payload)}function Xn(t){function e(e,i){if(t){var r=e.deletions;null===r?(e.deletions=[i],e.flags|=16):r.push(i)}}function i(i,r){if(!t)return null;for(;null!==r;)e(i,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e){return(t=Lu(t,e)).index=0,t.sibling=null,t}function s(e,i,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<i?(e.flags|=2,i):r:(e.flags|=2,i):(e.flags|=1048576,i)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,i,r){return null===e||6!==e.tag?((e=Vu(i,t.mode,r)).return=t,e):((e=o(e,i)).return=t,e)}function u(t,e,i,r){var n=i.type;return n===x?c(t,e,i.props.children,r,i.key):null!==e&&(e.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===T&&Kn(n)===e.type)?((r=o(e,i.props)).ref=Yn(t,e,i),r.return=t,r):((r=Mu(i.type,i.key,i.props,null,t.mode,r)).ref=Yn(t,e,i),r.return=t,r)}function h(t,e,i,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Bu(i,t.mode,r)).return=t,e):((e=o(e,i.children||[])).return=t,e)}function c(t,e,i,r,n){return null===e||7!==e.tag?((e=Fu(i,t.mode,r,n)).return=t,e):((e=o(e,i)).return=t,e)}function d(t,e,i){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Vu(""+e,t.mode,i)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(i=Mu(e.type,e.key,e.props,null,t.mode,i)).ref=Yn(t,null,e),i.return=t,i;case C:return(e=Bu(e,t.mode,i)).return=t,e;case T:return d(t,(0,e._init)(e._payload),i)}if(et(e)||F(e))return(e=Fu(e,t.mode,i,null)).return=t,e;qn(t,e)}return null}function p(t,e,i,r){var o=null!==e?e.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==o?null:l(t,e,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===o?u(t,e,i,r):null;case C:return i.key===o?h(t,e,i,r):null;case T:return p(t,e,(o=i._init)(i._payload),r)}if(et(i)||F(i))return null!==o?null:c(t,e,i,r,null);qn(t,i)}return null}function f(t,e,i,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(i)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(e,t=t.get(null===r.key?i:r.key)||null,r,o);case C:return h(e,t=t.get(null===r.key?i:r.key)||null,r,o);case T:return f(t,e,i,(0,r._init)(r._payload),o)}if(et(r)||F(r))return c(e,t=t.get(i)||null,r,o,null);qn(e,r)}return null}function _(o,n,a,l){for(var u=null,h=null,c=n,_=n=0,g=null;null!==c&&_<a.length;_++){c.index>_?(g=c,c=null):g=c.sibling;var y=p(o,c,a[_],l);if(null===y){null===c&&(c=g);break}t&&c&&null===y.alternate&&e(o,c),n=s(y,n,_),null===h?u=y:h.sibling=y,h=y,c=g}if(_===a.length)return i(o,c),nn&&Jo(o,_),u;if(null===c){for(;_<a.length;_++)null!==(c=d(o,a[_],l))&&(n=s(c,n,_),null===h?u=c:h.sibling=c,h=c);return nn&&Jo(o,_),u}for(c=r(o,c);_<a.length;_++)null!==(g=f(c,o,_,a[_],l))&&(t&&null!==g.alternate&&c.delete(null===g.key?_:g.key),n=s(g,n,_),null===h?u=g:h.sibling=g,h=g);return t&&c.forEach((function(t){return e(o,t)})),nn&&Jo(o,_),u}function g(o,a,l,u){var h=F(l);if("function"!==typeof h)throw Error(n(150));if(null==(l=h.call(l)))throw Error(n(151));for(var c=h=null,_=a,g=a=0,y=null,m=l.next();null!==_&&!m.done;g++,m=l.next()){_.index>g?(y=_,_=null):y=_.sibling;var b=p(o,_,m.value,u);if(null===b){null===_&&(_=y);break}t&&_&&null===b.alternate&&e(o,_),a=s(b,a,g),null===c?h=b:c.sibling=b,c=b,_=y}if(m.done)return i(o,_),nn&&Jo(o,g),h;if(null===_){for(;!m.done;g++,m=l.next())null!==(m=d(o,m.value,u))&&(a=s(m,a,g),null===c?h=m:c.sibling=m,c=m);return nn&&Jo(o,g),h}for(_=r(o,_);!m.done;g++,m=l.next())null!==(m=f(_,o,g,m.value,u))&&(t&&null!==m.alternate&&_.delete(null===m.key?g:m.key),a=s(m,a,g),null===c?h=m:c.sibling=m,c=m);return t&&_.forEach((function(t){return e(o,t)})),nn&&Jo(o,g),h}return function t(r,n,s,l){if("object"===typeof s&&null!==s&&s.type===x&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:t:{for(var u=s.key,h=n;null!==h;){if(h.key===u){if((u=s.type)===x){if(7===h.tag){i(r,h.sibling),(n=o(h,s.props.children)).return=r,r=n;break t}}else if(h.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===T&&Kn(u)===h.type){i(r,h.sibling),(n=o(h,s.props)).ref=Yn(r,h,s),n.return=r,r=n;break t}i(r,h);break}e(r,h),h=h.sibling}s.type===x?((n=Fu(s.props.children,r.mode,l,s.key)).return=r,r=n):((l=Mu(s.type,s.key,s.props,null,r.mode,l)).ref=Yn(r,n,s),l.return=r,r=l)}return a(r);case C:t:{for(h=s.key;null!==n;){if(n.key===h){if(4===n.tag&&n.stateNode.containerInfo===s.containerInfo&&n.stateNode.implementation===s.implementation){i(r,n.sibling),(n=o(n,s.children||[])).return=r,r=n;break t}i(r,n);break}e(r,n),n=n.sibling}(n=Bu(s,r.mode,l)).return=r,r=n}return a(r);case T:return t(r,n,(h=s._init)(s._payload),l)}if(et(s))return _(r,n,s,l);if(F(s))return g(r,n,s,l);qn(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==n&&6===n.tag?(i(r,n.sibling),(n=o(n,s)).return=r,r=n):(i(r,n),(n=Vu(s,r.mode,l)).return=r,r=n),a(r)):i(r,n)}}var Qn=Xn(!0),Jn=Xn(!1),Zn={},ts=Io(Zn),es=Io(Zn),is=Io(Zn);function rs(t){if(t===Zn)throw Error(n(174));return t}function os(t,e){switch(Eo(is,e),Eo(es,t),Eo(ts,Zn),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}So(ts),Eo(ts,e)}function ns(){So(ts),So(es),So(is)}function ss(t){rs(is.current);var e=rs(ts.current),i=lt(e,t.type);e!==i&&(Eo(es,t),Eo(ts,i))}function as(t){es.current===t&&(So(ts),So(es))}var ls=Io(0);function us(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hs=[];function cs(){for(var t=0;t<hs.length;t++)hs[t]._workInProgressVersionPrimary=null;hs.length=0}var ds=v.ReactCurrentDispatcher,ps=v.ReactCurrentBatchConfig,fs=0,_s=null,gs=null,ys=null,ms=!1,bs=!1,vs=0,ws=0;function Cs(){throw Error(n(321))}function xs(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!sr(t[i],e[i]))return!1;return!0}function Is(t,e,i,r,o,s){if(fs=s,_s=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ds.current=null===t||null===t.memoizedState?aa:la,t=i(r,o),bs){s=0;do{if(bs=!1,vs=0,25<=s)throw Error(n(301));s+=1,ys=gs=null,e.updateQueue=null,ds.current=ua,t=i(r,o)}while(bs)}if(ds.current=sa,e=null!==gs&&null!==gs.next,fs=0,ys=gs=_s=null,ms=!1,e)throw Error(n(300));return t}function Ss(){var t=0!==vs;return vs=0,t}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?_s.memoizedState=ys=t:ys=ys.next=t,ys}function ks(){if(null===gs){var t=_s.alternate;t=null!==t?t.memoizedState:null}else t=gs.next;var e=null===ys?_s.memoizedState:ys.next;if(null!==e)ys=e,gs=t;else{if(null===t)throw Error(n(310));t={memoizedState:(gs=t).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?_s.memoizedState=ys=t:ys=ys.next=t}return ys}function Os(t,e){return"function"===typeof e?e(t):e}function Rs(t){var e=ks(),i=e.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=t;var r=gs,o=r.baseQueue,s=i.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,i.pending=null}if(null!==o){s=o.next,r=r.baseState;var l=a=null,u=null,h=s;do{var c=h.lane;if((fs&c)===c)null!==u&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var d={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,_s.lanes|=c,Nl|=c}h=h.next}while(null!==h&&h!==s);null===u?a=r:u.next=l,sr(r,e.memoizedState)||(va=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,i.lastRenderedState=r}if(null!==(t=i.interleaved)){o=t;do{s=o.lane,_s.lanes|=s,Nl|=s,o=o.next}while(o!==t)}else null===o&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function Ps(t){var e=ks(),i=e.queue;if(null===i)throw Error(n(311));i.lastRenderedReducer=t;var r=i.dispatch,o=i.pending,s=e.memoizedState;if(null!==o){i.pending=null;var a=o=o.next;do{s=t(s,a.action),a=a.next}while(a!==o);sr(s,e.memoizedState)||(va=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),i.lastRenderedState=s}return[s,r]}function Ds(){}function Ts(t,e){var i=_s,r=ks(),o=e(),s=!sr(r.memoizedState,o);if(s&&(r.memoizedState=o,va=!0),r=r.queue,Gs(Fs.bind(null,i,r,t),[t]),r.getSnapshot!==e||s||null!==ys&&1&ys.memoizedState.tag){if(i.flags|=2048,As(9,Ms.bind(null,i,r,o,e),void 0,null),null===Rl)throw Error(n(349));0!==(30&fs)||Ls(i,e,o)}return o}function Ls(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},null===(e=_s.updateQueue)?(e={lastEffect:null,stores:null},_s.updateQueue=e,e.stores=[t]):null===(i=e.stores)?e.stores=[t]:i.push(t)}function Ms(t,e,i,r){e.value=i,e.getSnapshot=r,Ns(e)&&Vs(t)}function Fs(t,e,i){return i((function(){Ns(e)&&Vs(t)}))}function Ns(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!sr(t,i)}catch(r){return!0}}function Vs(t){var e=Pn(t,1);null!==e&&iu(e,t,1,-1)}function Bs(t){var e=Es();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:t},e.queue=t,t=t.dispatch=ia.bind(null,_s,t),[e.memoizedState,t]}function As(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},null===(e=_s.updateQueue)?(e={lastEffect:null,stores:null},_s.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t),t}function $s(){return ks().memoizedState}function js(t,e,i,r){var o=Es();_s.flags|=t,o.memoizedState=As(1|e,i,void 0,void 0===r?null:r)}function Hs(t,e,i,r){var o=ks();r=void 0===r?null:r;var n=void 0;if(null!==gs){var s=gs.memoizedState;if(n=s.destroy,null!==r&&xs(r,s.deps))return void(o.memoizedState=As(e,i,n,r))}_s.flags|=t,o.memoizedState=As(1|e,i,n,r)}function Ws(t,e){return js(8390656,8,t,e)}function Gs(t,e){return Hs(2048,8,t,e)}function Us(t,e){return Hs(4,2,t,e)}function zs(t,e){return Hs(4,4,t,e)}function Ys(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function qs(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,Hs(4,4,Ys.bind(null,e,t),i)}function Ks(){}function Xs(t,e){var i=ks();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&xs(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function Qs(t,e){var i=ks();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&xs(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function Js(t,e,i){return 0===(21&fs)?(t.baseState&&(t.baseState=!1,va=!0),t.memoizedState=i):(sr(i,e)||(i=_e(),_s.lanes|=i,Nl|=i,t.baseState=!0),e)}function Zs(t,e){var i=be;be=0!==i&&4>i?i:4,t(!0);var r=ps.transition;ps.transition={};try{t(!1),e()}finally{be=i,ps.transition=r}}function ta(){return ks().memoizedState}function ea(t,e,i){var r=eu(t);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},ra(t))oa(e,i);else if(null!==(i=Rn(t,e,i,r))){iu(i,t,r,tu()),na(i,e,r)}}function ia(t,e,i){var r=eu(t),o={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(ra(t))oa(e,o);else{var n=t.alternate;if(0===t.lanes&&(null===n||0===n.lanes)&&null!==(n=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=n(s,i);if(o.hasEagerState=!0,o.eagerState=a,sr(a,s)){var l=e.interleaved;return null===l?(o.next=o,On(e)):(o.next=l.next,l.next=o),void(e.interleaved=o)}}catch(u){}null!==(i=Rn(t,e,o,r))&&(iu(i,t,r,o=tu()),na(i,e,r))}}function ra(t){var e=t.alternate;return t===_s||null!==e&&e===_s}function oa(t,e){bs=ms=!0;var i=t.pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function na(t,e,i){if(0!==(4194240&i)){var r=e.lanes;i|=r&=t.pendingLanes,e.lanes=i,me(t,i)}}var sa={readContext:En,useCallback:Cs,useContext:Cs,useEffect:Cs,useImperativeHandle:Cs,useInsertionEffect:Cs,useLayoutEffect:Cs,useMemo:Cs,useReducer:Cs,useRef:Cs,useState:Cs,useDebugValue:Cs,useDeferredValue:Cs,useTransition:Cs,useMutableSource:Cs,useSyncExternalStore:Cs,useId:Cs,unstable_isNewReconciler:!1},aa={readContext:En,useCallback:function(t,e){return Es().memoizedState=[t,void 0===e?null:e],t},useContext:En,useEffect:Ws,useImperativeHandle:function(t,e,i){return i=null!==i&&void 0!==i?i.concat([t]):null,js(4194308,4,Ys.bind(null,e,t),i)},useLayoutEffect:function(t,e){return js(4194308,4,t,e)},useInsertionEffect:function(t,e){return js(4,2,t,e)},useMemo:function(t,e){var i=Es();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=Es();return e=void 0!==i?i(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,_s,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Es().memoizedState=t},useState:Bs,useDebugValue:Ks,useDeferredValue:function(t){return Es().memoizedState=t},useTransition:function(){var t=Bs(!1),e=t[0];return t=Zs.bind(null,t[1]),Es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var r=_s,o=Es();if(nn){if(void 0===i)throw Error(n(407));i=i()}else{if(i=e(),null===Rl)throw Error(n(349));0!==(30&fs)||Ls(r,e,i)}o.memoizedState=i;var s={value:i,getSnapshot:e};return o.queue=s,Ws(Fs.bind(null,r,s,t),[t]),r.flags|=2048,As(9,Ms.bind(null,r,s,i,e),void 0,null),i},useId:function(){var t=Es(),e=Rl.identifierPrefix;if(nn){var i=Qo;e=":"+e+"R"+(i=(Xo&~(1<<32-se(Xo)-1)).toString(32)+i),0<(i=vs++)&&(e+="H"+i.toString(32)),e+=":"}else e=":"+e+"r"+(i=ws++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:En,useCallback:Xs,useContext:En,useEffect:Gs,useImperativeHandle:qs,useInsertionEffect:Us,useLayoutEffect:zs,useMemo:Qs,useReducer:Rs,useRef:$s,useState:function(){return Rs(Os)},useDebugValue:Ks,useDeferredValue:function(t){return Js(ks(),gs.memoizedState,t)},useTransition:function(){return[Rs(Os)[0],ks().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ts,useId:ta,unstable_isNewReconciler:!1},ua={readContext:En,useCallback:Xs,useContext:En,useEffect:Gs,useImperativeHandle:qs,useInsertionEffect:Us,useLayoutEffect:zs,useMemo:Qs,useReducer:Ps,useRef:$s,useState:function(){return Ps(Os)},useDebugValue:Ks,useDeferredValue:function(t){var e=ks();return null===gs?e.memoizedState=t:Js(e,gs.memoizedState,t)},useTransition:function(){return[Ps(Os)[0],ks().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ts,useId:ta,unstable_isNewReconciler:!1};function ha(t,e){try{var i="",r=e;do{i+=j(r),r=r.return}while(r);var o=i}catch(n){o="\nError generating stack: "+n.message+"\n"+n.stack}return{value:t,source:e,stack:o,digest:null}}function ca(t,e,i){return{value:t,source:null,stack:null!=i?i:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(i){setTimeout((function(){throw i}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,i){(i=Mn(-1,i)).tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){Gl||(Gl=!0,Ul=r),da(0,e)},i}function _a(t,e,i){(i=Mn(-1,i)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var o=e.value;i.payload=function(){return r(o)},i.callback=function(){da(0,e)}}var n=t.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(i.callback=function(){da(0,e),"function"!==typeof r&&(null===zl?zl=new Set([this]):zl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),i}function ga(t,e,i){var r=t.pingCache;if(null===r){r=t.pingCache=new pa;var o=new Set;r.set(e,o)}else void 0===(o=r.get(e))&&(o=new Set,r.set(e,o));o.has(i)||(o.add(i),t=Su.bind(null,t,e,i),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ma(t,e,i,r,o){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((e=Mn(-1,1)).tag=2,Fn(i,e,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=o,t)}var ba=v.ReactCurrentOwner,va=!1;function wa(t,e,i,r){e.child=null===t?Jn(e,null,i,r):Qn(e,t.child,i,r)}function Ca(t,e,i,r,o){i=i.render;var n=e.ref;return Sn(e,o),r=Is(t,e,i,r,n,o),i=Ss(),null===t||va?(nn&&i&&tn(e),e.flags|=1,wa(t,e,r,o),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ga(t,e,o))}function xa(t,e,i,r,o){if(null===t){var n=i.type;return"function"!==typeof n||Tu(n)||void 0!==n.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=Mu(i.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=n,Ia(t,e,n,r,o))}if(n=t.child,0===(t.lanes&o)){var s=n.memoizedProps;if((i=null!==(i=i.compare)?i:ar)(s,r)&&t.ref===e.ref)return Ga(t,e,o)}return e.flags|=1,(t=Lu(n,r)).ref=e.ref,t.return=e,e.child=t}function Ia(t,e,i,r,o){if(null!==t){var n=t.memoizedProps;if(ar(n,r)&&t.ref===e.ref){if(va=!1,e.pendingProps=r=n,0===(t.lanes&o))return e.lanes=t.lanes,Ga(t,e,o);0!==(131072&t.flags)&&(va=!0)}}return ka(t,e,i,r,o)}function Sa(t,e,i){var r=e.pendingProps,o=r.children,n=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Eo(Ll,Tl),Tl|=i;else{if(0===(1073741824&i))return t=null!==n?n.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Eo(Ll,Tl),Tl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==n?n.baseLanes:i,Eo(Ll,Tl),Tl|=r}else null!==n?(r=n.baseLanes|i,e.memoizedState=null):r=i,Eo(Ll,Tl),Tl|=r;return wa(t,e,o,i),e.child}function Ea(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function ka(t,e,i,r,o){var n=To(i)?Po:Oo.current;return n=Do(e,n),Sn(e,o),i=Is(t,e,i,r,n,o),r=Ss(),null===t||va?(nn&&r&&tn(e),e.flags|=1,wa(t,e,i,o),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ga(t,e,o))}function Oa(t,e,i,r,o){if(To(i)){var n=!0;No(e)}else n=!1;if(Sn(e,o),null===e.stateNode)Wa(t,e),Gn(e,i,r),zn(e,i,r,o),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=i.contextType;"object"===typeof u&&null!==u?u=En(u):u=Do(e,u=To(i)?Po:Oo.current);var h=i.getDerivedStateFromProps,c="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate;c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Un(e,s,r,u),Dn=!1;var d=e.memoizedState;s.state=d,Bn(e,r,s,o),l=e.memoizedState,a!==r||d!==l||Ro.current||Dn?("function"===typeof h&&(jn(e,i,h,r),l=e.memoizedState),(a=Dn||Wn(e,i,a,r,d,l,u))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Ln(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:yn(e.type,a),s.props=u,c=e.pendingProps,d=s.context,"object"===typeof(l=i.contextType)&&null!==l?l=En(l):l=Do(e,l=To(i)?Po:Oo.current);var p=i.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==c||d!==l)&&Un(e,s,r,l),Dn=!1,d=e.memoizedState,s.state=d,Bn(e,r,s,o);var f=e.memoizedState;a!==c||d!==f||Ro.current||Dn?("function"===typeof p&&(jn(e,i,p,r),f=e.memoizedState),(u=Dn||Wn(e,i,u,r,d,f,l)||!1)?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ra(t,e,i,r,n,o)}function Ra(t,e,i,r,o,n){Ea(t,e);var s=0!==(128&e.flags);if(!r&&!s)return o&&Vo(e,i,!1),Ga(t,e,n);r=e.stateNode,ba.current=e;var a=s&&"function"!==typeof i.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=Qn(e,t.child,null,n),e.child=Qn(e,null,a,n)):wa(t,e,a,n),e.memoizedState=r.state,o&&Vo(e,i,!0),e.child}function Pa(t){var e=t.stateNode;e.pendingContext?Mo(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Mo(0,e.context,!1),os(t,e.containerInfo)}function Da(t,e,i,r,o){return fn(),_n(o),e.flags|=256,wa(t,e,i,r),e.child}var Ta,La,Ma,Fa={dehydrated:null,treeContext:null,retryLane:0};function Na(t){return{baseLanes:t,cachePool:null,transitions:null}}function Va(t,e,i){var r,o=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Eo(ls,1&s),null===t)return hn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=o.children,t=o.fallback,a?(o=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Nu(l,o,0,null),t=Fu(t,o,i,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Na(i),e.memoizedState=Fa,t):Ba(e,l));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,i,r,o,s,a){if(i)return 256&e.flags?(e.flags&=-257,Aa(t,e,a,r=ca(Error(n(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=Nu({mode:"visible",children:r.children},o,0,null),(s=Fu(s,o,a,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&Qn(e,t.child,null,a),e.child.memoizedState=Na(a),e.memoizedState=Fa,s);if(0===(1&e.mode))return Aa(t,e,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Aa(t,e,a,r=ca(s=Error(n(419)),r,void 0))}if(l=0!==(a&t.childLanes),va||l){if(null!==(r=Rl)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|a))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Pn(t,o),iu(r,t,o,-1))}return _u(),Aa(t,e,a,r=ca(Error(n(421))))}return"$?"===o.data?(e.flags|=128,e.child=t.child,e=ku.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,on=lo(o.nextSibling),rn=e,nn=!0,sn=null,null!==t&&(Yo[qo++]=Xo,Yo[qo++]=Qo,Yo[qo++]=Ko,Xo=t.id,Qo=t.overflow,Ko=e),(e=Ba(e,r.children)).flags|=4096,e)}(t,e,l,o,r,s,i);if(a){a=o.fallback,l=e.mode,r=(s=t.child).sibling;var u={mode:"hidden",children:o.children};return 0===(1&l)&&e.child!==s?((o=e.child).childLanes=0,o.pendingProps=u,e.deletions=null):(o=Lu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lu(r,a):(a=Fu(a,l,i,null)).flags|=2,a.return=e,o.return=e,o.sibling=a,e.child=o,o=a,a=e.child,l=null===(l=t.child.memoizedState)?Na(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~i,e.memoizedState=Fa,o}return t=(a=t.child).sibling,o=Lu(a,{mode:"visible",children:o.children}),0===(1&e.mode)&&(o.lanes=i),o.return=e,o.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=o,e.memoizedState=null,o}function Ba(t,e){return(e=Nu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Aa(t,e,i,r){return null!==r&&_n(r),Qn(e,t.child,null,i),(t=Ba(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function $a(t,e,i){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),In(t.return,e,i)}function ja(t,e,i,r,o){var n=t.memoizedState;null===n?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:o}:(n.isBackwards=e,n.rendering=null,n.renderingStartTime=0,n.last=r,n.tail=i,n.tailMode=o)}function Ha(t,e,i){var r=e.pendingProps,o=r.revealOrder,n=r.tail;if(wa(t,e,r.children,i),0!==(2&(r=ls.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&$a(t,i,e);else if(19===t.tag)$a(t,i,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Eo(ls,r),0===(1&e.mode))e.memoizedState=null;else switch(o){case"forwards":for(i=e.child,o=null;null!==i;)null!==(t=i.alternate)&&null===us(t)&&(o=i),i=i.sibling;null===(i=o)?(o=e.child,e.child=null):(o=i.sibling,i.sibling=null),ja(e,!1,o,i,n);break;case"backwards":for(i=null,o=e.child,e.child=null;null!==o;){if(null!==(t=o.alternate)&&null===us(t)){e.child=o;break}t=o.sibling,o.sibling=i,i=o,o=t}ja(e,!0,i,null,n);break;case"together":ja(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ga(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),Nl|=e.lanes,0===(i&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(n(153));if(null!==e.child){for(i=Lu(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Lu(t,t.pendingProps)).return=e;i.sibling=null}return e.child}function Ua(t,e){if(!nn)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function za(t){var e=null!==t.alternate&&t.alternate.child===t.child,i=0,r=0;if(e)for(var o=t.child;null!==o;)i|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=t,o=o.sibling;else for(o=t.child;null!==o;)i|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=i,e}function Ya(t,e,i){var r=e.pendingProps;switch(en(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return za(e),null;case 1:case 17:return To(e.type)&&Lo(),za(e),null;case 3:return r=e.stateNode,ns(),So(Ro),So(Oo),cs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(dn(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==sn&&(su(sn),sn=null))),za(e),null;case 5:as(e);var o=rs(is.current);if(i=e.type,null!==t&&null!=e.stateNode)La(t,e,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(n(166));return za(e),null}if(t=rs(ts.current),dn(e)){r=e.stateNode,i=e.type;var s=e.memoizedProps;switch(r[co]=e,r[po]=s,t=0!==(1&e.mode),i){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<Mr.length;o++)Br(Mr[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":X(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ot(r,s),Br("invalid",r)}for(var l in mt(i,s),o=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,u,t),o=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,u,t),o=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(i){case"input":z(r),Z(r,s,!0);break;case"textarea":z(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=o,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(i)),"http://www.w3.org/1999/xhtml"===t?"script"===i?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(i,{is:r.is}):(t=l.createElement(i),"select"===i&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,i),t[co]=e,t[po]=r,Ta(t,e),e.stateNode=t;t:{switch(l=bt(i,r),i){case"dialog":Br("cancel",t),Br("close",t),o=r;break;case"iframe":case"object":case"embed":Br("load",t),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)Br(Mr[o],t);o=r;break;case"source":Br("error",t),o=r;break;case"img":case"image":case"link":Br("error",t),Br("load",t),o=r;break;case"details":Br("toggle",t),o=r;break;case"input":X(t,r),o=K(t,r),Br("invalid",t);break;case"option":default:o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=V({},r,{value:void 0}),Br("invalid",t);break;case"textarea":ot(t,r),o=rt(t,r),Br("invalid",t)}for(s in mt(i,o),u=o)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?gt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ct(t,h):"children"===s?"string"===typeof h?("textarea"!==i||""!==h)&&dt(t,h):"number"===typeof h&&dt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Br("scroll",t):null!=h&&b(t,s,h,l))}switch(i){case"input":z(t),Z(t,r,!1);break;case"textarea":z(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+G(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?it(t,!!r.multiple,s,!1):null!=r.defaultValue&&it(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Jr)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return za(e),null;case 6:if(t&&null!=e.stateNode)Ma(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(n(166));if(i=rs(is.current),rs(ts.current),dn(e)){if(r=e.stateNode,i=e.memoizedProps,r[co]=e,(s=r.nodeValue!==i)&&null!==(t=rn))switch(t.tag){case 3:Qr(r.nodeValue,i,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,i,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===i.nodeType?i:i.ownerDocument).createTextNode(r))[co]=e,e.stateNode=r}return za(e),null;case 13:if(So(ls),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(nn&&null!==on&&0!==(1&e.mode)&&0===(128&e.flags))pn(),fn(),e.flags|=98560,s=!1;else if(s=dn(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(n(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(n(317));s[co]=e}else fn(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;za(e),s=!1}else null!==sn&&(su(sn),sn=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=i,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Ml&&(Ml=3):_u())),null!==e.updateQueue&&(e.flags|=4),za(e),null);case 4:return ns(),null===t&&jr(e.stateNode.containerInfo),za(e),null;case 10:return xn(e.type._context),za(e),null;case 19:if(So(ls),null===(s=e.memoizedState))return za(e),null;if(r=0!==(128&e.flags),null===(l=s.rendering))if(r)Ua(s,!1);else{if(0!==Ml||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=us(t))){for(e.flags|=128,Ua(s,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=i,i=e.child;null!==i;)t=r,(s=i).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Eo(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&Qt()>Hl&&(e.flags|=128,r=!0,Ua(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=us(l))){if(e.flags|=128,r=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.flags|=4),Ua(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!nn)return za(e),null}else 2*Qt()-s.renderingStartTime>Hl&&1073741824!==i&&(e.flags|=128,r=!0,Ua(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(i=s.last)?i.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,i=ls.current,Eo(ls,r?1&i|2:1&i),e):(za(e),null);case 22:case 23:return cu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Tl)&&(za(e),6&e.subtreeFlags&&(e.flags|=8192)):za(e),null;case 24:case 25:return null}throw Error(n(156,e.tag))}function qa(t,e){switch(en(e),e.tag){case 1:return To(e.type)&&Lo(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return ns(),So(Ro),So(Oo),cs(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(So(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(n(340));fn()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return So(ls),null;case 4:return ns(),null;case 10:return xn(e.type._context),null;case 22:case 23:return cu(),null;default:return null}}Ta=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},La=function(t,e,i,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,rs(ts.current);var n,s=null;switch(i){case"input":o=K(t,o),r=K(t,r),s=[];break;case"select":o=V({},o,{value:void 0}),r=V({},r,{value:void 0}),s=[];break;case"textarea":o=rt(t,o),r=rt(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Jr)}for(h in mt(i,r),i=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(n in l)l.hasOwnProperty(n)&&(i||(i={}),i[n]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(n in l)!l.hasOwnProperty(n)||u&&u.hasOwnProperty(n)||(i||(i={}),i[n]="");for(n in u)u.hasOwnProperty(n)&&l[n]!==u[n]&&(i||(i={}),i[n]=u[n])}else i||(s||(s=[]),s.push(h,i)),i=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Br("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}i&&(s=s||[]).push("style",i);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Ma=function(t,e,i,r){i!==r&&(e.flags|=4)};var Ka=!1,Xa=!1,Qa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(t,e){var i=t.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(r){Iu(t,e,r)}else i.current=null}function tl(t,e,i){try{i()}catch(r){Iu(t,e,r)}}var el=!1;function il(t,e,i){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&t)===t){var n=o.destroy;o.destroy=void 0,void 0!==n&&tl(e,i,n)}o=o.next}while(o!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var i=e=e.next;do{if((i.tag&t)===t){var r=i.create;i.destroy=r()}i=i.next}while(i!==e)}}function ol(t){var e=t.ref;if(null!==e){var i=t.stateNode;t.tag,t=i,"function"===typeof e?e(t):e.current=t}}function nl(t){var e=t.alternate;null!==e&&(t.alternate=null,nl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[co],delete e[po],delete e[_o],delete e[go],delete e[yo])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,i){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!==(i=i._reactRootContainer)&&void 0!==i||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(ll(t,e,i),t=t.sibling;null!==t;)ll(t,e,i),t=t.sibling}function ul(t,e,i){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,i),t=t.sibling;null!==t;)ul(t,e,i),t=t.sibling}var hl=null,cl=!1;function dl(t,e,i){for(i=i.child;null!==i;)pl(t,e,i),i=i.sibling}function pl(t,e,i){if(ne&&"function"===typeof ne.onCommitFiberUnmount)try{ne.onCommitFiberUnmount(oe,i)}catch(a){}switch(i.tag){case 5:Xa||Za(i,e);case 6:var r=hl,o=cl;hl=null,dl(t,e,i),cl=o,null!==(hl=r)&&(cl?(t=hl,i=i.stateNode,8===t.nodeType?t.parentNode.removeChild(i):t.removeChild(i)):hl.removeChild(i.stateNode));break;case 18:null!==hl&&(cl?(t=hl,i=i.stateNode,8===t.nodeType?ao(t.parentNode,i):1===t.nodeType&&ao(t,i),He(t)):ao(hl,i.stateNode));break;case 4:r=hl,o=cl,hl=i.stateNode.containerInfo,cl=!0,dl(t,e,i),hl=r,cl=o;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=i.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var n=o,s=n.destroy;n=n.tag,void 0!==s&&(0!==(2&n)||0!==(4&n))&&tl(i,e,s),o=o.next}while(o!==r)}dl(t,e,i);break;case 1:if(!Xa&&(Za(i,e),"function"===typeof(r=i.stateNode).componentWillUnmount))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(a){Iu(i,e,a)}dl(t,e,i);break;case 21:dl(t,e,i);break;case 22:1&i.mode?(Xa=(r=Xa)||null!==i.memoizedState,dl(t,e,i),Xa=r):dl(t,e,i);break;default:dl(t,e,i)}}function fl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new Qa),e.forEach((function(e){var r=Ou.bind(null,t,e);i.has(e)||(i.add(e),e.then(r,r))}))}}function _l(t,e){var i=e.deletions;if(null!==i)for(var r=0;r<i.length;r++){var o=i[r];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,cl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,cl=!0;break t}l=l.return}if(null===hl)throw Error(n(160));pl(s,a,o),hl=null,cl=!1;var u=o.alternate;null!==u&&(u.return=null),o.return=null}catch(h){Iu(o,e,h)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var i=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_l(e,t),yl(t),4&r){try{il(3,t,t.return),rl(3,t)}catch(g){Iu(t,t.return,g)}try{il(5,t,t.return)}catch(g){Iu(t,t.return,g)}}break;case 1:_l(e,t),yl(t),512&r&&null!==i&&Za(i,i.return);break;case 5:if(_l(e,t),yl(t),512&r&&null!==i&&Za(i,i.return),32&t.flags){var o=t.stateNode;try{dt(o,"")}catch(g){Iu(t,t.return,g)}}if(4&r&&null!=(o=t.stateNode)){var s=t.memoizedProps,a=null!==i?i.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(o,s),bt(l,a);var h=bt(l,s);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];"style"===c?gt(o,d):"dangerouslySetInnerHTML"===c?ct(o,d):"children"===c?dt(o,d):b(o,c,d,h)}switch(l){case"input":J(o,s);break;case"textarea":nt(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?it(o,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?it(o,!!s.multiple,s.defaultValue,!0):it(o,!!s.multiple,s.multiple?[]:"",!1))}o[po]=s}catch(g){Iu(t,t.return,g)}}break;case 6:if(_l(e,t),yl(t),4&r){if(null===t.stateNode)throw Error(n(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(g){Iu(t,t.return,g)}}break;case 3:if(_l(e,t),yl(t),4&r&&null!==i&&i.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(g){Iu(t,t.return,g)}break;case 4:default:_l(e,t),yl(t);break;case 13:_l(e,t),yl(t),8192&(o=t.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(jl=Qt())),4&r&&fl(t);break;case 22:if(c=null!==i&&null!==i.memoizedState,1&t.mode?(Xa=(h=Xa)||c,_l(e,t),Xa=h):_l(e,t),yl(t),8192&r){if(h=null!==t.memoizedState,(t.stateNode.isHidden=h)&&!c&&0!==(1&t.mode))for(Ja=t,c=t.child;null!==c;){for(d=Ja=c;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:Za(p,p.return);var _=p.stateNode;if("function"===typeof _.componentWillUnmount){r=p,i=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(g){Iu(r,i,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Ja=f):wl(d)}c=c.sibling}t:for(c=null,d=t;;){if(5===d.tag){if(null===c){c=d;try{o=d.stateNode,h?"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=_t("display",a))}catch(g){Iu(t,t.return,g)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(g){Iu(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_l(e,t),yl(t),4&r&&fl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var i=t.return;null!==i;){if(sl(i)){var r=i;break t}i=i.return}throw Error(n(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(dt(o,""),r.flags&=-33),ul(t,al(t),o);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(t,al(t),s);break;default:throw Error(n(161))}}catch(a){Iu(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function ml(t,e,i){Ja=t,bl(t,e,i)}function bl(t,e,i){for(var r=0!==(1&t.mode);null!==Ja;){var o=Ja,n=o.child;if(22===o.tag&&r){var s=null!==o.memoizedState||Ka;if(!s){var a=o.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ka;var u=Xa;if(Ka=s,(Xa=l)&&!u)for(Ja=o;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?Cl(o):null!==l?(l.return=s,Ja=l):Cl(o);for(;null!==n;)Ja=n,bl(n,e,i),n=n.sibling;Ja=o,Ka=a,Xa=u}vl(t)}else 0!==(8772&o.subtreeFlags)&&null!==n?(n.return=o,Ja=n):vl(t)}}function vl(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var i=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Xa||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Xa)if(null===i)r.componentDidMount();else{var o=e.elementType===e.type?i.memoizedProps:yn(e.type,i.memoizedProps);r.componentDidUpdate(o,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&An(e,s,r);break;case 3:var a=e.updateQueue;if(null!==a){if(i=null,null!==e.child)switch(e.child.tag){case 5:case 1:i=e.child.stateNode}An(e,a,i)}break;case 5:var l=e.stateNode;if(null===i&&4&e.flags){i=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&i.focus();break;case"img":u.src&&(i.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var h=e.alternate;if(null!==h){var c=h.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&He(d)}}}break;default:throw Error(n(163))}Xa||512&e.flags&&ol(e)}catch(p){Iu(e,e.return,p)}}if(e===t){Ja=null;break}if(null!==(i=e.sibling)){i.return=e.return,Ja=i;break}Ja=e.return}}function wl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var i=e.sibling;if(null!==i){i.return=e.return,Ja=i;break}Ja=e.return}}function Cl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{rl(4,e)}catch(l){Iu(e,i,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var o=e.return;try{r.componentDidMount()}catch(l){Iu(e,o,l)}}var n=e.return;try{ol(e)}catch(l){Iu(e,n,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Iu(e,s,l)}}}catch(l){Iu(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var xl,Il=Math.ceil,Sl=v.ReactCurrentDispatcher,El=v.ReactCurrentOwner,kl=v.ReactCurrentBatchConfig,Ol=0,Rl=null,Pl=null,Dl=0,Tl=0,Ll=Io(0),Ml=0,Fl=null,Nl=0,Vl=0,Bl=0,Al=null,$l=null,jl=0,Hl=1/0,Wl=null,Gl=!1,Ul=null,zl=null,Yl=!1,ql=null,Kl=0,Xl=0,Ql=null,Jl=-1,Zl=0;function tu(){return 0!==(6&Ol)?Qt():-1!==Jl?Jl:Jl=Qt()}function eu(t){return 0===(1&t.mode)?1:0!==(2&Ol)&&0!==Dl?Dl&-Dl:null!==gn.transition?(0===Zl&&(Zl=_e()),Zl):0!==(t=be)?t:t=void 0===(t=window.event)?16:Xe(t.type)}function iu(t,e,i,r){if(50<Xl)throw Xl=0,Ql=null,Error(n(185));ye(t,i,r),0!==(2&Ol)&&t===Rl||(t===Rl&&(0===(2&Ol)&&(Vl|=i),4===Ml&&au(t,Dl)),ru(t,r),1===i&&0===Ol&&0===(1&e.mode)&&(Hl=Qt()+500,Ao&&Ho()))}function ru(t,e){var i=t.callbackNode;!function(t,e){for(var i=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,n=t.pendingLanes;0<n;){var s=31-se(n),a=1<<s,l=o[s];-1===l?0!==(a&i)&&0===(a&r)||(o[s]=pe(a,e)):l<=e&&(t.expiredLanes|=a),n&=~a}}(t,e);var r=de(t,t===Rl?Dl:0);if(0===r)null!==i&&qt(i),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=i&&qt(i),1===e)0===t.tag?function(t){Ao=!0,jo(t)}(lu.bind(null,t)):jo(lu.bind(null,t)),no((function(){0===(6&Ol)&&Ho()})),i=null;else{switch(ve(r)){case 1:i=Zt;break;case 4:i=te;break;case 16:default:i=ee;break;case 536870912:i=re}i=Ru(i,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function ou(t,e){if(Jl=-1,Zl=0,0!==(6&Ol))throw Error(n(327));var i=t.callbackNode;if(Cu()&&t.callbackNode!==i)return null;var r=de(t,t===Rl?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gu(t,r);else{e=r;var o=Ol;Ol|=2;var s=fu();for(Rl===t&&Dl===e||(Wl=null,Hl=Qt()+500,du(t,e));;)try{mu();break}catch(l){pu(t,l)}Cn(),Sl.current=s,Ol=o,null!==Pl?e=0:(Rl=null,Dl=0,e=Ml)}if(0!==e){if(2===e&&(0!==(o=fe(t))&&(r=o,e=nu(t,o))),1===e)throw i=Fl,du(t,0),au(t,r),ru(t,Qt()),i;if(6===e)au(t,r);else{if(o=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var i=e.updateQueue;if(null!==i&&null!==(i=i.stores))for(var r=0;r<i.length;r++){var o=i[r],n=o.getSnapshot;o=o.value;try{if(!sr(n(),o))return!1}catch(a){return!1}}}if(i=e.child,16384&e.subtreeFlags&&null!==i)i.return=e,e=i;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(o)&&(2===(e=gu(t,r))&&(0!==(s=fe(t))&&(r=s,e=nu(t,s))),1===e))throw i=Fl,du(t,0),au(t,r),ru(t,Qt()),i;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(n(345));case 2:case 5:wu(t,$l,Wl);break;case 3:if(au(t,r),(130023424&r)===r&&10<(e=jl+500-Qt())){if(0!==de(t,0))break;if(((o=t.suspendedLanes)&r)!==r){tu(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=io(wu.bind(null,t,$l,Wl),e);break}wu(t,$l,Wl);break;case 4:if(au(t,r),(4194240&r)===r)break;for(e=t.eventTimes,o=-1;0<r;){var a=31-se(r);s=1<<a,(a=e[a])>o&&(o=a),r&=~s}if(r=o,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){t.timeoutHandle=io(wu.bind(null,t,$l,Wl),r);break}wu(t,$l,Wl);break;default:throw Error(n(329))}}}return ru(t,Qt()),t.callbackNode===i?ou.bind(null,t):null}function nu(t,e){var i=Al;return t.current.memoizedState.isDehydrated&&(du(t,e).flags|=256),2!==(t=gu(t,e))&&(e=$l,$l=i,null!==e&&su(e)),t}function su(t){null===$l?$l=t:$l.push.apply($l,t)}function au(t,e){for(e&=~Bl,e&=~Vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-se(e),r=1<<i;t[i]=-1,e&=~r}}function lu(t){if(0!==(6&Ol))throw Error(n(327));Cu();var e=de(t,0);if(0===(1&e))return ru(t,Qt()),null;var i=gu(t,e);if(0!==t.tag&&2===i){var r=fe(t);0!==r&&(e=r,i=nu(t,r))}if(1===i)throw i=Fl,du(t,0),au(t,e),ru(t,Qt()),i;if(6===i)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,$l,Wl),ru(t,Qt()),null}function uu(t,e){var i=Ol;Ol|=1;try{return t(e)}finally{0===(Ol=i)&&(Hl=Qt()+500,Ao&&Ho())}}function hu(t){null!==ql&&0===ql.tag&&0===(6&Ol)&&Cu();var e=Ol;Ol|=1;var i=kl.transition,r=be;try{if(kl.transition=null,be=1,t)return t()}finally{be=r,kl.transition=i,0===(6&(Ol=e))&&Ho()}}function cu(){Tl=Ll.current,So(Ll)}function du(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,ro(i)),null!==Pl)for(i=Pl.return;null!==i;){var r=i;switch(en(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Lo();break;case 3:ns(),So(Ro),So(Oo),cs();break;case 5:as(r);break;case 4:ns();break;case 13:case 19:So(ls);break;case 10:xn(r.type._context);break;case 22:case 23:cu()}i=i.return}if(Rl=t,Pl=t=Lu(t.current,null),Dl=Tl=e,Ml=0,Fl=null,Bl=Vl=Nl=0,$l=Al=null,null!==kn){for(e=0;e<kn.length;e++)if(null!==(r=(i=kn[e]).interleaved)){i.interleaved=null;var o=r.next,n=i.pending;if(null!==n){var s=n.next;n.next=o,r.next=s}i.pending=r}kn=null}return t}function pu(t,e){for(;;){var i=Pl;try{if(Cn(),ds.current=sa,ms){for(var r=_s.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ms=!1}if(fs=0,ys=gs=_s=null,bs=!1,vs=0,El.current=null,null===i||null===i.return){Ml=1,Fl=e,Pl=null;break}t:{var s=t,a=i.return,l=i,u=e;if(e=Dl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var h=u,c=l,d=c.tag;if(0===(1&c.mode)&&(0===d||11===d||15===d)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,ma(f,a,l,0,e),1&f.mode&&ga(s,h,e),u=h;var _=(e=f).updateQueue;if(null===_){var g=new Set;g.add(u),e.updateQueue=g}else _.add(u);break t}if(0===(1&e)){ga(s,h,e),_u();break t}u=Error(n(426))}else if(nn&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ma(y,a,l,0,e),_n(ha(u,l));break t}}s=u=ha(u,l),4!==Ml&&(Ml=2),null===Al?Al=[s]:Al.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Vn(s,fa(0,u,e));break t;case 1:l=u;var m=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof m.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===zl||!zl.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e,Vn(s,_a(s,l,e));break t}}s=s.return}while(null!==s)}vu(i)}catch(v){e=v,Pl===i&&null!==i&&(Pl=i=i.return);continue}break}}function fu(){var t=Sl.current;return Sl.current=sa,null===t?sa:t}function _u(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Rl||0===(268435455&Nl)&&0===(268435455&Vl)||au(Rl,Dl)}function gu(t,e){var i=Ol;Ol|=2;var r=fu();for(Rl===t&&Dl===e||(Wl=null,du(t,e));;)try{yu();break}catch(o){pu(t,o)}if(Cn(),Ol=i,Sl.current=r,null!==Pl)throw Error(n(261));return Rl=null,Dl=0,Ml}function yu(){for(;null!==Pl;)bu(Pl)}function mu(){for(;null!==Pl&&!Kt();)bu(Pl)}function bu(t){var e=xl(t.alternate,t,Tl);t.memoizedProps=t.pendingProps,null===e?vu(t):Pl=e,El.current=null}function vu(t){var e=t;do{var i=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(i=Ya(i,e,Tl)))return void(Pl=i)}else{if(null!==(i=qa(i,e)))return i.flags&=32767,void(Pl=i);if(null===t)return Ml=6,void(Pl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Pl=e);Pl=e=t}while(null!==e);0===Ml&&(Ml=5)}function wu(t,e,i){var r=be,o=kl.transition;try{kl.transition=null,be=1,function(t,e,i,r){do{Cu()}while(null!==ql);if(0!==(6&Ol))throw Error(n(327));i=t.finishedWork;var o=t.finishedLanes;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<i;){var o=31-se(i),n=1<<o;e[o]=0,r[o]=-1,t[o]=-1,i&=~n}}(t,s),t===Rl&&(Pl=Rl=null,Dl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Yl||(Yl=!0,Ru(ee,(function(){return Cu(),null}))),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=kl.transition,kl.transition=null;var a=be;be=1;var l=Ol;Ol|=4,El.current=null,function(t,e){if(Zr=Ge,dr(t=cr())){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(i=(i=t.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch(w){i=null;break t}var a=0,l=-1,u=-1,h=0,c=0,d=t,p=null;e:for(;;){for(var f;d!==i||0!==o&&3!==d.nodeType||(l=a+o),d!==s||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===i&&++h===o&&(l=a),p===s&&++c===r&&(u=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===u?null:{start:l,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(to={focusedElem:t,selectionRange:i},Ge=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var _=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==_){var g=_.memoizedProps,y=_.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:yn(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(n(163))}}catch(w){Iu(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}_=el,el=!1}(t,i),gl(i,t),pr(to),Ge=!!Zr,to=Zr=null,t.current=i,ml(i,t,o),Xt(),Ol=l,be=a,kl.transition=s}else t.current=i;if(Yl&&(Yl=!1,ql=t,Kl=o),0===(s=t.pendingLanes)&&(zl=null),function(t){if(ne&&"function"===typeof ne.onCommitFiberRoot)try{ne.onCommitFiberRoot(oe,t,void 0,128===(128&t.current.flags))}catch(e){}}(i.stateNode),ru(t,Qt()),null!==e)for(r=t.onRecoverableError,i=0;i<e.length;i++)r((o=e[i]).value,{componentStack:o.stack,digest:o.digest});if(Gl)throw Gl=!1,t=Ul,Ul=null,t;0!==(1&Kl)&&0!==t.tag&&Cu(),0!==(1&(s=t.pendingLanes))?t===Ql?Xl++:(Xl=0,Ql=t):Xl=0,Ho()}(t,e,i,r)}finally{kl.transition=o,be=r}return null}function Cu(){if(null!==ql){var t=ve(Kl),e=kl.transition,i=be;try{if(kl.transition=null,be=16>t?16:t,null===ql)var r=!1;else{if(t=ql,ql=null,Kl=0,0!==(6&Ol))throw Error(n(331));var o=Ol;for(Ol|=4,Ja=t.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var h=l[u];for(Ja=h;null!==Ja;){var c=Ja;switch(c.tag){case 0:case 11:case 15:il(8,c,s)}var d=c.child;if(null!==d)d.return=c,Ja=d;else for(;null!==Ja;){var p=(c=Ja).sibling,f=c.return;if(nl(c),c===h){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var _=s.alternate;if(null!==_){var g=_.child;if(null!==g){_.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var m=s.sibling;if(null!==m){m.return=s.return,Ja=m;break t}Ja=s.return}}var b=t.current;for(Ja=b;null!==Ja;){var v=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==v)v.return=a,Ja=v;else t:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(C){Iu(l,l.return,C)}if(l===a){Ja=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break t}Ja=l.return}}if(Ol=o,Ho(),ne&&"function"===typeof ne.onPostCommitFiberRoot)try{ne.onPostCommitFiberRoot(oe,t)}catch(C){}r=!0}return r}finally{be=i,kl.transition=e}}return!1}function xu(t,e,i){t=Fn(t,e=fa(0,e=ha(i,e),1),1),e=tu(),null!==t&&(ye(t,1,e),ru(t,e))}function Iu(t,e,i){if(3===t.tag)xu(t,t,i);else for(;null!==e;){if(3===e.tag){xu(e,t,i);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zl||!zl.has(r))){e=Fn(e,t=_a(e,t=ha(i,t),1),1),t=tu(),null!==e&&(ye(e,1,t),ru(e,t));break}}e=e.return}}function Su(t,e,i){var r=t.pingCache;null!==r&&r.delete(e),e=tu(),t.pingedLanes|=t.suspendedLanes&i,Rl===t&&(Dl&i)===i&&(4===Ml||3===Ml&&(130023424&Dl)===Dl&&500>Qt()-jl?du(t,0):Bl|=i),ru(t,e)}function Eu(t,e){0===e&&(0===(1&t.mode)?e=1:(e=he,0===(130023424&(he<<=1))&&(he=4194304)));var i=tu();null!==(t=Pn(t,e))&&(ye(t,e,i),ru(t,i))}function ku(t){var e=t.memoizedState,i=0;null!==e&&(i=e.retryLane),Eu(t,i)}function Ou(t,e){var i=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;null!==o&&(i=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(n(314))}null!==r&&r.delete(e),Eu(t,i)}function Ru(t,e){return Yt(t,e)}function Pu(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(t,e,i,r){return new Pu(t,e,i,r)}function Tu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lu(t,e){var i=t.alternate;return null===i?((i=Du(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Mu(t,e,i,r,o,s){var a=2;if(r=t,"function"===typeof t)Tu(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case x:return Fu(i.children,o,s,e);case I:a=8,o|=8;break;case S:return(t=Du(12,i,e,2|o)).elementType=S,t.lanes=s,t;case R:return(t=Du(13,i,e,o)).elementType=R,t.lanes=s,t;case P:return(t=Du(19,i,e,o)).elementType=P,t.lanes=s,t;case L:return Nu(i,o,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case E:a=10;break t;case k:a=9;break t;case O:a=11;break t;case D:a=14;break t;case T:a=16,r=null;break t}throw Error(n(130,null==t?t:typeof t,""))}return(e=Du(a,i,e,o)).elementType=t,e.type=r,e.lanes=s,e}function Fu(t,e,i,r){return(t=Du(7,t,r,e)).lanes=i,t}function Nu(t,e,i,r){return(t=Du(22,t,r,e)).elementType=L,t.lanes=i,t.stateNode={isHidden:!1},t}function Vu(t,e,i){return(t=Du(6,t,null,e)).lanes=i,t}function Bu(t,e,i){return(e=Du(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Au(t,e,i,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function $u(t,e,i,r,o,n,s,a,l){return t=new Au(t,e,i,a,l),1===e?(e=1,!0===n&&(e|=8)):e=0,n=Du(3,null,null,e),t.current=n,n.stateNode=t,n.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tn(n),t}function ju(t,e,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:t,containerInfo:e,implementation:i}}function Hu(t){if(!t)return ko;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(n(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(To(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(n(171))}if(1===t.tag){var i=t.type;if(To(i))return Fo(t,i,e)}return e}function Wu(t,e,i,r,o,n,s,a,l){return(t=$u(i,r,!0,t,0,n,0,a,l)).context=Hu(null),i=t.current,(n=Mn(r=tu(),o=eu(i))).callback=void 0!==e&&null!==e?e:null,Fn(i,n,o),t.current.lanes=o,ye(t,o,r),ru(t,r),t}function Gu(t,e,i,r){var o=e.current,n=tu(),s=eu(o);return i=Hu(i),null===e.context?e.context=i:e.pendingContext=i,(e=Mn(n,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Fn(o,e,s))&&(iu(t,o,s,n),Nn(t,o,s)),s}function Uu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function zu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function Yu(t,e){zu(t,e),(t=t.alternate)&&zu(t,e)}xl=function(t,e,i){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ro.current)va=!0;else{if(0===(t.lanes&i)&&0===(128&e.flags))return va=!1,function(t,e,i){switch(e.tag){case 3:Pa(e),fn();break;case 5:ss(e);break;case 1:To(e.type)&&No(e);break;case 4:os(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Eo(mn,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Eo(ls,1&ls.current),e.flags|=128,null):0!==(i&e.child.childLanes)?Va(t,e,i):(Eo(ls,1&ls.current),null!==(t=Ga(t,e,i))?t.sibling:null);Eo(ls,1&ls.current);break;case 19:if(r=0!==(i&e.childLanes),0!==(128&t.flags)){if(r)return Ha(t,e,i);e.flags|=128}if(null!==(o=e.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Eo(ls,ls.current),r)break;return null;case 22:case 23:return e.lanes=0,Sa(t,e,i)}return Ga(t,e,i)}(t,e,i);va=0!==(131072&t.flags)}else va=!1,nn&&0!==(1048576&e.flags)&&Zo(e,zo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wa(t,e),t=e.pendingProps;var o=Do(e,Oo.current);Sn(e,i),o=Is(null,e,r,t,o,i);var s=Ss();return e.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,To(r)?(s=!0,No(e)):s=!1,e.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Tn(e),o.updater=Hn,e.stateNode=o,o._reactInternals=e,zn(e,r,t,i),e=Ra(null,e,r,!0,s,i)):(e.tag=0,nn&&s&&tn(e),wa(null,e,o,i),e=e.child),e;case 16:r=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,r=(o=r._init)(r._payload),e.type=r,o=e.tag=function(t){if("function"===typeof t)return Tu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===O)return 11;if(t===D)return 14}return 2}(r),t=yn(r,t),o){case 0:e=ka(null,e,r,t,i);break t;case 1:e=Oa(null,e,r,t,i);break t;case 11:e=Ca(null,e,r,t,i);break t;case 14:e=xa(null,e,r,yn(r.type,t),i);break t}throw Error(n(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,ka(t,e,r,o=e.elementType===r?o:yn(r,o),i);case 1:return r=e.type,o=e.pendingProps,Oa(t,e,r,o=e.elementType===r?o:yn(r,o),i);case 3:t:{if(Pa(e),null===t)throw Error(n(387));r=e.pendingProps,o=(s=e.memoizedState).element,Ln(t,e),Bn(e,r,null,i);var a=e.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Da(t,e,r,i,o=ha(Error(n(423)),e));break t}if(r!==o){e=Da(t,e,r,i,o=ha(Error(n(424)),e));break t}for(on=lo(e.stateNode.containerInfo.firstChild),rn=e,nn=!0,sn=null,i=Jn(e,null,r,i),e.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(fn(),r===o){e=Ga(t,e,i);break t}wa(t,e,r,i)}e=e.child}return e;case 5:return ss(e),null===t&&hn(e),r=e.type,o=e.pendingProps,s=null!==t?t.memoizedProps:null,a=o.children,eo(r,o)?a=null:null!==s&&eo(r,s)&&(e.flags|=32),Ea(t,e),wa(t,e,a,i),e.child;case 6:return null===t&&hn(e),null;case 13:return Va(t,e,i);case 4:return os(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Qn(e,null,r,i):wa(t,e,r,i),e.child;case 11:return r=e.type,o=e.pendingProps,Ca(t,e,r,o=e.elementType===r?o:yn(r,o),i);case 7:return wa(t,e,e.pendingProps,i),e.child;case 8:case 12:return wa(t,e,e.pendingProps.children,i),e.child;case 10:t:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,Eo(mn,r._currentValue),r._currentValue=a,null!==s)if(sr(s.value,a)){if(s.children===o.children&&!Ro.current){e=Ga(t,e,i);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Mn(-1,i&-i)).tag=2;var h=s.updateQueue;if(null!==h){var c=(h=h.shared).pending;null===c?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}s.lanes|=i,null!==(u=s.alternate)&&(u.lanes|=i),In(s.return,i,e),l.lanes|=i;break}u=u.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(n(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),In(a,i,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(t,e,o.children,i),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Sn(e,i),r=r(o=En(o)),e.flags|=1,wa(t,e,r,i),e.child;case 14:return o=yn(r=e.type,e.pendingProps),xa(t,e,r,o=yn(r.type,o),i);case 15:return Ia(t,e,e.type,e.pendingProps,i);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:yn(r,o),Wa(t,e),e.tag=1,To(r)?(t=!0,No(e)):t=!1,Sn(e,i),Gn(e,r,o),zn(e,r,o,i),Ra(null,e,r,!0,t,i);case 19:return Ha(t,e,i);case 22:return Sa(t,e,i)}throw Error(n(156,e.tag))};var qu="function"===typeof reportError?reportError:function(t){console.error(t)};function Ku(t){this._internalRoot=t}function Xu(t){this._internalRoot=t}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zu(){}function th(t,e,i,r,o){var n=i._reactRootContainer;if(n){var s=n;if("function"===typeof o){var a=o;o=function(){var t=Uu(s);a.call(t)}}Gu(e,s,t,o)}else s=function(t,e,i,r,o){if(o){if("function"===typeof r){var n=r;r=function(){var t=Uu(s);n.call(t)}}var s=Wu(e,r,t,0,null,!1,0,"",Zu);return t._reactRootContainer=s,t[fo]=s.current,jr(8===t.nodeType?t.parentNode:t),hu(),s}for(;o=t.lastChild;)t.removeChild(o);if("function"===typeof r){var a=r;r=function(){var t=Uu(l);a.call(t)}}var l=$u(t,0,!1,null,0,!1,0,"",Zu);return t._reactRootContainer=l,t[fo]=l.current,jr(8===t.nodeType?t.parentNode:t),hu((function(){Gu(e,l,i,r)})),l}(i,e,t,o,r);return Uu(s)}Xu.prototype.render=Ku.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(n(409));Gu(t,e,null,null)},Xu.prototype.unmount=Ku.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hu((function(){Gu(null,t,null,null)})),e[fo]=null}},Xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ie();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Le.length&&0!==e&&e<Le[i].priority;i++);Le.splice(i,0,t),0===i&&Ve(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=ce(e.pendingLanes);0!==i&&(me(e,1|i),ru(e,Qt()),0===(6&Ol)&&(Hl=Qt()+500,Ho()))}break;case 13:hu((function(){var e=Pn(t,1);if(null!==e){var i=tu();iu(e,t,1,i)}})),Yu(t,1)}},Ce=function(t){if(13===t.tag){var e=Pn(t,134217728);if(null!==e)iu(e,t,134217728,tu());Yu(t,134217728)}},xe=function(t){if(13===t.tag){var e=eu(t),i=Pn(t,e);if(null!==i)iu(i,t,e,tu());Yu(t,e)}},Ie=function(){return be},Se=function(t,e){var i=be;try{return be=t,e()}finally{be=i}},Ct=function(t,e,i){switch(e){case"input":if(J(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var o=wo(r);if(!o)throw Error(n(90));Y(r),J(r,o)}}}break;case"textarea":nt(t,i);break;case"select":null!=(e=i.value)&&it(t,!!i.multiple,e,!1)}},Ot=uu,Rt=hu;var eh={usingClientEntryPoint:!1,Events:[bo,vo,wo,Et,kt,uu]},ih={findFiberByHostInstance:mo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rh={bundleType:ih.bundleType,version:ih.version,rendererPackageName:ih.rendererPackageName,rendererConfig:ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ut(t))?null:t.stateNode},findFiberByHostInstance:ih.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{oe=oh.inject(rh),ne=oh}catch(ht){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eh,e.createPortal=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(e))throw Error(n(200));return ju(t,e,null,i)},e.createRoot=function(t,e){if(!Qu(t))throw Error(n(299));var i=!1,r="",o=qu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(i=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(o=e.onRecoverableError)),e=$u(t,1,!1,null,0,i,0,r,o),t[fo]=e.current,jr(8===t.nodeType?t.parentNode:t),new Ku(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(n(188));throw t=Object.keys(t).join(","),Error(n(268,t))}return t=null===(t=Ut(e))?null:t.stateNode},e.flushSync=function(t){return hu(t)},e.hydrate=function(t,e,i){if(!Ju(e))throw Error(n(200));return th(null,t,e,!0,i)},e.hydrateRoot=function(t,e,i){if(!Qu(t))throw Error(n(405));var r=null!=i&&i.hydratedSources||null,o=!1,s="",a=qu;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(o=!0),void 0!==i.identifierPrefix&&(s=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),e=Wu(e,null,t,1,null!=i?i:null,o,0,s,a),t[fo]=e.current,jr(t),r)for(t=0;t<r.length;t++)o=(o=(i=r[t])._getVersion)(i._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[i,o]:e.mutableSourceEagerHydrationData.push(i,o);return new Xu(e)},e.render=function(t,e,i){if(!Ju(e))throw Error(n(200));return th(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(n(40));return!!t._reactRootContainer&&(hu((function(){th(null,null,t,!1,(function(){t._reactRootContainer=null,t[fo]=null}))})),!0)},e.unstable_batchedUpdates=uu,e.unstable_renderSubtreeIntoContainer=function(t,e,i,r){if(!Ju(i))throw Error(n(200));if(null==t||void 0===t._reactInternals)throw Error(n(38));return th(t,e,i,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},250:function(t,e,i){"use strict";var r=i(164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},164:function(t,e,i){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=i(463)},374:function(t,e,i){"use strict";var r=i(791),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,i){var r,n={},u=null,h=null;for(r in void 0!==i&&(u=""+i),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(h=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===n[r]&&(n[r]=e[r]);return{$$typeof:o,type:t,key:u,ref:h,props:n,_owner:a.current}}e.jsx=u,e.jsxs=u},117:function(t,e){"use strict";var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,g={};function y(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||f}function m(){}function b(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=y.prototype;var v=b.prototype=new m;v.constructor=b,_(v,y.prototype),v.isPureReactComponent=!0;var w=Array.isArray,C=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,r){var o,n={},s=null,a=null;if(null!=e)for(o in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)C.call(e,o)&&!I.hasOwnProperty(o)&&(n[o]=e[o]);var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];n.children=u}if(t&&t.defaultProps)for(o in l=t.defaultProps)void 0===n[o]&&(n[o]=l[o]);return{$$typeof:i,type:t,key:s,ref:a,props:n,_owner:x.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var k=/\/+/g;function O(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function R(t,e,o,n,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case r:l=!0}}if(l)return s=s(l=t),t=""===n?"."+O(l,0):n,w(s)?(o="",null!=t&&(o=t.replace(k,"$&/")+"/"),R(s,e,o,"",(function(t){return t}))):null!=s&&(E(s)&&(s=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(k,"$&/")+"/")+t)),e.push(s)),1;if(l=0,n=""===n?".":n+":",w(t))for(var u=0;u<t.length;u++){var h=n+O(a=t[u],u);l+=R(a,e,o,h,s)}else if(h=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof h)for(t=h.call(t),u=0;!(a=t.next()).done;)l+=R(a=a.value,e,o,h=n+O(a,u++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,i){if(null==t)return t;var r=[],o=0;return R(t,r,"","",(function(t){return e.call(i,t,o++)})),r}function D(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var T={current:null},L={transition:null},M={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:L,ReactCurrentOwner:x};e.Children={map:P,forEach:function(t,e,i){P(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=o,e.Profiler=s,e.PureComponent=b,e.StrictMode=n,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=_({},t.props),n=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=x.current),void 0!==e.key&&(n=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)C.call(e,u)&&!I.hasOwnProperty(u)&&(o[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:i,type:t.type,key:n,ref:s,props:o,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:D}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return T.current.useCallback(t,e)},e.useContext=function(t){return T.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return T.current.useDeferredValue(t)},e.useEffect=function(t,e){return T.current.useEffect(t,e)},e.useId=function(){return T.current.useId()},e.useImperativeHandle=function(t,e,i){return T.current.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return T.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return T.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return T.current.useMemo(t,e)},e.useReducer=function(t,e,i){return T.current.useReducer(t,e,i)},e.useRef=function(t){return T.current.useRef(t)},e.useState=function(t){return T.current.useState(t)},e.useSyncExternalStore=function(t,e,i){return T.current.useSyncExternalStore(t,e,i)},e.useTransition=function(){return T.current.useTransition()},e.version="18.2.0"},791:function(t,e,i){"use strict";t.exports=i(117)},184:function(t,e,i){"use strict";t.exports=i(374)},401:function(t,e){!function(t){"use strict";var e={name:"RealGrid",version:"2.6.0.1435",license:"enterprise",code:null},i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function r(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var o,n,s,a,l,u,h,c,d,p=function(){return(p=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f="$_row";(o=t.ValueType||(t.ValueType={})).TEXT="text",o.NUMBER="number",o.BOOLEAN="boolean",o.DATETIME="datetime",o.OBJECT="object",o.CHAR="char",o.UNUM="unum",o.INT="int",o.UINT="uint",o.DATE="date",(n=t.SortDirection||(t.SortDirection={})).ASCENDING="ascending",n.DESCENDING="descending",n.NONE="none",(s=t.SortCase||(t.SortCase={})).SENSITIVE="sensitive",s.INSENSITIVE="insensitive",function(t){t.ROWS="rows",t.ITEMS="items"}(a||(a={})),(l=t.SortMode||(t.SortMode={})).AUTO="auto",l.EXPLICIT="explicit",(u=t.FilterMode||(t.FilterMode={})).AUTO="auto",u.EXPLICIT="explicit",(h=t.RowGroupAdornments||(t.RowGroupAdornments={})).NONE="none",h.HEADER="header",h.FOOTER="footer",h.SUMMARY="summary",h.BOTH="both",(c=t.ValidationMode||(t.ValidationMode={})).ALWAYS="always",c.UPDATE="update",c.INSERT="insert",(d=t.ValidationLevel||(t.ValidationLevel={})).ERROR="error",d.WARNING="warning",d.INFO="info",d.IGNORE="ignore";var _,g,y,m,b,v,w,C,x,I,S,E,k,O,R,P,D,T,L,M,F,N,V,B={error:1,warning:2,info:3,ignore:4},A=function(t,e){return B[t]-B[e]};(_=t.SummaryMode||(t.SummaryMode={})).NONE="none",_.AGGREGATE="aggregate",_.STATISTICAL="statistical",(g=t.ColumnHeaderItemLocation||(t.ColumnHeaderItemLocation={})).NONE="none",g.LEFT_EDGE="leftEdge",g.RIGHT_EDGE="rightEdge",g.TOP_EDGE="topEdge",g.BOTTOM_EDGE="bottomEdge",g.LEFT="left",g.RIGHT="right",g.TOP="top",g.BOTTOM="bottom",g.CENTER="center",function(t){t.NONE="none",t.HEAD="head",t.BODY="body",t.TAIL="tail"}(y||(y={})),(m=t.GridFitStyle||(t.GridFitStyle={})).NONE="none",m.EVEN="even",m.EVEN_FILL="evenFill",m.FILL="fill",(b=t.RowMaskType||(t.RowMaskType={})).NONE="none",b.ROW="row",b.DATA="data",b.FILL="fill",b.CELL="cell",(v=t.TextInputCase||(t.TextInputCase={})).NORMAL="normal",v.UPPER="upper",v.LOWER="lower",v.DEFAULT="default",(w=t.DefaultShowDate||(t.DefaultShowDate={})).NORMAL="normal",w.TODAY="today",w.TODAY_WHEN_NULL="todayWhenNull",w.DEFAULT="default",w.DEFAULT_WHEN_NULL="defaultWhenNull",(C=t.SortStyle||(t.SortStyle={})).NONE="none",C.EXCLUSIVE="exclusive",C.INCLUSIVE="inclusive",C.REVERSE="reverse",(x=t.MenuItemType||(t.MenuItemType={})).NORMAL="normal",x.CHECK="check",x.RADIO="radio",x.SEPARATOR="separator",(I=t.HandleVisibility||(t.HandleVisibility={})).VISIBLE="visible",I.HOVERED="hovered",I.ALWAYS="always",I.HIDDEN="hidden",(S=t.CellButton||(t.CellButton={})).NONE="none",S.ACTION="action",S.POPUP="popup",(E=t.ButtonVisibility||(t.ButtonVisibility={})).ALWAYS="always",E.DEFAULT="default",E.VISIBLE="visible",E.HIDDEN="hidden",E.ROWFOCUSED="rowfocused",(k=t.IconLocation||(t.IconLocation={})).LEFT="left",k.RIGHT="right",k.LEFT_EDGE="leftEdge",k.RIGHT_EDGE="rightEdge",k.TOP="top",k.BOTTOM="bottom",k.TOP_EDGE="topEdge",k.BOTTOM_EDGE="bottomEdge",k.CENTER="center",(O=t.RefreshMode||(t.RefreshMode={})).ALL="all",O.VISIBLE_ONLY="visibleOnly",(R=t.ScrollOnEditing||(t.ScrollOnEditing={})).CANCEL="cancel",R.COMMIT="commit",R.DEFAULT="default",(P=t.ItemType||(t.ItemType={})).ROW="row",P.GROUP="group",P.FOOTER="footer",P.TREE="tree",(D=t.SummaryType||(t.SummaryType={})).COUNT="count",D.SUM="sum",D.MAX="max",D.MIN="min",D.AVG="avg",D.VAR="var",D.VARP="varp",D.STDEV="stdev",D.STDEVP="stdevp",D.DATACOUNT="datacount",D.DATAAVG="dataavg",(T=t.ExpanderVisibility||(t.ExpanderVisibility={})).ALWAYS="always",T.DEFAULT="default",T.NONE="none",(L=t.ExitGridWhenTab||(t.ExitGridWhenTab={})).ROW="row",L.GRID="grid",L.NONE="none",(M=t.GroupShowMode||(t.GroupShowMode={})).EXPAND="expand",M.COLLAPSE="collapse",M.ALWAYS="always",(F=t.SyncGridHeight||(t.SyncGridHeight={})).NONE="none",F.OVER="over",F.ALWAYS="always",(N=t.InlineFilterOperator||(t.InlineFilterOperator={})).EQUAL="equal",N.NOT_EQUAL="notEqual",N.CONTAINS="contains",N.NOT_CONTAINS="notContains",N.STARTS_WITH="startsWith",N.ENDS_WITH="endsWith",N.RESET="reset",N.GREATER="greater",N.GREATER_EQUAL="greaterEqual",N.LOWER="lower",N.LOWER_EQUAL="lowerEqual",N.BETWEEN="between",N.EMPTY="empty",(V=t.TreeExpanderIconStyle||(t.TreeExpanderIconStyle={})).TRIANGLE="triangle",V.SQUARE="square";var $=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.getInner=function(){return new t(0,0,this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},t.prototype.rightBy=function(t){return this.width+=t,this},t.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},t.prototype.bottomBy=function(t){return this.height+=t,this},t.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},t.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},t.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.move=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this},t.prototype.set=function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},t.prototype.setWidth=function(t){return this.width=t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},t.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},t.prototype.inflate=function(t,e,i,r){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===r&&(r=void 0),e=void 0!==e?e:t,i=void 0!==i?i:t,r=void 0!==r?r:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),r&&(this.bottom=this.bottom+r),this},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},t.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},t.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},t.Temp=new t,t}(),j=navigator.userAgent,H=navigator.platform.toUpperCase().indexOf("MAC")>=0,W=!!window.opera||j.indexOf(" OPR/")>=0,G=!!window.whale,U=!!window.chrome&&!W,z=void 0!==window.InstallTrigger,Y=Object.prototype.toString.call(HTMLElement).indexOf("Constructor")>0||!U&&!W&&j.indexOf("Safari")>=0,q=Y&&("Win32"==navigator.platform||j.indexOf("Windows")>=0),K=j.toLowerCase().indexOf("edge/")>=0,X=/iPad|iPhone|iPod/.test(j)&&!window.MSStream,Q=j.toLowerCase().indexOf("edg/")>=0&&j.toLowerCase().indexOf("chrome/")>=0,J=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return t>4?t:void 0}(),Z=void 0!==J&&J<=9,tt=void 0!==J&&J<=8,et=!!j.match(/Trident.*rv\:11\./),it=-1!==navigator.appVersion.indexOf("MSIE 10"),rt=-1!==navigator.appVersion.indexOf("MSIE 9"),ot=et||it||rt,nt=(new Date).getTime(),st=void 0,at=void 0,lt=void 0,ut=void 0;function ht(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)}function ct(t){return t&&t.ownerDocument}function dt(t){return t.defaultView||t.parentWindow}var pt,ft=function(){function t(){}return t.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},t.setDebugging=function(e,i,r){t.$$_trace=e,t.$$_debugging=i,t.$$_keyLog=r},t.isDebugging=function(){return t.$$_debugging},t.isTrace=function(){return this.$$_trace},t.log=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];t.isDebugging()&&console.log(e,i)},t.keyLog=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];t.$$_keyLog&&console.log(e,i)},t.trace=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];t.isTrace()&&console.log(e,i)},t.isArray=function(t){return Array.isArray(t)},t.isObject=function(t){return null!=t&&"object"==typeof t},t.makeArray=function(e,i){return void 0===i&&(i=!1),null!=e?t.isArray(e)?e:[e]:i?[]:void 0},t.isNumber=function(t){return"number"==typeof t},t.getNumber=function(t,e){return isNaN(parseFloat(t))?e:parseFloat(t)},t.getTimer=function(){return(new Date).getTime()-nt},t.isWhiteSpace=function(t){return!t||!t.trim()},t.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},t.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,r=t.length,o=0;o<r;o++)if(null!=(i=t[o]))return i},t.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=e.length,o=0;o<r;o++)if(e[o]==t)return!0;return!1},t.valueIn=function(t,e){if("object"==typeof e)for(var i=Object.keys(e),r=0;r<i.length;r++)if(e[i[r]]===t)return!0;return!1},t.compareTextValue=function(t,e,i,r){if(t===e)return!0;var o=String(t),n=null==e?void 0:String(e);return!o&&!n||!(!o||!n)&&(i||(o=o.toLowerCase(),n=n.toLowerCase()),r?n.indexOf(o)>=0:o==n)},t.cast=function(t,e){return t instanceof e?t:null},t.toInt=function(t,e){var i=parseInt(t,e||10);return isNaN(i)?0:i},t.toFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},t.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var r=t.toString(16);return i=i||"0",new Array(e-r.length+1).join(i)+r},t.deepCopy=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);for(var i=t.isArray(e)?[]:{},r=0,o=Object.keys(e);r<o.length;r++){var n=o[r];e.hasOwnProperty(n)&&(i[n]=t.deepCopy(e[n]))}return i},t.extendObj=function(t,e){if(null==t||"object"!=typeof t||null==e||"object"!=typeof e)return e;for(var i=0,r=Object.keys(t);i<r.length;i++){var o=r[i];t.hasOwnProperty(o)&&void 0===e[o]&&(e[o]=t[o])}},t.getBounds=function(t){var e=new $;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},t.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},t.setBounds=function(t,e,i,r,o){var n=t.style;n.left=e+"px",n.top=i+"px",n.width=r+"px",n.height=o+"px"},t.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},t.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,r=i.length;r--;)if(i[r]===t)return r}return-1},t.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},t.clearElements=function(e){for(var i;i=e.lastChild;)t.clearElements(i),e.removeChild(i)},t.addChild=function(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)},t.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)},t.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},t.setMobile=function(t){st=t},t.setTablet=function(t){lt=t},t.isMobile=function(){return void 0!==st?st:(void 0===at&&(at=this.$_checkMobile()),at)},t.isTablet=function(){return void 0!==lt?lt:(void 0===ut&&(ut=this.$_checkTablet()),ut)},t.$_checkTablet=function(){return t.isMobile()&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(j.toLowerCase())},t.$_checkMobile=function(){var t=!1;return(j.match(/Android/i)||j.match(/webOS/i)||j.match(/iPhone/i)||j.match(/iPad/i)||j.match(/iPod/i)||j.match(/BlackBerry/i)||j.match(/Windows Phone/i))&&(t=!0),t||(t="ontouchstart"in window&&j.indexOf("Macintosh")>=0),t},t.getBrowserSize=function(t){var e=t?t.ownerDocument:document,i=e.defaultView;return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}},t.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},t.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},t.detach=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t),null},t.getSize=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},t.getScrolled=function(t){var e=t.body,i=dt(t),r=t.documentElement;return{sx:i.pageXOffset||r.scrollLeft||e.scrollLeft,sy:i.pageYOffset||r.scrollTop||e.scrollTop}},t.getOffset=function(t){var e=t.ownerDocument,i=e.defaultView,r=t.getBoundingClientRect(),o=e.body,n=e.documentElement,s=i.pageYOffset||n.scrollTop||o.scrollTop,a=i.pageXOffset||n.scrollLeft||o.scrollLeft,l=n.clientTop||o.clientTop||0,u=n.clientLeft||o.clientLeft||0,h=r.left+a-u,c=r.top+s-l;return{x:Math.round(h),y:Math.round(c)}},t.isAncestorOf=function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1},t.equalNumbers=function(t,e){return isNaN(t)&&isNaN(e)||!isNaN(t)&&t==e},t.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var r=0;r<i;++r)if(t[r]!==e[r])return!1;return!0},t.equalObjects=function(t,e){return t==e||JSON.stringify(t)===JSON.stringify(e)},t.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.incMonth=function(e,i){var r=e.getDate();return e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(r,t.month_days[t.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},t.setClassName=function(t,e){(e=e||"")!=t.className&&(t.className=e)},t.addClassName=function(t,e){if(e=e||"",t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},t.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,r=t.className.split(" ");(i=r.indexOf(e))>=0&&r.splice(i,1),t.className=r.join(" ")}},t.setStyle=function(t,e){var i=e.style;for(var r in t)null!=t[r]?i[r]=t[r]:(i.removeProperty?i.removeProperty(r):i.removeAttribute&&i.removeAttribute(r),i[r]="")},t.getBoundingClientRect2=function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},t.getTextLength=function(t){for(var e=0,i=0,r=0;t&&(i=t.charCodeAt(r));r++)e+=i>>7?2:1;return e},t.setTextProp=function(t){t.textProp=this.ieAll?"textContent":"innerText"},t.isEmpty=function(t){return t&&Object.keys(t).length>0},t.isPassive=function(){if(null===t.$_supportPassive){t.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t.$_supportPassive=!0}}))}catch(t){}}return t.$_supportPassive},t.hangulToChosungAll=function(t){for(var e=["\u3131","\u3132","\u3134","\u3137","\u3138","\u3139","\u3141","\u3142","\u3143","\u3145","\u3146","\u3147","\u3148","\u3149","\u314a","\u314b","\u314c","\u314d","\u314e"],i="",r=0;r<t.length;r++){var o=t.charCodeAt(r)-44032;i+=o>-1&&o<11172?e[Math.floor(o/588)]:t[r]}return i},t.hangulToChosung=function(t){var e={cho:t,org:t};if(/[\u3131-\ud79d]/.test(t)){var i=["\u3131","\u3132","\u3134","\u3137","\u3138","\u3139","\u3141","\u3142","\u3143","\u3145","\u3146","\u3147","\u3148","\u3149","\u314a","\u314b","\u314c","\u314d","\u314e"],r=t.charCodeAt(0)-44032,o=r%28,n=(r-o)/28%21,s=((r-o)/28-n)/21;e.cho=i[s]?i[s]:t,e.org=["\u314f","\u3150","\u3151","\u3152","\u3153","\u3154","\u3155","\u3156","\u3157","\u3158","\u3159","\u315a","\u315b","\u315c","\u315d","\u315e","\u315f","\u3160","\u3161","\u3162","\u3163"][n]?t:void 0}return e},t.addQuot=function(t,e){return t&&(t.indexOf("\n")>=0||t.indexOf("\r\n")>=0||'"'==t.charAt(0))&&(t='"'+(t=t.replace(/\"/g,'""'))+'"'),t},t.addQuatation=function(t,e,i,r){return null!=t&&((i||r)&&(i&&t&&(t=t.replace(/\n/g,i)),r&&t&&(t=t.replace(/\r/g,r))),(e||t.indexOf("\n")>=0||t.indexOf(",")>=0||t.indexOf('"')>=0)&&(t='"'+t.replace(/\"/g,'""')+'"')),null===t?"":t},t.isClickableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, a, select, button, [tabindex]"),(function(t){return e===t}))},t.isFocusableTemplate=function(t,e){return Array.prototype.some.call(t.querySelectorAll("input, textarea, select"),(function(t){var i=t.type;return t===e&&"button"!==i&&"checkbox"!==i}))},t.objectToCssText=function(t){return"string"==typeof t?t:t?Object.keys(t).map((function(e){return e.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+t[e]})).join(";"):null},t.getLast=function(t){return t[t.length-1]},t.camelToHyphen=function(t,e,i){return void 0===i&&(i="-"),t?e?t.split(/(?=[A-Z])/).join(i).toUpperCase():t.split(/(?=[A-Z])/).join(i).toLowerCase():t},t.isIE=ot,t.isEdge=K,t.ieAll=ot||K,t.ieOld=Z,t.isMac=H,t.isSafari=Y,t.isWinSafari=q,t.isChrome=U,t.isFirefox=z,t.isOpera=W,t.ieLeg=tt,t.ieTen=it,t.ieNine=rt,t.isiOS=X,t.isChromium=U||Q||G||W,t.TextProp=t.ieAll?"innerText":"textContent",t.week_days=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"],t.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],t.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,t.$_INVISIBLE_EDIT_BOUNDS=new $(-1e4,-1e4,100,100),t.$$_debugging=!1,t.$$_keyLog=!1,t.$$_trace=null,t.$_supportPassive=null,t}(),_t=function(){function t(){}return t.encode=function(e){var i,r,o,n,s,a,l,u="",h=0,c=t.CHARACTERS;for(e=t.utf8_encode(e);h<e.length;)n=(i=e.charCodeAt(h++))>>2,s=(3&i)<<4|(r=e.charCodeAt(h++))>>4,a=(15&r)<<2|(o=e.charCodeAt(h++))>>6,l=63&o,isNaN(r)?a=l=64:isNaN(o)&&(l=64),u=u+c.charAt(n)+c.charAt(s)+c.charAt(a)+c.charAt(l);return u},t.decode=function(e){var i,r,o,n,s,a,l="",u=0,h=t.CHARACTERS;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)i=h.indexOf(e.charAt(u++))<<2|(n=h.indexOf(e.charAt(u++)))>>4,r=(15&n)<<4|(s=h.indexOf(e.charAt(u++)))>>2,o=(3&s)<<6|(a=h.indexOf(e.charAt(u++))),l+=String.fromCharCode(i),64!=s&&(l+=String.fromCharCode(r)),64!=a&&(l+=String.fromCharCode(o));return t.utf8_decode(l)},t.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},t.utf8_decode=function(t){for(var e="",i=0,r=0,o=0,n=0,s=t.length;i<s;)(r=t.charCodeAt(i))<128?(e+=String.fromCharCode(r),i++):r>191&&r<224?(o=t.charCodeAt(i+1),e+=String.fromCharCode((31&r)<<6|63&o),i+=2):(o=t.charCodeAt(i+1),n=t.charCodeAt(i+2),e+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&n),i+=3);return e},t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t.btoa=function(e){for(var i,r,o,n,s=t.CHARACTERS,a="",l=0,u=(e=String(e)).length%3;l<e.length;){if((r=e.charCodeAt(l++))>255||(o=e.charCodeAt(l++))>255||(n=e.charCodeAt(l++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");i=r<<16|o<<8|n,a+=s.charAt(i>>18&63)+s.charAt(i>>12&63)+s.charAt(i>>6&63)+s.charAt(63&i)}return u?a.slice(0,u-3)+"===".substring(u):a},t}();(pt=t.RowState||(t.RowState={})).NONE="none",pt.CREATED="created",pt.UPDATED="updated",pt.DELETED="deleted",pt.CREATE_AND_DELETED="createAndDeleted";var gt=function(e){return e==t.RowState.DELETED||e==t.RowState.CREATE_AND_DELETED},yt=function(){function t(t){this.format=t}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),t.prototype.toBool=function(t){return!!this.toBoolStrict(t)},t.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase(),i=this.$_toBool(t);return null!=i?i:e?Boolean(e):void 0},t.prototype.toBoolStrict=function(t){return this.$_toBool(t)},t.prototype.toText=function(t){return t?this._trueText:this._falseText},t.prototype.$_toBool=function(t){if(this._values){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},t.prototype.parse=function(t){var e=this;if(this._values={},t){this._trueText=this._falseText=null;var i=t.split(/[;\:]/),r=this._sensitive="0"!=i[2],o=i[0]?r?i[0].split(","):i[0].toLowerCase().split(","):null,n=i[1]?r?i[1].split(","):i[1].toLowerCase().split(","):null;o&&o.forEach((function(t){e._values[t]=!1,e._falseText=e._falseText||t})),n&&n.forEach((function(t){e._values[t]=!0,e._trueText=e._trueText||t}))}else this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1},t.Default=new t("false,f,0:true,t,1:0"),t}(),mt=function(){function t(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)},enumerable:!0,configurable:!0}),t.prototype.parse=function(e){try{for(var i=0,r=1,o=1,n=0,s=0,a=0,l=0,u=0,h=0,c=this._patterns.length,d=0,p=e.length,f=0;f<c&&d<p;f++){var _=this._patterns[f],g=_.c,y=_.len;switch(g){case"y":i=parseInt(e.substr(d,y));break;case"M":r=parseInt(e.substr(d,y));break;case"d":o=parseInt(e.substr(d,y));break;case"a":if(this._amText&&e.indexOf(this._amText,d)==d)u=12,y=this._amText.length;else{if(!this._pmText||e.indexOf(this._pmText,d)!=d)return null;h=12,y=this._pmText.length}break;case"H":case"h":n=parseInt(e.substr(d,y));break;case"m":s=parseInt(e.substr(d,y));break;case"s":a=parseInt(e.substr(d,y));break;case"S":l=parseInt(e.substr(d,y));break;case".":case"/":case"-":case":":case" ":if(t.DATE_SEPARATORS.indexOf(e.charAt(d))<0)return null;break;default:return null}d+=y}return i<100&&(i+=this._baseYear),u>0?12==n&&(n=0):h>0&&n<12&&(n+=12),new Date(i,r-1,o,n,s,a,l)}catch(t){return null}},t.prototype.parseFormat=function(t){var e,i,r,o=t,n=o.length,s=0;for(this._patterns=[];s<n;)if(e=s,i=o.charAt(s),ft.isWhiteSpace(i)){for(s++;s<n&&ft.isWhiteSpace(o.charAt(s));)s++;this._patterns.push({c:" ",p:e,len:s-e})}else{switch(r=0,i){case"y":4!=(r=this.getPattern(o,s,i))&&2!=r&&this.throwInvalidFormat(o);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(r=this.getPattern(o,s,i))&&this.throwInvalidFormat(o);break;case"S":3!=(r=this.getPattern(o,s,i))&&this.throwInvalidFormat(o);break;case"a":case".":case"/":case"-":case":":1!=(r=this.getPattern(o,s,i))&&this.throwInvalidFormat(o);break;default:this.throwInvalidFormat(o)}r>0&&(this._patterns.push({c:i,p:s,len:r}),s+=r)}},t.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},t.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},t.prototype.getPattern=function(t,e,i){for(var r=1;++e<t.length&&t.charAt(e)==i;)r++;return r},t.DATE_SEPARATORS="./-: ",t}(),bt=function(){function t(t){this._format="",this._type=0,this._parser=new mt(null),this.format=t}return t.initialize=function(){t.Default.amText="AM",t.Default.pmText="PM",t.Default.baseYear=2e3},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t},enumerable:!0,configurable:!0}),t.prototype.toDate=function(t){if(!t)return null;var e=null;switch(this._type){case 0:e=this._parser.parse(t);break;case 2:var i=parseInt(t);e=new Date(i);break;default:e=new Date(t)}return e&&!isNaN(e.getTime())?e:null},t.prototype.parse=function(e){if(e){var i=e.toLowerCase();this._type=Math.max(0,t.Formats.indexOf(i)),0==this._type&&(this._parser.format=e)}},t.Formats=["custom","iso","timestamp","platform"],t.Default=new t("yyyy/MM/dd HH:mm:ss"),t}();bt.initialize();var vt,wt=0,Ct=function(){function t(t){this.$_disposed=!1,t||(this.$_hash=wt++)}return t.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},t.prototype._doDispose=function(){},Object.defineProperty(t.prototype,"disposing",{get:function(){return this.$_disposing},enumerable:!0,configurable:!0}),t.prototype.isMe=function(t){return t==this.$_hash},t.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),r=0,o=i.length;r<o;r++){var n=i[r],s=Object.getOwnPropertyDescriptor(t,n);s&&s.get&&e.push(n)}return e},t.prototype.doAssignSimple=function(t){return!1},t.prototype.assignFrom=function(e){var i=Object.getPrototypeOf(this);if(e instanceof t)for(var r=Object.getPrototypeOf(e),o={};r&&r.constructor!=t;){for(var n=this.$_getters(r),s=0,a=n.length;s<a;s++)if(!((c=n[s])in o))if(o[c]=null,d=Object.getOwnPropertyDescriptor(i,c))d.set&&(u=Object.getOwnPropertyDescriptor(r,c).get)&&d.set.call(this,u.call(e));else for(var l=Object.getPrototypeOf(i);l;){var u,h=Object.getOwnPropertyDescriptor(l,c);h?(h.set&&(u=Object.getOwnPropertyDescriptor(r,c).get)&&h.set.call(this,u.call(e)),l=null):l=Object.getPrototypeOf(l)}r=Object.getPrototypeOf(r)}else if(!this.doAssignSimple(e))for(var c in e){var d;if(d=Object.getOwnPropertyDescriptor(i,c))d.set&&d.set.call(this,e[c]);else for(l=Object.getPrototypeOf(i);l;){var p=Object.getOwnPropertyDescriptor(l,c);p?(p.set&&p.set.call(this,e[c]),l=null):l=Object.getPrototypeOf(l)}}},t.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},t.prototype.toProxy=function(e){void 0===e&&(e=!0);for(var i={},r=Object.getPrototypeOf(this),o=[];r&&r.constructor!=t;){for(var n=this.$_getters(r),s=0,a=n.length;s<a;s++){var l=n[s],u=Object.getOwnPropertyDescriptor(r,l);if(u){if(u.get&&u.set&&o.indexOf(l)<0){o.push(l);var h=u.get.call(this);(e||void 0!==h)&&(i[l]=h)}}else for(var c=Object.getPrototypeOf(r);c;){var d=Object.getOwnPropertyDescriptor(c,l);d?(d.get&&d.set&&o.indexOf(l)<0&&(o.push(l),h=d.get.call(this),(e||void 0!==h)&&(i[l]=d.get.call(this))),c=null):c=Object.getPrototypeOf(c)}}r=Object.getPrototypeOf(r)}return i},t}(),xt=function(t){function e(e,i){var r=t.call(this,e)||this;return r.message=e,r.tokenPos=i,r}return r(e,t),e}(Error),It=function(t){function e(e){var i=t.call(this,e)||this;return i.message=e,i}return r(e,t),e}(Error),St=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],r=0,o=t;r<o.length;r++)i[o[r]]=!0;return i},Et=St(26,27),kt=St(40,45,46,47,48,49,50,51,52,53,54,55,56,57,41,42,43,44),Ot=St(4,5,18,19),Rt=St(11,3,2,14,15,16,17),Pt=function(){function t(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,trim:25,is:26,like:46,ilike:48,match:50,imatch:52,likehan:54,ilikehan:55,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0,this._tokenPos=0;for(var t=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=t>=1&&t<=9||11==t||t>=14&&t<=32,this.IS_END[t]=0==t;this.initProcs()}return t.prototype.clear=function(){this._source=null},t.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},t.prototype.unkownProc=function(){this._tokenId=0,this._run++},t.prototype.symbolProc=function(){this._tokenId=80,this._run++},t.prototype.commaProc=function(){this._tokenId=32,this._run++},t.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},t.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},t.prototype.equalProc=function(){this._tokenId=40,this._run++},t.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},t.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},t.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return t>e?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},t.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255);)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun;break;case"likehan":this._tokenId=56,this._run=this._nextRun;break;case"ilikehan":this._tokenId=57,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},t.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},t.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},t.prototype.minusProc=function(){this._tokenId=4,this._run++},t.prototype.plusProc=function(){this._tokenId=5,this._run++},t.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},t.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},t.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},t.prototype.slashProc=function(){this._tokenId=2,this._run++},t.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},t.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},t.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},t.prototype.starProc=function(){this._tokenId=3,this._run++},t.prototype.modProc=function(){this._tokenId=15,this._run++},t.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new xt("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},t.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new xt("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},t.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;for(this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc,t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},Object.defineProperty(t.prototype,"tokenId",{get:function(){return this._tokenId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenLen",{get:function(){return this._run-this._tokenPos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpace",{get:function(){return 71==this._tokenId},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},t.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},t.prototype.nextId=function(t){do{this.next()}while(this._run<this._len&&this._tokenId!=t);return null},t.prototype.nextNoSpace=function(){if(this._run<this._len)do{this.next()}while(this._run<this._len&&this.isSpace);return null},t.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;e>0&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||10==(t=this._source.charCodeAt(e))||13==t},t}(),Dt=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},e.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},e}(Ct),Tt=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asLiteral",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.prepareValue=function(){},t.prototype.getLiteral=function(){},t.prototype.isIdentifier=function(t){return!1},t.prototype.toString=function(){return String(this)},t}(),Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(Tt),Mt=(function(t){function e(){return t.call(this)||this}r(e,t),e.prototype.evaluate=function(t){},e.prototype.toString=function(){return""},e.Default=new e}(Tt),function(t){function e(){var e=t.call(this)||this;return e._operator=0,e}return r(e,t),e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return e>i;case 42:return e>=i;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 54:return this.calcLikeHan(e,i,!1);case 56:return!this.calcLikeHan(e,i,!1);case 55:return this.calcLikeHan(e,i,!0);case 57:return!this.calcLikeHan(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new It("Unknown operator: "+this._operator)}},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e=this._leftExpr.toString(),i=this._rightExpr.toString(),r=void 0;switch(this._operator){case 40:r="=";break;case 45:r="<>";break;case 41:r=">";break;case 42:r=">=";break;case 43:r="<";break;case 44:r="<=";break;case 46:r="like";break;case 47:r="not like";break;case 48:r="ilike";break;case 49:r="not ilike";break;case 50:r="match";break;case 51:r="not match";break;case 52:r="imatch";break;case 53:r="not imatch";break;case 54:r="likeHan";break;case 56:r="not likehan";break;case 55:r="ilikeHan";break;case 57:r="not ilikehan";break;case 32:r=",";break;default:r="<<ERROR>>"}t="("+e+" "+r+" "+i+")"}else t=this._leftExpr.toString();return t},e.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},e.prototype.getLiteral=function(){return this._literal},e.prototype.calcLike=function(t,e,i){var r=String(t),o=String(e);if(r&&o){i&&(r=r.toLowerCase(),o=o.toLowerCase());var n=o.length;if(n>1){var s="%"==o.charAt(0),a="%"==o.charAt(n-1);return s&&a?(o=o.substr(1,n-2),r.indexOf(o,0)>=0):s?(o=o.substr(1,n-1),r.lastIndexOf(o)==r.length-o.length):a?(o=o.substr(0,n-1),0==r.indexOf(o,0)):r==o}return"%"!=o&&r==o}return!1},e.prototype.calcLikeHan=function(t,e,i){if(t&&e){t=String(t);var r=(e=String(e)).length,o="%"==e.charAt(0),n="%"==e.charAt(r-1);if(e=o&&n?e.substr(1,r-2):o?e.substr(1,r-1):n?e.substr(0,r-1):e,t.length<e.length)return;i&&(t=t.toLowerCase(),e=e.toLowerCase());var s=ft.hangulToChosungAll(t),a=ft.hangulToChosungAll(e),l=-1,u=void 0;if(o&&n){for(;(l=s.indexOf(a,l+1))>=0;){for(var h=0;h<a.length&&h+l<s.length;h++){var c=ft.hangulToChosung(t[h+l]);if((d=ft.hangulToChosung(e[h])).org&&d.org!==c.org||!d.cho||d.cho!==c.cho){u=!1;break}u=!0}if(u)return!0}return!1}if(o){if((l=s.lastIndexOf(a))===s.length-a.length){for(h=0;h<a.length;h++){if(c=ft.hangulToChosung(t[l+h]),(d=ft.hangulToChosung(e[h])).org&&d.org!==c.org||!d.cho||d.cho!==c.cho){u=!1;break}u=!0}if(u)return!0}return!1}if(n){if(0===s.indexOf(a)){for(h=0;h<a.length;h++){var d;if(c=ft.hangulToChosung(t[h]),(d=ft.hangulToChosung(e[h])).org&&d.org!==c.org||!d.cho||d.cho!==c.cho){u=!1;break}u=!0}if(u)return!0}return!1}return t==e}return!1},e.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},e}(Tt)),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){},e}(Tt),Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){return"defined"},e}(Ft),Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){return"empty"},e}(Ft),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return NaN},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"null"},e}(Ft),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toString=function(){return"NaN"},e}(Ft),$t=function(t){function e(i,r,o){var n=t.call(this)||this;return n._leftExpr=i,n._operator=r,n._isNot=27==r,n._value=-1,o instanceof Nt?n._value=e.DEFINED:o instanceof Bt?n._value=e.NULL:o instanceof Vt?n._value=e.EMPTY:o instanceof At&&(n._value=e.NAN),n}return r(e,t),e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){var i,r=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case e.DEFINED:i=void 0!==r;break;case e.NULL:i=null==r;break;case e.EMPTY:i=null==r||0==String(r).length;break;case e.NAN:i=null===r||isNaN(r);break;default:return}return this._isNot?!i:i},e.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case e.DEFINED:t="defined";break;case e.NULL:t="null";break;case e.EMPTY:t="empty";break;case e.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},e.DEFINED=0,e.NULL=1,e.EMPTY=2,e.NAN=3,e}(Mt),jt=function(t){function e(e){var i=t.call(this)||this;return i._value=Number(e),i}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}(Lt),Ht=function(t){function e(e){var i=t.call(this)||this;return i._value=parseInt(e),i}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}(Lt),Wt=function(t){function e(e){var i=t.call(this)||this;i._value=e.substr(1,e.length-2);for(var r="",o=0,n=!1;o<i._value.length;)"\\"!=i._value[o]||n?(n=!1,r+=i._value[o++]):(n=!0,o++);return i._value=r,i}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return"'"+this._value+"'"},e}(Lt),Gt=function(t){function e(e){var i=t.call(this)||this;return i._idKey=-651212,i._literal=e,i}return r(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this._literal},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},e.prototype.toString=function(){return this._literal},e}(Tt),Ut=function(t){function e(e,i,r){var o=t.call(this)||this;return o._idKey=-1490313,o._intIndex=NaN,o._strIndex=null,o._ident=e,o._indexer=i,o._capital=r,o}return r(e,t),e.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof Mt&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},e.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},e}(Mt),zt=function(t){function e(e){var i=t.call(this)||this;return i._factor=e,i}return r(e,t),e.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof Tt&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},e.prototype.getLiteral=function(){return null},e}(Tt),Yt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return e?e.length:0},e.prototype.toString=function(){return"(len "+this._factor+")"},e}(zt),qt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return e?e.trim():e},e.prototype.toString=function(){return"(trim "+this._factor+")"},e}(zt),Kt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){return-(this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"-"+this._factor},e}(zt),Xt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){return this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t)},e.prototype.toString=function(){return"+"+this._factor},e}(zt),Qt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){return!(this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"(not "+this._factor+")"},e}(zt),Jt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return Boolean(e)},e.prototype.toString=function(){return"(bool "+this._factor+")"},e}(zt),Zt=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return Number(e)},e.prototype.toString=function(){return"(num "+this._factor+")"},e}(zt),te=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return String(e)},e.prototype.toString=function(){return"(str "+this._factor+")"},e}(zt),ee=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);if(e instanceof Date){var i=ft.pad;e=i(e.getFullYear(),4)+i(e.getMonth()+1,2)+i(e.getDate(),2)}return String(e)},e.prototype.toString=function(){return"(datestr "+this._factor+")"},e}(zt),ie=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},e.prototype.toString=function(){return"(year "+this._factor+")"},e}(zt),re=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},e.prototype.toString=function(){return"(month "+this._factor+")"},e}(zt),oe=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},e.prototype.toString=function(){return"(day "+this._factor+")"},e}(zt),ne=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof Lt?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},e.prototype.toString=function(){return"(hour "+this._factor+")"},e}(zt),se=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(!e._rightExpr)return e._leftExpr.evaluate(t);var r=e._leftExpr.evaluate(t),o=e._rightExpr.evaluate(t);if(32===e._operator){var n=Math.pow(10,o);return Math.floor(r*n)/n}throw new It("Unknown operator: "+e._operator)},e.prototype.toString=function(){return"(rounddown "+this._factor+")"},e}(zt),ae=function(t){function e(){var e=t.call(this)||this;return e._factors=[],e._operators=[],e._literal=null,e}return r(e,t),e.prototype.addFactor=function(t){this._factors.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof Gt&&this._factors[0].identifier==t},e.prototype.prepareValue=function(){for(var t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();if(0==this._operators.length){var i=this._factors[0];this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral())}},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),r=1;r<e;r++){var o=this._factors[r].evaluate(t);switch(this._operators[r-1]){case 11:i=i&&o;break;case 3:i*=o;break;case 2:i/=o;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(o));break;case 15:i%=o;break;case 16:i<<=o;break;case 17:i>>=o}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{t="("+this._factors[0].toString();for(var e=1;e<this._factors.length;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},e}(Tt),le=function(t){function e(){var e=t.call(this)||this;return e._terms=[],e._operators=[],e._literal=null,e}return r(e,t),e.prototype.addTerm=function(t){this._terms.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},e.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),r=1;r<e;r++){var o=this._terms[r].evaluate(t);switch(this._operators[r-1]){case 4:i-=o;break;case 5:i+=o;break;case 18:i=i||o;break;case 19:i^=o}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{t="("+this._terms[0].toString();for(var e=1;e<this._terms.length;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},e}(Tt),ue=function(){function t(){this._node=null,this._capitalIndexers=null,this._lexer=new Pt}return t.prototype.syntaxError=function(t,e){throw new xt(t,e)},t.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new xt("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},t.prototype.nextToken=function(){this._lexer.nextNoSpace()},t.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(Et[t=this._lexer.tokenId]){this.nextToken();var r=this.doSimpleExpression();r.prepareValue();var o=r.getLiteral();if(!(o instanceof Ft))throw new xt("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new $t(i,t,o)}else(e=new Mt)._leftExpr=i,(kt[this._lexer.tokenId]||32==this._lexer.tokenId)&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},t.prototype.doSimpleExpression=function(){var t=new le;for(t.addTerm(this.doTerm());Ot[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},t.prototype.doTerm=function(){var t=new ae;for(t.addFactor(this.doFactor());Rt[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},t.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 25:return this.doTrim();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new xt("Unkown token: "+t,this._lexer.tokenLoc)},t.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new Wt(t)},t.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},t.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),69==this._lexer.tokenId){this.nextToken();var e=this.doExpression();return this.expected(70),new Ut(t,e,this._capitalIndexers.indexOf(t)>=0)}return new Gt(t)},t.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new jt(t)},t.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new Ht(t)},t.prototype.doMinus=function(){return this.nextToken(),new Kt(this.doFactor())},t.prototype.doPlus=function(){return this.nextToken(),new Xt(this.doFactor())},t.prototype.doNot=function(){return this.nextToken(),new Qt(this.doFactor())},t.prototype.doDefined=function(){return this.nextToken(),new Nt},t.prototype.doNull=function(){return this.nextToken(),new Bt},t.prototype.doEmpty=function(){return this.nextToken(),new Vt},t.prototype.doNaN=function(){return this.nextToken(),new At},t.prototype.doToBool=function(){return this.nextToken(),new Jt(this.doFactor())},t.prototype.doToNumber=function(){return this.nextToken(),new Zt(this.doFactor())},t.prototype.doToString=function(){return this.nextToken(),new te(this.doFactor())},t.prototype.doLength=function(){return this.nextToken(),new Yt(this.doFactor())},t.prototype.doTrim=function(){return this.nextToken(),new qt(this.doFactor())},t.prototype.doToDateString=function(){return this.nextToken(),new ee(this.doFactor())},t.prototype.doToYear=function(){return this.nextToken(),new ie(this.doFactor())},t.prototype.doToMonth=function(){return this.nextToken(),new re(this.doFactor())},t.prototype.doToDay=function(){return this.nextToken(),new oe(this.doFactor())},t.prototype.doToHour=function(){return this.nextToken(),new ne(this.doFactor())},t.prototype.doRoundDown=function(){return this.nextToken(),new se(this.doFactor())},t.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},t.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},t.Default=new t,t}(),he=["value","values"],ce=function(e){function i(i,r,o){void 0===r&&(r=t.ValueType.TEXT),void 0===o&&(o=0);var n=e.call(this)||this;return n._index=-1,n._dataType=t.ValueType.TEXT,n._subType=null,n._runType=t.ValueType.TEXT,n._length=0,n._subTypeEnabled=!0,n._required=!1,n._updatable=!0,n._ranged=!1,n._runSet=null,n._typeLock=!1,n._objectKey=null,n._objectCallback=null,i&&(n.fieldName=i),null!=r&&(r===t.ValueType.DATE&&(r=t.ValueType.DATETIME,n._subType=t.ValueType.DATE,n._subTypeEnabled=!0),n._dataType=r),n._length=o,n}return r(i,e),Object.defineProperty(i.prototype,"hash",{get:function(){return this._fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orgFieldName",{get:function(){return this._orgFieldName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orgAttrName",{get:function(){return this._orgAttrName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"runType",{get:function(){return this._runType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nullValue",{get:function(){return this._nullValue},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new yt(t):null,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._dateParser=new bt(t),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=null,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){this._objectKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)},enumerable:!0,configurable:!0}),i.prototype.isEmpty=function(e){var i=null==e||""===e;return i||this._dataType!=t.ValueType.NUMBER||(i=isNaN(e)),i},i.prototype.equalValues=function(t,e){return this._equalValues(t,e)},i.prototype.sameValues=function(t,e){return this._sameValues(t,e)},i.prototype.readValue=function(t){return this._readValue(t)},i.prototype.getBool=function(t,e){return"boolean"==typeof e?e:this._boolParser?this._boolParser.toBool(e):t.toBool(e)},i.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e):t.toDate(e)},i.prototype.clone=function(){var t=new i(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},i.prototype.$_resetTypes=function(t){this.resetTypes(t)},i.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},i.prototype.$_setIndex=function(t){this._index=t},i.prototype.$_prepare=function(t){this._owner=t},i.prototype.changed=function(){},i.prototype.resetTypes=function(e){if(!this._typeLock){e&&(this._ownerBoolParser=e.boolParser,this._ownerDateParser=e.dateParser);var i=this._dataType,r=this._subType;if(this._runType=i,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(r)switch(i){case t.ValueType.TEXT:r==t.ValueType.CHAR&&this._length>0&&(i=r);break;case t.ValueType.NUMBER:r!=t.ValueType.UNUM&&r!=t.ValueType.INT&&r!=t.ValueType.UINT||(i=r);break;case t.ValueType.DATETIME:r==t.ValueType.DATE&&(i=r)}if(this._runType=i,this._runSet=null,this._set&&this._set.length){if(this._runType==t.ValueType.DATETIME){this._runSet=[];for(var o=0;o<this._set.length;o++)(n=this.getDate(this._ownerDateParser,this._set[o]))&&this._runSet.push(n.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==t.ValueType.DATE){for(this._runSet=[],o=0;o<this._set.length;o++){var n;if(n=this.getDate(this._ownerDateParser,this._set[o])){var s=new Date(n.getDate());this._runSet.push(s.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case t.ValueType.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case t.ValueType.DATETIME:case t.ValueType.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case t.ValueType.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case t.ValueType.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case t.ValueType.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case t.ValueType.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case t.ValueType.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case t.ValueType.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case t.ValueType.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case t.ValueType.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case t.ValueType.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case t.ValueType.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},i.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},i.prototype.equalDummyValues=function(t,e){return this.equalTextValues(t,e)},i.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},i.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},i.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},i.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},i.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},i.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},i.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},i.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},i.prototype.sameBoolValues=function(t,e){return this.equalBoolValues(t,e)},i.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):JSON.stringify(t)===JSON.stringify(e)},i.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:JSON.stringify(t)===JSON.stringify(e)},i.prototype.readDummyValue=function(t){return t},i.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},i.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e&&(e=e.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},i.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},i.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},i.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=t>=0?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=e>=0?Math.floor(e):Math.ceil(e)}return e}},i.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},i.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,r=this._runSet.length;r--;)if(e.getTime()==this._runSet[r]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},i.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,r=this._runSet.length;r--;)if(e.getTime()==this._runSet[r]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},i.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},i.prototype.readObjectValues=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Invalid Object String "+e+"\r\n"+t)}else if(null!=t&&"object"!=typeof t)try{t=JSON.parse(t)}catch(t){}return ft.deepCopy(t)},i.prototype.$_compareObject=function(t,e,i,r){var o=this._objectKey,n=this._objectCallback,s=n?n(this.orgFieldName,i,t):o&&t.hasOwnProperty(o)?t[o]:null,a=n?n(this.orgFieldName,r,e):o&&e.hasOwnProperty(o)?e[o]:null;return s>a?1:s<a?-1:0},i.prototype.$_calculateValue=function(t,e,i,r,o,n,s){return this._valueCallback?this._valueCallback(t.handler,i,r,n,s):this._valueExpression?(this._exprNode||(this._exprNode=ue.Default.parse(this._valueExpression,he)),e.setValues(s,o),this._exprNode.evaluate(e)):void 0},i}(Ct);(vt=t.RestoreMode||(t.RestoreMode={})).NONE="none",vt.EXPLICIT="explicit",vt.AUTO="auto";var de,pe=function(t){function e(){var e=t.call(this)||this;return e._values=null,e._fields=null,e._fieldCount=0,e}return r(e,t),e.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._values){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new It("Data field index out of bounds:"+i);return this._values[i]}throw new It("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,r){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new It("Invalid identifier indexer: "+t);if(this._values&&this._fields){var o=this._fields.indexOf(i);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+i);return this._values[o]}},e.ID_VALUE=0,e.ID_VALUES=1,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES},e}(Dt),fe=function(t){function e(){var e=t.call(this)||this;return e._listeners=[],e}return r(e,t),e.prototype._doDispose=function(){return this._listeners=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"listenerCount",{get:function(){return this._listeners.length},enumerable:!0,configurable:!0}),e.prototype.addListener=function(t,e){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&(null!=e&&e>=0?this._listeners.splice(e,0,t):this._listeners.push(t)),this},e.prototype.removeListener=function(t){if(null!=t&&this._listeners){var e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}return this},e.prototype.clearListener=function(){this._listeners.length=0},e.prototype.fireEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=Array.prototype.slice.call(arguments,0);r[0]=this;for(var o=0,n=this._listeners.length;o<n;o++){var s=this._listeners[o],a=s[t];a&&a.apply(s,r)}},e.prototype.fireConfirmEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=Array.prototype.slice.call(arguments,0);r[0]=this;for(var o=0,n=this._listeners.length;o<n;o++){var s=this._listeners[o],a=s[t];if(a){var l=a.apply(s,r);if("boolean"==typeof l&&!l)return!1}}return!0},e.prototype.fireMessageEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=Array.prototype.slice.call(arguments,0);r[0]=this;for(var o=0,n=this._listeners.length;o<n;o++){var s=this._listeners[o],a=s[t];if(a){var l=a.apply(s,r);if("string"==typeof l&&l)return l}}return null},e.prototype.fireObjectEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var r=Array.prototype.slice.call(arguments,0);r[0]=this;for(var o=0,n=this._listeners.length;o<n;o++){var s=this._listeners[o],a=s[t];if(a){var l=a.apply(s,r);if(null!=l)return l}}return null},e}(Ct),_e=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],ge=[".","/","-",":"],ye="Z".charCodeAt(0),me="z".charCodeAt(0),be="A".charCodeAt(0),ve="a".charCodeAt(0),we="y".charCodeAt(0),Ce="M".charCodeAt(0),xe="m".charCodeAt(0),Ie="d".charCodeAt(0),Se="H".charCodeAt(0),Ee="h".charCodeAt(0),ke="S".charCodeAt(0),Oe="s".charCodeAt(0),Re=function(t){return t<10?"0"+t:String(t)},Pe=function(t){return t<10?"00"+t:t<100?"0":String(t)},De=function(){function t(t){this._hasAmPm=!1,this.format=t}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){(e=e||t.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(e),this._format=e)},enumerable:!0,configurable:!0}),t.prototype.getText=function(t){if(!this._tokens)return"";for(var e=t instanceof Date?t:new Date(t),i=this._tokens,r="",o=0,n=i.length;o<n;o++){var s=i[o],a=s.length;switch(s.charCodeAt(0)){case we:r+=a>2?e.getFullYear():Re(e.getFullYear()%100);break;case Ce:r+=a>1?Re(e.getMonth()+1):e.getMonth()+1;break;case Ie:r+=a>1?Re(e.getDate()):e.getDate();break;case Se:r+=a>1?Re(e.getHours()):e.getHours();break;case Ee:if(this._hasAmPm){var l=e.getHours();0==l?l=12:l>12&&(l-=12),r+=a>1?Re(l):l}else r+=a>1?Re(e.getHours()):e.getHours();break;case xe:r+=a>1?Re(e.getMinutes()):e.getMinutes();break;case Oe:r+=a>1?Re(e.getSeconds()):e.getSeconds();break;case ve:case be:e.getHours()<12?r+=this._amText:r+=this._pmText;break;case ke:var u=e.getMilliseconds();r+=3==a?Pe(u):2==a?Re(u):u.toString().substr(0,a);break;default:r+=s}}return r},t.prototype.parseDateFormatTokens=function(t){var e=[];if(t)for(var i=t.trim(),r=i.length,o=0;o<r;){var n=i.charAt(o);if(ge.indexOf(n)>=0)e.push(n),o++;else{for(var s=o++;o<r&&i.charAt(o)==n;)o++;if(n=i.substring(s,o),_e.indexOf(n)<0){var a=n.charCodeAt(0);if(a>=be&&a<=ye||a>=ve&&a<=me)throw new Error("Invalid datetime write format: "+t)}e.push(n)}if(o<r&&ft.isWhiteSpace(n=i.charAt(o)))for(e.push(n);o<r&&ft.isWhiteSpace(i.charAt(o));)o++}return e},t.prototype.parse=function(e){if(this._amText="AM",this._pmText="PM",e){var i=e.split(";");if(this._format=i[0]||t.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0,i.length>1&&i[1]){var r=i[1].split(",");r.length>0&&r[0]&&(this._amText=r[0]),r.length>1&&r[1]&&(this._pmText=r[1])}}},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Formatters={},t}(),Te=function(){function t(t){this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),t.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},t.prototype.$_parse=function(t){if(this._falseText=this._trueText=null,t){var e=t.split(/[;\:]/);this._falseText=e[0],e.length>0&&(this._trueText=e[1]),e.length>1&&(this._nullText=e[2])}},t.Formatters={},t}(),Le=function(t){return ft.included(t,"c","f","C","F","a","A")},Me=function(){function t(t){this._groupPos=0,this._replacement="$&,",this.parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._seperator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupSep",{get:function(){return this._groupSep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minDigits",{get:function(){return this._minDigits},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDigits",{get:function(){return this._maxDigits},enumerable:!0,configurable:!0}),t.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._parse(t)},t.prototype.getText=function(t,e){void 0===e&&(e=!0);var i=Number(t);if(isNaN(i))return"";var r=this._minDigits,o=0;if(this._optDecimal){var n=(a=(""+i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0;r=Math.min(Math.max(n,this._minDigits),this._maxDigits)}if(this._round)switch(o=Math.pow(10,r),this._round){case"c":i=Math.ceil(o*i)/o;break;case"f":var s=i.toString().split(".");i=parseFloat(s.length>1?s[0]+"."+s[1].substr(0,r):s[0])}i="a"===this._round?Math.abs(i):i;var a,l=(i=Number(i.toPrecision(15))).toFixed(r);try{!e&&(o=parseFloat(l))===Math.abs(parseFloat(l))&&0===o&&(l=Math.abs(i).toFixed(r))}catch(t){}return this._seperator&&(l=l.replace(".",this._seperator)),this._reg?r?l.replace(this._regDecimal,this._replacement):l.replace(this._reg,this._replacement):l},t.prototype._parse=function(t){if(t&&(t=t.trim()),t){var e=".",i=",";if(t.indexOf(";")>-1){var r=t.split(";");t=r[0],r.length>1&&r[1]&&!Le(r[1])&&(e=r[1]),r.length>2&&r[2]&&!Le(r[2])&&(i=r[2]),this._round=r[3]||r[2]||r[1],this._round=Le(this._round)?this._round.toLowerCase():this._round}this._seperator="."==e?null:e,this._groupSep=","==i?null:i;var o=t.length,n=t.indexOf(".");if(this._optDecimal=t.indexOf("#",n)>0,n>=0){for(var s=n+1;s<o&&"0"==t.charAt(s);s++)this._minDigits++,this._maxDigits++;for(;s<o&&"#"==t.charAt(s);s++)this._maxDigits++;t=t.substr(0,n)}if(t){var a=t.length;","==t.charAt(a-1)&&(this._groupPos=3,t=t.substr(0,a-1))}if(t){var l=t.length,u=!0;for(s=l-1;s>=0;s--){var h=t.charAt(s);if("0"==h&&u);else if(0==this._groupPos&&","==h)this._groupPos=l-s-1;else{if("#"!=h)break;u=!1}}}this._groupPos>0&&(this._replacement="$&"+i,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},t.DEFAULT_FORMAT="#,##0.0",t.Formatters={},t}(),Fe=function(t){function e(e){var i=t.call(this)||this;return i._datetimeWriter=null,i._booleanFormatter=null,i._numberFormatter=null,i.assignFrom(e),i}return r(e,t),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?De.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?Te.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Me.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._rowState},set:function(t){this._rowState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),e}(Ct),Ne=function(){function e(){}return e.prototype.compare=function(e,i,r){return e.dataType==t.ValueType.NUMBER?Number(i)-Number(r):i>r?1:i<r?-1:0},e}(),Ve=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e}(Error),Be=function(t){function e(){return t.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}return r(e,t),e}(Error),Ae=function(e){function i(){var i=e.call(this)||this;return i._subTypeEnabled=!0,i._undoable=!1,i._insertable=!0,i._updatable=!0,i._deletable=!0,i._softDeleting=!1,i._deleteCreated=!1,i._checkStates=!0,i._restoreMode=t.RestoreMode.NONE,i._strictRestore=!1,i._booleanFormat=null,i._datetimeFormat=null,i._baseYear=2e3,i._amText="AM",i._pmText="PM",i._alertClientError=!0,i._throwClientError=!1,i._commitBeforeDataEdit=!1,i._fields=[],i._calcFields=[],i._fieldNames=[],i._fieldMap={},i._defComparer=new Ne,i._comparers=[],i._boolParser=yt.Default,i._dateParser=bt.Default,i._eventLock=0,i._resetLock=0,i._countLock=0,i._clients=[],i}return r(i,e),i.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){}this._fields=this._calcFields=this._fieldNames=this._fieldMap=this._boolParser=this._dateParser=this._comparers=this._clients=this._defComparer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++)i[e].$_resetTypes()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable},set:function(t){this._undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new yt(t):yt.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new pe),this._calculateRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"local",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"immediateUpdate",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarized",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldCount",{get:function(){return this._fields.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boolParser",{get:function(){return this._boolParser},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dateParser",{get:function(){return this._dateParser},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eventLocked",{get:function(){return this._eventLock>0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valuesCallback",{get:function(){return this._valuesCallback},set:function(t){this._valuesCallback=t},enumerable:!0,configurable:!0}),i.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},i.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);e>=0&&this._clients.splice(e,1)}},i.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].cancelDataEditing()},i.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++)e[t].commitDataEditing()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},i.prototype.addField=function(t,e,i){if(this._checkClientState()){var r;this.beginUpdate();try{(r=this.$_internalAddField(t))&&r.$_resetTypes(this)}finally{e&&this._doFieldsReset(),this.endUpdate()}return r}},i.prototype.clearFields=function(){this._checkClientState()&&this._fields.length>0&&(this.$_internalClearFields(),this._doFieldsReset())},i.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var r=this.$_internalAddField(t[e]);r&&r.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},i.prototype.getField=function(t){return this._fields[t]},i.prototype.getFields=function(){return this._fields.slice()},i.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,r=this._fields;i<r.length;i++){var o=r[i];if(o.fieldName==e)return o}return null},i.prototype.getFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].fieldName);return t},i.prototype.getOrgFieldNames=function(){for(var t=[],e=0;e<this._fields.length;e++)t.push(this._fields[e].orgFieldName);return t},i.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},i.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},i.prototype.getFieldIndex=function(t){if("number"==typeof t)return t;if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},i.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},i.prototype.getBaseField=function(t){return t>=0&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},i.prototype.getValueType=function(t){return this._fields[t].dataType},i.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},i.prototype.hasData=function(t){return!1},i.prototype.objectToRow=function(t){var e=[],i=this._valuesCallback;if(i){var r=i.call(this,this.$_handler,t);if(r&&Array.isArray(r))return r.slice()}if(t)for(var o=0,n=this.fieldCount;o<n;o++){var s=this.getOrgFieldName(o);t.hasOwnProperty(s)&&(e[o]=t[s])}return e},i.prototype.canUpdateField=function(e,i){if(i>=0&&i<this._fields.length){if(!this._fields[i].updatable&&e>=0)try{var r=this.getRowState(e);return!r||r==t.RowState.CREATED||r==t.RowState.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},i.prototype.getDataComparer=function(t){return t>=0&&this._comparers[t]},i.prototype.setDataComparer=function(t,e){this._comparers[t]=e||void 0},i.prototype.canSummarize=function(t){return t>=0&&t<this.fieldCount},i.prototype.getDistinctValues=function(e,i,r){return void 0===r&&(r=t.SortDirection.ASCENDING),null},i.prototype.exportToJson=function(){},i.prototype.exportToXml=function(){},i.prototype.canUpdateRow=function(t){return!1},i.prototype.canAppendRow=function(){return!1},i.prototype.canInsertRow=function(t){return!1},i.prototype.canDeleteRow=function(t){return!1},i.prototype.undo=function(){},i.prototype.redo=function(){},i.prototype.clearCommandStack=function(){},i.prototype._convertValues=function(t,e){var i="*"in e&&"*"==e["*"]?t:{};for(var r in e)i[e[r]]=t[r];return i},i.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},i.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new Be;return this._alertClientError&&alert((new Be).message),!1}return!0},i.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new Ve("Invalid field index: "+t)},i.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++)e[t].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},i.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||t>i)throw ft.isDebugging(),new Ve("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t),this._fieldMap[e.fieldName]=t;for(var r=t+1;r<=i;r++)(e=this._fields[r]).$_setIndex(r),this._fieldMap[e.fieldName]=r;return t}return-1},i.prototype.$_addField=function(t,e,i,r){if(!t)throw new Ve("fieldName must be exists.");if(this.getFieldIndex(t)>=0)throw new Ve("fieldName is already exists: "+t);var o=new ce(t,e,i);return r&&o.assignFrom(r),this.$_internalInsertField(this._fields.length,o),o},i.prototype.$_internalAddField=function(e){var i=null;return"string"==typeof e?i=this.$_addField(e,t.ValueType.TEXT,0):e instanceof ce?(i=e.clone(),this.$_internalInsertField(this._fields.length,i)):e&&(i=this.$_addField(e.fieldName,e.dataType||t.ValueType.TEXT,e.length,e)),i},i.prototype._internalCalculateValues=function(t,e){var i=this._calcFields;if(i.length>0){for(var r=[],o=0;o<t.length;o++)r[o]=this.getField(o).readValue(t[o]);o=0;for(var n=i.length;o<n;o++){var s=i[o],a=this._fieldMap[s.fieldName];t[a]=r[a]=s.readValue(s.$_calculateValue(this,this.calculateRuntime,e,s.orgFieldName,this._fieldNames,this.getOrgFieldNames(),r))}}},i.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++)e[t].$_refreshFormats(this)},i.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},i.prototype._getRowValues=function(){return new Array(this.fieldCount)},i.prototype.$_createOutputRows=function(e,i,r){void 0===r&&(r=0);var o=this.fieldCount,n=e.length;i instanceof Fe||(i=new Fe(i));var s=i.nullDateText,a=i.nullText,l=i.nanText;try{for(var u=0;u<o;u++){var h=this.getField(u),c=h.dataType,d=h.orgFieldName,p=void 0,f=void 0,_=void 0,g=void 0,y=void 0,m=void 0;if(c==t.ValueType.DATETIME&&((p=i.datetimeCallback)||(g=i.datetimeWriter)||s))if(p)for(var b=0;b<n;b++)(C=e[b])[d]=p(this.handler,b+r,d,C[d]);else for(b=0;b<n;b++){var v=(C=e[b])[d];C[d]=v?g?g.getText(C[d]):v:s}else if(c==t.ValueType.BOOLEAN&&((f=i.booleanCallback)||(y=i.booleanFormatter)))if(f)for(b=0;b<n;b++)(C=e[b])[d]=f(this.handler,b+r,d,C[d]);else for(b=0;b<n;b++)(C=e[b])[d]=y.formatValue(C[d]);else if(c==t.ValueType.NUMBER&&((_=i.numberCallback)||(m=i.numberFormatter)||l))if(_)for(b=0;b<n;b++)(C=e[b])[d]=_(this.handler,b+r,d,C[d]);else for(b=0;b<n;b++){var w=(C=e[b])[d];C[d]=null==w||isNaN(w)?l:m?m.getText(w):w}else if(null!=a&&null!=a)for(b=0;b<n;b++){var C;w=(C=e[b])[d],C[d]=null==w||null==w?a:w}}}finally{i&&i.dispose()}},i.prototype.$_sortRows=function(t,e,i,r,o){do{var n=r,s=o,a=t[Math.floor((r+o)/2)];do{for(;n<=s&&!(i(e,a,t[n])<=0);)n++;for(;n<=s&&!(i(e,a,t[s])>=0);)s--;if(n<=s){if(n!=s){var l=t[n];t[n]=t[s],t[s]=l}n++,s--}}while(n<=s);r<s&&this.$_sortRows(t,e,i,r,s),r=n}while(r<o)},i.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new bt(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=bt.Default},i.prototype._doCheckStatesChanged=function(){},i.prototype._doRestoreModeChanged=function(t,e){},i.prototype._doFieldsReset=function(){},i.prototype._fireReset=function(){},i.prototype._fireRowCountChanged=function(){},i.prototype._fireRefresh=function(){},i.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent(i.COMMAND_STACK_CHANGED,t,e)},i.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",i}(fe),$e=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.connect=function(t){},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){},e.prototype.setRows=function(){},e.prototype.setRowCount=function(t){},e.prototype.insertRow=function(t){},e.prototype.insertRows=function(t,e){},e.prototype.removeRow=function(t){},e.prototype.removeRows=function(t){},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t,e){},e.prototype.updateRowList=function(t){},e.prototype.setValue=function(t,e){},e.prototype.moveRow=function(t,e){},e.prototype.moveRows=function(t,e,i){},e.prototype.moveRowList=function(t,e){},e.prototype.changeStates=function(t){},e}(Ct),je=function(t){function e(e){var i=t.call(this)||this;return i._tags=[],i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){this._owner=null,this._tags=null,t.prototype._doDispose.call(this)},e.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},e.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].clearRows()},e.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++)e[t].setRows()},e.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].setRowCount(t)},e.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].insertRow(t)},e.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,r=this._tags;i<r.length;i++)r[i].insertRows(t,e)},e.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRow(t)},e.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].removeRows(t)},e.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRow(t)},e.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,r=this._tags;i<r.length;i++)r[i].updateRows(t,e)},e.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++)i[e].updateRowList(t)},e.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,r=this._tags;i<r.length;i++)r[i].setValue(t,e)},e.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,r=this._tags;i<r.length;i++)r[i].moveRow(t,e)},e.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var r=0,o=this._tags;r<o.length;r++)o[r].moveRows(t,e,i)},e.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,r=this._tags;i<r.length;i++)r[i].moveRowList(t,e)},e}(Ct),He=function(){function t(t){this._active=!1,this._exprNode=null,this.criteria=t}return t.prototype.dispose=function(){this._exprNode=null},Object.defineProperty(t.prototype,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?ue.Default.parse(e,t.CAPITAL_INDEXERS):null)},enumerable:!0,configurable:!0}),t.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},t.CAPITAL_INDEXERS=["value","values","len"],t}(),We=function(){function t(e,i){this._filterMode=t.FILTER_AND,this._or=!1,this.load(e),i&&(this.filterMode=i)}return t.prototype.dispose=function(){return this._filters&&this._filters.forEach((function(t,e){t.dispose()})),this._filters=null,null},Object.defineProperty(t.prototype,"filterMode",{get:function(){return this._filterMode},set:function(e){var i=e?e.toLocaleLowerCase():e;i!=this._filterMode&&(this._filterMode=i,this._or=this._filterMode==t.FILTER_OR)},enumerable:!0,configurable:!0}),t.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var r=void 0,o=t[e];o&&("string"==typeof o?r=new He(o):o.criteria&&(r=new He(o.criteria))),r&&this._filters.push(r)}},t.prototype.prepare=function(t,e){t.prepare(e)},t.prototype.select=function(t,e,i){var r=this._filters,o=r.length;if(this._or){for(var n=0;n<o;n++)if(1==r[n].select(t,e,i))return!0;return!1}for(n=0;n<o;n++)if(0==r[n].select(t,e,i))return!1;return!0},t.FILTER_AND="and",t.FILTER_OR="or",t}(),Ge=function(t){function e(){var e=t.call(this)||this;return e._ds=null,e._fieldCount=0,e._row=-1,e._values=null,e}return r(e,t),e.prototype._doDispose=function(){this._ds=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setRow=function(t,e){this._row=t,this._values=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(t===e.ID_ROW)return this._row;throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new It("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._values[i]}throw new It("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,r){switch(t){case e.ID_VALUE:case e.ID_VALUES:var o=this.getField(i,r);return this._values[o]}throw new It("Invalid identifier indexer: "+t)},e.prototype.getField=function(t,e){var i=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new It("Data field is not exits:"+t);return i},e.ID_ROW=0,e.ID_VALUE=1,e.ID_VALUES=2,e.IDENTS={row:e.ID_ROW,value:e.ID_VALUE,values:e.ID_VALUES},e}(Dt),Ue=function(t){function e(){var e=t.call(this)||this;return e._tags=new je(e),e._filterRuntime=new Ge,e._commandListeners=[],e}return r(e,t),e.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterRuntime",{get:function(){return this._filterRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletedCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},enumerable:!0,configurable:!0}),e.prototype.addTag=function(t){this._tags.add(t)},e.prototype.removeTag=function(t){this._tags.remove(t)},e.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new We(null,t))},e.prototype.setFilters=function(t,e){!t||t instanceof We?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new We(t,e)},e.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new Ve("row is out of range: "+t);for(var e={},i=0,r=this.fieldCount;i<r;i++){var o=this.getOrgFieldName(i),n=this.getValue(t,i);e[o]=n}return e},e.prototype.compareValues=function(t,e,i){return 0},e.prototype.compareTexts=function(t,e,i,r){return 0},e.prototype.compareNumbers=function(t,e,i){return 0},e.prototype.compareBools=function(t,e,i){return 0},e.prototype.compareObjects=function(t,e,i){return 0},e.prototype.summarize=function(t,e){return!1},e.prototype.summarizeRange=function(t,e,i){return!1},e.prototype.copyRows=function(t,e,i,r){},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.isHiddenRow=function(t){return!1},e.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners?this._commandListeners.indexOf(t):-1;e>=0&&this._commandListeners.splice(e,1)},e.prototype.findRow=function(t,e,i){},e.prototype._doFieldsReset=function(){this._fireReset()},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e.prototype.fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onDataProvderDisposed")},e.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent("onDataProviderReset"):this._resetLock++},e.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onDataProviderRefresh")},e.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent("onDataProviderRowCountChanged"):this._countLock++},e.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onDataProviderDataLoadComplated")},e.prototype.fireRowInserting=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowInserting",t,e)},e.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowInserted",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsInserted=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsInserted",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowRemoving",t)},e.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowRemoved",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsRemoving",t)},e.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsRemoved",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowUpdating=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowUpdating",t,e)},e.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowUpdated",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowsUpdated=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderRowsUpdated",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent("onDataProviderRowListUpdated",t),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowMoving",t,e)},e.prototype.fireRowMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowMoved",t,e)},e.prototype.fireRowsMoving=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowsMoving",t,e,i)},e.prototype.fireRowsMoved=function(t,e,i){this._eventLock<=0&&this.fireEvent("onDataProviderRowsMoved",t,e,i)},e.prototype.fireRowListMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderRowListMoving",t,e)},e.prototype.fireRowListMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowListMoved",t,e)},e.prototype.fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onDataProviderValueChanging",t,e,i)},e.prototype.fireValueChanged=function(t,e){this._eventLock<=0&&(this.fireEvent("onDataProviderValueChanged",t,e),this.fireEvent("onDataProviderDataChanged"))},e.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStateChanged",t)},e.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderStatesChanged",t)},e.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onDataProviderStatesCleared")},e.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent("onDataProviderRestoreRows",t)},e.prototype.fireRowHided=function(t,e){this._eventLock<=0&&this.fireEvent("onDataProviderRowHided",t,e)},e}(Ae),ze=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],Ye=[".","/","-",":"],qe="0".charCodeAt(0),Ke="9".charCodeAt(0),Xe=[31,28,31,30,31,30,31,31,30,31,30],Qe=["am","pm","AM","PM","Am","Pm","aM","pM"];!function(t){t[t.YEAR=0]="YEAR",t[t.HALF=1]="HALF",t[t.QUARTER=2]="QUARTER",t[t.MONTH=3]="MONTH",t[t.WEEK=4]="WEEK",t[t.DAY=5]="DAY",t[t.HOUR=6]="HOUR"}(de||(de={}));var Je=function(){function t(t){this._baseYear=2e3,this.format=t}return t.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),r=parseInt(e[1])-1,o=parseInt(e[2]);return i==(t=new Date(i,r,o)).getFullYear()&&r==t.getMonth()&&o==t.getDate()?t:null},t.getDateProperty=function(t,e){if(!t)return null;switch(e){case de.YEAR:return t.getFullYear();case de.HALF:return t.getMonth()>5?2:1;case de.QUARTER:return Math.floor(t.getMonth()/3);case de.MONTH:return t.getMonth();case de.WEEK:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case de.DAY:return t.getDate();case de.HOUR:return t.getHours()}},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),t.prototype.getDate=function(t){var e;if(t=t.trim()){for(var i=this.parseDateFormatTokens(this._format),r=this.parseDateValueTokens(t,this._amText,this._pmText),o=i.length,n=r.length,s=0,a=1,l=1,u=0,h=0,c=0,d=0,p=0,f=0,_=0;f<o&&_<n;){var g=i[f],y=r[_];switch(g.charAt(0)){case"L":var m=String(y);for(f++;f<o&&"E"!=(t=i[f]);){var b=m?parseInt(m.substr(0,t.length)):-1;switch(m=m.substr(t.length),t.charAt(0)){case"Y":case"y":s=Math.max(0,b);break;case"M":a=b>=0?b:1;break;case"D":case"d":l=b>=0?b:1;break;case"H":case"h":u=Math.max(0,b);break;case"m":h=Math.max(0,b);break;case"s":c=Math.max(0,b)}f++}break;case"Y":case"y":s=parseInt(y);break;case"M":a=parseInt(y);break;case"D":case"d":l=parseInt(y);break;case"H":case"h":u=parseInt(y);break;case"m":h=parseInt(y);break;case"s":c=parseInt(y);break;case"a":(t=String(y))&&(t=t.toLowerCase(),this._amText&&t==this._amText.toLowerCase()||"am"==t?d=12:(this._pmText&&t==this._pmText.toLowerCase()||"pm"==t)&&(p=12))}f++,_++}if(s<100&&s>=0&&(s+=this._baseYear),s<0||s>9999)return null;if(ft.included(a,1,3,5,7,8,10,12)){if(l<1||l>31)return null}else if(ft.included(a,4,6,9,11)){if(l<1||l>30)return null}else{if(2!=a)return null;if(l>29)return null;if(29==l&&(s%4!=0||s%100==0)&&s%400!=0)return null}if(u<0||u>24)return null;if((d>0||p>0)&&u>12)return null;if(h<0||h>59)return null;if(c<0||c>59)return null;d>0?u%=12:p>0&&(u=u%12+12),e=new Date(s,a-1,l,u,h,c)}return e},t.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},t.prototype.getText=function(t){var e=t;e instanceof Date||(e=new Date(t));for(var i=this.parseDateFormatTokens(this._format),r=i.indexOf("a")>=0||i.indexOf("A")>=0,o="",n=0,s=i.length;n<s;n++){var a=i[n],l=a.length;switch(a.charAt(0)){case"L":break;case"Y":case"y":o+=l>2?e.getFullYear():ft.pad(e.getFullYear()%100);break;case"M":o+=l>1?ft.pad(e.getMonth()+1):e.getMonth()+1;break;case"D":case"d":o+=l>1?ft.pad(e.getDate()):e.getDate();break;case"H":o+=l>1?ft.pad(e.getHours()):e.getHours();break;case"h":if(r){var u=e.getHours();0==u?u=12:u>12&&(u-=12),o+=l>1?ft.pad(u):u}else o+=l>1?ft.pad(e.getHours()):e.getHours();break;case"m":o+=l>1?ft.pad(e.getMinutes()):e.getMinutes();break;case"s":o+=l>1?ft.pad(e.getSeconds()):e.getSeconds();break;case"A":case"a":e.getHours()<12?o+=this._amText:o+=this._pmText;break;default:o+=a}}return o},t.prototype.daysOfYear=function(t){for(var e=0,i=0;i<t.getMonth();i++)e+=Xe[i];if(t.getMonth()>=2){var r=t.getFullYear();(r%400==0||r%4==0&&r%100!=0)&&e++}return e+t.getDate()},t.prototype.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},t.prototype.toExcelDate=function(t){var e=(1e3*(60*(60*t.getHours()+t.getMinutes())+t.getSeconds())+t.getMilliseconds())/864e5,i=this.daysOfPriorYears(t.getFullYear())+this.daysOfYear(t)+e;return i>=60&&i++,i},t.prototype.parseDateFormatTokens=function(t){var e=[],i=t&&t.trim();if(i){for(var r=i.length,o=0;o<r;){var n=i.charAt(o);if(Ye.indexOf(n)>=0)e.push(n),o++;else{for(var s=o++;o<r&&i.charAt(o)==n;)o++;if(n=i.substring(s,o),ze.indexOf(n)<0)throw new Error("Invalid datetime read format: "+t);e.push("A"==n?"a":n)}if(o<r&&ft.isWhiteSpace(n=i.charAt(o)))for(e.push(" ");o<r&&ft.isWhiteSpace(i.charAt(o));)o++}var a=[],l=0;for(r=e.length,o=0;o<r;o++)"a"==(n=e[o])||ze.indexOf(n)<0?(l>1&&a.push("E"),a.push(n),l=0):(1==l&&a.splice(a.length-2,0,"L"),a.push(n),l++);e=a}return e},t.prototype.parseDateValueTokens=function(t,e,i){var r=[],o=t.trim();if(o){var n=Qe.slice();e&&n.push(e),i&&n.push(i);for(var s=o.length,a=0;a<s;){var l=o.charAt(a);if(Ye.indexOf(l)>=0)r.push(l),a++;else if(l.charCodeAt(0)>=qe&&l.charCodeAt(0)<=Ke){for(var u=a++;a<s&&o.charCodeAt(a)>=qe&&o.charCodeAt(a)<=Ke;)a++;l=o.substring(u,a),r.push(l)}else{for(var h=-1,c=0;c<n.length;c++)if(o.indexOf(n[c],a)==a){h=c;break}if(h<0)throw"Invalid date value: "+o;r.push(n[c]),a+=n[c].length}if(a<s&&ft.isWhiteSpace(l=o.charAt(a)))for(r.push(" ");a<s&&ft.isWhiteSpace(o.charAt(a));)a++}}return r},t.prototype.validateDateFormat=function(t){if(t=t&&t.trim()){var e=this.parseDateFormatTokens(t),i=e.indexOf("a")>=0;if(i&&e.indexOf("H")>=0)throw"Invalid datetime read format - 'H'\uc640 'a'\uac00 \uac19\uc774 \uc874\uc7ac\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: "+t;if(e.indexOf("h")>=0&&!i)throw"Invalid datetime read format - 'h'\uac00 \uc788\uc73c\uba74 'a'\uac00 \ubc18\ub4dc\uc2dc \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4: "+t}},t.prototype.parse=function(e){if(this._amText="am",this._pmText="pm",this._baseYear=2e3,e){var i=e.split(";");if(this._format=i[0]?i[0]:t.DEFAULT_FORMAT,this.validateDateFormat(this._format),i.length>1&&i[1]&&(this._baseYear=parseInt(i[1])),i.length>2&&i[2]){var r=i[2].split(",");this._amText=r[0]?r[0]:"am",r.length>1&&(this._pmText=r[1]?r[1]:"pm")}}},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Default=new t(t.DEFAULT_FORMAT),t}(),Ze=function(t){function e(e){var i=t.call(this)||this;return i.fields=[],i.values=[],i.startIndex=0,i.wrap=!0,i.select=!0,i.allFields=!0,i.caseSensitive=!1,i.partialMatch=!1,i.compareCallback=null,e&&i.extend(e),i}return r(e,t),e}(Ct),ti=function(t){function e(e){var i=t.call(this)||this;return i.fields=null,i.value=null,i.startIndex=0,i.startFieldIndex=0,i.wrap=!0,i.select=!0,i.caseSensitive=!1,i.partialMatch=!1,i.columns=null,i.compareCallback=null,e&&i.extend(e),i}return r(e,t),e}(Ct),ei=(function(t){function e(e){return t.call(this,e)||this}r(e,t)}(Error),function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)},e}(Ct)),ii=(function(t){function e(){return t.call(this)||this}r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)}}(ei),function(t){function e(e){var i=t.call(this)||this;return i._commands=[],i._current=-1,i._undoing=!1,i._redoing=!1,i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){this._owner=null,this._commands=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._commands.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._current>=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands.length>this._current+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._redoing},enumerable:!0,configurable:!0}),e.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},e.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,r=this._commands[i];this._redoing=!0;try{e=r.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},e.prototype.execute=function(t){if(t){var e=this._current++;this._commands[this._current]=t,this.$_shrink(this._current+1);var i=void 0;try{i=t.execute()}catch(t){throw this.$_shrink(e+1),this._current=e,t}return this._changed(),i}},e.prototype.flush=function(){var t=this._commands.length;if(t>0){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},e.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},e.prototype.$_shrink=function(t){if(t>=0&&t<this._commands.length){for(var e=this._commands.length-1;e>=t;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},e}(fe)),ri=function(t){function e(e){var i=t.call(this)||this;return i._ds=e,i}return r(e,t),e.prototype._doDispose=function(){this._ds=null,this._save=null,t.prototype._doDispose.call(this)},e.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},e.prototype.undo=function(){this._doUndo(this._ds,this._save)},e.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},e.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},e.prototype._cloneRow=function(t){if(ft.isArray(t))return t.slice();if(t){var e={};for(var i in t)e[i]=t[i];return e}},e.prototype._cloneValues=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),t){var r=t.length,o=[];i<0&&(i=r),e=Math.max(0,e);for(var n=Math.min(r,e+i),s=e;s<n;s++){var a=t[s];if(ft.isArray(a))o.push(a.slice());else if(a){var l={};for(var u in a)l[u]=a[u];o.push(l)}}return o}return null},e}(ei),oi=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(ri),ni=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(ii),si=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._row=i,n._field=r,n._value=o,n}return r(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)},e}(oi),ai=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._row=i,n._values=n._cloneRow(r),n._strict=o,n}return r(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)},e}(oi),li=function(t){function e(e,i,r){var o=t.call(this,e)||this;return o._row=i,ft.isArray(r)||(r=e.objectToRow(r)),o._values=r.slice(),o}return r(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},e.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},e.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},e}(oi),ui=function(t){function e(e,i){var r=t.call(this,e)||this;return r._row=i,r}return r(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},e}(oi),hi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._row=i,n._state=r,n._force=o,n}return r(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},e.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)},e}(oi),ci=function(t){function e(e,i,r){var o=t.call(this,e)||this;return o._row=i,o._state=r,o}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},e.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)},e}(oi),di=function(e){function i(t,i,r){var o=e.call(this,t)||this;return o._deleteRows=i,o._rowEvents=r,o}return r(i,e),i.prototype._doRun=function(t){var e={rows:[]};e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e},i.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},i.prototype._doUndo=function(e,i){var r=i.rows,o=i.values,n=i.states,s=[];if(o)for(var a=0;a<r.length;a++)e.$_internalInsertRow(a,o[a],i.row,!0);if(n)for(a=0;a<n.length;a++)n[a]&&(e._yieldState(a,n[a]),n[a]!==t.RowState.NONE&&s.push(a));e._yieldOrgValues(i.rows),(r.length>0||n.length>0)&&e._fireRefresh()},i}(oi),pi=function(t){function e(e,i,r,o,n,s,a){var l=t.call(this,e)||this;return l._row=i,l._values=l._cloneValues(r,o,n),l._start=0,l._count=l._values.length,l._rowEvents=s,l._strict=a,l}return r(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var r=e.values,o=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,r[s],o[a],n[a])}t._fireRefresh()}},e}(oi),fi=function(t){function e(e,i,r){var o=t.call(this,e)||this;return o._rows=i.slice(),o._rowEvents=r,o}return r(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){var i=e.rows,r=e.statedRows;if(!(i.length<1&&r.length<1)){for(var o=e.rowSaves,n=e.states,s=0;s<i.length;s++){var a=i[s],l=o[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<r.length;s++)a=r[s],t._yieldState(a,n[s]);for(t._fireRefresh(),s=0;s<i.length;s++){a=i[s];var u=o[s];t._yieldCommandStates(a,u.outer)}}},e}(oi),_i=function(t){function e(e,i,r,o,n,s){var a=t.call(this,e)||this;return a._row=i,a._values=a._cloneValues(r,o,n),a._start=0,a._count=a._values.length,a._rowEvents=s,a}return r(e,t),e.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},e.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},e.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var r=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,r)}},e}(oi);function gi(t,e){return t&&t.getAttribute(e)}var yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.csvToArray=function(t,e,i,r,o,n){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===o&&(o=!1),void 0===n&&(n=",");for(var s=[],a=[],l=e.length,u=0,h=[],c=!1,d=!1;u<l;){var p=e.charAt(u);'"'==p?c?d&&'"'==e.charAt(u+1)?(h.push(p),u++):d?(d=!1,!o&&h.push(p)):h.push(p):(c=d=!0,!o&&h.push(p)):d||p!=n&&"\r"!=p&&"\n"!=p?(c=!0,h.push(p)):(p==n?a.push(h.join("")):"\r"!=p&&"\n"!=p||(a.push(h.join("")),s.push(a),a=[],"\n"==e.charAt(u+1)&&u++),h=[],c=!1),u++}d&&h.splice(0,0,'"'),h.length>0&&a.push(h.join("")),a.length>0&&s.push(a),i>0&&(r<=0?s.splice(0,i):s=s.splice(i,r));for(var f=t.getFields(),_=f.length,g=_>0,y=0,m=s.length;y<m;y++){a=s[y],g&&a.length>_&&(a.length=_);for(var b=0;b<_;b++)a[b]=f[b].readValue(a[b])}return s},e.xmlToRow=function(t,e,i){for(var r=t.childNodes,o=e.length,n=new Array(o),s=0,a=r.length;s<a;s++){var l,u=r[s];if((l=i.indexOf(u.tagName))>=0){var h=u.nodeValue;null==h&&u.hasChildNodes()&&(h=ft.included(u.childNodes[0].nodeType,3,4)?u.childNodes[0].nodeValue:void 0),null!=h&&(n[l]=h)}}for(s=0;s<o;s++)if(void 0===n[s]){var c=gi(t,i[s]);null!=c&&(n[s]=c)}return n},e.xmlToArray=function(t,i,r,o){void 0===r&&(r=0),void 0===o&&(o=-1);var n=null,s=e.xmlToRow,a=i?i.length:0;if(a&&(r=Math.max(0,r),o<0&&(o=a),o=Math.min(a-r,o))){var l=t.getFields(),u=t.getOrgFieldNames();l.length,n=new Array(o);for(var h=0;h<o;h++){var c=s(i[h+r],l,u);n[h]=c}}return n},e}(Ct),mi=function(t){function e(e,i,r){var o=t.call(this,e)||this;return o._row=i,o._newRow=r,o}return r(e,t),e.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)},e}(oi),bi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._row=i,n._count=r,n._newRow=o,n}return r(e,t),e.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)},e}(oi),vi=function(t){function e(e,i,r){var o=t.call(this,e)||this;o._rows=i,o._newRows=i.slice();for(var n=r-i[0],s=0;s<i.length;s++)o._newRows[s]+=n;return o}return r(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_moveRowList(this._rows,this._newRows[0]),e},e.prototype._doRedo=function(t,e){return t.$_moveRowList(this._rows,this._newRows[0])},e.prototype._doUndo=function(t,e){return t.$_moveRowList(this._newRows,this._rows[0])},e}(oi),wi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._rows=i.slice(),n._fields=r.slice(),n._value=o,n}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rows,this._fields,this._value,e),e},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rows,this._fields,this._value,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var r=e.values,o=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,r[s],o[a],n[a])}t._fireRefresh()}},e}(oi),Ci=function(e){function i(i,r,o,n,s){void 0===o&&(o=!1),void 0===n&&(n=null),void 0===s&&(s=t.RowState.NONE);var a=e.call(this,i)||this;return a._newCount=r,a._oldCount=i.rowCount,a._fillDefaults=o,a._defaultValues=n,a._rowState=s,a}return r(i,e),i.prototype._doRun=function(t){var e={};return t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,e),e},i.prototype._doRedo=function(t,e){t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},i.prototype._doUndo=function(t,e){if(this._oldCount<this._newCount)t.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var i=e.rows,r=e.statedRows;if(i.length<1&&r.length<1)return;for(var o=e.rowSaves,n=e.states,s=0;s<i.length;s++){var a=i[s],l=o[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<r.length;s++)a=r[s],t._yieldState(a,n[s]);for(t._fireRefresh(),s=0;s<i.length;s++){a=i[s];var u=o[s];t._yieldCommandStates(a,u.outer)}}},i}(oi),xi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._values=ft.deepCopy(i),n._rowEvents=r,n._strict=o,n}return r(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows2(this._values,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows2(this._values,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var r=e.values,o=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,r[s],o[a],n[a])}t._fireRefresh()}},e}(oi),Ii=function(e){function i(t,i){var r=e.call(this)||this;return r._points=[],r._nextPoint=0,r._values=[],r._rowIds=[],r._rowStates=[],r._orgValues=null,r._needRestore=!1,r._deletedCount=0,r._nextRowId=0,r._hiddenIds=[],r.$_handler=i,t&&(r.undoable=!0,r._commands=new ni(r)),r}return r(i,e),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,this._hiddenIds=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!0,configurable:!0}),i.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isSummarized",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deletedCount",{get:function(){return this._deletedCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!0,configurable:!0}),i.prototype.getRowId=function(t){return this._rowIds[t]},i.prototype.$_internalInsertField=function(t,i){if((t=e.prototype.$_internalInsertField.call(this,t,i))>=0){for(var r=this._values.length,o=0;o<r;o++)(n=this._values[o])&&n.splice(t,0,void 0);if(this._orgValues)for(r=Math.min(r,this._orgValues.length),o=0;o<r;o++){var n;(n=this._orgValues[o])&&n.splice(t,0,void 0)}}return t},i.prototype.$_internalClearFields=function(){e.prototype.$_internalClearFields.call(this),this.$_clearRows()},i.prototype.setRowCount=function(e,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=t.RowState.NONE),this.undoable?this._commands.execute(new Ci(this,e,i,r,o)):this.$_setRowCount(e,i,r,o)},i.prototype.$_setRowCount=function(e,i,r,o,n){if(void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=t.RowState.NONE),void 0===n&&(n=null),this._checkClientState()){var s=this._values,a=s.length,l=Math.max(0,e);if(l!=a){var u=this._rowIds,h=this._rowStates;if(this.refreshFieldFormats(),n&&(n.rows=[],n.rowSaves=[],n.statedRows=[],n.states=[]),l>a&&(i||r)){var c=this.fieldCount,d=r;if(!d||d instanceof Array||(d=this.objectToRow(d)),d&&d.length<1&&(d=null),i||d)for(var p=d?Math.min(d.length,c):0,f=a;f<l;f++){var _=[];if(i)for(var g=0;g<c;g++){var y=this.getField(g);_[g]=void 0!==y.defaultValue?y.defaultValue:y.nullValue}if(p>0)for(g=0;g<p;g++){var m=d[g];void 0!==m&&(_[g]=this.getField(g).readValue(m))}s[f]=_}}else if(l>a)for(f=a;f<l;f++)s[f]=[];else if(l<a){if(n)for(f=l;f<a;f++){var b=f;n.statedRows.push(b),n.states.push(h[f]),n.rows.push(b),n.rowSaves.push(this._keepRow(b))}if(this._deletedCount>0)for(f=a-1;f>=l;f--)gt(h[f])&&this._deletedCount--}for(o=this.checkStates&&o?o:t.RowState.NONE,s.length=u.length=h.length=l,this._orgValues&&this._orgValues.length>l&&(this._orgValues.length=l),f=a;f<l;f++)h[f]=o,u[f]=this._nextRowId++;for(f=this._hiddenIds.length-1;f>=0;f--)g=this._hiddenIds[f],u.indexOf(g)<0&&this._hiddenIds.splice(f,1);this.tags.setRowCount(l),this._fireRefresh(),this._fireRowCountChanged()}}},i.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},i.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},i.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var r=this.checkStates,o=this.filters,n=this.filterRuntime,s=void 0;if(t&&(s=t.length)>0&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),o){this._values.length=this._rowIds.length=this._rowStates.length=i,o.prepare(n,this);for(var a=s,l=0,u=0,h=e;h<a&&l<i;h++)(c=t[h])instanceof Array||(c=this.objectToRow(c)),o.select(n,u++,c)&&this.$_internalSetRow(l++,c,r);this._values.length=this._rowIds.length=this._rowStates.length=l}else if((a=Math.min(s,e+i))>e)for(this._values.length=this._rowIds.length=this._rowStates.length=a-e,l=0,h=e;h<a;h++){var c;(c=t[h])instanceof Array||(c=this.objectToRow(c)),this.$_internalSetRow(l++,c,r)}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},i.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=yi.xmlToArray(this,t,e,i),this.setRows(t))},i.prototype.insertRows=function(t,e,i,r,o){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===o&&(o=!1),this.undoable?this._commands.execute(new _i(this,t,e,i,r,o)):this.$_insertRows(t,e,i,r,o)},i.prototype.$_insertRows=function(t,e,i,r,o){if(this._checkClientState()&&e){var n=e.length;if(!(n<1)&&0!=(r=r<0?n:Math.min(n,r))){if(t<0||t>this._values.length)throw new Ve("row is out of bounds:"+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(n,i+r);if(o)for(var a=t,l=i;l<s;l++)(u=e[l])instanceof Array||(u=this.objectToRow(u)),this.fireRowInserting(a,u)&&(this.$_internalInsertRow(a,u,!0),this.fireRowInserted(a),this._fireRowCountChanged(),a++);else{for(a=t,l=i;l<s;l++,a++){var u;(u=e[l])instanceof Array||(u=this.objectToRow(u)),this.$_internalInsertRow(a,u,!1)}this.tags.insertRows(t,r=s-i),this.fireRowsInserted(t,r),this._fireRowCountChanged()}}}},i.prototype.appendRows=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===r&&(r=!1),this.insertRows(this.rowCount,t,e,i,r)},i.prototype.insertRowsFrom=function(t,e,i,r){for(var o=[],n=0,s=i;n<s.length;n++){var a=s[n];o.push(t.getRowObject(a))}if(e)for(var l=i.length-1;l>=0;l--)o[l]=this._convertValues(o[l],e);this.insertRows(r,o)},i.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},i.prototype.insertXmlRows=function(t,e,i,r,o){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===o&&(o=!1),this._checkClientState()&&(e=yi.xmlToArray(this,e,i,r),this.insertRows(t,e,0,-1,o))},i.prototype.appendXmlRows=function(t,e,i,r){void 0===r&&(r=!1),this.insertXmlRows(this.rowCount,t,e,i,r)},i.prototype.fillValue=function(t,e,i){if(this.undoable)return this._commands.execute(new wi(this,t,e,i));this.$_fillValue(t,e,i)},i.prototype.updateRows=function(t,e,i,r,o,n){if(void 0===n&&(n=!1),this.undoable)return this._commands.execute(new pi(this,t,e,i,r,n,o));this.$_updateRows(t,e,i,r,o,n)},i.prototype.updateRows2=function(t,e,i){if(this.undoable)return this._commands.execute(new xi(this,t,i,e));this.$_updateRows2(t,e,i)},i.prototype.updateXmlRows=function(t,e,i,r,o){void 0===o&&(o=!1),this._checkClientState()&&(e=yi.xmlToArray(this,e,i,r),this.updateRows(t,e,0,-1,o))},i.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},i.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new si(this,t,e,i)):this.$_setValue(t,e,i)},i.prototype.$_setValue=function(e,i,r){if(!this._checkClientState())return!1;this.$_checkRowIndex(e),this._checkFieldIndex(i);var o=this.getField(i),n=this._rowStates[e];if(!o)throw new Ve("Invalid field: "+i);if(!o.updatable&&(n==t.RowState.NONE||n==t.RowState.UPDATED))return!1;var s,a=this._values[e],l=o.readValue(r);if(a&&o.equalValues(l,a[i]))return!1;this.refreshFieldFormat(o);var u=this.checkStates&&(n==t.RowState.NONE||!n);return a||(this._values[e]=a=new Array(this.fieldCount)),u&&this._orgValues&&(s=a.concat()),a[i]=l,this._internalCalculateValues(a,e),u?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,t.RowState.UPDATED,!0)):this._needRestore&&this.restoreState(e),this.tags.setValue(e,i),this.fireValueChanged(e,i),!0},i.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new ai(this,t,e,i)):this.$_updateRow(t,e,i)},i.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},i.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,r=Math.max(0,t),o=e<0?i-1:Math.min(i-1,e);if(r>=i||o<r)return[];for(var n=o-r+1,s=new Array(n),a=0;a<n;a++)s[a]=this._values[a+r]?this._values[a+r].slice():[];return s},i.prototype.getRowObject=function(t,e){return this.$_checkRowIndex(t),this.$_getRowObject(t,e)},i.prototype.getRowObjects=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1);var r=this._values.length,o=Math.max(0,t),n=e<0?r-1:Math.min(r-1,e);if(o>=r||n<o)return[];for(var s=n-o+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+o,i);return a},i.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e,null==t?void 0:t.rowState);return t&&this.$_createOutputRows([i],t,e),i},i.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var r=this.getRowObjects(e,i,null==t?void 0:t.rowState);return t&&this.$_createOutputRows(r,t,e),r},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var r=this._values.length;if(i=i<0?r-1:Math.min(r-1,i),(e=Math.max(0,e))>=r||i<e)return null;for(var o=new Array(i-e+1),n=e;n<=i;n++){var s=this._values[n];o[n-e]=s&&s[t]}return o},i.prototype.hasData=function(t){return t>=0&&t<this._values.length&&void 0!==this._values[t]},i.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new li(this,t,e)):this.$_insertRow(t,e)},i.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new Ve("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e))&&(ft.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),!0)},i.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},i.prototype.removeRow=function(e){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[e]){case t.RowState.CREATED:if(!this.deleteCreated)return this._commands.execute(new ci(this,e,t.RowState.CREATE_AND_DELETED));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:break;default:return this._commands.execute(new ci(this,e,t.RowState.DELETED))}return this._commands.execute(new ui(this,e))}return this.$_removeRow(e)},i.prototype.$_removeRow=function(e){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(e),this.softDeleting&&this.checkStates){switch(this._rowStates[e]){case t.RowState.CREATED:this.deleteCreated?this.$_deleteRow(e):this.$_changeRowState(e,t.RowState.CREATE_AND_DELETED,!0,!0,!0);break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:break;default:this.$_changeRowState(e,t.RowState.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(e)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new fi(this,t,e)):this.$_removeRows(t,e,null)},i.prototype.$_removeRows=function(e,i,r){if(this._checkClientState()){var o,n=this.deleteCreated;if(e&&!((o=e.length)<1)){if(e=e.slice(),r&&(r.rows=[],r.rowSaves=[],r.statedRows=[],r.states=[]),this.softDeleting&&this.checkStates){for(var s=i?null:[],a=o;a--;){var l=e[a],u=this._rowStates[l],h=!1;switch(this.$_checkRowIndex(l),u){case t.RowState.CREATED:n||(r&&(r.statedRows.push(l),r.states.push(u)),h=this.$_changeRowState(l,t.RowState.CREATE_AND_DELETED,i,!1,!0),e.splice(a,1));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:e.splice(a,1);break;default:r&&(r.statedRows.push(l),r.states.push(u)),h=this.$_changeRowState(l,t.RowState.DELETED,i,!1,!0),e.splice(a,1)}s&&h&&s.push(l)}i||s&&s.length>0&&this.fireRowStatesChanged(s)}if((o=e.length)>0){if(o>1&&e.sort((function(t,e){return t-e})),r)for(a=0;a<o;a++)l=e[a],r.rows.push(l),r.rowSaves.push(this._keepRow(l));if(i)for(a=o;a--;)l=e[a],this.$_checkRowIndex(l),this.$_deleteRow(l);else if(this.fireRowsRemoving(e)){for(a=o;a--;)l=e[a],u=this._rowStates[l],this.$_checkRowIndex(l),this.$_internalRemoveRow(l),gt(u)&&this._deletedCount--;this.tags.removeRows(e),this.fireRowsRemoved(e),this._fireRowCountChanged()}}}}},i.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new mi(this,t,e)):void this.$_moveRow(t,e)},i.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},i.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new bi(this,t,e,i)):void this.$_moveRows(t,e,i)},i.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i)))},i.prototype.moveRowList=function(t,e){if(t&&!(t.length<1))return t=t.sort((function(t,e){return t-e})),this.undoable?this._commands.execute(new vi(this,t,e)):this.$_moveRowList(t,e)},i.prototype.$_moveRowList=function(t,e){if(this._checkClientState()){var i=t[0];return this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)?(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e),!0):void 0}},i.prototype.getRowState=function(e){return this.$_checkRowIndex(e),this._rowStates[e]||t.RowState.NONE},i.prototype.$_checkDeleted=function(t,e){gt(e)?this._deletedCount++:gt(t)&&!gt(e)&&this._deletedCount--},i.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new hi(this,t,e,i)):this.$_setRowState(t,e,i)},i.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},i.prototype.setRowStates=function(t,e,i,r){var o;if(void 0===r&&(r=!1),this._checkClientState()&&t&&!((o=t.length)<1))if(r)for(var n=0;n<o;n++){var s=t[n];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{var a=[],l=this._rowStates;for(n=0;n<o;n++){var u=l[s=t[n]];this.$_checkRowIndex(s),e!=u&&(l[s]=e,a.push(s),this.$_checkDeleted(u,e),this._orgValues&&this.prepareOrgValues(s,u,e))}a.length>0&&this.fireRowStatesChanged(a)}},i.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new di(this,t,e)):this.$_clearRowStates(t,e)},i.prototype.$_clearRowStates=function(e,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=!1),this._checkClientState()){for(var o=[],n=r?[]:null,s=r?[]:null,a=this._rowStates.length;a--;){var l=this._rowStates[a];switch(n&&(n[a]=l),s&&(s[a]=null),l){case t.RowState.CREATE_AND_DELETED:case t.RowState.DELETED:if(e){if(o.push(a),s){var u=this._keepRow(a);u&&(s[a]=u.values)}i?this.$_deleteRow(a):(this.$_internalRemoveRow(a),this.tags.removeRow(a),this._deletedCount--)}else this.$_changeRowState(a,t.RowState.NONE,i),this._deletedCount--;break;default:this.$_changeRowState(a,t.RowState.NONE,i)}}return this.$_resetOrgValues(),i||(o.length>0&&(this.fireRowsRemoved(o),this._fireRowCountChanged()),this.fireRowStatesCleared()),r?{rows:o,states:n,values:s}:void 0}},i.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},i.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,r=this._rowStates.length;i<r;i++)this._rowStates[i]==t&&e.push(i);return e},i.prototype.getAllStateRows=function(){for(var e={},i=e[t.RowState.CREATED]=[],r=e[t.RowState.UPDATED]=[],o=e[t.RowState.DELETED]=[],n=e[t.RowState.CREATE_AND_DELETED]=[],s=0,a=this._rowStates.length;s<a;s++){var l=this._rowStates[s];l===t.RowState.CREATED?i.push(s):l===t.RowState.UPDATED?r.push(s):l===t.RowState.DELETED?o.push(s):l===t.RowState.CREATE_AND_DELETED&&n.push(s)}return e},i.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,r=0;if(e&&i)if(e>1)for(var o=0;o<i;o++){var n=this._rowStates[o];t.indexOf(n)>=0&&r++}else for(n=t[0],o=0;o<i;o++)this._rowStates[o]===n&&r++;return r},i.prototype.$_restoreState=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var r=this._values[e],o=this.strictRestore,n=0,s=this.fieldCount;n<s;n++){var a=r.length>n?r[n]:void 0,l=i.length>n?i[n]:void 0,u=this.getField(n);if(o){if(!u.equalValues(a,l))return!1}else if(!u.sameValues(a,l))return!1}return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,r=t.length;i<r;i++){var o=t[i];o>=0&&o<this._values.length&&this.$_restoreState(o)&&e.push(o)}else for(i=0,r=this._values.length;i<r;i++)this.$_restoreState(i)&&e.push(i);e.length>0&&this.fireRowStatesChanged(e)}},i.prototype.$_restoreUpdatedRow=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var r=this._values[e],o=0,n=Math.min(i.length,this.fieldCount);o<n;o++)r[o]=i[o];return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.$_restoreRow=function(t,e,i,r){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=r&&r.slice())},i.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,r=t.length;i<r;i++){var o=t[i];o>=0&&o<this._values.length&&this.$_restoreUpdatedRow(o)&&e.push(o)}else for(i=0,r=this._values.length;i<r;i++)this.$_restoreUpdatedRow(i)&&e.push(i);e.length>0&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},i.prototype.getUpdatedCells=function(e){var i=this.restoreMode;if(!this._orgValues||i!=t.RestoreMode.AUTO&&i!=t.RestoreMode.EXPLICIT)return null;if(null==e&&(e=this.getStateRows(t.RowState.UPDATED)),null==e)return null;for(var r=[],o=0,n=e.length;o<n;o++){var s=e[o],a=s>=0&&this._orgValues&&s<this._orgValues.length?this._orgValues[s]:null;if(a){for(var l=this._values[s],u=this.strictRestore,h=[],c=0,d=this.fieldCount;c<d;c++){var p=l.length>c?l[c]:void 0,f=a.length>c?a[c]:void 0,_=this.getField(c);_.calculated||(u?_.equalValues(p,f)||h.push({fieldName:this.getOrgFieldName(c),oldValue:a[c],newValue:l[c]}):_.sameValues(p,f)||h.push({fieldName:this.getOrgFieldName(c),oldValue:a[c],newValue:l[c]}))}h.length>0&&r.push({__rowId:s,updatedCells:h})}}return r},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),t.length<1||e.length<t.length)return-1;for(var r=[],o=[],n=this._values,s=0,a=t.length;s<a;s++){var l=void 0;(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))>=0&&l<this.fieldCount&&r.indexOf(l)<0&&(r.push(l),o.push(e[s]))}var u=r.length;for(s=0;s<u;s++)r[s]=this.getField(r[s]);for(s=i,a=n.length;s<a;s++){var h=n[s],c=!0;for(l=0;l<u;l++)if(!r[l].equalValues(o[l],h[l])){c=!1;break}if(c)return s}return-1},i.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,r=e?e.length:0;if(i>0&&r>0){for(var o=new Array(r),n=0;n<r;n++){var s=e[n]&&e[n].concat();o[n]=s}var a=t?this._rowStates.concat():null,l=this._nextPoint++;return this._points.push({id:l,data:o,states:a}),l}return-1}},i.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);var r=i.states;r&&(this._rowStates=r.concat());break}}},i.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--)e[i].data=null,e.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},i.prototype.canUpdateRow=function(e){return!(this._rowStates[e]===t.RowState.NONE&&!this.updatable)},i.prototype.canAppendRow=function(){return!0},i.prototype.canInsertRow=function(t){return!0},i.prototype.canDeleteRow=function(t){return!0},i.prototype.getDistinctValues=function(e,i,r){if(void 0===i&&(i=-1),void 0===r&&(r=t.SortDirection.ASCENDING),i=arguments.length>1?i:-1,this._checkFieldIndex(e),i<0&&(i=this._values.length),i>0){for(var o=this.getField(e).dataType,n=[],s=[],a=void 0,l=0,u=this.rowCount;l<u;l++)switch(a=this._values[l]?this._values[l][e]:void 0,o){case t.ValueType.NUMBER:null!=a&&isNaN(a)||n.indexOf(a)<0&&n.push(a);break;case t.ValueType.DATE:case t.ValueType.DATETIME:a?s.indexOf(a.getTime())<0&&(s.push(a.getTime()),n.push(a)):s.indexOf(void 0)<0&&(s.push(void 0),n.push(void 0));break;case t.ValueType.OBJECT:default:n.indexOf(a)<0&&n.push(a)}return r!==t.SortDirection.NONE&&(n=ft.included(o,t.ValueType.DATETIME,t.ValueType.DATE,t.ValueType.NUMBER)?n.sort((function(t,e){return t-e})):n.sort(),r===t.SortDirection.DESCENDING&&(n=n.reverse())),n.slice(0,i)}return null},i.prototype.compareValues=function(t,e,i,r){var o=this._values[e],n=this._values[i];if(o===n)return 0;var s=o?o[t]:null,a=n?n[t]:null;return null==s?null==a?0:-1:null==a||(s=r?String(s).toLowerCase():s)>(a=r?String(a).toLowerCase():a)?1:s<a?-1:0},i.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},i.prototype.compareNumbers=function(t,e,i){var r=this._values[e],o=this._values[i];if(r===o)return 0;var n=r?r[t]:NaN,s=o?o[t]:NaN;return isNaN(n)?isNaN(s)?0:-1:isNaN(s)||n>s?1:n<s?-1:0},i.prototype.compareDates=function(t,e,i){var r=this._values[e],o=this._values[i];if(r===o)return 0;var n=r?r[t]:null,s=o?o[t]:null;return n instanceof Date?s instanceof Date?n>s?1:n<s?-1:0:1:s instanceof Date?-1:0},i.prototype.compareBools=function(t,e,i){var r=this._values[e],o=this._values[i];if(r===o)return 0;var n=!!r&&Boolean(r[t]),s=!!o&&Boolean(o[t]);return n&&!s?1:!n&&s?-1:0},i.prototype.compareObjects=function(t,e,i){var r=this._values[e],o=this._values[i];if(r===o)return 0;var n=r?r[t]:null,s=o?o[t]:null;return n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0},i.prototype.summarize=function(t,e){var i=this.rowCount;if(i<1)return!1;for(var r=[],o=0;o<i;o++)r.push(o);return this.summarizeRange(t,r,e)},i.prototype.summarizeRange=function(e,i,r){if(null==e||null==i)return!1;e.clear();var o=i.length;if(o<1)return!1;for(var n,s,a,l=this.getField(e.field).dataType===t.ValueType.NUMBER,u=0,h=e.field,c=0;c<o;){var d=i[c++];null==(y=(g=this._values[d])&&g[h])||l&&(!l||isNaN(y))||(l&&(n=u?n+y:y),(l||""!=y)&&u++,(null==s||y<s)&&(s=y),(null==a||y>a)&&(a=y))}if(e.count=o,u>0)if(e.sum=n,e.min=s,e.max=a,l&&(e.avg=n/o),e.dataCount=u,l&&(e.dataAvg=n/u),r&&l){for(var p=0,f=e.avg,_=0;_<o;_++){var g,y;d=i[_],null!=(y=(g=this._values[d])&&g[h])&&(p+=Math.pow(y-f,2))}e.varsp=p/o,e.vars=p/(o-1)}else e.varsp=NaN,e.vars=NaN;return!0},i.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},i.prototype._yieldRow=function(t,e,i){void 0===i&&(i=!0),this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),i&&this._yieldCommandStates(t,e.outer)},i.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},i.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},i.prototype._keepState=function(t){return this._rowStates[t]},i.prototype._yieldState=function(t,e){this._rowStates[t]=e},i.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},i.prototype._yieldOrgValues=function(t){if(this._orgValues)if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},i.prototype.$_checkRowIndex=function(t){if(isNaN(t)||t<0||t>=this._values.length)throw ft.isDebugging(),new Ve("row is out of bounds: "+t)},i.prototype.$_resetOrgValues=function(){var e=this.restoreMode;this._orgValues=this.checkStates&&e!=t.RestoreMode.NONE?[]:null,this._needRestore=this._orgValues&&e==t.RestoreMode.AUTO},i.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),r=new Array(i),o=0;o<i;o++)r[o]=this.getField(o).readValue(t[o]);return this._internalCalculateValues(r,e),r},i.prototype.$_internalSetRow=function(e,i,r){var o=this.arrayToRow(i,e);this._values[e]=o,this._rowIds[e]=this._nextRowId++,this.checkStates&&(this._rowStates[e]=t.RowState.NONE)},i.prototype.$_internalInsertRow=function(e,i,r){var o=this.arrayToRow(i,e),n=e==this._values.length;n?(this._values.push(o),this._rowIds.push(this._nextRowId++)):(this._values.splice(e,0,o),this._rowIds.splice(e,0,this._nextRowId++)),r&&this.tags.insertRow(e),n?this._rowStates.push(this.checkStates?t.RowState.CREATED:t.RowState.NONE):(this._rowStates.splice(e,0,this.checkStates?t.RowState.CREATED:t.RowState.NONE),this._orgValues&&this._orgValues.splice(e,0,void 0))},i.prototype.$_updateRow=function(t,e,i){if(this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e))&&(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),!0)},i.prototype.$_updateRows=function(e,i,r,o,n,s,a){if(void 0===a&&(a=null),this._checkClientState()&&i){var l=i.length;if(!(l<1)&&0!=(o=o<0?l:Math.min(l,o))){r=Math.max(0,r),this.refreshFieldFormats();var u=this.rowCount,h=Math.min(l,r+o);if(!(h<=r))if(a&&(a.rows=[],a.values=[],a.states=[],a.orgValues=[]),s)for(var c=e,d=r;d<h&&c<u;d++,c++){var p=i[d];!this._values[c]&&(this._values[c]=new Array(this.fieldCount)),this.fireRowUpdating(c,p)&&(a&&(a.rows.push(c),a.values.push(this._values[c].slice()),a.states.push(this._rowStates[c]),a.orgValues.push(this._orgValues&&this._orgValues[c])),this.$_internalUpdateRow(c,p,n,!0,!0),this.fireRowUpdated(c))}else{var f=[];for(c=e,d=r;d<h&&c<u;d++,c++)this._rowStates[c]==t.RowState.NONE&&f.push(c),!this._values[c]&&(this._values[c]=new Array(this.fieldCount)),a&&(a.rows.push(c),a.values.push(this._values[c].slice()),a.states.push(this._rowStates[c]),a.orgValues.push(this._orgValues&&this._orgValues[c])),p=i[d],this.$_internalUpdateRow(c,p,n,!1,!1);f.length>0&&this.fireRowStatesChanged(f),this.tags.updateRows(e,o=h-r),this.fireRowsUpdated(e,o)}}}},i.prototype.$_updateRows2=function(e,i,r,o){var n=this;if(this._checkClientState()&&e)if(this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]),Object.keys(e).forEach((function(t){return n.$_checkRowIndex(parseInt(t))})),r)for(var s in e){var a=Number(s),l=e[s];!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),this.fireRowUpdating(a,l)&&(o&&(o.rows.push(a),o.values.push(this._values[a].slice()),o.states.push(this._rowStates[a]),o.orgValues.push(this._orgValues&&this._orgValues[a])),this.$_internalUpdateRow(a,l,i,!0,!0),this.fireRowUpdated(a))}else{var u=[],h=[];for(var s in e)a=Number(s),this._rowStates[a]==t.RowState.NONE&&u.push(a),!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),o&&(o.rows.push(a),o.values.push(this._values[a].slice()),o.states.push(this._rowStates[a]),o.orgValues.push(this._orgValues&&this._orgValues[a])),l=e[s],this.$_internalUpdateRow(a,l,i,!1,!1),h.push(a);u.length>0&&this.fireRowStatesChanged(u),this.tags.updateRowList(h),this.fireRowListUpdated(h)}},i.prototype.$_fillValue=function(e,i,r,o){if(void 0===o&&(o=null),this._checkClientState()&&e&&e.length&&i&&i.length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);for(var n=[],s=0,a=e;s<a.length;s++){var l=a[s];this._rowStates[l]==t.RowState.NONE&&n.push(l),!this._values[l]&&(this._values[l]=new Array(this.fieldCount)),o&&(o.rows.push(l),o.values.push(this._values[l].slice()),o.states.push(this._rowStates[l]),o.orgValues.push(this._orgValues&&this._orgValues[l]));for(var u=this._values[l].slice(),h=0,c=i;h<c.length;h++)u[c[h]]=r;this.$_internalUpdateRow(l,u,!1,!1,!1)}n.length>0&&this.fireRowStatesChanged(n),this.tags.updateRowList(e),this.fireRowListUpdated(e)}},i.prototype.$_internalUpdateRow=function(e,i,r,o,n){var s,a=this.getFields(),l=ft.isArray(i),u=Math.min(a.length,l?i.length:a.length),h=this._values[e],c=this._rowStates[e],d=this.checkStates&&(c==t.RowState.NONE||!c);h||(this._values[e]=h=new Array(this.fieldCount)),d&&this._orgValues&&(s=ft.deepCopy(h));for(var p=!1,f=0;f<u;f++){var _=a[f];if((_.updatable||c==t.RowState.CREATED||c==t.RowState.CREATE_AND_DELETED)&&(l||i.hasOwnProperty(_.orgFieldName))){var g=l?i[f]:i[_.orgFieldName];r&&void 0===g||(p=!this._needRestore||p||(r?!_.equalValues(h[f],_.readValue(g)):!_.sameValues(h[f],_.readValue(g))),h[f]=_.readValue(g))}}p&&this._internalCalculateValues(h,e),d&&p?(s&&(this._orgValues[e]=s),this.$_changeRowState(e,t.RowState.UPDATED,o)):this._needRestore&&this.restoreState(e),n&&this.tags.updateRow(e)},i.prototype.$_changeRowState=function(e,i,r,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),this.checkStates||o){var s=this._rowStates[e];if((i=i||t.RowState.NONE)!=s)return this._rowStates[e]=i,n&&(!gt(s)&&gt(i)?this._deletedCount++:gt(s)&&!gt(i)&&this._deletedCount--),r&&this.fireRowStateChanged(e),!0}return!1},i.prototype.restoreState=function(e){if(this._rowStates[e]===t.RowState.UPDATED){var i=this._orgValues[e];if(i){for(var r=this._values[e],o=this.strictRestore,n=0,s=this.fieldCount;n<s;n++){var a=r.length>n?r[n]:void 0,l=i.length>n?i[n]:void 0;if(o){if(!this.getField(n).equalValues(a,l))return!1}else if(!this.getField(n).sameValues(a,l))return!1}return this._rowStates[e]=t.RowState.NONE,!0}}return!1},i.prototype.prepareOrgValues=function(e,i,r){r==t.RowState.UPDATED?this._orgValues[e]=this._values[e]?this._values[e].concat():[]:i==t.RowState.UPDATED&&this._orgValues[e]&&(this._orgValues[e]=void 0)},i.prototype.$_changeRowStateEx=function(t,e,i,r,o){var n=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,r,o)&&(this._orgValues&&this.prepareOrgValues(t,n,e),i&&this.fireRowStateChanged(t),!0)},i.prototype.$_getRowObject=function(t,e){var i={},r=this._values[t];if(r){for(var o=0;o<this.fieldCount;o++)i[this.getOrgFieldName(o)]=r[o];e&&(i.__rowState=this.getRowState(t))}return i},i.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var e=this._rowStates[t];return this.$_internalRemoveRow(t),gt(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},i.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];this._hiddenIds.indexOf(e)>=0&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},i.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],r=this._rowIds[t],o=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,r),this._rowStates.splice(e,0,o),this._orgValues&&this._orgValues.length>t&&(i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},i.prototype.$_internalMoveRows=function(t,e,i){for(var r=this._values.splice(t,e),o=this._rowIds.splice(t,e),n=this._rowStates.splice(t,e),s=0,a=r.length;s<a;s++)this._values.splice(i+s,0,r[s]),this._rowIds.splice(i+s,0,o[s]),this._rowStates.splice(i+s,0,n[s]);if(this._orgValues&&this._orgValues.length>t)for(s=0,a=(r=this._orgValues.splice(t,e)).length;s<a;s++)this._orgValues.splice(i+s,0,r[s])},i.prototype.$_internalMoveRowList=function(t,e){for(var i=[],r=[],o=[],n=t.length-1;n>=0;n--){var s=t[n];i.push(this._values.splice(s,1)[0]),r.push(this._rowIds.splice(s,1)[0]),o.push(this._rowStates.splice(s,1)[0])}i=i.reverse(),r=r.reverse(),o=o.reverse();for(var a=0,l=t.length;a<l;a++)this._values.splice(e+a,0,i[a]),this._rowIds.splice(e+a,0,r[a]),this._rowStates.splice(e+a,0,o[a]);if(this._orgValues&&this._orgValues.length>t[0]){i=[];for(var u=t.length-1;u>=0;u--)i=this._orgValues.splice(t[u],1)[0];for(i=i.reverse(),a=0,l=t.length;a<l;a++)this._orgValues.splice(e+a,0,i[a])}},i.prototype.$_searchDataRow=function(e,i,r,o,n){var s=this.rowCount;if(s<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;for(var l=!r||r.allFields,u=r&&r.caseSensitive,h=r&&r.partialMatch,c=null,d=[],p=r.compareCallback||ft.compareTextValue,f=0;f<a;f++)d[f]=this.getField(e[f]).dataType;o=Math.max(0,o),n=Math.min(s-1,n);for(var _=o;_<=n;_++){var g=!0;for(f=0;f<a;f++){var y=this.getValue(_,e[f]),m=this.getOrgFieldName(e[f]);switch(d[f]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[f]instanceof Date)g=p.call(this.$_handler,i[f],y,u,h,_,m);else{if(!c){var b=/[.]/.test(i[f])?"yyyy.MM.dd":/[/]/.test(i[f])?"yyyy/MM/dd":/[-]/.test(i[f])?"yyyy-MM-dd":"yyyyMMdd";c=new Je(b)}g=p.call(this.$_handler,i[f],y?c.getText(y):y,u,h,_,m)}break;default:g=p.call(this.$_handler,i[f],y,u,h,_,m)}if(g&&!l)return _;if(!g&&l)break}if(g)return _}return-1},i.prototype.searchDataRow=function(t){var e=-1;t instanceof Ze||(t=new Ze(t));var i=t.fields,r=t.values,o=t.startIndex;if(i&&i.length>0&&r&&r.length>0){for(var n=i.length,s=[],a=0;a<n;a++){var l=parseFloat(i[a]);if(isNaN(l)){var u=this.getFieldIndex(i[a]);u>=0&&s.push(u)}else s.push(l)}s.length>0&&(n=this.rowCount,(e=(o=Math.max(0,o))<n?this.$_searchDataRow(s,r,t,o,n-1):-1)<0&&t.wrap&&o>0&&(e=this.$_searchDataRow(s,r,t,0,o-1)))}return e},i.prototype.$_searchData=function(e,i,r,o,n,s){var a=this.rowCount;if(a<1)return null;for(var l=r&&r.caseSensitive,u=r&&r.partialMatch,h=this.fieldCount,c=e.length,d=null,p=[],f=0;f<h;f++)p[f]=this.getField(f).dataType;o=Math.max(0,o),n=Math.min(a-1,n),(s=Math.max(0,s))>=e.length&&(o++,s=0);for(var _=r.compareCallback||ft.compareTextValue,g=o;g<=n;g++)for(f=g>o?0:s;f<c;f++){var y=e[f];if(y>=0&&y<h){var m=this.getValue(g,y),b=!1,v=this.getOrgFieldName(y);switch(p[y]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)b=_.call(this.$_handler,i,m,l,u,g,v);else{if(!d){var w=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";d=new Je(w)}b=_.call(this.$_handler,i,m?d.getText(m):m,l,u,g,v)}break;default:b=_.call(this.$_handler,i,m,l,u,g,v)}if(b)return{dataRow:g,fieldIndex:y,searchFieldIndex:f,fieldName:v}}}return null},i.prototype.searchData=function(t){t instanceof ti||(t=new ti(t));var e=null,i=t.fields,r=t.value,o=Math.max(0,t.startIndex),n=Math.max(0,t.startFieldIndex);if(!i||i.length<1){i=[];for(var s=this.getFields(),a=0;a<s.length;a++)i.push(s[a].orgFieldName)}if(i&&i.length>0&&null!=r){var l,u,h=i.length,c=[];for(l=0;l<h;l++)u=parseFloat(i[l]),isNaN(u)?c.push(this.getFieldIndex(i[l])):c.push(u);c.length>0&&(!(e=o<(h=this.rowCount)?this.$_searchData(c,r,t,o,h-1,n):null)&&t.wrap&&o>0&&(e=this.$_searchData(c,r,t,0,o-1,0)),e&&(e.fieldName=this.getOrgFieldName(e.fieldIndex)))}return e},i.prototype.isDataChanged=function(e,i){if(this._rowStates[e]!==t.RowState.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(e),this._checkFieldIndex(i),this._orgValues[e]){var r=this._orgValues[e][i],o=this.getValue(e,i),n=this.getField(i);return n&&!n.sameValues(r,o)}return!1},i.prototype.$_hideRows=function(t,e){if(null!=t){for(var i=ft.isArray(t)?t:[t],r=[],o=this._hiddenIds.length,n=0,s=i.length;n<s;n++){var a=this.getRowId(i[n]);if(null!=a)if(r.push(a),e)this._hiddenIds.indexOf(a)<0&&this._hiddenIds.push(a);else{var l=this._hiddenIds.indexOf(a);l>=0&&this._hiddenIds.splice(l,1)}}this._hiddenIds.length!==o&&this.fireRowHided(r,e)}},i.prototype.hideRows=function(t){this.$_hideRows(t,!0)},i.prototype.showRows=function(t){this.$_hideRows(t,!1)},i.prototype.clearHiddenRows=function(){this._hiddenIds.length>0&&(this._hiddenIds=[],this.fireRowHided([],!1))},i.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var r=this._rowIds.indexOf(this._hiddenIds[e]);r>=0&&t.push(r)}return t.sort((function(t,e){return t-e})),t},i.prototype.isHiddenRow=function(t){var e=this._rowIds[t];return this._hiddenIds.indexOf(e)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenIds.length},enumerable:!0,configurable:!0}),i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(Ue),Si=function(t){function e(e){var i=t.call(this)||this;return i._tags=new Array,i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},e.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},e.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},e.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},e.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},e.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},e.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},e.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},e.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)},e}(Ct),Ei=function(){function t(){}return t.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},t.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},t.getNodeValue=function(t){return t.firstChild.nodeValue},t.getAttr=function(t,e){return t.getAttribute(e)},t.setAttr=function(t,e,i){t.setAttribute(e,i)},t.addChild=function(t,e,i){var r=t.createElement(i);return e.appendChild(r),r},t.addChildWithAttr=function(t,e,i,r,o){var n=t.createElement(i);return n.setAttribute(r,o),e.appendChild(n),n},t.addChildWithValue=function(t,e,i,r){var o=t.createElement(i);return o.nodeValue=r,e.appendChild(o),o},t.parseXml=function(t){var e=null;try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}catch(i){if(e)throw i;e=(new window.DOMParser).parseFromString(t,"text/xml")}return e},t}();function ki(t,e){var i=[];if(t){var r=t.childNodes;if(r)for(var o=0,n=r.length;o<n;o++){var s=r[o];s.tagName===e&&i.push(s)}}return i}var Oi,Ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var r=e.split("."),o=0;o<r.length;o++){var n=r[o]&&r[o].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(s>0&&a>s){var l=n.substring(0,s),u="$"!=l?i[l]:i;if(Array.isArray(u)){l=n.substring(s+1,a);var h=parseInt(l);i=h>=0&&h<u.length?u[h]:null}else i=null}else"$"!=n&&(i=i[n]);if(!i)break}}return Array.isArray(i)?i:null},e.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var r=e.split("."),o=0;o<r.length;o++){var n=r[o]&&r[o].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(s>0&&a>s){var l=n.substring(0,s);(i=ki(i?i[0]:t,l))&&(l=n.substring(s+1,a),i=i[parseInt(l)])}else i=ki(i?i[0]:t,n);if(!i)break}}return i},e}(Ct);(Oi=t.DataFillMode||(t.DataFillMode={})).SET="set",Oi.APPEND="append",Oi.INSERT="insert",Oi.UPDATE="update";var Pi,Di,Ti=function(e){function i(i){var r=e.call(this)||this;if(r.fillMode=t.DataFillMode.SET,r.fillPos=0,r.count=-1,r.rootArray=!0,r.rows="row",r.start=0,r.delimiter=",",r.quoted=!1,r.parentId=0,r.childrenField=null,r.treeField=null,r.iconField=null,r.needSorting=!1,r.noStates=!1,i){for(var o in i.hasOwnProperty("append")&&(r.fillMode=t.DataFillMode.APPEND),i.hasOwnProperty("fillMode")&&(r.fillMode=i.fillMode),i.hasOwnProperty("fillPos")&&(r.fillPos=i.fillPos),i.hasOwnProperty("count")&&(r.count=i.count),i.hasOwnProperty("rootArray")&&(r.rootArray=i.rootArray),i.hasOwnProperty("rows")&&(r.rows=i.rows),i.hasOwnProperty("start")&&(r.start=i.start),i.hasOwnProperty("delimiter")&&(r.delimiter=i.delimiter),i.hasOwnProperty("quoted")&&(r.quoted=i.quoted),i)void 0!==i[o]&&(r[o]=i[o]);r.parentId=i.parentId||i.parent,r.childrenField=i.childrenField||i.children,r.treeField=i.treeField||i.tree,r.iconField=i.iconField||i.icon,r.needSorting=i.needSorting||i.sorting}return r}return r(i,e),i}(Ct),Li=function(e){function i(t){var i=e.call(this)||this;return i._provider=t,i}return r(i,e),i.prototype._doDispose=function(){this._provider=null},i.prototype.load=function(t,e,i){var r=new Ti(i);if(this._checkEmpty(e,r))return 0;var o=this._provider.checkStates;r.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,r);case"xml":return this._loadXml(e,r);case"csv":return this._loadCsv(e,r)}}finally{this._provider.checkStates=o,this._provider.fireDataLoadComplated()}},i.prototype._loadJson=function(e,i){"string"==typeof e&&(e=JSON.parse(e));var r=null;if(i.rootArray&&(r=ft.isArray(e)?e:null),r||(r=Ri.extractJson(e,i.rows)),r){var o=i.fillPos,n=i.start,s=i.count;switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendRows(r,n,s);break;case t.DataFillMode.INSERT:this._provider.insertRows(o,r,n,s);break;case t.DataFillMode.UPDATE:this._provider.updateRows(o,r,n,s,!1);break;case t.DataFillMode.SET:default:this._provider.setRows(r,n,s)}return r.length}return this._fillEmpty(i),0},i.prototype._loadXml=function(e,i){if("string"==typeof e&&(e=Ei.parse(e)),e&&e.documentElement){var r=i.fillPos,o=i.start,n=i.count,s=i.rows,a=Ri.extractXml(e.documentElement,s);switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendXmlRows(a,o,n);break;case t.DataFillMode.INSERT:this._provider.insertXmlRows(r,a,o,n);break;case t.DataFillMode.UPDATE:this._provider.updateXmlRows(r,a,o,n);break;case t.DataFillMode.SET:default:this._provider.setXmlRows(a,o,n)}return a.length}return this._fillEmpty(i),0},i.prototype._loadCsv=function(e,i){var r=i.fillPos,o=i.start,n=i.count,s=i.quoted,a=i.delimiter,l=yi.csvToArray(this._provider,e,o,n,s,a);if(l&&(n=l.length)>0){switch(i.fillMode){case t.DataFillMode.APPEND:this._provider.appendRows(l,0,n);break;case t.DataFillMode.INSERT:this._provider.insertRows(r,l,0,n);break;case t.DataFillMode.UPDATE:this._provider.updateRows(r,l,0,n,!1);break;case t.DataFillMode.SET:default:this._provider.setRows(l,0,n)}return l.length}return this._fillEmpty(i),0},i.prototype._fillEmpty=function(e){e.fillMode===t.DataFillMode.SET&&this._provider.setRows(null)},i.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)},i}(Ct),Mi=function(t){function e(e,i){var r=t.call(this)||this;return r._rowCount=0,r._ds=e,r._rootRow=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._ds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertedRows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertedCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),e.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},e.prototype._createRow=function(t,e,i){return this._ds.createRow(i,isNaN(i[e])?-1:i[e],i[t],!1)},e.prototype._createRow2=function(t,e,i){return this._ds.createRow(i,e,t,!1)},e.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},e.prototype._addRow=function(t,e,i,r,o){var n=this._createRow(i,r,o);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},e.prototype._addRow2=function(t,e,i,r,o){var n=this._createRow2(i,r,o);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},e}(Ct),Fi=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype._loadData=function(t,e,i,r,o,n){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],u=new Array(t.length),h=0;h<a;h++)if(l[h]=h,Array.isArray(t[h])){if(Array.isArray(t[h]))for(var c=u[h]=new Array(s.fieldCount),d=0,p=s.fieldCount;d<p;d++)c[d]=t[h][d]}else u[h]=this.provider.objectToRow(t[h]);r&&this.$_sortRows(l,u,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,u,i,o,n)}finally{s.endUpdate(!1)}return this.insertedCount},e.prototype.$_sortRows=function(t,e,i,r,o){function n(t,r){var o=e[t][i],n=e[r][i];return o==n?0:o<n?-1:1}do{var s=r,a=o,l=t[Math.floor((r+o)/2)];do{for(;!(n(l,t[s])<=0);)s++;for(;!(n(l,t[a])>=0);)a--;if(s<=a){if(s!=a){var u=t[s];t[s]=t[a],t[a]=u}s++,a--}}while(s<=a);r<a&&this.$_sortRows(t,e,i,r,a),r=s}while(r<o)},e.prototype.$_buildTree=function(t,e,i,r,o,n){function s(e,i,o,n){for(var s=n[r];i!=t;){var a=i.getValue(r);if(e.parentCallback){if(e.parentCallback(a,s))return i}else if(0==s.indexOf(a))return i;i=i.parent}return t}var a=e[0],l=this._createRow(o,n,i[a]),u=s(this,t,0,i[a]);if(u._insertChild(u.count,l,!0,!0),this._rowAdded(t,l),e.length>1)for(var h=e.length,c=l,d=1;d<h;d++)a=e[d],l=this._createRow(o,n,i[a]),(u=s(this,c,0,i[a]))._insertChild(u.count,l,!0,!0),this._rowAdded(t,l),c=l},e}(Mi),Ni=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.load=function(t,e,i,r,o,n){return this._loadData(e,t,i,r,o,n)},e}(Fi),Vi=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.load=function(t,e,i,r,o,n){var s=yi.csvToArray(this.provider,e);return this._loadData(s,t,i,r,o,n)},e}(Fi),Bi=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.load=function(t,e,i,r,o){if(this._prepareLoad(t),e){var n=Ri.extractJson(e,i);if(n&&n.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,n,i,r,o)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.load2=function(t,e,i,r,o,n){if(this._prepareLoad(t),e){var s=Ri.extractJson(e,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,s,r,o,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.$_buildJsonTree=function(t,e,i,r,o,n){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var u=l.length,h=0,c=a.length;h<c;h++){for(var d=a[h],p=new Array(u),f=0;f<u;f++){var _=l[f];d.hasOwnProperty(_)&&(p[f]=d[_])}var g=i._addRow(e,s,o,n,p);if(d.hasOwnProperty(r)){var y=d[r];Array.isArray(y)&&y.length>0&&t(i,g,y,l)}}}(this,e,i,s)},e.prototype.$_buildJsonTree2=function(t,e,i,r,o,n){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var u=l.length,h=0,c=a.length;h<c;h++){for(var d=a[h],p=new Array(u),f=0;f<u;f++){var _=l[f];d.hasOwnProperty(_)&&(p[f]=d[_])}var g=i._addRow2(e,s,d[o],isNaN(d[n])?-1:d[n],p);if(d.hasOwnProperty(r)){var y=d[r];Array.isArray(y)&&y.length>0&&t(i,g,y,l)}}}(this,e,i,s)},e}(Mi),Ai=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.load=function(t,e,i,r,o){if(this._prepareLoad(t),e){var n="string"==typeof e?Ei.parseXml(e):e;if(n){var s=Ri.extractXml(n.documentElement,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,s,i,r,o)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},e.prototype.$_buildXmlTree=function(t,e,i,r,o,n){!function t(i,s,a,l,u){for(var h=0,c=a.length;h<c;h++){var d=a[h],p=yi.xmlToRow(d,l,u),f=i._addRow(e,s,o,n,p),_=Ri.extractXml(d,r);_&&_.length>0&&t(i,f,_,l,u)}}(this,e,i,t.getFields(),t.getOrgFieldNames())},e}(Fi),$i=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e}(ri),ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(ii),Hi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._row=i,n._values=n._cloneRow(r),n._strict=o,n}return r(e,t),e.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},e.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},e.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)},e}($i),Wi=function(e){function i(t){var i=e.call(this)||this;return i._children=null,i._descendantCount=0,i._rowId=t&&t._nextRowId++,i}return r(i,e),i.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,r=t;i<r.length;i++){var o=r[i];e.push(o.rowId)}return e},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowId",{get:function(){return this._rowId},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"provider",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return-1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children?this._children.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children?this._children.concat():null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var r=0,o=e.count;r<o;r++){var n=e.getChild(r);i.push(n),t(n,i)}}(this,t),t}return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&e.rowId>=0;)t.push(e),e=e.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return t.RowState.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return null},enumerable:!0,configurable:!0}),i.prototype.getChild=function(t){if(t>=0){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},i.prototype.getChildObjects=function(t,e,i,r,o,n){void 0===n&&(n=-1);var s=this._children;if(s){var a=[];e=e||"rows",i=i||"iconIndex";for(var l=0,u=s.length;l<u;l++){var h=s[l],c=h.getObject();r&&(c.__rowId=h._rowId),o&&(c.__rowState=h.rowState),t&&0!==n&&(c[e]=h.getChildObjects(t,e,i,r,o,n-1)),c[i]=h.iconIndex,a.push(c)}return a}return null},i.prototype.$_createTreeOutputRows=function(e,i,r){var o=[];!function t(e,i,r){for(var o=0,n=e.length;o<n;o++){var s=e[o];i.push(e[o]),r&&s[r]&&s[r].length&&t(s[r],i,r)}}(e,o,r);var n,s=this.provider,a=s.fieldCount,l=o.length;i instanceof Fe||(i=new Fe(i));for(var u=i.nullDateText,h=i.nullText,c=i.nanText,d=this.provider.handler,p=0;p<a;p++){var f=s.getField(p),_=f.orgFieldName,g=void 0,y=void 0;if(f.dataType==t.ValueType.DATETIME&&((g=i.datetimeCallback)||(y=i.datetimeWriter)||null!=u&&null!=u))if(g)for(var m=0;m<l;m++)(n=o[m])[_]=g(d,n._rowId,_,n[_]);else for(m=0;m<l;m++){var b=(n=o[m])[_];n[_]=b?y?y.getText(n[_]):b:u}else if(f.dataType==t.ValueType.BOOLEAN&&((g=i.booleanCallback)||(y=i.booleanFormatter)))if(g)for(m=0;m<l;m++)(n=o[m])[_]=g(d,n._rowId,_,n[_]);else for(m=0;m<l;m++)(n=o[m])[_]=y.formatValue(n[_]);else if(f.dataType==t.ValueType.NUMBER&&((g=i.numberCallback)||(y=i.numberFormatter)||null!=c&&null!=c))if(g)for(m=0;m<l;m++)(n=o[m])[_]=g(d,n._rowId,_,n[_]);else for(m=0;m<l;m++){var v=(n=o[m])[_];n[_]=null==v||isNaN(v)?c:y?y.getText(v):v}else if(null!=h&&null!=h)for(m=0;m<l;m++)v=(n=o[m])[_],n[_]=null==v||null==v?h:v}for(var w=0,C=o.length;w<C;w++)delete o[w]._rowId},i.prototype.getOutput=function(t,e){if(t){var i=this.getObject();return i&&(i[e||"iconIndex"]=this.iconIndex,i._rowId=this._rowId,t.rowState&&(i.__rowState=this.rowState),this.$_createTreeOutputRows([i],t)),i}return null},i.prototype.getChildOutputObjects=function(t,e,i,r){var o=this.getChildObjects(e,i,r,!0,null==t?void 0:t.rowState);return o&&t&&this.$_createTreeOutputRows(o,t,i),o},i.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var r=this._children[e];if(r.rowId==t)return r;if(r=r.findById(t))return r}return null},i.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},i.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},i.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},i.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},i.prototype.removeChild=function(t){return this._removeChild(t,!1)},i.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},i.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var r=[],o=[],n=0,s=t.length;n<s;n++){var a=void 0;(a="string"==typeof t[n]?i.getFieldIndex(t[n]):Number(t[n]))>=0&&a<i.fieldCount&&r.indexOf(a)<0&&(r.push(a),o.push(e[n]))}n=0;for(var l=r.length;n<l;n++)r[n]=i.getField(r[n]);return this.$_findChild(r,o)},i.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},i.prototype.clearRowStates=function(e,i){var r=this.provider;if(r){var o=[],n=e?[]:null;this._collectStateRows(o,n);var s=o.length,a=n?n.length:0;if(0!=s||0!=a){if(i)for(var l=0,u=o.length;l<u;l++)o[l]._changeRowState(t.RowState.NONE,!0,!1);else s&&r.changeRowStates(o,t.RowState.NONE);a&&r.deleteRows(n)}}},i.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},i.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||t>=e)throw new Ve("Field index is out of bounds: "+t)},i.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},i.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(t>e)for(var r=t;r>e;r--)this._children[r]=this._children[r-1];else for(r=t;r<e;r++)this._children[r]=this._children[r+1];this._children[e]=i}},i.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var r=this._children,o=[],n=t.length-1;n>=0;n--)o.push(r.splice(t[n],1)[0]);for(n=0;n<o.length;n++)r.splice(e,0,o[n])}},i.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,r=this.index;i._children.splice(r,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},i.prototype._insertChild=function(e,i,r,o){var n=this.provider;if(n&&!r){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(!i)throw new Error("child is null");if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);return!(!r&&!this._doChildAdding(e,i))&&(this._children.splice(e,0,i),this._descendantCountChanged(1+i.descendantCount),this._attach(i),o||i._changeRowState(t.RowState.CREATED,!0,!1),this._doChildAdded(e,i),!0)},i.prototype._insertChildren=function(e,i,r,o){var n=this.provider;if(n&&!r){if(!n._checkClientState())return!1;n.refreshFieldFormats()}if(this._children=this._children||[],e<0||e>this._children.length)throw new RangeError("Insert index is invalid: "+e);if(r||this._doRowsAdding(e,i)){for(var s=0,a=0;a<i.length;a++){var l=i[a];this._children.splice(e+a,0,l),this._attach(l),s+=l.descendantCount,o||l._changeRowState(t.RowState.CREATED,!0,!1)}return this._descendantCountChanged(s),this._doRowsAdded(e,i),!0}return!1},i.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},i.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t))&&(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),!0)},i.prototype._removeChild=function(e,i){var r=this.provider;if(!r||i||r._checkClientState()){if(e&&this._children)for(var o=this._children.length;o--;)if(this._children[o]===e){if(!r.softDeleting||!r.checkStates)return this.$_removeChild(e,o,i);switch(e.rowState){case t.RowState.CREATED:if(r.deleteCreated)return this.$_removeChild(e,o,i);e._changeRowState(t.RowState.CREATE_AND_DELETED,!0,!1);break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:break;default:e._changeRowState(t.RowState.DELETED,!0,!1)}}return!1}},i.prototype._removeChildren=function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},i.prototype._setChildren=function(t){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&(e=t.length)>0){this._children||(this._children=[]);for(var r=0;r<e;r++){var o=t[r];this._children.push(o),i+=1+o.descendantCount,this._attach(o)}}this._descendantCountChanged(i)},i.prototype.$_findChild=function(t,e){for(var i=t.length,r=this.count,o=0;o<r;o++){for(var n=this._children[o],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],n.getValue(t[a].index))){s=!1;break}if(s)return n;if(n=n.$_findChild(t,e))return n}return null},i.prototype._collectStateRows=function(e,i){for(var r=this.count;r--;){var o=this.getChild(r),n=o.rowState;!i||n!=t.RowState.DELETED&&n!=t.RowState.CREATE_AND_DELETED?(n!=t.RowState.NONE&&e.push(o),o._collectStateRows(e,i)):i.push(o)}},i.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},i.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},i.prototype.$_restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i).$_restoreRow(!0,e);return!1},i.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},i.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},i.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},i.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},i.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},i.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},i.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},i}(Ct),Gi=function(t){function e(e){var i=t.call(this,e)||this;return i._provider=e,i}return r(e,t),e.prototype._doDispose=function(){this._provider=null,t.prototype._doDispose.call(this)},e.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.copy=function(){for(var t=new e(null),i=0,r=this.count;i<r;i++){var o=this.getChild(i).copy();t._addChild(o,!0,!0)}return t._provider=this._provider,t},e.prototype._changeRowState=function(t,e,i){return!1},e.prototype.getObject=function(){return null},e.prototype.getValue=function(t){},e.prototype.setValue=function(t,e,i){return!1},e.prototype._attach=function(t){t._parent=this},e.prototype._detach=function(t){t._parent===this&&(t._parent=null)},e.prototype.update=function(t,e){return!1},e.prototype.$_setHasChildren=function(t){},e.prototype.$_setIconIndex=function(t){},e.prototype._keepRow=function(t){},e.prototype._yieldRow=function(t,e){},e.prototype._keepStates=function(t){},e.prototype._yieldStates=function(t,e){},e}(Wi),Ui=function(t){function e(){var e=t.call(this)||this;return e._nextRowId=0,e._commandListeners=[],e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);e>=0&&this._commandListeners.splice(e,1)},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e}(Ae),zi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._rows=i.slice(),n._fields=r.slice(),n._value=o,n}return r(e,t),e.prototype._doRun=function(t){for(var e=t,i=[],r=0,o=this._rows;r<o.length;r++){var n=o[r]._keepRow(e);i.push(n)}return e.$_fillValue(this._rows,this._fields,this._value),i},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rows,this._fields,this._value)},e.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()},e}($i),Yi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._rows=i.slice(),n._values=n._cloneValues(r.slice()),n}return r(e,t),e.prototype._doRun=function(t){for(var e=t,i=[],r=0,o=this._rows;r<o.length;r++){var n=o[r]._keepRow(e);i.push(n)}return e.$_updateRows(this._rows,this._values,this._strict),i},e.prototype._doRedo=function(t,e){t.$_updateRows(this._rows,this._values,this._strict)},e.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++)this._rows[i]._yieldRow(t,e[i]);t._fireRefresh()},e}($i),qi=function(t){function e(e,i,r,o){var n=t.call(this,e)||this;return n._row=i,n._field=r,n._value=o instanceof Date?new Date(o):o,n}return r(e,t),e.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),e},e.prototype._doRedo=function(t,e){this._row.$_setValue(this._field,this._value,!1)},e.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row),t._valueChanged(this._row,this._field)},e}($i),Ki=function(e){function i(i,r){var o=e.call(this,i)||this;if(o._iconIndex=-1,o._hasChildren=!1,o._parent=null,o._values=null,o._orgValues=null,o._state=t.RowState.NONE,i&&r){var n=i.fieldCount;o._values=new Array(n);for(var s=0,a=Math.min(r.length,n);s<a;s++)o._values[s]=i.getField(s).readValue(r[s])}return o}return r(i,e),i.prototype._doDispose=function(){this._values=null,this._orgValues=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values&&this._values.slice()},enumerable:!0,configurable:!0}),i.prototype._attach=function(t){t._parent=this},i.prototype._detach=function(t){t._parent===this&&(t._parent=null)},i.prototype._changeRowState=function(e,i,r){var o=this.provider;if(o&&e!=this._state){var n=this._state;return this._state=e,e==t.RowState.UPDATED&&o._needOrgValues?this._orgValues=this._values.concat():n==t.RowState.UPDATED&&this._orgValues&&(this._orgValues=null),i&&o._stateChanged(this,r),!0}return!1},i.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},i.prototype.setValue=function(t,e,i){var r=this.provider;return!!r&&(r.undoable?r._commands.execute(new qi(r,this,t,e)):this.$_setValue(t,e,i))},i.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},r=0;r<e;r++)i[t.getOrgFieldName(r)]=this._values[r];return i}return null},i.prototype.copy=function(){var t=new i(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var e=0,r=this.count;e<r;e++){var o=this.getChild(e).copy();t._addChild(o,!0,!0)}return t},i.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new Hi(i,this,t,e)):this.$_update(i,t,e,!1))},i.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},i.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},i.prototype._keepStates=function(t){},i.prototype._yieldStates=function(t,e){},i.prototype._keepState=function(){return this._state},i.prototype._yieldState=function(t){this._state=t},i.prototype.$_setValue=function(e,i,r){var o=this.provider;if(o){if(!o._checkClientState())return;if(o.refreshFieldFormats(),this._checkFieldIndex(e),this._values){if(i!=this._values[e]){var n=null,s=o.getField(e),a=o.checkStates&&(this._state==t.RowState.NONE||!this._state);!r&&a&&o._needOrgValues&&(n=this._values.concat()),this._values[e]=s.readValue(i),o._internalCalculateValues(this._values,this.rowId),!r&&a?(o._needOrgValues&&(this._orgValues=n),this._state=t.RowState.UPDATED,o._stateChanged(this,!1)):o._needRestore&&this.$_restoreState(o),o._valueChanged(this,e)}return!0}throw new Error("Row data is not loaded")}},i.prototype.$_update=function(t,e,i,r){if(!r){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!r&&!t._rowUpdating(this))&&(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),!0)},i.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),e.prototype._clearOrgValues.call(this)},i.prototype._restoreState=function(t,i){var r=this.$_restoreState(this.provider);return r&&i&&i.push(this),e.prototype._restoreState.call(this,t,i),r},i.prototype.$_restoreRow=function(i,r){var o=!1;if(this._state===t.RowState.UPDATED){var n=this._orgValues;if(n){for(var s=this._values,a=0,l=Math.min(n.length,this.provider.fieldCount);a<l;a++)s[a]=n[a];this._state=t.RowState.NONE,r&&r.push(this),o=!0}}return e.prototype.$_restoreRow.call(this,i,r),o},i.prototype.$_restoreState=function(e){if(this._state==t.RowState.UPDATED&&this._orgValues){for(var i=this._orgValues,r=this._values,o=this.provider,n=o.strictRestore,s=0,a=o.fieldCount;s<a;s++){var l=r.length>s?r[s]:void 0,u=i.length>s?i[s]:void 0;if(n){if(!o.getField(s).equalValues(l,u))return!1}else if(!o.getField(s).sameValues(l,u))return!1}return this._state=t.RowState.NONE,!0}return!1},i.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,r=i.strictRestore,o=[];if(!t||t.length<=0)return null;for(var n=0,s=i.fieldCount;n<s;n++){var a=e.length>n?e[n]:void 0,l=t.length>n?t[n]:void 0,u=i.getField(n);u.calculated||(r?u.equalValues(a,l)||o.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}):u.sameValues(a,l)||o.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}))}return o},i.prototype.$_setHasChildren=function(t){this._hasChildren=t},i.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},i.prototype.$_internalUpdate=function(e,i,r){var o=!1,n=Array.isArray(e),s=this.provider;if(s){var a=Math.min(s.fieldCount,n?e.length:s.fieldCount),l=s.checkStates&&(this._state==t.RowState.NONE||!this._state),u=null;l&&s._needOrgValues&&(u=this._values.concat());for(var h=0;h<a;h++){var c=s.getField(h);if(n||e.hasOwnProperty(c.orgFieldName)){var d=n?e[h]:e[c.orgFieldName];i&&void 0===d||(o=!s._needRestore||o||(i?!c.equalValues(this._values[h],c.readValue(d)):!c.sameValues(this._values[h],c.readValue(d))),this._values[h]=s.getField(h).readValue(d))}}s._internalCalculateValues(this._values,this.rowId),l&&o?(u&&(this._orgValues=u),this._state=t.RowState.UPDATED,r&&s._stateChanged(this,!1)):s._needRestore&&this.$_restoreState(s)}},i}(Wi),Xi=function(e){function i(t,i){var r=e.call(this)||this;return r._countDirty=!1,r._tagLock=!1,r._points=[],r._nextPoint=0,r._rowMap=[],r._needOrgValues=!1,r._needRestore=!1,r._checkParentProc=null,r._hiddenRows=[],r.$_handler=i,t&&(r._commands=new ji(r)),r._rootRow=new Gi(r),r._tags=new Si(r),r}return r(i,e),i.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hiddenRows=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"needOrgValues",{get:function(){return this._needOrgValues},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"needRestore",{get:function(){return this._needRestore},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"handler",{get:function(){return this.$_handler},enumerable:!0,configurable:!0}),i.prototype.addTag=function(t){this._tags.add(t)},i.prototype.removeTag=function(t){this._tags.remove(t)},i.prototype.setRows=function(t,e,i,r,o){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Ni(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(r),this.getFieldIndex(o)),this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},i.prototype.setCsvRows=function(t,e,i,r,o){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Vi(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(r),this.getFieldIndex(o)),this._checkSum(n),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},i.prototype.setXmlRows=function(t,e,i,r){if(!this._checkClientState())return-1;var o=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),o=new Ai(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(r)),this._checkSum(o),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),o},i.prototype.setJsonRows=function(t,e,i,r){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var o=new Bi(this,this._rootRow);this._rowCount=o.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(r)),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.setJsonRows2=function(t,e,i,r,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new Bi(this,this._rootRow);this._rowCount=n.load2(null,t,e,i,r,o),this.$_prepareMap()}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},i.prototype.appendDataRows=function(t,e,i,r,o,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){var l=new Ni(this,this._rootRow);l.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(t,e,a,r,this.getFieldIndex(o),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),s>0){var u=l.insertedRows;u&&(s=u.length)>0&&this._rowsAdded(t,u)}}}return s},i.prototype.appendCsvRows=function(t,e,i,r,o,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){this.beginUpdate();try{this.refreshFieldFormats();var l=new Vi(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(t,e,a,r,this.getFieldIndex(o),this.getFieldIndex(n))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),s},i.prototype.appendXmlRows=function(t,e,i,r,o){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Ai(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(r),this.getFieldIndex(o))}finally{if(this.endUpdate(!1),n>0){var a=s.insertedRows;a&&(n=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},i.prototype.appendJsonRows=function(t,e,i,r,o){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Bi(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(r),this.getFieldIndex(o))}finally{if(this.endUpdate(!1),n>0){var a=s.insertedRows;a&&(n=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},i.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},i.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},i.prototype.getChildCount=function(t){return(t||this._rootRow).count},i.prototype.getRows=function(t){return(t||this._rootRow).children},i.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},i.prototype.getDescendants=function(t,e){function i(t,e,r){for(var o=0,n=t.count;o<n;o++){var s;e.push(s=t.getChild(o)),r>s.level&&i(s,e,r)}}e=arguments.length>1?e:0;var r=t||this._rootRow;if(e<=0)return r.descendants;if(e>r.level){var o=[];return i(r,o,e),o}return null},i.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},i.prototype.hasData=function(t){return null!=this.rowById(t)},i.prototype.rowById=function(t){var e=this._rowMap[t];return e&&e.rowId===t||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},i.prototype.getDataRow=function(t){var e=this._rowMap[t];return null==e&&(e=this._findRowById(t)),null!=e?t:-1},i.prototype.rowsByIds=function(t,e){if(t){for(var i=[],r=0,o=t;r<o.length;r++){var n=o[r],s=this.rowById(n);(s||e)&&i.push(s)}return i}return null},i.prototype.createRow=function(t,e,i,r){void 0===r&&(r=!0);var o=null;if(r&&this.refreshFieldFormats(),Array.isArray(t))o=new Ki(this,t);else if(t){var n=new Array(this.fieldCount);for(var s in t){var a=this.getFieldIndex(s);a>=0&&(n[a]=t[s])}o=new Ki(this,n)}return o&&(this._internalCalculateValues(o._values,o.rowId),o._iconIndex=e,o._hasChildren=i),o},i.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},i.prototype.removeRows=function(e){for(var i=[],r=e.length;r--;)(a=this.rowById(e[r]))&&i.push(a);function o(t,e){for(var r=e;r>=0;r--)if(i[r].isAncestorOf(t))return!1;return!0}if(this._checkClientState()&&i&&!(i.length<1)){i.sort((function(t,e){return t.level-e.level}));var n=i;for(r=i.length;r--;)i[r].level>1&&!o(i[r],r-1)&&i.splice(r,1);if(i.length<1||!this._rowsRemoving(i))return!1;if(this.softDeleting&&this.checkStates){var s=[];for(r=i.length-1;r>=0;r--){var a,l=!1;switch((a=i[r]).rowState){case t.RowState.CREATED:this.deleteCreated||(l=a._changeRowState(t.RowState.CREATE_AND_DELETED,!1,!1),i.splice(r,1));break;case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:i.splice(r,1);break;default:l=a._changeRowState(t.RowState.DELETED,!0,!1),i.splice(r,1)}l&&s.push(a)}s.length>0&&this._fireRowStatesChanged(s)}return this.deleteRows(n),!0}},i.prototype.changeRowIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,r=i.children.length,o=t.index,n=Math.min(Math.max(o+e,0),r-1);return 0!=(e=n-o)&&!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(o,n),this._fireRowSiblingMoved(t,e),!0)},i.prototype.changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,r=i.children.length,o=t[0].index,n=Math.min(Math.max(o+e,0),r-1);if(0==(e=n-o))return!1;for(var s=[],a=0,l=t;a<l.length;a++){var u=l[a];s.push(u.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(s,n),this._fireRowsSiblingMoved(t,e),!0)},i.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var r=t.parent;if(r===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var o=e._children.length;return i=Math.min(Math.max(i,0),o),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof Gi||this.setHasChildren(e,!0),r instanceof Gi||0!=r.count||this.setHasChildren(r,!1),this._fireRowParentChanged(t,e,i),!0)},i.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index)},i.prototype.toTreeString=function(){return this._rootRow.toTreeString()},i.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},i.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},i.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),r=0;r<e;r++)i[r]=t[r].rowId;return i}return null},i.prototype.$_searchDataRow=function(e,i,r,o,n,s){var a=e.length;if(a<1)return-1;var l=Math.min(i.length,r.length);if(l<1)return-1;for(var u=!o||o.allFields,h=o&&o.caseSensitive,c=o&&o.partialMatch,d=null,p=[],f=o.compareCallback||ft.compareTextValue,_=0;_<l;_++)p[_]=this.getField(i[_]).dataType;n=Math.max(0,n),s=Math.min(a-1,s);for(var g=n;g<=s;g++){var y=!0;if(y)for(_=0;_<l;_++){var m=this.rowById(e[g]).getValue(i[_]),b=this.getOrgFieldName(i[_]);switch(p[_]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(r[_]instanceof Date)y=f.call(this.$_handler,r[_],m,h,c,e[g],b);else{if(!d){var v=/[.]/.test(r[_])?"yyyy.MM.dd":/[/]/.test(r[_])?"yyyy/MM/dd":/[-]/.test(r[_])?"yyyy-MM-dd":"yyyyMMdd";d=new Je(v)}y=f.call(this.$_handler,r[_],m?d.getText(m):m,h,c,e[g],b)}break;default:y=f.call(this.$_handler,r[_],m,h,c,e[g],b)}if(y&&!u)return e[g];if(!y&&u)break}if(y)return e[g]}return-1},i.prototype.searchDataRow=function(t,e){var i;if(void 0===e&&(e=null),t instanceof Ze||(t=new Ze(t)),null!=e){var r=this.rowById(e);if(!r)return-1;i=this.$_extractTreeRowIds(r.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return-1;var o=i.length,n=Math.max(0,i.indexOf(t.startIndex)),s=t.fields,a=t.values,l=-1;if(s&&s.length>0&&a&&a.length>0){for(var u=s.length,h=[],c=0;c<u;c++){var d=s[c];if(ft.isNumber(d))h.push(d);else{var p=this.getFieldIndex(s[c]);p>=0&&h.push(p)}}h.length>0&&(l=n<o?this.$_searchDataRow(i,h,a,t,n,o-1):-1)<0&&t.wrap&&n>0&&(l=this.$_searchDataRow(i,h,a,t,0,n-1))}return l},i.prototype.$_searchData=function(e,i,r,o,n,s,a){var l=this.rowCount;if(l<1)return null;for(var u=o&&o.caseSensitive,h=o&&o.partialMatch,c=this.fieldCount,d=i.length,p=null,f=[],_=o.compareCallback||ft.compareTextValue,g=0;g<c;g++)f[g]=this.getField(g).dataType;n=Math.max(0,n),s=Math.min(l-1,s),(a=Math.max(0,a))>=i.length&&(n++,a=0);for(var y=n;y<=s;y++)for(g=y>n?0:a;g<d;g++){var m=!1,b=i[g],v=this.getOrgFieldName(i[g]);if(b>=0&&b<c){var w=this.rowById(e[y]).getValue(b);switch(f[b]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(r instanceof Date)m=_.call(this.$_handler,r,w,u,h,e[y],v);else{if(!p){var C=/[.]/.test(r)?"yyyy.MM.dd":/[/]/.test(r)?"yyyy/MM/dd":/[-]/.test(r)?"yyyy-MM-dd":"yyyyMMdd";p=new Je(C)}m=_.call(this.$_handler,r,w?p.getText(w):w,u,h,e[y],v)}break;default:m=_.call(this.$_handler,r,w,u,h,e[y],v)}if(m)return{dataRow:e[y],fieldIndex:b,searchFieldIndex:g,fieldName:v}}}return null},i.prototype.searchData=function(t,e){var i;if(void 0===e&&(e=-1),t instanceof ti||(t=new ti(t)),e>=0){var r=this.rowById(e);if(!r)return null;i=this.$_extractTreeRowIds(r.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return null;var o=i.length,n=null,s=t.fields,a=t.value,l=Math.max(0,t.startFieldIndex),u=Math.max(0,i.indexOf(t.startIndex));if(!s||s.length<1){s=[];for(var h=this.getFields(),c=0;c<h.length;c++)s.push(h[c].orgFieldName)}if(s&&s.length>0&&null!=a){for(var d=s.length,p=[],f=0;f<d;f++){var _=s[f];ft.isNumber(_)?p.push(_):p.push(this.getFieldIndex(s[f]))}p.length>0&&!(n=u<o?this.$_searchData(i,p,a,t,u,o-1,l):null)&&t.wrap&&u>0&&(n=this.$_searchData(i,p,a,t,0,u-1,0))}return n},i.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var i=ft.isArray(t)?t:[t],r=this._hiddenRows.length,o=[],n=0,s=i.length;n<s;n++){var a=i[n];if(null!=this._findRowById(a))if(o.push(a),e)this._hiddenRows.indexOf(a)<0&&this._hiddenRows.push(a);else{var l=this._hiddenRows.indexOf(a);l>=0&&this._hiddenRows.splice(l,1)}}this._hiddenRows.length!==r&&this._fireRowsHiddenChanged(o,e)}},i.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},i.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},i.prototype.clearHiddenRows=function(){if(this._hiddenRows.length>0){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},i.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort((function(t,e){return t-e})),t},i.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&this._hiddenRows.indexOf(t)>=0},Object.defineProperty(i.prototype,"hiddenCount",{get:function(){return this._hiddenRows.length},enumerable:!0,configurable:!0}),i.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=null,t.max=null,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var r=this.$_summarizeVars(this._rootRow,t);t.varsp=r/t.count,t.vars=r/(t.count-1)}return!0},i.prototype.summarizeRange=function(e,i,r){if(null==e||null==i)return!1;e.clear();var o=i.length;if(o<1)return!1;for(var n=0,s=e.field,a=this.getField(s).dataType===t.ValueType.NUMBER,l=null,u=null,h=null,c=0;c<o;)null==(_=i[c++].getValue(s))||a&&(!a||isNaN(_))||(a&&(l=n?l+_:_),(a||""!=_)&&n++,(null==u||_<u)&&(u=_),(null==h||_>h)&&(h=_));if(e.count=o,n>0&&(l=null!=l?l:a?NaN:null,u=null!=u?u:a?NaN:null,h=null!=h?h:a?NaN:null,e.sum=l,e.min=u,e.max=h,e.avg=l/o,e.dataCount=n,e.dataAvg=0===e.dataCount?NaN:e.sum/e.dataCount,r))if(o>1){for(var d=0,p=e.avg,f=0;f<o;f++){var _=i[f].getValue(s);isNaN(_)||(d+=Math.pow(_-p,2))}e.varsp=d/o,e.vars=d/(o-1)}else e.varsp=0,e.vars=0;return!0},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rootRow.descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"immediateUpdate",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isSummarized",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!0,configurable:!0}),i.prototype.getRow=function(t){return this.rowById(t).values},i.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&t.length>0){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;i>=0;i--){var r=t[i],o=r&&r.parent;o&&o._removeChild(r,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},i.prototype.equalValues=function(t,e,i){if(e!==i){var r=this._fields[t],o=e.getValue(t),n=i.getValue(t);return r.equalValues(o,n)}return!0},i.prototype.sameValues=function(t,e,i,r){if(e!==i){var o=this._fields[t],n=e.getValue(t),s=i.getValue(t);return r?String(n).toLowerCase()==String(s).toLowerCase():o.sameValues(n,s)}return!0},i.prototype.equalTexts=function(t,e,i){return this.sameValues(t,e,i,!0)},i.prototype.compareValues=function(t,e,i,r){if(e!==i){var o=e.getValue(t),n=i.getValue(t);return null==o?null==n?0:-1:null==n||(o=r?String(o).toLowerCase():o)>(n=r?String(n).toLowerCase():n)?1:o<n?-1:0}return 0},i.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},i.prototype.compareNumbers=function(t,e,i){if(e!==i){var r=e.getValue(t),o=i.getValue(t);return isNaN(r)?isNaN(o)?0:-1:isNaN(o)||r>o?1:r<o?-1:0}return 0},i.prototype.compareBools=function(t,e,i){if(e!==i){var r=e.getValue(t),o=i.getValue(t);return r&&!o?1:!r&&o?-1:0}return 0},i.prototype.compareDates=function(t,e,i){if(e!==i){var r=e.getValue(t),o=i.getValue(t);return r instanceof Date?o instanceof Date?r>o?1:r<o?-1:0:1:o instanceof Date?-1:0}return 0},i.prototype.compareObjects=function(t,e,i){var r=e.values,o=i.values;if(r===o)return 0;var n=r?r[t]:null,s=o?o[t]:null;return n?s?this.getField(t).$_compareObject(n,s,e.rowId,i.rowId):1:s?-1:0},i.prototype.getDistinctValues=function(e,i,r){if(void 0===i&&(i=-1),void 0===r&&(r=t.SortDirection.ASCENDING),this._checkFieldIndex(e),i<0&&(i=this.getDescendantCount(this._rootRow)),i>0){for(var o=this.getDescendants(this._rootRow,0),n=this.getField(e).dataType,s=[],a=[],l=void 0,u=0,h=o.length;u<h;u++)switch(l=o[u].values[e],n){case t.ValueType.NUMBER:null!=l&&isNaN(l)||s.indexOf(l)<0&&s.push(l);break;case t.ValueType.DATE:case t.ValueType.DATETIME:l?a.indexOf(l.getTime())<0&&(a.push(l.getTime()),s.push(l)):(a.push(l),s.push(l));break;case t.ValueType.OBJECT:default:s.indexOf(l)<0&&s.push(l)}return r!==t.SortDirection.NONE&&(s=ft.included(n,t.ValueType.DATETIME,t.ValueType.DATE)?s.sort((function(t,e){return t-e})):s.sort(),r===t.SortDirection.DESCENDING&&(s=s.reverse())),s.slice(0,i)}return null},i.prototype._doFieldsReset=function(){e.prototype._doFieldsReset.call(this),this._clearRows(),this._fireReset()},i.prototype.refreshClients=function(){this._fireRefreshClient()},i.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(this.fieldCount>0&&this._rootRow.count>0){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,nextRowId:this._nextRowId,data:e}),i}return-1}},i.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._nextRowId=i.nextRowId,this.$_prepareMap(),this._fireReset();break}}},i.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--)e[i].data=null,e.pop()},i.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},i.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},i.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},i.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},i.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},i.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},i.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},i.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},i.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},i.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},i.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},i.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},i.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},i.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},i.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},i.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},i.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged()),this.$_removeMap(t)},i.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},i.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},i.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},i.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},i.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},i.prototype.getRowId=function(t){return t},i.prototype.getValue=function(t,e){var i=this.rowById(t);if(i)return i.getValue(e)},i.prototype.setValue=function(t,e,i){var r=this.rowById(t);if(r)return r.setValue(e,i,!1)},i.prototype.getRowObject=function(t){var e=this.rowById(t),i=this.fieldCount,r={},o=e._values;if(o)for(var n=0;n<i;n++)r[this.getOrgFieldName(n)]=o[n];return r},i.prototype.getRowState=function(e){var i=this.rowById(e);return i?i.rowState:t.RowState.NONE},i.prototype.setRowState=function(t,e,i){var r=this.rowById(t);if(r&&(this.checkStates||i)){var o=r.rowState;e!=o&&r._changeRowState(e,!0,!!gt(o)||void 0)}},i.prototype.changeRowStates=function(t,e){for(var i=t.length,r=[],o=0;o<i;o++){var n=t[o];n._changeRowState(e,!1,!1)&&r.push(n)}r.length>0&&this._fireRowStatesChanged(r)},i.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},i.prototype.$_collectStateRows=function(t,e,i){for(var r=0,o=t.count;r<o;r++){var n=t.getChild(r);n.rowState==e&&i.push(n.rowId),this.$_collectStateRows(n,e,i)}},i.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},i.prototype.$_collectAllStateRows=function(e,i){for(var r=0,o=e.count;r<o;r++){var n=e.getChild(r);switch(n.rowState){case t.RowState.CREATED:case t.RowState.UPDATED:case t.RowState.DELETED:case t.RowState.CREATE_AND_DELETED:i[n.rowState].push(n.rowId)}this.$_collectAllStateRows(n,i)}},i.prototype.getAllStateRows=function(){var e={};return e[t.RowState.CREATED]=[],e[t.RowState.UPDATED]=[],e[t.RowState.DELETED]=[],e[t.RowState.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,e),e},i.prototype.setRowStates=function(t,e,i,r){if(this._checkClientState()){for(var o=r?null:[],n=0,s=t.length;n<s;n++){var a=this.rowById(t[n]);a&&(this.checkStates||i)&&a._changeRowState(e,r,!1)&&!r&&o.push(a)}!r&&o.length>0&&this._fireRowStatesChanged(o)}},i.prototype.$_getRowStateCount=function(t,e){for(var i=0,r=0,o=t.count;r<o;r++){var n=t.getChild(r);e.indexOf(n.rowState)>=0&&i++,i+=this.$_getRowStateCount(n,e)}return i},i.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},i.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},i.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var r=this.rowById(t[i]);r&&r.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):e.length>1&&this._fireRowStatesChanged(e)}},i.prototype.getUpdatedCells=function(e){var i=this.restoreMode;if(i!=t.RestoreMode.AUTO&&i!=t.RestoreMode.EXPLICIT)return null;if(null==e)e=this.getStateRows(t.RowState.UPDATED);else if(!Array.isArray(e)){if("number"!=typeof e)return null;e=[e]}if(!Array.isArray(e))return null;for(var r=[],o=0,n=e.length;o<n;o++){var s=this.rowById(e[o]);if(s){var a=s.$_getUpdatedCells();a&&a.length>0&&r.push({__rowId:s.rowId,updatedCells:a})}}return r},i.prototype.canUpdateRow=function(t){return!0},i.prototype.canInsertRow=function(t){return!0},i.prototype.canDeleteRow=function(t){return!0},i.prototype.isDataChanged=function(e,i){if(e<0)return!1;var r=this.rowById(e);!r&&ft.isDebugging();var o=r._orgValues;if(r.rowState!==t.RowState.UPDATED||!o)return!1;if(o){var n=o[i],s=r._values[i],a=this._fields[i];return a&&!a.sameValues(n,s)}return!1},i.prototype.$_createFrom=function(t,e){var i=t.getObject();e&&(i=this._convertValues(i,e));for(var r=this.objectToRow(i),o=new Ki(this,r),n=0;n<t.count;n++){var s=this.$_createFrom(t.getChild(n),e);o.addChild(s,!1)}return o},i.prototype.$_insertRowsFrom=function(t,e,i,r){for(var o=[],n=0,s=t.rowsByIds(i,!1);n<s.length;n++){var a=s[n];o.push(this.$_createFrom(a,e))}var l=r>=0?this.rowById(r):null,u=l?l.parent:this.rootRow;if(r>=0){var h=u.indexOf(l);u.insertChildren(h,o,!1)}else u.insertChildren(u.count,o,!1)},i.prototype.insertChildNode=function(t,e,i,r,o,n){var s=ft.getNumber(i[o],-1),a=i[r],l=this.createRow(i,s,a&&a.length>0);if(e>=0?t.insertChild(e,l,n):t.addChild(l,n),a)for(var u=0;u<a.length;u++)this.insertChildNode(l,-1,a[u],r,o,n);return l?l.rowId:-1},i.prototype.insertRowsFrom=function(t,e,i,r){this.$_insertRowsFrom(t,e,i,r)},i.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},i.prototype.fillValue=function(t,e,i){if(t&&0!=t.length&&e&&0!=e.length){for(var r=[],o=0;o<t.length;o++){var n=this.rowById(t[o]);n&&r.push(n)}this.undoable?this._commands.execute(new zi(this,r,e,i)):this.$_fillValue(r,e,i)}},i.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var r=[],o=0;o<t.length;o++){var n=this.rowById(t[o]);n&&r.push(n)}this.undoable?this._commands.execute(new Yi(this,r,e,i)):this.$_updateRows(r,e,i)}},i.prototype._findRowById=function(t){return this._rootRow.findById(t)},i.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},i.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&this._rootRow.descendantCount>0||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},i.prototype.$_prepareMap=function(){var t=this;!function e(i){var r=i.children;r&&r.forEach((function(i){t._rowMap[i.rowId]=i,e(i)}))}(this._rootRow)},i.prototype.$_removeMap=function(t){var e=this;(t=ft.makeArray(t,!0)).forEach((function(t){e._rowMap[t.rowId]=void 0,e.$_removeMap(t.children),t.dispose()}))},i.prototype.$_fillValue=function(e,i,r){if(this._checkClientState()&&e&&e.length&&i&&i.length){this.refreshFieldFormats();for(var o=[],n=i.length,s=0,a=e;s<a.length;s++){var l=a[s];l.rowState==t.RowState.NONE&&o.push(l);for(var u=l.values,h=0;h<n;h++)u[i[h]]=r;l.$_internalUpdate(u,!1,!1)}o.length>0&&this._fireRowStatesChanged(o),this._tags.updateRows(e),this._fireRowsUpdated(e)}},i.prototype.$_updateRows=function(e,i,r){if(this._checkClientState()&&e&&i){var o=Math.min(e.length,i.length);if(!(o<1)){this.refreshFieldFormats();for(var n=[],s=0;s<o;s++){var a=e[s];a.rowState==t.RowState.NONE&&n.push(a),a.$_internalUpdate(i,r,!1)}n.length>0&&this._fireRowStatesChanged(n),this._tags.updateRows(e),this._fireRowsUpdated(e)}}},i.prototype.findRow=function(t,e){return t&&t.length>0&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},i.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=t.RestoreMode.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==t.RestoreMode.AUTO,this._rootRow._clearOrgValues()},i.prototype.$_summarizeChildren=function(e,i){for(var r=i.field,o=e.count,n=this.getField(i.field).dataType===t.ValueType.NUMBER,s=0;s<o;s++){var a=e.getChild(s),l=a.getValue(r);null==l||n&&(!n||isNaN(l))||(n&&(i.sum=i.dataCount?i.sum+l:l),(n||""!=l)&&i.dataCount++,(null==i.min||l<i.min)&&(i.min=l),(null==i.max||l>i.max)&&(i.max=l)),this.$_summarizeChildren(a,i)}},i.prototype.$_summarizeVars=function(t,e){for(var i=e.field,r=e.avg,o=t.count,n=0,s=0;s<o;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(n+=Math.pow(l-r,2)),n+=this.$_summarizeVars(a,e)}return n},i.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDisposed")},i.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderReset")},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRefreshClient")},i.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderCleared")},i.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowCountChanged",this.rowCount)},i.prototype._fireRowAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowAdding",t,e,i)},i.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowAdded",t)},i.prototype._fireRowsAdding=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsAdding",t,e,i)},i.prototype._fireRowsAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsAdded",t,e)},i.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowRemoving",t)},i.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowRemoved",t)},i.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsRemoving",t)},i.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsRemoved",t)},i.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowUpdating",t)},i.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowUpdated",t)},i.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsUpdating",t)},i.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsUpdated",t)},i.prototype._fireValueChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderValueChanging",t,e,i)},i.prototype._fireValueChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderValueChanged",t,e)},i.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderIconIndexChanged",t)},i.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderHasChildrenChanged",t)},i.prototype._fireRowStateChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStateChanged",t,e)},i.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowStatesChanged",t)},i.prototype._fireRowSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowSiblingMoving",t,e)},i.prototype._fireRowSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowSiblingMoved",t,e)},i.prototype._fireRowsSiblingMoving=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsSiblingMoving",t,e)},i.prototype._fireRowsSiblingMoved=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsSiblingMoved",t,e)},i.prototype._fireRowParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowParentChanging",t,e,i)},i.prototype._fireRowParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowParentChanged",t,e,i)},i.prototype._fireRowsParentChanging=function(t,e,i){return!(this._eventLock<=0)||this.fireConfirmEvent("onTreeDataProviderRowsParentChanging",t,e,i)},i.prototype._fireRowsParentChanged=function(t,e,i){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsParentChanged",t,e,i)},i.prototype._fireRowsHiddenChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onTreeDataProviderRowsHideChanged",t,e)},i.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onTreeDataProviderDataLoadComplated")},i.prototype.undo=function(){this.canUndo&&this._commands.undo()},i.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},i.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},i}(Ui),Qi=function(e){function i(t){var i=e.call(this)||this;return i._ds=t,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.load=function(t,e,i){var r=new Ti(i);if(this.$_checkEmpty(e,r))return 0;switch(this.$_prepareLoad(r),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,r);case"xml":return this.$_loadXml(e,r);case"csv":return this.$_loadCsv(e,r)}return 0},i.prototype.$_loadJson=function(e,i){if("string"==typeof e&&(e=JSON.parse(e)),e){var r=i.childrenField,o=i.iconField;if(i.fillMode==t.DataFillMode.APPEND){var n=this._ds.rowById(i.parentId);return this._ds.appendJsonRows(n,e,i.rows,r,o)}return this._ds.setJsonRows(e,i.rows,r,o)}return 0},i.prototype.$_loadXml=function(e,i){if("string"==typeof e&&(e=Ei.parseXml(e)),e&&e.documentElement){var r=i.childrenField,o=i.iconField;if(i.fillMode==t.DataFillMode.APPEND){var n=this._ds.rowById(i.parentId);return this._ds.appendXmlRows(n,e,i.rows,r,o)}return this._ds.setXmlRows(e,i.rows,r,o)}return 0},i.prototype.$_loadCsv=function(e,i){var r=i.start,o=i.count,n=i.quoted,s=i.delimiter,a=yi.csvToArray(this._ds,e,r,o,n,s);if(a&&(o=a.length)>0){var l=i.treeField,u=i.childrenField,h=i.iconField,c=i.needSorting;if(i.fillMode==t.DataFillMode.APPEND){var d=this._ds.rowById(i.parentId);this._ds.appendDataRows(d,a,l,c,u,h)}else this._ds.setRows(a,l,c,u,h);return a.length}return 0},i.prototype.$_fillEmpty=function(e){e.fillMode===t.DataFillMode.SET&&this._ds.setRows(null,null,!1,null,null)},i.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},i.prototype.$_prepareLoad=function(t){},i}(Ct);(Pi=t.ExportType||(t.ExportType={})).EXCEL="excel",Pi.CSV="csv",(Di=t.ExportTarget||(t.ExportTarget={})).LOCAL="local",Di.REMOTE="remote",Di.STREAM="stream";var Ji,Zi=function(e){function i(i){var r=e.call(this)||this;return r._type=t.ExportType.EXCEL,r._target=t.ExportTarget.LOCAL,r._booleanFormatter=null,r.datetimeCallback=null,r.numberCallback=null,r.booleanCallback=null,r.objectCallback=null,r.textCallback=null,r.start=0,r.count=-1,r.replaceCrText=null,r.replaceLfText=null,r.seperator=null,r.url=void 0,r.done=null,r.showProgress=!1,r.progressMessage="Exporting...",r.prepareProgress=10,r.progressCallback=null,r.params=null,r.assignFrom(i),r.extend(i),r}return r(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(e){e&&ft.valueIn(e,t.ExportType)&&(this._type=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(e){e&&ft.valueIn(e,t.ExportTarget)&&(this._target=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var e=this.type===t.ExportType.CSV?".csv":".xlsx";return this._fileName+e}return this._fileName}return this.type===t.ExportType.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?Te.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!0,configurable:!0}),i}(Ct),tr=function(){function t(){}return t.prototype.dispose=function(){return null},t.prototype.saveLocal=function(t,e,i){var r=dt(i),o=new Blob([e],{type:"text/csv charset=UTF-8"});if(r.navigator.msSaveOrOpenBlob)r.navigator.msSaveOrOpenBlob(o,t);else if(r.navigator.msSaveOrOpenBlob)r.navigator.msSaveOrOpenBlob(o,t);else{var n=i.createElement("a");i.body.appendChild(n);var s=URL.createObjectURL(o);n.href=s,n.download=t,n.click(),i.body.removeChild(n)}},t.prototype.saveServer=function(t,e,i,r,o){var n='<form name="tempForm" action="'+i+'" method="post">';if(n+='<input type="hidden" name="fileName" value = "'+t+'"/>',n+='<input type="hidden" name="data" value = "'+e+'"/>',n+='<input id="submitBtn" type="submit"/>',n+="</form>",o)for(var s in o)n+='<input type="hidden" name="'+s+'" value = "'+o[s]+'"/>';var a=r.createElement("div");a.innerHTML=n,r.body.appendChild(a),r.getElementById("submitBtn").click(),r.body.removeChild(a)},t}(),er=function(e){function i(t){var i=e.call(this,t)||this;return i.exportFields=null,i.hideFields=null,i.includeFieldNames=!1,i.extend(t),i}return r(i,e),Object.defineProperty(i.prototype,"type",{get:function(){return t.ExportType.CSV},enumerable:!0,configurable:!0}),i}(Zi),ir=function(e){function i(){return e.call(this)||this}return r(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),null},i.prototype.export=function(t,e){this._dataSource=t,this._exportOptions=e instanceof er?e:new er(e),this._exportFields=this.$_prepareFields(t,e.exportFields,e.hideFields),this._rows=[],t instanceof Xi?this.$_buildTreeBook((function(){this.save()})):t instanceof Ii&&this.$_buildBook((function(){this.save()}))},i.prototype.$_prepareFields=function(t,e,i){var r=t.getFields();return e?e.map((function(e){return t.fieldByName(e)})).filter((function(t){return t})):i?r.filter((function(t){return i.indexOf(t.orgFieldName)<0})):r},i.prototype.addQuatation=function(e,i){return ft.addQuatation(e,i===t.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.$_buildFieldName=function(){return this._exportFields.map((function(t){return t.orgFieldName})).join(this._exportOptions.seperator||",")},i.prototype.$_buildBook=function(e){var i=this._exportOptions,r=this._dataSource.rowCount,o=Math.max(0,i.start),n=-1==i.count?r:Math.min(Math.max(i.count,0),r),s=Math.min(r,o+n);i.includeFieldNames&&this._rows.push(this.$_buildFieldName());for(var a=o;a<s;a++)this._rows.push(this.$_buildItem(a));if(i.target===t.ExportTarget.STREAM){var l=this._rows.join("\n");i.done&&"function"==typeof i.done&&i.done(l)}else i.done&&"function"==typeof i.done&&i.done(),e.call(this)},i.prototype.$_buildTreeBook=function(e){for(var i=this._exportOptions,r=this._dataSource.getDescendants(null,0),o=0;o<r.length;o++)this._rows.push(this.$_buildItem(r[o]));if(i.target===t.ExportTarget.STREAM){var n=this._rows.join("\n");i.done&&"function"==typeof i.done&&i.done(n)}else i.done&&"function"==typeof i.done&&i.done(),e.call(this)},i.prototype.$_buildItem=function(e){var i,r,o,n=this._dataSource,s=this._exportFields;n instanceof Xi?(r=e?e.values:[],o=e.rowId):(r=n.getRow(e),o=e);for(var a,l,u=[],h=s.length,c=this._exportOptions,d=c.seperator,p=0;p<h;p++){if(l=void 0,i=s[p])switch(a=r[i.index],i.dataType){case t.ValueType.NUMBER:l=isNaN(a)||null==a?"":c.numberCallback?c.numberCallback(o,i.orgFieldName,a):c.numberFormat?Me.getFormatter(c.numberFormat).getText(a):String(a);break;case t.ValueType.BOOLEAN:null!=a&&(c.booleanCallback?a=c.booleanCallback(o,i.orgFieldName,a):c.booleanFormatter&&(a=c.booleanFormatter.formatValue(a)),l=String(a));break;case t.ValueType.DATE:case t.ValueType.DATETIME:a&&(l=c.datetimeCallback?(a=c.datetimeCallback(o,i.orgFieldName,a))instanceof Date?Je.Default.getText(a):a:Je.Default.getText(a));break;case t.ValueType.OBJECT:a&&(l="object"==typeof(a=c.objectCallback?c.objectCallback(o,i.orgFieldName,a):a)?JSON.stringify(a):String(a));break;default:l=null!=(a=c.textCallback?c.textCallback(o,i.orgFieldName,a):a)?String(a):""}u[u.length]=this.addQuatation(l,i&&i.dataType)}return u.join(d||",")},i.prototype.save=function(){var e=this._exportOptions,i=e.fileName,r="\ufeff"+this._rows.join("\n");e.target==t.ExportTarget.LOCAL?this.saveLocal(i,r,document):this.saveServer(i,_t.encode(r),e.url,document,e.params)},i}(tr),rr=function(){function t(){}return t.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},t.fillData=function(t,e,i,r){var o=new Li(t);try{o.load(e,i,r)}finally{o.dispose()}},t.fillTreeData=function(t,e,i,r){var o=new Qi(t);try{o.load(e,i,r)}finally{o.dispose()}},t.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),r=0;r<e;r++)i[r]=t[r].rowId;return i}return null},t}(),or=function(){},nr=function(){function e(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}return e.prototype.dispose=function(){this._dp.dispose(),this._dp=null},Object.defineProperty(e.prototype,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(t){this._dp.commitBeforeDataEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valuesCallback",{get:function(){return this._dp.valuesCallback},set:function(t){this._dp.valuesCallback=t},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText,commitBeforeDataEdit:t.commitBeforeDataEdit}},e.prototype.setOptions=function(t){this._dp.assignFrom(t)},e.prototype.beginUpdate=function(){this._dp.beginUpdate()},e.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._dp.endUpdate(t)},e.prototype.getFields=function(){return this._dp.getFields()},e.prototype.setFields=function(t){ft.isArray(t)&&this._dp.setFields(t)},e.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},e.prototype.getFieldCount=function(){return this._dp.fieldCount},e.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},e.prototype.getFieldNames=function(){return this._dp.getFieldNames()},e.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},e.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},e.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},e.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},e.prototype.hasData=function(t){return this._dp.hasData(t)},e.prototype.getValues=function(t){return this._dp.getRow(t)},e.prototype.checkRowStates=function(t){this._dp.checkStates=t},e.prototype.getRowState=function(t){return this._dp.getRowState(t)},e.prototype.getStateRows=function(e){return void 0===e&&(e=t.RowState.NONE),this._dp.getStateRows(e)},e.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},e.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this._dp.clearRowStates(t,e)},e.prototype.setRowState=function(e,i,r){void 0===i&&(i=t.RowState.NONE),void 0===r&&(r=!1),this._dp.setRowState(e,i,r)},e.prototype.setRowStates=function(e,i,r,o){void 0===i&&(i=t.RowState.NONE),void 0===r&&(r=!1),void 0===o&&(o=!1),this._dp.setRowStates(e,i,r,o)},e.prototype.getRowStateCount=function(e){if(!e)return 0;var i=[];if("*"==e||"all"==e)i.push(t.RowState.CREATED,t.RowState.UPDATED,t.RowState.DELETED,t.RowState.CREATE_AND_DELETED);else for(var r=Array.isArray(e)?e:[e],o=0,n=r.length;o<n;o++)i.push(r[o]);return i.length>0?this._dp.getRowStateCount(i):void 0},e.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},e.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(ft.makeArray(t))},e.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},e.prototype.getDistinctValues=function(e,i,r){void 0===i&&(i=-1),void 0===r&&(r=t.SortDirection.ASCENDING);var o=r||t.SortDirection.ASCENDING,n="string"==typeof e?this._dp.getFieldIndex(e):e;return this._dp.getDistinctValues(n,i,o)},e.prototype.savePoint=function(t){return void 0===t&&(t=!0),this._dp.savePoint(t)},e.prototype.rollback=function(t){void 0===t&&(t=0),this._dp.rollback(t)},e.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},e.prototype.getSavePoints=function(){return this._dp.getSavePoints()},e.prototype.setDataComparer=function(t,e){var i="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(i,e)},e.prototype.exportToCsv=function(t){(new ir).export(this._dp,t)},e.prototype.destroy=function(){this.dispose()},e.prototype.undo=function(){this._dp.undo()},e.prototype.redo=function(){this._dp.redo()},e.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},e.prototype.getProvider=function(){return this._dp},e}(),sr=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.onRowCountChanged=null,t.onRowUpdating=null,t.onRowUpdated=null,t.onRowsUpdated=null,t.onRowListUpdated=null,t.onRowInserting=null,t.onRowInserted=null,t.onRowsInserted=null,t.onRowDeleting=null,t.onRowDeleted=null,t.onRowsDeleted=null,t.onRowMoving=null,t.onRowMoved=null,t.onRowsMoving=null,t.onRowsMoved=null,t.onRowListMoving=null,t.onRowListMoved=null,t.onValueChanged=null,t.onDataChanged=null,t.onRowStateChanged=null,t.onRowStatesChanged=null,t.onRowStatesCleared=null,t.onRestoreRows=null,t}return r(i,e),i.prototype.getRowCount=function(){return this._dp.rowCount},i.prototype.setRowCount=function(e,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=null),void 0===o&&(o=t.RowState.NONE);var n=o;return this._dp.setRowCount(e,i,r,n)},i.prototype.setFilterMode=function(t){void 0===t&&(t="and"),this._dp.setFilterMode(t)},i.prototype.setFilters=function(t,e){void 0===e&&(e="and"),this._dp.setFilters(t,e)},i.prototype.fillJsonData=function(t,e){var i=e instanceof Ti?e:new Ti(e);rr.fillData(this._dp,"json",t,i)},i.prototype.fillXmlData=function(t,e){var i=e instanceof Ti?e:new Ti(e);rr.fillData(this._dp,"xml",t,i)},i.prototype.fillCsvData=function(t,e){var i=e instanceof Ti?e:new Ti(e);rr.fillData(this._dp,"csv",t,i)},i.prototype.setRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.setRows(t,e,i)},i.prototype.addRows=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===r&&(r=!1),this._dp.appendRows(t,e,i,r)},i.prototype.insertRows=function(t,e,i,r,o){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===o&&(o=!1),this._dp.insertRows(t,e,i,r,o)},i.prototype.updateRows=function(t,e,i,r,o,n){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===o&&(o=!1),void 0===n&&(n=!1),this._dp.updateRows(t,e,i,r,o,n)},i.prototype.updateRowsByDataRow=function(t,e,i){this._dp.updateRows2(t,e,i)},i.prototype.clearRows=function(){this._dp.clearRows()},i.prototype.updateRow=function(t,e,i){this._dp.updateRow(t,e,i)},i.prototype.hideRows=function(t){this._dp.hideRows(t)},i.prototype.showHiddenRows=function(t){this._dp.showRows(t)},i.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},i.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},i.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},i.prototype.addRow=function(t){return this._dp.appendRow(t)},i.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},i.prototype.removeRow=function(t){this._dp.removeRow(t)},i.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this._dp.removeRows(t,e)},i.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},i.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},i.prototype.getValue=function(t,e){var i=rr.getFieldIndex(this._dp,e);return this._dp.getValue(t,i)},i.prototype.setValue=function(t,e,i){var r=rr.getFieldIndex(this._dp,e);this._dp.setValue(t,r,i)},i.prototype.getRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRows(t,e)},i.prototype.getJsonRow=function(t,e){return this._dp.getRowObject(t,e)},i.prototype.getJsonRows=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),this._dp.getRowObjects(t,e,i)},i.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},i.prototype.getOutputRows=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.getOutputObjects(t,e,i)},i.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var r=rr.getFieldIndex(this._dp,t);return this._dp.getFieldValues(r,e,i)},i.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},i.prototype.searchData=function(t){return t?this._dp.searchData(t):null},i.prototype._createProvider=function(t){return new Ii(t,this)},i.prototype._createListener=function(t){return new lr(this,t)},i}(nr),ar=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,e)||this;return i.onRowCountChanged=null,i.onRowAdding=null,i.onRowAdded=null,i.onRowsAdded=null,i.onRowDeleting=null,i.onRowDeleted=null,i.onRowsDeleted=null,i.onRowUpdating=null,i.onRowUpdated=null,i.onRowsUpdating=null,i.onRowsUpdated=null,i.onValueChanged=null,i.onDataChanged=null,i.onRowStateChanged=null,i.onRowStatesChanged=null,i.onRowSiblingMoving=null,i.onRowSiblingMoved=null,i.onRowsSiblingMoving=null,i.onRowsSiblingMoved=null,i.onRowParentChanging=null,i.onRowParentChanged=null,i}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.getRowCount=function(){return this._dp.rowCount},e.prototype.setRows=function(t,e,i,r,o){this._dp.setRows(t,e,i,r,o)},e.prototype.setCsvRows=function(t,e,i,r,o){this._dp.setCsvRows(t,e,i,r,o)},e.prototype.setXmlRows=function(t,e,i,r){this._dp.setXmlRows(t,e,i,r)},e.prototype.setObjectRows=function(t,e,i,r){this._dp.setJsonRows(t,e,i,r)},e.prototype.setNestedRows=function(t,e,i,r,o){this._dp.setJsonRows2(t,e,i,r,o)},e.prototype.fillJsonData=function(t,e){var i=new Ti(e);try{rr.fillTreeData(this._dp,"json",t,i)}finally{i.dispose(),i=null}},e.prototype.fillXmlData=function(t,e){var i=new Ti(e);try{rr.fillTreeData(this._dp,"xml",t,i)}finally{i.dispose(),i=null}},e.prototype.fillCsvData=function(t,e){var i=new Ti(e);try{rr.fillTreeData(this._dp,"csv",t,i)}finally{i.dispose(),i=null}},e.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},e.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},e.prototype.getParent=function(t){var e=this._dp.rowById(t);return e&&e.parent?e.parent.rowId:-1},e.prototype.getLevel=function(t){return this._dp.rowById(t).level},e.prototype.getChildCount=function(t){if(null==t||-1==t)return this._dp.getChildCount(null);var e=this._dp.rowById(t);return e&&e.children?e.children.length:0},e.prototype.getChildren=function(t){var e;return e=null==t||-1==t?this._dp.getRows(null):this._dp.rowById(t).children,rr.extractTreeRows(e)},e.prototype.getDescendantCount=function(t){return null==t||-1==t?this._dp.getDescendantCount(null):this._dp.rowById(t).descendantCount},e.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null;null!=t&&-1!=t&&(i=this._dp.rowById(t));var r=this._dp.getDescendants(i,e);return rr.extractTreeRows(r)},e.prototype.getAncestors=function(t){var e=this._dp.rowById(t);return e&&e.ancestors?rr.extractTreeRows(e.ancestors):null},e.prototype.getJsonRow=function(t,e,i,r,o,n){void 0===r&&(r="rows"),void 0===o&&(o="iconIndex"),void 0===n&&(n=-1);var s=null==t||t<0?this._dp.rootRow:this._dp.rowById(t);if(s){var a=s.getObject()||{};return s&&e&&(a.__rowState=s.rowState),i&&0!==n&&(a[r]=s.getChildObjects(i,r,o,!1,e,n-1)),a}return null},e.prototype.getJsonRows=function(t,e,i,r,o){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===r&&(r="iconIndex");var n=null==t||t<=-1?this._dp.rootRow:this._dp.rowById(t);return n?n.getChildObjects(e,i,r,!0,o):null},e.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");var r,o=new Fe(t);try{var n=null==e||e<0?this._dp.rootRow:this._dp.rowById(e);r=n?n.getOutput(o,i):null}finally{o.dispose()}return r},e.prototype.getOutputRows=function(t,e,i,r,o){void 0===i&&(i=!1),void 0===r&&(r="rows"),void 0===o&&(o="iconIndex");var n,s=new Fe(t);try{var a=null==e||e<=-1?this._dp.rootRow:this._dp.rowById(e);n=a?a.getChildOutputObjects(s,i,r,o):null}finally{s.dispose()}return n},e.prototype.addChildRow=function(t,e,i,r){void 0===i&&(i=-1),void 0===r&&(r=!1);var o=this._dp,n=o.rowById(t)||o.rootRow,s=o.createRow(e,i,r);return n.addChild(s,!1)?s.rowId:-1},e.prototype.insertChildRow=function(t,e,i,r,o){void 0===r&&(r=-1),void 0===o&&(o=!1);var n=this._dp,s=n.rowById(t)||n.rootRow,a=n.createRow(i,r,o);return s.insertChild(e,a,!1)?a.rowId:-1},e.prototype.insertChildNode=function(t,e,i,r,o,n){void 0===r&&(r="rows"),void 0===o&&(o="iconField"),void 0===n&&(n=!1);var s=this._dp,a=null==t||t<0?s.rootRow:s.rowById(t);if(a)return s.insertChildNode(a,e,i,r,o,n)},e.prototype.updateRow=function(t,e,i){var r=this._dp.rowById(t);return!!r&&r.update(e,i)},e.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},e.prototype.removeRow=function(t){var e=this._dp.rowById(t);return!(!e||!e.parent)&&e.parent.removeChild(e)},e.prototype.removeRows=function(t){return!!(t&&t.length>0)&&this._dp.removeRows(t)},e.prototype.clearRows=function(){this._dp.clearRows()},e.prototype.hideRows=function(t){this._dp.hideRows(t)},e.prototype.showHiddenRows=function(t){this._dp.showRows(t)},e.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},e.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},e.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},e.prototype.getValue=function(t,e){var i=this._dp.rowById(t),r=rr.getFieldIndex(this._dp,e);return i?i.getValue(r):null},e.prototype.setValue=function(t,e,i){var r=this._dp.rowById(t),o=rr.getFieldIndex(this._dp,e);r&&r.setValue(o,i,!1)},e.prototype.moveRowSibling=function(t,e){var i=this._dp.rowById(t);return!!i&&this._dp.changeRowIndex(i,e)},e.prototype.changeRowParent=function(t,e,i){var r=this._dp.rowById(t),o=e<0?this._dp.rootRow:this._dp.rowById(e);return!(!r||!o)&&this._dp.changeRowParent(r,o,i)},e.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},e.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},e.prototype._createProvider=function(t){return new Xi(t,this)},e.prototype._createListener=function(t){return new ur(this,t)},e}(nr),lr=function(t){function e(e,i){var r=t.call(this)||this;return r._del=e,r._provider=i,r._provider.addListener(r),r}return r(e,t),e.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):ft.log("onRowCountChanged: "+t.rowCount)},e.prototype.onDataProviderRowUpdating=function(t,e,i){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e):(ft.log("onRowUpdating: "+e),!0)},e.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):ft.log("onRowUpdated: "+e)},e.prototype.onDataProviderRowsUpdated=function(t,e,i){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,i):ft.log("onRowsUpdated: "+e+", "+i)},e.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):ft.log("onRowListUpdated: "+e)},e.prototype.onDataProviderRowInserting=function(t,e,i){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,i):(ft.log("onRowInserting: "+e),!0)},e.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):ft.log("onRowInserted: "+e)},e.prototype.onDataProviderRowsInserted=function(t,e,i){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,i):ft.log("onRowsInserted: "+e+", "+i)},e.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(ft.log("onRowDeleting: "+e),!0)},e.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):ft.log("onRowDeleted: "+e)},e.prototype.onDataProviderRowsRemoving=function(t,e){return!0},e.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):ft.log("onRowsDeleted: ",e)},e.prototype.onDataProviderRowMoving=function(t,e,i){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,i):(ft.log("onRowMoving: "+e+", "+i),!0)},e.prototype.onDataProviderRowMoved=function(t,e,i){this._del.onRowMoved?this._del.onRowMoved(this._del,e,i):ft.log("onRowMoved: "+e+", "+i)},e.prototype.onDataProviderRowsMoving=function(t,e,i,r){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,i,r):(ft.log("onRowsMoving: "+e+", "+i+", "+r),!0)},e.prototype.onDataProviderRowsMoved=function(t,e,i,r){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,i,r):ft.log("onRowsMoved: "+e+", "+i+", "+r)},e.prototype.onDataProviderRowListMoving=function(t,e,i){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,i):(ft.log("onRowListMoving: ",e,", ",i),!0)},e.prototype.onDataProviderRowListMoved=function(t,e,i){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,i):ft.log("onRowListMoved: ",e,i)},e.prototype.onDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e,i):ft.log("onValueChanged:"+e+", "+i)},e.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):ft.log("onDataChanged")},e.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):ft.log("onRowStateChanged: "+e)},e.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):ft.log("onRowStatesChanged",e)},e.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):ft.log("onRowStatesCleared")},e.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):ft.log("onRestoreRows",e)},e}(or),ur=function(t){function e(e,i){var r=t.call(this)||this;return r._del=e,r._provider=i,r._provider.addListener(r),r}return r(e,t),e.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):ft.log("onRowCountChanged: "+t.rowCount)},e.prototype.onTreeDataProviderRowAdding=function(t,e,i,r){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,i,r._values):(ft.log("onRowAdding: "+e.rowId+", "+i,r._values),!0)},e.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):ft.log("onRowAdded: "+e.rowId)},e.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var r=rr.extractTreeRows(i);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,r):ft.log("onRowsAdded: "+e.rowId,r)},e.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(ft.log("onRowDeleting: "+e.rowId),!0)},e.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):ft.log("onRowDeleted: "+e.rowId)},e.prototype.onTreeDataProviderRowsRemoved=function(t,e){var i=rr.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,i):ft.log("onRowsDeleted: ",i)},e.prototype.onTreeDataProviderRowUpdating=function(t,e){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId):(ft.log("onRowUpdating:"+e.rowId),!0)},e.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):ft.log("onRowUpdated: "+e.rowId)},e.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,Wi.getRowIds(e)):(ft.log("onRowUpdating:"+e.length),!0)},e.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,Wi.getRowIds(e)):ft.log("onRowsUpdated: "+e.length)},e.prototype.onTreeDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,i):ft.log("onValueChanged: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):ft.log("onRowStateChanged: "+e.rowId)},e.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=rr.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,i):ft.log("onRowStatesChanged: ",i)},e.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,i){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,i):(ft.log("onRowSiblingMoveing: "+e.rowId+", "+i),!0)},e.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,i):ft.log("onSiblingMoved: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,i){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,Wi.getRowIds(e),i):(ft.log("onRowSiblingMoveing: ",e,i),!0)},e.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,Wi.getRowIds(e),i):ft.log("onSiblingMoved: ",e,i)},e.prototype.onTreeDataProviderRowParentChanging=function(t,e,i,r){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,i.rowId,r);ft.log("onRowParentChanging: "+e.rowId+", "+i.rowId+", "+r)},e.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,r){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,i.rowId,r):ft.log("onRowParentChanged: "+e.rowId+", "+i.rowId+", "+r)},e}(or),hr=function(t){function e(e,i){var r=t.call(this)||this;return r._urls=[],r._name=e,r._rootUrl=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._urls.length},enumerable:!0,configurable:!0}),e.prototype.addUrl=function(t){t&&this._urls.indexOf(t)<0&&this._urls.push(t)},e.prototype.addUrls=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t)for(var i=0;i<t.length;i++)this.addUrl(t[i])},e.prototype.getImage=function(t){return t>=0&&t<this._urls.length?this._rootUrl+this._urls[t]:null},e}(Ct),cr=function(){function t(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}return t.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},t}();(Ji=t.ItemState||(t.ItemState={})).NORMAL="normal",Ji.FOCUSED="focused",Ji.UPDATING="updating",Ji.INSERTING="inserting",Ji.APPENDING="appending",Ji.DUMMY="dummy";var dr,pr=function(e){return e==t.ItemState.UPDATING||e==t.ItemState.INSERTING||e==t.ItemState.APPENDING},fr=function(e){return e==t.ItemState.INSERTING||e==t.ItemState.APPENDING},_r=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},t.prototype.assign=function(t){"string"==typeof t?this.styleName=t:(null!=t.readOnly&&(this.readOnly=t.readOnly),null!=t.editable&&(this.editable=t.editable),null!=t.styleName&&(this.styleName=t.styleName.trim()),null!=t.style&&(this.style=t.style),null!=t.exportStyleName&&(this.exportStyleName=t.exportStyleName))},t}(),gr=function(){function e(){this._id=e.$$_grid_item_id++,this._index=-1}return e.prototype.dispose=function(){this._parent=null},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentIndex",{get:function(){return this._parent?this._parent._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this._parent;t&&t.level>1;)t=t._parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isData",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDataRow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._parent&&this._index>=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLevel",{get:function(){return this.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._parent&&this._parent.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){var e=this.dataRow;if(e>=0){var i=this.dataSource;return i?i.getRowState(e):t.RowState.NONE}return t.RowState.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return t.ItemState.NORMAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){var t=0!=(1&this._getExtents());return this.provider.getItemChecked(this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkable",{get:function(){return 0==(4&this._getExtents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(t){this._setExtents(t?8|this._getExtents():-9&this._getExtents())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"merged",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this._getExtents();return 196608&t?(4294705152&t)>>>18:NaN},enumerable:!0,configurable:!0}),e.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(196608&i)return this._setExtents(-196609&i),!0}else{if(t!=(4294705152&i)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,i=e?-196609&i|131072:-196609&i|65536,this._setExtents(262143&i|t),!0;if(e){if(0==(131072&i))return i=-196609&i|131072,this._setExtents(i),!0}else if(0==(65536&i))return i=-196609&i|65536,this._setExtents(i),!0}},e.prototype.$_clearHeight=function(t){t?this._setExtents(-196609&this._getExtents()):this._setExtents(-65537&this._getExtents()),this.heights=null,0==this.index&&ft.log("HEIGHT",this.height)},Object.defineProperty(e.prototype,"heights",{get:function(){return this._heights},set:function(t){this._heights=t},enumerable:!0,configurable:!0}),e.prototype.getShadowRow=function(){return this.dataRow},e.prototype.getHeight=function(t){return this._heights[t]},e.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},e.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},e.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof mr?this:null},e.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t;t=t._parent}while(t)},e.prototype.getAncestors=function(){var t=null,e=this._parent;if(e){t=[];do{t.push(e),e=e._parent}while(e)}return t},e.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},e.prototype.getData=function(t){var e=this.dataSource;t=e.getFieldIndex(t);var i=this.getShadowRow();return e&&i>=0?e.getValue(i,t):void 0},e.prototype.setData=function(t,e){var i=this.dataSource;t=i.getFieldIndex(t),i&&i.setValue(this.dataRow,t,e)},e.prototype.getRowData=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRow(t)}return null},e.prototype.getRowObject=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},e.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},e.prototype.canEdit=function(){return!1},e.prototype._setIndex=function(t){this._index=t},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},e.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},e.PARENT="_parent",e.$$_grid_item_id=0,e}(),yr=function(e){function i(t){var i=e.call(this)||this;return i._displayLevel=-1,i._extents=0,i._dataRow=t,i}return r(i,e),Object.defineProperty(i.prototype,"dataRowId",{get:function(){return this._dataRowId},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!0,configurable:!0}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this._displayLevel>=0?this._displayLevel:this.level},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.ROW},enumerable:!0,configurable:!0}),i.prototype.canEdit=function(){return!0},i.prototype.getShadowRow=function(){return this._dataRow},i.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},i}(gr),mr=function(e){function i(){var t=e.call(this)||this;return t._children=[],t._expanded=!1,t._descendantCount=0,t._summaries=null,t._rows=null,t}return r(i,e),i.prototype.dispose=function(){this._children=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapsed",{get:function(){return!this.expanded},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"children",{get:function(){return this._children.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._children.length>0?this._children[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var t=this._children.length;return t>0?this._children[t-1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstItem",{get:function(){if(this._children.length>0){var t=this._children[0];return t instanceof i?t.firstItem:t}return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstDataItem",{get:function(){if(this._children.length>0)for(var t=0,e=this._children.length;t<e;t++){if(this._children[t]instanceof i)return this._children[t].firstDataItem;if(this._children[t]instanceof yr)return this._children[t]}return null},enumerable:!0,configurable:!0}),i.prototype.getFirstVisibleItem=function(t){return this},i.prototype.getLastItem=function(t){var e;if(this._children.length>0){for(var r=this._children.length;r&&(e=this._children[r-1],t&&e instanceof vr);r--);return e instanceof i?e.getLastItem(t):e}return null},Object.defineProperty(i.prototype,"lastDataItem",{get:function(){var t=this._children.length;if(t>0)for(;t>0;t--){var e=this._children[t-1];if(e instanceof i)return e.lastDataItem;if(e instanceof yr)return e}return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapsable",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},i.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},i.prototype.getFooterIndex=function(t){return 0},i.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},i.prototype.indexOf=function(t){for(var e=this._children.length-1;e>=0;e--)if(this._children[e]==t)return e;return-1},i.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},i.prototype.getDescendants=function(t){if((!t||this._expanded)&&this._children&&this._children.length>0){var e=[];return function e(r,o){for(var n=r.count,s=0;s<n;s++){var a=r.getItem(s);o.push(a),a instanceof i&&(!t||a.expanded)&&e(a,o)}}(this,e),e}return null},i.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},i.prototype.insert=function(t,e){this._addChild(e,t)},i.prototype.add=function(t){this._addChild(t,-1)},i.prototype.addAll=function(t){this._addChildren(t)},i.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&(this._children.splice(e,1),t instanceof gr&&(t[gr.PARENT]=null))},i.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},i.prototype.setExpanded=function(t,e,i){(t!=this._expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof cr?e.count:e?e.length:this._descendantCount},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof cr)return e.dataCount;if(e){var i=this.dataSource,r=e.length,o=0;if(r>0){for(var n=0;n<r;n++){var s=i.getValue(e[n],t);null!=s&&""!==s&&o++}return o}}return 0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof cr)return e.dataAvg;if(e){for(var i=this.dataSource,r=e.length,o=0,n=0,s=0;s<r;s++){var a=i.getValue(e[s],t);isNaN(a)||(o+=a,n++)}return n>0&&!isNaN(o)?o/n:NaN}return NaN},i.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof cr)return e.sum;if(e){for(var i=this.dataSource,r=e.length,o=void 0,n=0;n<r;n++){var s=i.getValue(e[n],t);isNaN(s)||(o=(isNaN(o)?0:o)+s)}return o}return NaN},i.prototype.getMax=function(e){var i=this.$_getSummary(e),r=this.dataSource,o=r.getField(e).dataType===t.ValueType.NUMBER;if(i instanceof cr)return i.max;if(i){for(var n=i.length,s=void 0,a=0,l=null;a<n;)null!=(s=r.getValue(i[a++],e))&&(!o||!isNaN(s))&&(l=null==l||s>l?s:l);return l}return o?NaN:null},i.prototype.getMin=function(e){var i=this.$_getSummary(e),r=this.dataSource,o=r.getField(e).dataType===t.ValueType.NUMBER;if(i instanceof cr)return i.min;if(i){for(var n=i.length,s=void 0,a=0,l=null;a<n;)null!=(s=r.getValue(i[a++],e))&&(!o||!isNaN(s))&&(l=null==l||s<l?s:l);return l}return o?NaN:null},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof cr)return e.avg;if(e){var i=this.dataSource,r=e.length,o=void 0;if(r>1){o=0;for(var n=0;n<r;n++)o+=i.getValue(e[n],t);return o/r}if(1==r)return i.getValue(e[0],t)}return NaN},i.prototype.getVar=function(e,i){var r=this.$_getSummary(e);if(r instanceof cr)return 0===i?r.varsp:r.vars;if(r&&this.provider.summaryMode==t.SummaryMode.STATISTICAL){var o=this.dataSource,n=r.length;if(n>1){for(var s=0,a=0;a<n;a++)s+=o.getValue(r[a],e);var l=s/n;for(s=0,a=0;a<n;a++)s+=Math.pow(o.getValue(r[a],e)-l,2);return s/(n-i)}if(1==n)return 0}return NaN},i.prototype.getStdev=function(e,i){var r=this.$_getSummary(e);if(r instanceof cr)return 0==i?Math.sqrt(r.varsp):Math.sqrt(r.vars);if(r&&this.provider.summaryMode==t.SummaryMode.STATISTICAL){var o=this.dataSource,n=r.length;if(n>1){for(var s=0,a=0;a<n;a++)s+=o.getValue(r[a],e);var l=s/n;for(s=0,a=0;a<n;a++)s+=Math.pow(o.getValue(r[a],e)-l,2);return Math.sqrt(s/(n-i))}if(1==n)return 0}return NaN},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype._setExpanded=function(t){this._expanded=t},i.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},i.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof gr&&(e[gr.PARENT]=this)},i.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t[gr.PARENT]=this)},i.prototype._addChildren=function(t){var e;if(t&&(e=t.length)>0)for(var i=0;i<e;i++){var r=t[i];r&&this.indexOf(r)<0&&(r[gr.PARENT]=this,this._children.push(r))}},i.prototype._removeChild=function(t){var e=this.indexOf(t);return e>=0&&(this._children.splice(e,1),t instanceof gr&&(t[gr.PARENT]=null)),e},i.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},i.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||t>=i)throw new RangeError("index is out of range: "+t);var r=Math.min(Math.max(t+e,0),i-1),o=this._children[t];if(e<0)for(var n=t;n>r;n--)this._children[n]=this._children[n-1];else for(n=t;n<r;n++)this._children[n]=this._children[n+1];this._children[r]=o},i.prototype.$_collectRows=function(t,e){for(var r=t.count,o=0;o<r;o++){var n=t.getItem(o);n instanceof i?this.$_collectRows(n,e):n.isDataRow&&e.push(n.dataRow)}},i.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof Ue))return null;null==this._summaries&&(this._summaries={}),"string"==typeof t&&(t=e.getFieldIndex(t));var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},i.prototype.$_summarize=function(e,i){var r=this.provider.summaryMode;if(r!=t.SummaryMode.NONE){if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>3&&i.canSummarize(e)){var o=new cr(e);return i.summarizeRange(o,this._rows,r==t.SummaryMode.STATISTICAL),o}return this._rows}return null},i.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},i.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var e=this.count-1;e>=0;e--){var r=this.getItem(e);r instanceof i&&r._restoreExpanded(!0)}},i}(gr),br=function(e){function i(t){var i=e.call(this)||this;return i._footers=0,i._extents=0,i._allFooters=[],i._groupField=t,i}return r(i,e),i.prototype.dispose=function(){this._allFooters=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"groupField",{get:function(){return this._groupField},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupValue",{get:function(){return this._groupValue},set:function(t){this._groupValue=t},enumerable:!0,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.GROUP},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footers},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allFooterCount",{get:function(){return this._allFooters.length},enumerable:!0,configurable:!0}),i.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},i.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},i.prototype.getFooterIndex=function(t){return t.$_footerIndex},i.prototype.isFooter=function(t){if(t===this._footer)return!0;if(this._footers>1)for(var e=this._children,i=e.length-1;i>=0;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},i.prototype._addChild=function(t,i){t instanceof vr?(this._allFooters.push(t),t[gr.PARENT]=this,t.hiddenFooter||(e.prototype._addChild.call(this,t,i),this._footer=this._footer||t,this._footers++)):e.prototype._addChild.call(this,t,i)},i.prototype.getFirstVisibleItem=function(t){if(this.visible)return this;for(var e=0,i=this.children.length;e<i;e++){var r=this.children[e];if(t&&this.footer&&this.footer.visible)return this.footer;if(r instanceof mr){var o=r.getFirstVisibleItem(t);if(o)return o}else if(r.visible)return r}return null},i}(mr),vr=function(e){function i(){var t=e.call(this)||this;return t.$_footerIndex=0,t._hiddenFooter=!1,t._extents=0,t}return r(i,e),Object.defineProperty(i.prototype,"footerIndex",{get:function(){return this.$_footerIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this.$_vindex>-1?this.$_vindex:this.$_footerIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t},enumerable:!0,configurable:!0}),i.prototype._getExtents=function(){return this._extents},i.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayLevel",{get:function(){return this.level},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.FOOTER},enumerable:!0,configurable:!0}),i}(gr),wr=function(t){function e(e){var i=t.call(this,-1)||this;return i._provider=e,i}return r(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._provider.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsable",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(br),Cr=function(e){function i(t){var i=e.call(this)||this;return i._hideDeleted=!1,i._eventLock=0,i._rowHeighted=!1,i._explicitHeighted=!1,i._indexing=t,i._rootItem=i._createRootItem(),i}return r(i,e),i.prototype._doDispose=function(){return this._rootItem.dispose(),null},Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return t.SummaryMode.AGGREGATE},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return t.SortMode.AUTO},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.setFixed=function(t,e,i){},i.prototype.attachItem=function(t){t._parent=this._rootItem},i.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,r=t.length;i<r;i++){var o=this.getItem(t[i]);o&&e.push(o)}return e},i.prototype.getIndexOfRow=function(t,e){var i=this.getItemOfRow(t,e);return i?i.index:-1},i.prototype.getIndicesOfRows=function(t,e){var i=[],r=t?t.length:0;if(r)for(var o=0;o<r;o++){var n=this.getItemOfRow(t[o],e);i.push(n?n.index:-1)}return i},i.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],r=t?t.length:0,o=0;o<r;o++){var n=this.getItemOfRow(t[o],e);n&&i.push(n)}return i},i.prototype.exchange=function(t,e){},i.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},i.prototype.setGroupCheckable=function(t){},i.prototype.checkItem=function(t,e,i,r){if(t){var o=t.checked;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=o&&r&&this._fireItemChecked(t),this._fireRefreshClient()):e!=o&&(this._setChecked(t,e),r?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},i.prototype.checkItems=function(t,e,i){if(t&&t.length>0){for(var r=0,o=t.length;r<o;r++){var n=t[r];n instanceof gr&&this._setChecked(n,e)}i?1===t.length?this._fireItemChecked(t[0]):this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},i.prototype.checkAll=function(t,e,i,r,o){var n=this.itemCount;if(i)for(var s=0;s<n;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<n;s++)this._setChecked(this.getItem(s),t);r?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},i.prototype._setCheckItem=function(t,e){t._setChecked(e)},i.prototype._clearDisplayLevels=function(){},i.prototype.canUpdate=function(e,i){if(e){var r=this.dataSource;if(!r)return!1;var o=e.dataRow;if(!r.canUpdateField(o,i))return!1;var n=e.itemState,s=fr(n)||n===t.ItemState.DUMMY;return(o>=0||s)&&(s||r.canUpdateRow(o))}return!1},i.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},i.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},i.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return e>=0&&i&&i.canDeleteRow(e)}return!1},i.prototype.appendDummy=function(){},i.prototype.cancelDummy=function(){},i.prototype.findItem=function(t,e,i,r,o){return-1},i.prototype.findCell=function(t,e,i,r,o,n){return null},i.prototype.getNumber=function(t){return NaN},i.prototype.getSum=function(t){return NaN},i.prototype.getMax=function(t){return NaN},i.prototype.getMin=function(t){return NaN},i.prototype.getAvg=function(t){return NaN},i.prototype.getVar=function(t){return NaN},i.prototype.getVarp=function(t){return NaN},i.prototype.getStdev=function(t){return NaN},i.prototype.getStdevp=function(t){return NaN},i.prototype.getDataCount=function(t){return NaN},i.prototype.getDataAvg=function(t){return NaN},Object.defineProperty(i.prototype,"isIndexing",{get:function(){return this._indexing},enumerable:!0,configurable:!0}),i.prototype.setRowHeight=function(t,e,i){t.$_setHeight(e,i)&&(isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0))},i.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;i>=0;i--){var r=this.getItem(i);isNaN(r.height)&&!r.heights||(r.$_clearHeight(t),r.heights=null,e=!0)}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},i.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},i.prototype.setCheckFieldIndex=function(t){},i.prototype.getItemChecked=function(t,e){return e},i.prototype.setItemChecked=function(t,e){return!1},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rootItem},enumerable:!0,configurable:!0}),i.prototype._createRootItem=function(){return new wr(this)},i.prototype._hideDeletedChanged=function(){},i.prototype.$_canFire=function(){return this._eventLock<=0},i.prototype._setChecked=function(t,e){t._setChecked(e)},i.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},i.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},i.prototype._setExpanded=function(t,e){t._setExpanded(e)},i.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},i.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},i.prototype._copyExtents=function(t,e){t instanceof gr&&e instanceof gr&&e._setExtents(t._getExtents())},i.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent("onItemProviderReset")},i.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefresh")},i.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRefreshClient")},i.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemInserted",t)},i.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemDeleted",t)},i.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemUpdated",t)},i.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderCheckableChanged",t)},i.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemChecked",t)},i.prototype._fireItemsChecked=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderItemsChecked",t,e)},i.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderItemAllChecked",t)},i.prototype._fireItemCheckChanged=function(t,e){this.fireEvent("onItemProviderItemCheckChanged",t,e)},i.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStateChanged",t)},i.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesChanged",t)},i.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderRowStatesCleared")},i.prototype._fireSort=function(t,e,i){this._eventLock<=0&&this.fireEvent("onItemProviderSort",t,e,i)},i.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent("onItemProviderSorted")},i.prototype._fireFilterAdded=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFilterAdded",t,e)},i.prototype._fireFilterRemoved=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFilterRemoved",t,e)},i.prototype._fireFilterCleared=function(t){this._eventLock<=0&&this.fireEvent("onItemProviderFilterCleared",t)},i.prototype._fireFilterAllCleared=function(){this._eventLock<=0&&this.fireEvent("onItemProviderFilterAllCleared")},i.prototype._fireFiltered=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderFiltered",t,e)},i.prototype._fireCommandStackChanged=function(t,e){this._eventLock<=0&&this.fireEvent("onItemProviderCommandStackChanged",t,e)},i.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent("onItemProviderDataLoadComplated")},i}(fe),xr=function(t){function e(e,i){var r=t.call(this,i)||this;return r._initialize(),r.source=e,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._source?this._source.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._source&&this._source.sorted},enumerable:!0,configurable:!0}),e.prototype.setFixed=function(t,e,i){this._source&&this._source.setFixed(t,e,i)},e.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t,!1):-1},e.prototype.getItemOfRow=function(t,e){return this._source?this._source.getItemOfRow(t,e):null},e.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},e.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},e.prototype._initialize=function(){},e.prototype._clearItems=function(){},e.prototype._populateItems=function(){this._resetItemIndicies(0)},e.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},e.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},e.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},e.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},e.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},e.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},e.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},e.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},e.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},e.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},e.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},e.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},e.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},e.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},e.prototype.onItemProviderFilterAdded=function(t,e,i){},e.prototype.onItemProviderFilterRemoved=function(t,e,i){},e.prototype.onItemProviderFilterCleared=function(t,e){},e.prototype.onItemProviderFilterAllCleared=function(t){},e.prototype.onItemProviderFiltered=function(t,e,i){},e.prototype.onItemProviderSort=function(t,e,i){},e.prototype.onItemProviderSorted=function(t){},e.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e}(Cr),Ir=function(t){function e(e,i,r,o,n){var s=t.call(this,o)||this;return s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._target=i,e.attachItem(s),s._setIndex(r),s._state=n,s.$_setDisplayLevel(i?i.displayLevel:0),s}return r(e,t),Object.defineProperty(e.prototype,"values",{get:function(){},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.beginEdit=function(t,e){this.$_clearHeight(!0)},e.prototype.setValue=function(t,e){},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getData=function(t){return null},e.prototype.setData=function(t,e){},e.prototype.getRowData=function(){return null},e.prototype.getRowObject=function(){return null},e.prototype._clearDisplayLevels=function(){},e}(yr),Sr=function(t){function e(e,i,r,o,n){var s=t.call(this,o)||this;return s._values=[],s._changeValues=[],s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._invalidFields=[],s._target=i,e.attachItem(s),s._setIndex(r),s._state=n,s.$_setDisplayLevel(i?i.displayLevel:0),s._invalidFields=[],s}return r(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,r=i.fieldCount;if(t instanceof Array){r=Math.min(r,t.length);for(var o=0;o<r;o++){var n=i.getField(o),s=this._values[o],a=n.readValue(t[o]);this._values[o]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,o,s,a)}}else if(t)for(o=0;o<r;o++){var l=i.getOrgFieldName(o);t.hasOwnProperty(l)&&(n=i.getField(o),s=this._values[o],a=n.readValue(t[l]),this._values[o]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,o,s,a))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!0,configurable:!0}),e.prototype.beginEdit=function(t,e){fr(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},e.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new Ve("field index is out of bounds: "+t);var r=i.getField(t),o=this._values[t];e=r.readValue(e),this._values[t]=e,this._started&&!r.equalValues(o,e)&&this.provider._editItemCellUpdated(this,t,o,e),this.$_clearHeight(!1)},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._target?this._target.level:1},enumerable:!0,configurable:!0}),e.prototype.getData=function(t){if((t=this.dataSource.getFieldIndex(t))<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},e.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var r=i.getField(t),o=this._values[t],n=!this._checkDiff;e=r.readValue(e),n||(n=this._strictDiff?!r.equalValues(o,e):!r.sameValues(o,e)),n&&(this._values[t]=e,this._changeValues[t]=!0,this.provider._editItemCellUpdated(this,t,o,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},e.prototype.getRowData=function(){return this._values.concat()},e.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,r=t.fieldCount;i<r;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},e.prototype.isEdited=function(t){return this._changeValues[t]},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},e.prototype._clearDisplayLevels=function(){},e}(yr),Er=function(e){function i(i,r){var o=e.call(this,i,r)||this;return o._checkDiff=!1,o._checkCellDiff=!1,o._strictDiff=!1,o._undoable=!1,o._cancelWhenLastUndo=!1,o._orgItem=null,o._editingItem=null,o._dummyEditItem=null,o._editingState=t.ItemState.NORMAL,o._insertMode=0,o._modified=!1,o._commiting=!1,o._saveDs=null,o._commands=new ii(o),i&&(o._saveDs=i.dataSource)&&o._saveDs.registerClient(o),o}return r(i,e),i.prototype._doDispose=function(){this._saveDs=null,e.prototype._doDispose.call(this)},i.prototype.isDataEditing=function(){return this.isEditing()},i.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},i.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},i.prototype.editCommandStackChanged=function(t,e,i){var r=this._saveDs;r?this._fireCommandStackChanged(e||r.canUndo,i||r.canRedo):this._fireCommandStackChanged(e,i)},Object.defineProperty(i.prototype,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isUpdating",{get:function(){return this._editingState==t.ItemState.UPDATING},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isInserting",{get:function(){return this._editingState==t.ItemState.INSERTING},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isAppending",{get:function(){return this._editingState==t.ItemState.APPENDING},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._commands.redoing},enumerable:!0,configurable:!0}),i.prototype.isEditing=function(t){return pr(this._editingState)&&(!t||t===this._editingItem)},i.prototype.isEdited=function(t){return pr(this._editingState)&&(!t||t===this._editingItem)&&this._modified},i.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},i.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.editData=function(t,e,i){var r;if(t&&(r=this.dataSource)&&e>=0&&e<r.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},i.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},i.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.insert=function(t,e,i,r){if(!this.isEditing())try{return this._beginInsert(t,e,i,r),!0}catch(t){throw this.cancel(),t}return!1},i.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},i.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},i.prototype.commit=function(e){if(this.isEditing()){this._commiting=!0;try{var i=this.dataSource;if(i){if(this._editingState==t.ItemState.UPDATING&&this.isCheckDiff){for(var r=this._editingItem.values,o=r.length,n=this.isStrictDiff,s=!1,a=0;a<o;a++)if(n){if(!i.getField(a).equalValues(this._orgItem.getData(a),r[a])){s=!0;break}}else if(!i.getField(a).sameValues(this._orgItem.getData(a),r[a])){s=!0;break}if(!s)return this._cancelEdit(),!0}return this._commitEdit(e)}}finally{this._commiting=!1}}return!0},i.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},i.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},i.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},i.prototype.revert=function(t){},i.prototype.revertAll=function(t){},i.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},i.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},i.prototype._beginUpdate=function(e){if(!e)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=e,this._editingState=t.ItemState.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},i.prototype._doBeginUpdate=function(t){return null},i.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},i.prototype._doBeginAppendDummy=function(){return null},i.prototype._beginAppend=function(e){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(e),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=t.ItemState.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},i.prototype._doBeginAppend=function(t){return null},i.prototype._beginInsert=function(e,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(e,i,r,o),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=t.ItemState.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},i.prototype._doBeginInsert=function(t,e,i,r){return null},i.prototype._updateEditingRow=function(t){return!1},i.prototype._insertEditingRow=function(t){return!1},i.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},i.prototype._cancelEdit=function(){this._checkEditing();var e=this._editingState;try{this._editingState=t.ItemState.NORMAL,this._doCancelEdit(e,this._orgItem)}catch(t){throw this._editingState=e,t}this._modified=!1,this._commands.flush(),this.fireCanceled()},i.prototype._doCancelDummyEdit=function(){},i.prototype._doCancelEdit=function(e,i){e==t.ItemState.INSERTING&&this._resetItemIndicies(0)},i.prototype._commitEdit=function(e){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var i=this._editingState,r=!1;if(this.isUpdating)try{this._editingState=t.ItemState.NORMAL,r=this._doCompleteUpdate(this._orgItem,e)}catch(t){throw this._editingState=i,t}else try{this._editingState=t.ItemState.NORMAL,r=this._doCompleteInsert(i==t.ItemState.APPENDING)}catch(t){throw this._editingState=i,t}return r?(this._modified=!1,this._doCommitEdit(i,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=i,r},i.prototype._doCommitEdit=function(t,e){return!1},i.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},i.prototype._editItemCellUpdated=function(t,e,i,r){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,r))},i.prototype.$_editingItem=function(){return this._editingItem},i.prototype.$_dummyItem=function(){return this._dummyEditItem},i.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(i.UPDATE_STARTED,t)},i.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(i.APPEND_STARTED,t)},i.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(i.INSERT_STARTED,t)},i.prototype.fireItemCellEdited=function(t,e){this.$_canFire()&&this.fireEvent(i.CELL_EDITED,t,e)},i.prototype.fireItemCellUpdated=function(t,e,r,o){this.$_canFire()&&this.fireEvent(i.CELL_UPDATED,t,e,r,o)},i.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(i.COMMITTING,t)},i.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(i.COMMITTED,t)},i.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(i.CANCELED)},i.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(i.COMMIT_REQUEST)},i.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(i.CANCEL_REQUEST)},i.prototype.onItemProviderReset=function(t){e.prototype.onItemProviderReset.call(this,t);var i=this.dataSource;i!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=i,this._saveDs&&this._saveDs.registerClient(this))},i.prototype.onItemProviderRefresh=function(t){e.prototype.onItemProviderRefresh.call(this,t)},i.prototype.onItemProviderRefreshClient=function(t){e.prototype.onItemProviderRefreshClient.call(this,t)},i.prototype.onItemProviderItemInserted=function(t,i){e.prototype.onItemProviderItemInserted.call(this,t,i)},i.prototype.onItemProviderItemDeleted=function(t,i){e.prototype.onItemProviderItemDeleted.call(this,t,i)},i.prototype.onItemProviderItemUpdated=function(t,i){e.prototype.onItemProviderItemUpdated.call(this,t,i)},i.prototype.onItemProviderCommandStackChanged=function(t,e,i){var r=this._commands;this._fireCommandStackChanged(e||r.canUndo,i||r.canRedo)},i.UPDATE_STARTED="onItemEditUpdateStarted",i.APPEND_STARTED="onItemEditAppendStarted",i.INSERT_STARTED="onItemEditInsertStarted",i.CELL_EDITED="onItemEditCellEdited",i.CELL_UPDATED="onItemEditCellUpdated",i.COMMITTING="onItemEditCommitting",i.COMMITTED="onItemEditCommitted",i.CANCELED="onItemEditCanceled",i.COMMIT_REQUEST="onItemEditCommitRequest",i.CANCEL_REQUEST="onItemEditCancelRequest",i}(xr),kr=function(e){function i(t,i){var r=e.call(this,t,i)||this;return r._insertRow=-1,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemCount",{get:function(){var t=this.source.itemCount;return(t+=this.isInserting||this.isAppending?1:0)+(this.$_dummyItem()?1:0)},enumerable:!0,configurable:!0}),i.prototype.getItem=function(t,e){var i=this.source;if(e)return i.getItem(t,e);var r,o=this.$_editingItem(),n=this.$_dummyItem();return this.isEditing()&&o.index==t?o:(this.isInserting?r=t>o.index?i.getItem(t-1):i.getItem(t):t<i.itemCount&&(r=i.getItem(t)),r||(n&&t==this.itemCount-1?n:null))},i.prototype.getItems=function(t,e){return this.source.getItems(t,e)},i.prototype._doBeginUpdate=function(e){return this._createEditItem(e,t.ItemState.UPDATING,null,!1,!1)},i.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},i.prototype._doBeginAppend=function(e){return this._createEditItem(null,t.ItemState.APPENDING,e,!1,!1)},i.prototype._doBeginInsert=function(e,i,r,o){return this._createEditItem(e,t.ItemState.INSERTING,i,r,o)},i.prototype._doCompleteUpdate=function(t,e){var i=this.dataSource;if(i instanceof Ue){var r=this.$_editingItem();return this._copyExtents(r,t),e||i.updateRow(r.dataRow,r.values,!1)}return!1},i.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var r=this.$_editingItem(),o=t?e.rowCount:Math.max(0,this._insertRow),n=r.values;if(i=e.insertRow(o,n,r._index2)){var s=this.getItemOfRow(o,!0);s&&(r._setCheckable(s.checkable),this._copyExtents(r,s),r.heights&&(s.heights=r.heights.slice()))}}return i},i.prototype.remove=function(t){var e=this.dataSource;if(t&&!this.isEditing(t)&&e){var i=t.dataRow;i>=0&&e.removeRow(i)}},i.prototype.revert=function(e){if(e instanceof gr||(e=this.getItem(e)),e){var i=this.dataSource;if(i){var r=e.dataRow,o=i.getRowState(r);o==t.RowState.DELETED?i.setRowState(r,t.RowState.NONE,!1):o==t.RowState.CREATE_AND_DELETED&&i.setRowState(r,t.RowState.CREATED,!1)}}},i.prototype.revertAll=function(e){if(e&&0!=e.length){var i=this.dataSource;if(i)for(var r=e.length;r--;){var o=this.getItem(e[r]);if(o){var n=o.dataRow,s=i.getRowState(n);s==t.RowState.DELETED?i.setRowState(n,t.RowState.NONE,!1):s==t.RowState.CREATE_AND_DELETED&&i.setRowState(n,t.RowState.CREATED,!1)}}}},i.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,r=t.length;i<r;i++){var o=this.getItem(t[i]).dataRow;o>=0&&e.push(o)}return e},i.prototype.removeRows=function(t){t&&(t.length>1?this.dataSource.removeRows(t):this.dataSource.removeRow(t[0]))},i.prototype.updateRows2=function(t){this.dataSource.updateRows2(t,!1,!1)},i.prototype._createDummyEditItem=function(){return new Ir(this,null,this.itemCount,-1,t.ItemState.DUMMY)},i.prototype._createEditItem=function(e,i,r,o,n){var s=this.dataSource;if(!s)return null;var a=null,l=s.fieldCount;switch(i){case t.ItemState.UPDATING:a=new Sr(this,e,e.index,e.dataRow,i);for(var u=0;u<l;u++)a.setValue(u,e.getData(u));this._copyExtents(e,a),e.heights&&(a._heights=e.heights.slice());break;case t.ItemState.INSERTING:case t.ItemState.APPENDING:var h=this._rs,c=i==t.ItemState.INSERTING&&e?o?e.index+1:e.index:this.itemCount;if(a=new Sr(this,e,c,-1,i),i==t.ItemState.INSERTING){var d=e.dataRow,p=e;if(d<=-1){for(var f=this.source._visibleItems;(p=f.getNext(p))&&!(p instanceof yr););this._insertRow=p?p.dataRow:s.rowCount}else this._insertRow=o?Math.min(s.rowCount,d+1):d;if(e instanceof yr&&o&&h){var _=h._pubItems.indexOf(p);_++>=0&&_<=h._pubItems.length&&(a._index2=_)}}if(r)for(u=0;u<l;u++)r.length>u&&a.setValue(u,r[u])}return a},i}(Er),Or=(function(t){function e(e,i){var r=t.call(this,e)||this;return r.message=e,r.tokenPos=i,r}r(e,t)}(Error),function(){function t(t){this.literal=t}return t.prototype.evaluate=function(t){return this.literal},t}()),Rr=function(){function t(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}return t.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},t}(),Pr=function(){function t(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}return t.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),r=e.indexOf("]");if(i<r){var o=e.substr(0,i).trim(),n=e.substring(i+1,r).replace(/['|"]/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(o)),t.evaluateIndexerS(this.idKey,n,this.capital)}},t}(),Dr=function(){function t(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}return Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",r=0,o=e.length;r<o;r++)i+=e[r].evaluate(t)||"";return i}catch(t){if(!this._silentError)throw new t}return null},t.prototype._parse=function(t){if(this._tokens=[],t)for(var e,i=t.length,r=0;r<i;){var o=t.indexOf("${",r);if(o>=0){var n=t.indexOf("}",o+2);if(n>=0){if(o>r){var s=t.substring(r,o);e=new Or(s),this._tokens.push(e)}if(u=t.substring(o+2,n).trim()){var a,l=void 0;e=(a=u.indexOf("["))&&(l=u.indexOf("]"))&&a<l?new Pr(u):new Rr(u),this._tokens.push(e)}r=n+1}else o=-1}if(o<0){var u=t.substr(r,i);e=new Or(u),this._tokens.push(e);break}}},t}();!function(t){t.ACTIVE="active",t.UNACTIVE="unactive",t.INDETERMINATE="indeterminate"}(dr||(dr={}));var Tr,Lr=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._visible=!0,i._level=0,i._category=null,i.criteria=e,i}return r(e,t),e.prototype._doDispose=function(){this._criteria=null,this._category=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t,this.callbackChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){this._category=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._text||this._name},e.prototype.changed=function(){this.fireEvent(e.CHANGED)},e.prototype.criteriaChanged=function(){},e.prototype.callbackChanged=function(){},e.CHANGED="onColumnFilterChanged",e}(fe),Mr=function(t){function e(){var e=t.call(this,null)||this;return e._childs=[],e}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._childs.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeState",{get:function(){for(var t=void 0,e=0,i=this._childs.length;e<i;e++){if(null!=t&&this._childs[e].active!=t)return dr.INDETERMINATE;t=this._childs[e].active}return t?dr.ACTIVE:dr.UNACTIVE},enumerable:!0,configurable:!0}),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._childs=[]},e.prototype.add=function(t,e,i,r,o){var n=new Lr(r);return n.name=e,n.text=i,n.active=o,this.addChild(n),t.add(n),n},e.prototype.addChild=function(t){t.level=this.level+1,t.category=this,this._childs.push(t)},e.prototype.getChild=function(t){return this._childs[t]},e}(Lr),Fr=function(){function t(t){this._model=t,this.parse()}return t.prototype._doDispose=function(){this._exprNode=null,this._model=null},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.prepare=function(t,e){t.setDataSource(e)},t.prototype.select=function(t,e,i,r){var o=this._model.callback;return o?o.call(this,t._ds.handler,i.dataRow,e.level+1,r,this._model,i.getData(r)):!this._exprNode||(t.setData(i,r,this._model),this._exprNode.evaluate(t))},t.prototype.criteriaChanged=function(){this.parse()},t.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=ue.Default.parse(this._model.criteria,null):this._exprNode=null)},t}(),Nr=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._names={},i._updating=!1,i._nextId=1,i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++)i[e].active&&t++;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++)if(e[t].visible)return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.getOwner=function(){return this._owner},e.prototype.getItem=function(t){return this._items[t]},e.prototype.itemByName=function(t){return this._names[t]},e.prototype.indexOf=function(t){for(var e=this._items.length-1;e>=0;e--)if(this._items[e].name==t)return e;return-1},e.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;i>=0;i--)this._items[i].active==t&&e.push(this._items[i]);return e},e.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i=t instanceof Array?t:[t],r=i.length,o=0;o<r;o++)if((t=i[o])&&t.name){this.$_checkName(t.name);var n=new Lr(null);n.assignFrom(t),this._items.push(n),this._names[t.name]=n,n.addListener(this)}(e||this.count>0)&&this.changed(null)}},e.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(e>0){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},e.prototype.add=function(t,e){void 0===e&&(e=!0);var i=ft.cast(t,Lr);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new Lr(null)).assignFrom(t)),i&&(this._items.push(i),i._owner=this,this._names[i.name]=i,i.addListener(this),e&&this.changed(null))},e.prototype.addAll=function(t,e){if(t instanceof Array||!t||(t=[t]),t&&t.length>0){for(var i=0,r=t.length,o=0;o<r;o++){var n=ft.cast(t[o],Lr);if(n?this._items.indexOf(n)<0&&n.name&&(e||this.$_checkName(n.name)):t[o]&&t[o].name&&(e||this.$_checkName(t[o].name),(n=new Lr(null)).assignFrom(t[o])),n){var s=this.indexOf(n.name);s>=0?(this._items[s]&&this._items[s].removeListener(this),this._items[s]=n):this._items.push(n),n.addListener(this),this._names[n.name]=n,i++}}i>0&&this.changed(null)}},e.prototype.remove=function(t){if(t){for(var e=this._items.length-1;e>=0;e--){var i=this._items[e];if(i.name==t)return this._items.splice(e,1),delete this._names[i.name],i.removeListener(this),this.changed(null),!0}return!1}},e.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;i>=0;i--){var r=this.indexOf(t[i]);if(r>=0){var o=this._items[r];this._items.splice(r,1),delete this._names[o.name],o.removeListener(this),e++}}e>0&&this.changed(null)}},e.prototype.activateItems=function(t,e,i){if(void 0===i&&(i=!0),t){var r=0;this._updating=!0;try{for(var o=t.length-1;o>=0;o--){var n=this._names[t[o]];n&&n.active!=e&&(n._active=e,r++)}}finally{this._updating=!1}i&&r>0&&this.changed(null)}},e.prototype.activateAll=function(t){var e=!1;this._updating=!0;try{for(var i=0,r=this._items.length;i<r;i++){var o=this._items[i];o.active!=t&&(o._active=t,e=!0)}}finally{this._updating=!1}e&&this.changed(null)},e.prototype.hideFilters=function(t,e){if(t)for(var i=0,r=t.length;i<r;i++){var o=this._names[t[i]];o&&(o.visible=!e)}},e.prototype.hideAllFilters=function(t){for(var e=0,i=this._items.length;e<i;e++){var r=this._items[e];r&&(r.visible=!t)}},e.prototype.toggleItems=function(t){if(t){var e=0;this._updating=!0;try{for(var i=t.length-1;i>=0;i--){var r=this._names[t[i]];r&&(r._active=!r.active,e++)}}finally{this._updating=!1}e>0&&this.changed(null)}},e.prototype.toggleAll=function(){var t=!1;this._updating=!0;try{for(var e=0,i=this._items.length;e<i;e++){var r=this._items[e];r._active=!r.active,t=!0}}finally{this._updating=!1}t&&this.changed(null)},e.prototype.changed=function(t){this._updating||this.fireEvent(Lr.CHANGED,t)},e.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},e.prototype.$_userFilterAdd=function(t,e){var i=t instanceof Lr?t:null;return i||(this.$_checkName(t.name),(i=new Lr(null)).assignFrom(t)),this.add(i,e),i},e.prototype.onColumnFilterChanged=function(t){this.changed(t)},e.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},e.prototype.onColumnFilterUserAdd=function(t,e,i){},e}(fe),Vr=function(e){function i(){var t=e.call(this)||this;return t._field=-1,t._fieldCount=0,t}return r(i,e),i.prototype._doDispose=function(){this._item=this._ds=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},i.prototype.setData=function(t,e,i){this._item=t,this._field=e,this._model=i},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.$_getLookupText=function(t){var e=t._owner._owner;if(e.lookupDisplay){var i=e.lookupSource;if(i){for(var r=e.lookupKeyFieldIds,o=r.length,n=[],s=0;s<o;s++)n.push(this._item.getData(r[s]));return i.lookup(n,e.valueSeparator)}var a=e.labelFieldIndex;return a>=0?this._item.getData(a):e.getLookupLabel(this._item.getData(e.fieldName))}return""},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_VALUE:return this._item.getData(this._field);case i.ID_TEXT:return this.$_getLookupText(this._model);case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_CHANGED_CELL:var r=this._item.dataRow,o=this._field;return o>=0&&this._item.rowState==t.RowState.UPDATED&&this._ds.isDataChanged(r,o);case i.ID_FIELD:return this._field}throw new It("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new It("Data field index out of bounds:"+e);return this._item.getData(e)}throw new It("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,r){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new It("Invalid identifier indexer: "+t);if(this._ds){var o=r?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+e);return this._item.getData(o)}},i.ID_VALUE=0,i.ID_FIELD=1,i.ID_VALUES=2,i.ID_STATE=3,i.ID_CHANGED_CELL=4,i.ID_TEXT=5,i.IDENTS={value:i.ID_VALUE,field:i.ID_FIELD,values:i.ID_VALUES,state:i.ID_STATE,changedcell:i.ID_CHANGED_CELL,text:i.ID_TEXT},i}(Dt),Br=function(t){function e(e){var i=t.call(this)||this;return i._dirty=!1,i._grid=e,i}return r(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),e.prototype.clean=function(){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},e.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},e.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},e.prototype._doChanged=function(){},e}(fe),Ar=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())},enumerable:!0,configurable:!0}),e.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},e.prototype._visibleChanged=function(){this._changed()},e}(Br),$r=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._group=null,t._dataSource=null,t._fieldCount=0,t}return r(i,e),i.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"index",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),i.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setItem=function(t){this._item=t,this._group=ft.cast(t,mr)},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_COUNT:return this._group?this._group.count:0;case i.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new It("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new It("Data field index out of bounds:"+e);return this._item.getData(e)}throw new It("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,r){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new It("Invalid identifier indexer: "+t);if(this._dataSource){var o=r?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+e);return this._item.getData(o)}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_STATE=5,i.ID_COUNT=6,i.ID_DCOUNT=7,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,state:i.ID_STATE,count:i.ID_COUNT,dcount:i.ID_DCOUNT},i}(Dt),jr=function(e){function i(){var t=e.call(this)||this;return t._fieldCount=0,t}return r(i,e),i.prototype._doDispose=function(){this._cell=null,this._item=null,this._grid=null,this._dataSource=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setCell=function(t,e){this._cell=t,this._grid=t.index.grid,this._item=t.index.item||e},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){if(this._cell.index.itemIndex<0){var r=this._cell.index.dataField;switch(e){case i.ID_VALUE:return this._item.getData(r);case i.ID_DATA_ROW:return this._item.dataRow}}switch(e){case i.ID_VALUE:return this._cell.value();case i.ID_ROW:return this._cell.index.itemIndex;case i.ID_DATA_ROW:return this._cell.index.dataRow;case i.ID_INDEX:return this._cell.index.column.index;case i.ID_FIELD:return this._cell.index.dataField;case i.ID_CHECKED:return this._item.checked;case i.ID_STATE:switch(this._item.rowState){case t.RowState.CREATED:return"c";case t.RowState.UPDATED:return"u";case t.RowState.DELETED:return"d";case t.RowState.CREATE_AND_DELETED:return"x"}return;case i.ID_TAG:return this._cell.index.column.tag;case i.ID_BASE:var o=this._cell.index.dataColumn.baseIndex;return o>=0?this._item.getData(o):void 0;case i.ID_COUNT:return this._item instanceof mr?this._item.count:0;case i.ID_DCOUNT:return this._item instanceof mr?this._item.descendantCount:0;case i.ID_CHANGED_CELL:var n=this._cell.index,s=n.dataRow,a=n.dataField;return a>=0&&this._item.rowState==t.RowState.UPDATED&&this._dataSource.isDataChanged(s,a);case i.ID_LOOKUP_EXISTS:var l=this._cell.index.dataColumn,u=void 0;if(u=l.lookupSource){for(var h=l.lookupKeyFieldIds,c=h.length,d=[],p=0;p<c;p++)d.push(this._item.getData(h[p]));return u.exists(d)}return l.getLookupIndex(this._cell.value())>-1}throw new It("Invalid identifier key: "+e)},i.prototype.evaluateIndexerI=function(t,e){if(this._item){if(t==i.ID_VALUE||t==i.ID_VALUES){if(e<0||e>=this._fieldCount)throw new It("Data field index out of bounds:"+e);return this._item.getData(e)}throw new It("Invalid identifier indexer: "+t)}},i.prototype.evaluateIndexerS=function(t,e,r){if(t!=i.ID_VALUE&&t!=i.ID_VALUES)throw new It("Invalid identifier indexer: "+t);if(this._dataSource){var o=r?this._dataSource.getFieldIndexC(e):this._dataSource.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+e);return this._item.getData(o)}},i.ID_VALUE=0,i.ID_ROW=1,i.ID_DATA_ROW=2,i.ID_INDEX=3,i.ID_FIELD=4,i.ID_CHECKED=5,i.ID_STATE=6,i.ID_TAG=7,i.ID_BASE=8,i.ID_VALUES=9,i.ID_COUNT=10,i.ID_DCOUNT=11,i.ID_CHANGED_CELL=12,i.ID_LOOKUP_EXISTS=13,i.IDENTS={value:i.ID_VALUE,row:i.ID_ROW,datarow:i.ID_DATA_ROW,index:i.ID_INDEX,field:i.ID_FIELD,checked:i.ID_CHECKED,state:i.ID_STATE,tag:i.ID_TAG,base:i.ID_BASE,values:i.ID_VALUES,count:i.ID_COUNT,dcount:i.ID_DCOUNT,changedcell:i.ID_CHANGED_CELL,lookupexists:i.ID_LOOKUP_EXISTS},i}(Dt),Hr=function(t){function e(){var e=t.call(this)||this;return e._fieldCount=0,e}return r(e,t),e.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,t.prototype._doDispose.call(this)},e.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},e.prototype.setItem=function(t){this._item=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i;switch(t){case e.ID_VALUE:return this._item.getData(this._cell.index.dataField);case e.ID_BASE:return(i=this._cell.index.dataColumn.baseIndex)>=0?this._item.getData(i):void 0;case e.ID_PREV_VALUES:var r=this._cell.index.column,o=this._grid.getDataColumns();i=o.indexOf(r);var n=[];if(o.length<0||i<0)return;for(var s=0,a=Math.min(i,o.length);s<a;s++)n.push(this._item.getData(o[s].dataIndex));return n.join("`")}throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new It("Data field index out of bounds:"+i);return this._item.getData(i)}throw new It("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,r){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new It("Invalid identifier indexer: "+t);if(this._ds){var o=r?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+i);return this._item.getData(o)}},e.ID_VALUE=0,e.ID_VALUES=1,e.ID_BASE=2,e.ID_PREV_VALUES=3,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES,base:e.ID_BASE,prevvalues:e.ID_PREV_VALUES},e}(Dt),Wr=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.setGrid=function(t){this._grid=t},e.prototype.setGroup=function(t){this._group=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i,r,o=this._group;switch(t){case e.ID_GROUP_FIELD:return(i=o.dataSource.getField(o.groupField))?i.fieldName:"";case e.ID_FIELD_HEADER:return(i=o.dataSource.getField(o.groupField))?i.header:"";case e.ID_GROUP_COLUMN:return(r=this._grid?this._grid.columnByField(o.groupField):null)?r.displayText:o.dataSource.getFieldName(o.groupField);case e.ID_COLUMN_HEADER:return(r=this._grid?this._grid.columnByField(o.groupField):null)?r.header.text||r.displayText:o.dataSource.getFieldName(o.groupField);case e.ID_COLUMN_FOOTER:return(r=this._grid?this._grid.columnByField(o.groupField):null)?r.footer.text||r.displayText:o.dataSource.getFieldName(o.groupField);case e.ID_GROUP_VALUE:return o?o.groupValue:void 0;case e.ID_ROW_COUNT:return o.descendantCount}throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){switch(t){case e.ID_SUM:case e.ID_MAX:case e.ID_MIN:case e.ID_AVG:case e.ID_DATA_COUNT:case e.ID_DATA_AVG:if(isNaN(i)||i<0)return;var r=void 0;switch(t){case e.ID_SUM:r=this._group.getSum(i);break;case e.ID_MAX:r=this._group.getMax(i);break;case e.ID_MIN:r=this._group.getMin(i);break;case e.ID_AVG:r=this._group.getAvg(i);break;case e.ID_DATA_COUNT:r=this._group.getDataCount(i);break;case e.ID_DATA_AVG:r=this._group.getDataAvg(i)}return isNaN(r)?"":String(r)}throw new It("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){var r=this._group.dataSource,o=e?r?r.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,o)},e.ID_GROUP_FIELD=0,e.ID_FIELD_HEADER=1,e.ID_GROUP_COLUMN=2,e.ID_COLUMN_HEADER=3,e.ID_COLUMN_FOOTER=4,e.ID_GROUP_VALUE=5,e.ID_ROW_COUNT=6,e.ID_SUM=7,e.ID_MAX=8,e.ID_MIN=9,e.ID_AVG=10,e.ID_DATA_COUNT=11,e.ID_DATA_AVG=12,e.IDENTS={groupfield:e.ID_GROUP_FIELD,fieldheader:e.ID_FIELD_HEADER,groupcolumn:e.ID_GROUP_COLUMN,columnheader:e.ID_COLUMN_HEADER,columnfooter:e.ID_COLUMN_FOOTER,groupvalue:e.ID_GROUP_VALUE,rowcount:e.ID_ROW_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(Dt),Gr=function(t){function e(e){var i=t.call(this)||this;return i._index=new rs,i._name=e,i}return r(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(t){this._index.assignFrom(t)},e.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},e.prototype.setLayout=function(t){this._index.layout=t},e.ERROR="<<ERROR>>",e}(Ct),Ur=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this,i)||this;return r._model=e,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),e}(Gr),zr=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getBlankState=function(){return y.NONE},e.prototype.isValueChanged=function(){return!1},e}(Gr),Yr=function(e){function i(t){return void 0===t&&(t=null),e.call(this,t||"dataCell")||this}return r(i,e),i.getText=function(t,e){var r=e.dataIndex>=0?t.getData(e.dataIndex):void 0;return i._getText(t,e,r)},i._getText=function(e,i,r){var o,n=i;if(n.lookupDisplay){var s=n.lookupSource;if(s){for(var a=n.lookupKeyFieldIds,l=a.length,u=[],h=0;h<l;h++)u.push(e.getData(a[h]));o=void 0!==(o=s.lookup(u,n.valueSeparator))?o:null!=n.textOfInvalid?n.textOfInvalid:r}else{var c=n.labelFieldIndex;o=c>=0?e.getData(c):n.getLookupLabel(r)}}else{var d,p=void 0;o=r,n.valueType==t.ValueType.NUMBER&&null!=(d=n.nanText)&&isNaN(o)?o=d:(p=n.displayCallback)?o=p(n.grid.handler,os.tempItem(n.grid,e,i).proxy(),o):null!=o&&"object"==typeof o&&(o=JSON.stringify(o))}return null==o?"":String(o)},i._getDisplayText=function(e,r,o,n,s){var a,l=e.formatOptions,u=s.textFormatter||void 0===o.textFormat&&l.textFormatter,h=s.numberFormatter||void 0===o.numberFormat&&l.numberFormatter,c=s.booleanFormatter||void 0===o.booleanFormat&&l.boolFormatter,d=s.datetimeWriter||void 0===o.datetimeFormat&&l.datetimeWriter;if(o){switch(o.valueType){case t.ValueType.TEXT:a=n&&u?u.getText(n):i._getText(r,o,n);break;case t.ValueType.NUMBER:var p=Number(n);a=isNaN(p)||null==p?o.nanText:0==p&&null!=o.zeroText?o.zeroText:h?h.getText(p,o.displayMinusZero):i._getText(r,o,n);break;case t.ValueType.DATETIME:a=n instanceof Date&&d?d.getText(n):i._getText(r,o,n);break;case t.ValueType.BOOLEAN:a=c?c.formatValue(n):i._getText(r,o,n);break;case t.ValueType.OBJECT:var f=o.getField(),_=r.dataRow,g=o.objectKey||o.objectCallback,y=g?o.objectKey:f.objectKey,m=g?o.objectCallback:f.objectCallback;if(n){var b=a=m&&"function"==typeof m?m(f.orgFieldName,_,n):y&&n.hasOwnProperty(y)?n[y]:i._getText(r,o,n);switch(typeof b){case"string":break;case"number":a=h?h.getText(b,o.displayMinusZero):String(b);break;case"boolean":a=c?c.formatValue(b):String(b);break;default:a=b instanceof Date&&d?d.getText(b):b?String(b):""}}break;default:a=i._getText(r,o,n)}if(a){var v=s.prefix;v&&(a=v+a),(v=s.suffix)&&(a+=v)}}return a},i.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new Hr),this._equalBlankRuntime},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(t>=0)return this.item.getData(t)},i.prototype.getDisplayText=function(t,e){return i._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),e)},Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),i.prototype.getBlankState=function(){var t=y.NONE,e=this.index,r=e.layout,o=this.dataColumn,n=this.item,s=r.equalBlankNode,a=s&&i.equalBlankRuntime();if(r&&r.blanked&&r.dataRoot&&n.dataRow>=0){var l=r.grid,u=l.itemCount;if(s&&a&&a.setDataArguments(n.dataSource,this,n),u>1){var h=e.itemIndex,c=o.dataIndex,d=s?(a.setItem(n),s.evaluate(a)):n.getData(c),p=void 0,f=void 0,_=void 0;if(h>0){var g=l.getItem(h-1);h<u-1?(_=l.getItem(h+1),g instanceof yr?(p=s?(a.setItem(g),s.evaluate(a)):g.getData(c),(d instanceof Date&&p instanceof Date?+d==+p:d==p)?t=_ instanceof yr&&((f=s?(a.setItem(_),s.evaluate(a)):_.getData(c))instanceof Date&&d instanceof Date?+f==+d:f==d)?y.BODY:y.TAIL:_ instanceof yr&&((f=s?(a.setItem(_),s.evaluate(a)):_.getData(c))instanceof Date&&d instanceof Date?+f==+d:f==d)&&(t=y.HEAD)):_ instanceof yr&&((f=s?(a.setItem(_),s.evaluate(a)):_.getData(c))instanceof Date&&d instanceof Date?+f==+d:f==d)&&(t=y.HEAD)):g instanceof yr&&((p=s?(a.setItem(g),s.evaluate(a)):g.getData(c))instanceof Date&&d instanceof Date?+p==+d:p==d)&&(t=y.TAIL)}else(_=l.getItem(h+1))instanceof yr&&((f=s?(a.setItem(_),s.evaluate(a)):_.getData(c))instanceof Date&&d instanceof Date?+f==+d:f==d)&&(t=y.HEAD)}}return t},i.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return t>=0&&this.item.isChanged(t)},i}(zr),qr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setItem=function(t){this.$_item=t},Object.defineProperty(e.prototype,"item",{get:function(){return this.$_item},enumerable:!0,configurable:!0}),e}(Yr),Kr=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"literalCell")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(t){return this.text},e}(zr),Xr=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"seriesCell")||this}return r(e,t),e.getText=function(t,e){return void 0===e&&(e=","),t?t.join(e):""},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(e||","):""},Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.index.column;if(t instanceof Ln){var e=t.fields,i=e?e.length:0;if(i>0){for(var r=this.item,o=new Array(i),n=0;n<i;n++)e[n]>=0&&(o[n]=r.getData(e[n]));return o}}return[]},enumerable:!0,configurable:!0}),e}(zr),Qr=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"mergedDataCell")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getValue=function(){var e=this.index,i=e.item;return i instanceof yr?t.prototype.getValue.call(this):(i=(i instanceof mr?i:i.parent).firstItem).getData(e.dataField)},Object.defineProperty(e.prototype,"text",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e}(Yr),Jr=function(t){function e(){var e=t.call(this)||this;return e.minBarWidth=1,e.maxBarWidth=0,e.barWidth=0,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRender=function(t,e,i){var r=this._getBarLength();if(!(r<1)){var o=this.barWidth;o<=0&&(o=Math.floor(e.width/r),o=Math.max(this.minBarWidth,o),this.maxBarWidth>0&&(o=Math.min(this.maxBarWidth,o))),r*=o,e.x+=(e.width-r)/2,e.x=Math.floor(e.x),this._drawBars(t,this.barStyle,i,e.x,e.y,o,e.height)}},e}(function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),e.prototype.render=function(t,e){this._doRender(t,e,!1)},e.prototype.renders=function(t,e){this._doRender(t,e,!0)},e}(Ct)),Zr=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],to=[103,104,105],eo=[251658240,15728640,983040,61440,3840,240,15],io=function(t){function e(){var e=t.call(this)||this;return e.quietZoneWidth=10,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t),r=to[i],o=Zr[r],n=r;if(this._weights.push(o),2==i)for(var s=0;s<e;s+=2){var a=t.substr(s,2);r=parseInt(a),r=this.$_convert(i,r),o=Zr[r],this._weights.push(o),n+=r*(Math.floor(s/2)+1)}else for(s=0;s<e;s++)r=t.charCodeAt(s),r=this.$_convert(i,r),o=Zr[r],this._weights.push(o),n+=r*(s+1);n%=103,this._weights.push(Zr[n]),this._weights.push(Zr[106])}},e.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},e.prototype._drawBars=function(t,e,i,r,o,n,s){r+=10*n;for(var a,l=this._weights.length-1,u=0;u<l;u++){a=this._weights[u];for(var h=0;h<6;h++){var c=(a&eo[h+1])>>4*(5-h);c*=n,h%2==0&&(i?t.sbounds(e,r+"",o+"%",c+"",s+"%"):t.bounds(e,r,o,c,s)),r+=c}}for(a=this._weights[l],h=0;h<7;h++)c=(a&eo[h])>>4*(6-h),c*=n,h%2==0&&(i?t.sbounds(e,r+"",o+"%",c+"",s+"%"):t.bounds(e,r,o,c,s)),r+=c},e.prototype.$_convert=function(t,e){switch(t){case 0:if(e>=0&&e<32)return e+64;if(e>=32&&e<96)return e-32;break;case 1:if(e>=32&&e<128)return e-32;break;case 2:if(e>=0&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},e.prototype.$_detectType=function(t){return t.length%2==0&&/^\d+$/.test(t)?2:/[a-z]/.test(t)?1:0},e}(Jr),ro={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},oo=function(t){function e(){var e=t.call(this)||this;return e._wideWidth=3,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(ro["*"]);for(var i=0;i<e;i++){var r=t.charAt(i),o=ro[r];if(!o)throw new Error("Invalid Code39 character: "+r);this._codes.push(o)}this._codes.push(ro["*"])}},e.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},e.prototype._drawBars=function(t,e,i,r,o,n,s){var a=this._codes.length;if(a>2)for(var l=0;l<a;l++){for(var u=this._codes[l],h=0;h<9;h++){var c="n"==u.charAt(h)?1:this._wideWidth;c*=n,h%2==0&&(i?t.sbounds(e,r+"",o+"%",c+"",s+"%"):t.bounds(e,r,o,c,s)),r+=c}l<a-1&&(r+=n)}},e}(Jr),no="http://www.w3.org/2000/svg",so=0,ao=function(t){function e(e,i){var r=t.call(this)||this;return r._transforms=[],r._defs=e,r._element=i,r}return r(e,t),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"doc",{get:function(){return ct(this._element)||document},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){return this._defs=t,this._element=e,this},e.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},e.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},e.prototype.restore=function(){this._trans=this._transforms.pop()},e.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},e.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},e.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},e.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},e.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},e.prototype.clip=function(t,e,i,r){var o=this.doc,n=so++,s=o.createElementNS(no,"clipPath");s.setAttributeNS(null,"id","clip"+n);var a=o.createElementNS(no,"rect");a.x.baseVal.value=t,a.y.baseVal.value=e,a.width.baseVal.value=i,a.height.baseVal.value=r,s.appendChild(a),this._defs.appendChild(s)},e.prototype.sline=function(t,e,i,r,o){var n=this.doc.createElementNS(no,"line");this._element.appendChild(n),n.x1.baseVal.valueAsString=e,n.y1.baseVal.valueAsString=i,n.x2.baseVal.valueAsString=r,n.y2.baseVal.valueAsString=o,t&&n.setAttribute("class",t)},e.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(no,"polygon");this._element.appendChild(i);var r=[];r.push(e[0]+","+e[1]);for(var o=2;o<e.length;o+=2)r.push(e[o]+","+e[o+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",r.join(" ")),t&&i.setAttribute("class",t)}},e.prototype.bounds=function(t,e,i,r,o){var n=this.doc.createElementNS(no,"rect");this._element.appendChild(n),n.x.baseVal.value=e,n.y.baseVal.value=o<0?i+o:i,n.width.baseVal.value=r,n.height.baseVal.value=Math.abs(o),t&&n.setAttribute("class",t)},e.prototype.pbounds=function(t,e,i,r,o){var n=this.doc.createElementNS(no,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e+"%",n.y.baseVal.valueAsString=(o<0?i+o:i)+"%",n.width.baseVal.valueAsString=r+"%",n.height.baseVal.valueAsString=Math.abs(o)+"%",t&&n.setAttribute("class",t)},e.prototype.sbounds=function(t,e,i,r,o){var n=this.doc.createElementNS(no,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e,n.y.baseVal.valueAsString=i,n.width.baseVal.valueAsString=r,n.height.baseVal.valueAsString=o,t&&n.setAttribute("class",t)},e.prototype.scircle=function(t,e,i,r){var o=this.doc.createElementNS(no,"circle");this._element.appendChild(o),o.cx.baseVal.valueAsString=e,o.cy.baseVal.valueAsString=i,o.r.baseVal.valueAsString=r,t&&o.setAttribute("class",t)},e.prototype.ellipse=function(t,e,i,r,o){var n=this.doc.createElementNS(no,"ellipse"),s=r/2,a=o/2;this._element.appendChild(n),n.cx.baseVal.value=e+s,n.cy.baseVal.value=i+a,n.rx.baseVal.value=s,n.ry.baseVal.value=a,t&&n.setAttribute("class",t)},e}(Ct),lo=function(t){function e(e){var i=t.call(this)||this,r=ct(e),o=i._element=r.createElementNS(no,"svg"),n=o.style,s=i._defs=r.createElementNS(no,"defs");return o.appendChild(s),n.background="",n.border="none",n.pointerEvents="none",e.appendChild(o),i._renderer=new ao(i._defs),i}return r(e,t),e.createSVG=function(t){var e=ct(t),i=e.createElementNS(no,"svg"),r=i.style,o=e.createElementNS(no,"defs");i.appendChild(o),r.background="",r.border="none",r.pointerEvents="none";var n=e.createElementNS(no,"g");return i.appendChild(n),t.appendChild(i),i},e.renderSVG=function(t,e,i){var r=e.lastElementChild,o=this._renderer.init(e.firstChild,r);r.textContent="",i.call(t,e,o,e.clientWidth,e.clientHeight),o.clear()},e.renderSVG2=function(t,e,i){var r=ct(e);e.childElementCount>1&&e.removeChild(e.lastElementChild);var o=r.createElementNS(no,"g"),n=this._renderer.init(e.firstChild,o);e.appendChild(o),i.call(t,e,n),n.clear()},e.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement&&this._element.parentElement.removeChild(this._element),this._element=this._defs=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},e.prototype._clear=function(){this._element.childElementCount>1&&this._element.removeChild(this._element.lastElementChild);var t=ct(this._element).createElementNS(no,"g");this._element.appendChild(t),this._renderer._element=t},e.prototype._doRender=function(t,e,i){},e._renderer=new ao,e}(Ct),uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},e}(Ct),ho={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},co={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},po=function(t){function e(e){var i=t.call(this)||this;return i._shape=e,i}return r(e,t),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?e.INVERTED_TRIANLGE:t.toLowerCase():null},enumerable:!0,configurable:!0}),e.prototype._doDraw=function(t,e,i){var r=this._shape;if(ho.hasOwnProperty(r)){if(u=ho[r]){for(var o=0,n=0,s=0,a=(u=u.slice()).length/2;s<a;s++)u[2*s]=o+u[2*s]*e,u[2*s+1]=n+u[2*s+1]*i;u.push(u[0],u[1]),t.polygon(null,u)}}else if(co.hasOwnProperty(r)){var l=co[r];if(l){var u;for(o=0,n=0,s=0,a=(u=l[0].slice()).length/2;s<a;s++)u[2*s]=o+u[2*s]*e,u[2*s+1]=n+u[2*s+1]*i;for(u.push(u[0],u[1]),t.polygon(null,u),s=0,a=(u=(u=l[1]).slice()).length/2;s<a;s++)u[2*s]=o+u[2*s]*e,u[2*s+1]=n+u[2*s+1]*i;u.push(u[0],u[1]),t.polygon(null,u)}}},e.RECTANGLE="rectangle",e.TRIANLGE="triangle",e.INVERTED_TRIANLGE="itriangle",e.DIAMOND="diamond",e.UP_ARROW="uparrow",e.DOWN_ARROW="downarrow",e.LEFT_ARROW="leftarrow",e.RIGHT_ARROW="rightarrow",e.PLUS="plus",e.MINUS="minus",e.EQUAL="equal",e.STAR="star",e}(uo),fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},e}(uo),_o=function(){function e(){}return e.layoutFlex=function(e,i,r,o,n,s){var a=s===t.IconLocation.CENTER,l=ft.included(s,t.IconLocation.LEFT,t.IconLocation.LEFT_EDGE),u=ft.included(s,t.IconLocation.RIGHT,t.IconLocation.RIGHT_EDGE),h=ft.included(s,t.IconLocation.TOP,t.IconLocation.TOP_EDGE),c=ft.included(s,t.IconLocation.BOTTOM,t.IconLocation.BOTTOM_EDGE),d=ft.included(s,t.IconLocation.LEFT_EDGE,t.IconLocation.RIGHT_EDGE,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE),p=e.style,f=a||l||u?"row":"column";f+=u||c?"-reverse":"",p.flexDirection=f,p.justifyContent=d?"start":"center",p.alignItems="center",(p=i.style).paddingTop=h&&d?n+"px":"",p.paddingBottom=c&&d?n+"px":"",(p=r.style).display=a?"none":"",p.paddingLeft=l?o+"px":"",p.paddingRight=u?o+"px":"",p.paddingTop=h?o+"px":"",p.paddingBottom=c?o+"px":"",p.flexGrow=d?"1":""},e.clearFlex=function(t){var e=t.style;e.removeProperty("display"),e.removeProperty("flex-direction"),e.removeProperty("justify-content"),e.removeProperty("align-items"),e.removeProperty("flex-grow")},e}(),go=function(){this.commit=!0,this.value=void 0},yo=function(t){function e(){var e=t.call(this)||this;return e._showTooltip=!1,e._refreshFocusChanged=!1,e._textProp=ft.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}return r(e,t),e.getRendererStyle=function(t){var e=t.firstElementChild;if(e){if(e.classList){if(e.classList.length>1)return e.classList[1]}else{var i=e.className&&e.className.split(" ");if(i&&i.length>1)return i[1]}return e.className}},e.prototype._doDispose=function(){this._dom=null,this._index=null,t.prototype._doDispose.call(this)},e.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},e.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,this._doInitContent(e),this._inited=!0)},e.prototype.initFormContent=function(t,e){this._inited||(this._dom=t,t.className=this._className=e,this._doInitContent(t),this._inited=!0)},e.prototype.clearContent=function(){this._inited?(this._dom.className=this._className="",this._inited=!1):this._dom[this._textProp]="",this._doClearContent(this._dom)},e.prototype.checkClassName=function(t){return t!=this._className},e.prototype.initOptions=function(){this._doInitOptions()},Object.defineProperty(e.prototype,"grid",{get:function(){return this._index&&this._index.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return"rg-renderer"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ariaLabelCallback",{get:function(){return this._ariaLabelCallback},set:function(t){this._ariaLabelCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemClickable",{get:function(){return this._itemClickable},enumerable:!0,configurable:!0}),e.prototype.renderCell=function(t,e,i){if(t.accessibility){var r=this._ariaLabelCallback,o=r&&r.call(this,t.handler,e);o?i.cell.setAttribute("aria-label",o):i.cell.removeAttribute("aria-label")}this._doRenderCell(t,e,i,i.width-i.errorWidth-i.buttonWidth-i.editWidth-1,i.height-1)},e.prototype.getTooltip=function(t,e){if(this.showTooltip){var i=e.grid,r=i.body,o=e.column,n=r.getCellAt(t.item,o,!1);return n&&this._makeText(i,n,t)||void 0}},e.prototype.canShowInnerFocus=function(){return!1},e.prototype.canEdit=function(){return!1},e.prototype.canEditClickAt=function(t){return!1},e.prototype.preventDefaultEditClick=function(t){t.preventDefault()},e.prototype.editClick=function(t,e){var i=new go;if(this._doEditClick(t,e,i))return i},e.prototype._doEditClick=function(t,e,i){return!1},e.prototype.preventDefaultClick=function(t){t.preventDefault()},e.prototype.canClick=function(t){return!1},e.prototype.canClickSpaceKey=function(t){return!1},e.prototype.click=function(t,e,i){return this._doClick(t,e,i)},e.prototype.itemClick=function(){this._doItemClick()},e.prototype._doItemClick=function(){},e.prototype._doClick=function(t,e,i){},e.prototype.canEditKey=function(t){return!1},e.prototype.editKey=function(t,e){var i=new go;if(this._doEditKey(t,e,i))return i},e.prototype._doEditKey=function(t,e,i){return!1},e.prototype.moveClickElement=function(t,e){},e.prototype._doInitContent=function(t){ft.setTextProp(t)},e.prototype._doClearContent=function(t){t&&(t[this._textProp]="")},e.prototype._doRenderCell=function(t,e,i,r,o){},e.prototype._changed=function(){this._dirty=!0},e.prototype._getValue=function(t,e,i){var r=e.item.dataRow;if(r>=0){var o=t.dataSource.getFieldIndex(i);if(o>=0)return t.dataSource.getValue(r,o)}},e.prototype._makeText=function(t,e,i){return e.getDisplayText(t,i)||e.dataColumn.placeHolder||""},e.prototype._clearHeight=function(){this._dom.style.height=""},e.prototype._setHeight=function(t){this._dom.style.height=t>=0?t+"px":""},e.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},e.prototype._doInitOptions=function(){},e}(Ct),mo=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),e.prototype._doRenderCell=function(t,e,i,r,o){if(e instanceof zr)if(e.index.itemIndex!==t.layoutManager.topIndex)switch(e.getBlankState()){case y.BODY:case y.TAIL:this.$_setText("");break;default:this.$_setText(this._makeText(t,e,i))}else this.$_setText(this._makeText(t,e,i))},e.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},e.TYPE="text",e.Default=new e,e}(yo);(Tr=t.BarOrigin||(t.BarOrigin={})).DEFAULT="default",Tr.LEFT="left",Tr.RIGHT="right",Tr.TOP="top",Tr.BOTTOM="bottom";var bo,vo=function(e){function i(){var r=e.call(this)||this;return r._barStyle=i.BAR_STYLE,r._rightBarStyle=i.BAR_RIGHT_STYLE,r._topBarStyle=i.BAR_TOP_STYLE,r._bottomBarStyle=i.BAR_BOTTOM_STYLE,r._minimum=0,r._maximum=100,r._barWidth="80%",r._showLabel=!1,r._origin=t.BarOrigin.LEFT,r._absoluteValue=!1,r._percentShapeWidth=80,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&(this._barWidth=t,"string"==typeof t&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!0,configurable:!0}),i.prototype._doInitContent=function(t){var e,i,r=ct(t);t[this._textProp]="",(e=this._div=r.createElement("div")).style.position="relative",t.appendChild(e);var o=(i=this._span=r.createElement("span")).style;o.display="inline-block",o.position="absolute",o.top="50%",o.right="50%",o.msTransform=i.style.transform="translate(50%, -50%)",t.appendChild(i)},i.prototype._doRenderCell=function(e,r,o,n,s){var a=this._div,l=a.style,u=this._absoluteValue?Math.abs(r.value):r.value,h=Math.min(1,(u-this._minimum)/(this._maximum-this._minimum));switch(isNaN(h)&&(h=0),this._origin){case t.BarOrigin.RIGHT:this.$_renderRight(l,h),a.className=this.rightBarStyle||i.BAR_RIGHT_STYLE;break;case t.BarOrigin.TOP:this.$_renderTop(l,h),a.className=this.topBarStyle||i.BAR_TOP_STYLE;break;case t.BarOrigin.BOTTOM:this.$_renderBottom(l,h),a.className=this.bottomBarStyle||i.BAR_BOTTOM_STYLE;break;case t.BarOrigin.LEFT:default:this.$_renderLeft(l,h),a.className=this.barStyle||i.BAR_STYLE}this.$_setText(this._makeText(e,r,o))},i.prototype.$_renderLeft=function(t,e){if(t.left="0px",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},i.prototype.$_renderRight=function(t,e){if(t.left=100*(1-e)+"%",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},i.prototype.$_renderTop=function(t,e){if(t.top="0px",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},i.prototype.$_renderBottom=function(t,e){if(t.top=100*(1-e)+"%",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},i.prototype.$_setText=function(t){this._span[this._textProp]=t||""},i.TYPE="bar",i.STYLE="rg-bar-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.BAR_STYLE="rg-bar-renderer-bar",i.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",i.BAR_TOP_STYLE="rg-bar-renderer-bar-top",i.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",i}(yo),wo=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!1,e._enterKey=!1,e._itemClickable=!0,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._img=ct(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._img,s=this.$_getImageUrl(t,e);if(s){n.src=s;var a=this.$_getTitle(t,e);n.alt=a||"",isNaN(this._imageHeight)?n.style.height="":n.style.height=this._imageHeight+"px"}else n.removeAttribute("src"),n.alt=""},e.prototype.canClick=function(t){return t.target===this._img},e.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doInitOptions=function(){this._imageMap=this._imageCallback=this._imageField=this._titleField=this._titleCallback=this._imageHeight=void 0},e.prototype.$_getImageUrl=function(t,e){var i="",r=this._imageCallback;return r&&(i=r.call(this,t.handler,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},e.prototype.$_getTitle=function(t,e){var i="",r=this._titleCallback;return r&&(i=r.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.TYPE="image",e.STYLE="rg-image-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(yo),Co=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r=t.call(this)||this;return r._itemGap=4,r._verticalEdgePad=2,r._textVisible=!0,r._reversed=!1,r._splitted=!1,r._imgFixed=!1,r._imgMiddle=!1,r._imgCenter=!1,r._imgHeight=16,r._imgWidth=16,r._imgLeft=0,r._imgRight=0,r._imgTop=0,r._imgBottom=0,r._spanVis=void 0,r._spanPadRight=0,r._spanPadLeft=0,r._spanCenter=!1,r._spanText="",r._imgWidth=e,r._imgHeight=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._reset()},e.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0,this._dom&&(this._dom[ft.TextProp]="")},e.prototype.$_setImgFixed=function(t,e,i){(e!=this._imgFixed||i)&&(this._imgFixed=e,t.style.position=e?"absolute":"")},e.prototype.$_setImgMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},e.prototype.$_setImgCenter=function(t,e,i){(e!=this._imgCenter||i)&&(this._imgCenter=e,t.style.textAlign=e?"center":"")},e.prototype.$_setImgWidth=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgWidth||i)&&(this._imgWidth=e,t.style.width=e>0?e+"px":"")},e.prototype.$_setImgHeight=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgHeight||i)&&(this._imgHeight=e,t.style.height=e>0?e+"px":"")},e.prototype.$_setImgBounds=function(t,e,i,r,o,n){(e!=this._imgTop||n)&&(this._imgTop=e,t.style.top=e>0?e+"px":""),(i!=this._imgLeft||n)&&(this._imgLeft=i,t.style.left=i>0?i+"px":""),(r!=this._imgBottom||n)&&(this._imgBottom=r,t.style.bottom=r>0?r+"px":""),(o!=this._imgRight||n)&&(this._imgRight=o,t.style.right=o>0?o+"px":"")},e.prototype.$_clearImgBounds=function(t,e){(this._imgTop>0||e)&&(this._imgTop=0,t.style.top=""),(this._imgLeft>0||e)&&(this._imgLeft=0,t.style.left=""),(this._imgBottom>0||e)&&(this._imgBottom=0,t.style.bottom=""),(this._imgRight>0||e)&&(this._imgRight=0,t.style.right="")},e.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none",this.grid.accessibility&&(t?this._span.removeAttribute("aria-hidden"):this._span.setAttribute("aria-hidden","true")))},e.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=t>0?t+"px":"")},e.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=t>0?t+"px":"")},e.prototype.$_setSpanCenter=function(t,e){if(void 0===e&&(e=0),t!=this._spanCenter){var i=this._span.style;this._spanCenter=t,t?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position="")}},e.prototype.$_setSpanText=function(t){if(t!=this._spanText){this._spanText=t;var e=this._textVisible?this._spanText:void 0;this._span[this._textProp]=e}},e.prototype.$_layoutLeft=function(t,e,i,r){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!1,r),this.$_clearImgBounds(e,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},e.prototype.$_layoutRight=function(t,e,i,r){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!1,r),this.$_clearImgBounds(e,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},e.prototype.$_layoutTop=function(t,e,i,r){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,r),this.$_setImgMiddle(e,!1,r),this.$_setImgCenter(e,!1,r),this.$_clearImgBounds(e,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottom=function(t,e,i,r){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,r),this.$_setImgMiddle(e,!1,r),this.$_setImgCenter(e,!1,r),this.$_clearImgBounds(e,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutLeftEdge=function(t,e,i,r,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_setImgBounds(e,0,2,0,0,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(r)?"":r+"px"},e.prototype.$_layoutRightEdge=function(t,e,i,r,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_setImgBounds(e,0,0,0,2,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(r)},e.prototype.$_layoutTopEdge=function(t,e,i,r,o,n,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(r-n)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((o-s)/o)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottomEdge=function(t,e,i,r,o,n,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(r-n)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(o-s)/o*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutCenter=function(t,e,i,r){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!0,r),this.$_clearImgBounds(e,r),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e}(yo),xo=function(e){function i(){var i=e.call(this)||this;return i._iconWidth=NaN,i._iconHeight=NaN,i._iconLocation=t.IconLocation.LEFT,i._spaceKey=!1,i._enterKey=!1,i._imgSrc="",i._itemClickable=!0,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){this._titleCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()},enumerable:!0,configurable:!0}),i.prototype._doInitContent=function(t){var e=ct(t),i=this._img=e.createElement("img");i.alt="",t.appendChild(i);var r=this._span=e.createElement("span");t.appendChild(r),this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},i.prototype._doInitOptions=function(){this._iconMap=this._iconCallback=this._titleCallback=this._iconUrl=this._iconField=void 0,this._iconWidth=this._iconHeight=NaN,this._iconLocation=t.IconLocation.LEFT},i.prototype._doRenderCell=function(e,i,r,o,n){var s=this._img,a=this._span;if(this.$_setImgWidth(s,this._iconWidth,!1),this.$_setImgHeight(s,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(e,i),this.$_getTitle(e,i)),this.$_setSpanText(this._makeText(e,i,r)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case t.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,a,!1);break;case t.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,a,!1);break;case t.IconLocation.TOP:this.$_layoutTop(this._dom,s,a,!1);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,a,!1);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,a,this._iconWidth,!1);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,a,this._iconWidth,!1);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,a,o,n,this._iconWidth,this._iconHeight,!1);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,a,o,n,this._iconWidth,this._iconHeight,!1);break;case t.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,a,!1);break;default:this.$_layoutLeft(this._dom,s,a,!1)}this._oldLocation=this._iconLocation}this._iconLocation==t.IconLocation.TOP_EDGE||this._iconLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.canClick=function(t){return t.target===this._img},i.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doClick=function(t,e,i){var r={};if(e.target===this._img||"keydown"===e.type)return r.type=this.type,r.value=t.value,r},i.prototype.$_getIconUrl=function(t,e){var i=void 0,r=this._iconCallback;return r&&(i=r.call(this,t.handler,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),void 0===i&&(i=this._iconUrl),i||""},i.prototype.$_getTitle=function(t,e){var i,r=this._titleCallback;return r&&(i=r.call(this,t.handler,e)),i||""},i.prototype.$_setImgSrc=function(t,e){t==this._imgSrc&&e===this._img.alt||(this._imgSrc=t,t?(this._img.src=t,this._img.alt=e):(this._img.removeAttribute("src"),this._img.alt=""))},i.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(t.IconLocation.LEFT)},i.prototype.preventDefaultClick=function(t){t.target===this._img&&(t.preventDefault(),t.stopImmediatePropagation())},i.TYPE="icon",i.STYLE="rg-icon-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(Co),Io=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),i.prototype._doInitContent=function(t){e.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),_o.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(xo),So=function(e){function i(){var r=e.call(this,16,16)||this;return r._strictValue=!1,r._threeStates=!1,r._checkLocation=t.IconLocation.CENTER,r._useImages=!1,r._checkedStyle=i.CHECKED_STYLE,r._uncheckedStyle=i.UNCHECKED_STYLE,r._intermediateStyle=i.INTERMEDIATE_STYLE,r._editable=!0,r._spaceKey=!0,r._showInnerFocus=!1,r._oldUsed=!1,r._useChanged=!1,r._values={},r.refreshFocusChanged=!0,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!0,configurable:!0}),i.prototype.canEdit=function(){var t=this.grid.editOptions;if(t.columnEditableFirst){if(!(null!=this.editable?this.editable:t.editable))return!1}else if(!t.editable||!this.editable)return!1;return this._editable},i.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},i.prototype._doInitContent=function(t){var e=ct(t),i=this._check=e.createElement("input");i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block";var r=this._span=e.createElement("span");t.appendChild(i),t.appendChild(r);var o=this._image=e.createElement("span");o.className=this._checkedStyle,o.style.display="inline-block",this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},i.prototype._doRenderCell=function(e,r,o,n,s){var a=this._check,l=this._image,u=this._span,h=this._dom,c=a;this._imgWidth=e.container.measureCheckWidth(),this._imgHeight=e.container.measureCheckHeight();var d=this.$_getChecked(e,r.value,r.index,this._getCheckedCallback),p=a.id=i.FOR_ID+"-"+r.dataColumn.$_hash+"-"+r.item.index;if(u.setAttribute("for",p),a.checked=d,a.indeterminate=this._threeStates&&void 0===d,this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(h.removeChild(l),this._check.style.display="inline-block"):(h.insertBefore(l,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(l.className=d?this._checkedStyle:void 0===d&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,c=l),o.merged&&this.canEdit()&&!ft.included(this.checkLocation,t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE)&&o.focused||h.style.removeProperty("top"),this.$_setSpanText(this._makeText(e,r,o)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case t.IconLocation.LEFT:this.$_layoutLeft(h,c,u);break;case t.IconLocation.RIGHT:this.$_layoutRight(h,c,u);break;case t.IconLocation.TOP:this.$_layoutTop(h,c,u);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(h,c,u);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(h,c,u);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(h,c,u);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(h,c,u,n,s);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(h,c,u,n,s);break;case t.IconLocation.CENTER:this.$_layoutCenter(h,c,u);break;default:this.$_layoutLeft(h,c,u)}this._oldLocation=this._checkLocation}this._checkLocation==t.IconLocation.TOP_EDGE||this._checkLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(s):this._clearHeight()},i.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},i.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},i.prototype._doEditClick=function(t,e,i){if(e.target===this._check||e.target===this._image)return this.$_edit(t,i),!0},i.prototype.canEditKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},i.prototype._doEditKey=function(t,e,i){return this.$_edit(t,i),!0},i.prototype.moveClickElement=function(e,i){var r=this._dom;i||!this.canEdit()||ft.included(t.IconLocation.TOP_EDGE,t.IconLocation.BOTTOM_EDGE)||(r.style.top=e+"px")},i.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=(e=t.length)>0?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(","))for(e=void 0,this._trueValue=(e=t.length)>0?t[0]:void 0,i=0;i<e;i++)this._values[t[i]]=!0;else this._trueValue=void 0},i.prototype.$_getChecked=function(e,i,r,o){if(o)return o(e.handler,r.itemIndex,r.dataColumn,i);var n=r.dataColumn;if(n&&n.valueType===t.ValueType.OBJECT){var s=n.getField(),a=n.objectKey||s.objectKey;i=null==i?void 0:i[a]}if("boolean"==typeof i)return i;var l=String(i);return this._values.hasOwnProperty(l)?this._values[l]:this._threeStates&&(this._strictValue||""==i||null==i)?void 0:Boolean(i)},i.prototype.$_edit=function(e,i){var r,o=e.grid,n=e.dataColumn,s=e.value,a=this.$_getChecked(o,e.value,e,this._getCheckedCallback);r=!a&&(void 0===a||!this._threeStates||void 0);var l=this._setCheckedCallback;if(l?r=l(o.handler,e.itemIndex,e.dataColumn,s,r):void 0!==this._trueValue&&r?r=this._trueValue:void 0!==this._falseValue&&!1===r&&(r=this._falseValue),n&&n.valueType===t.ValueType.OBJECT){var u=n.getField(),h=s||{};h[n.objectKey||u.objectKey]=r,i.value=h}else i.value=r},i.prototype.$_layoutLeft=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutLeft.call(this,t,n,r,o)},i.prototype.$_layoutRight=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutRight.call(this,t,n,r,o)},i.prototype.$_layoutTop=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutTop.call(this,t,n,r,o)},i.prototype.$_layoutBottom=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutBottom.call(this,t,n,r,o)},i.prototype.$_layoutLeftEdge=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutLeftEdge.call(this,t,n,r,this._imgWidth,o)},i.prototype.$_layoutRightEdge=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutRightEdge.call(this,t,n,r,this._imgWidth,o)},i.prototype.$_layoutTopEdge=function(t,i,r,o,n){var s=this._useImages,a=s?this._image:i;e.prototype.$_layoutTopEdge.call(this,t,a,r,o,n,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutBottomEdge=function(t,i,r,o,n){var s=this._useImages,a=s?this._image:i;e.prototype.$_layoutBottomEdge.call(this,t,a,r,o,n,this._imgWidth,this._imgHeight,s)},i.prototype.$_layoutCenter=function(t,i,r){var o=this._useImages,n=o?this._image:i;e.prototype.$_layoutCenter.call(this,t,n,r,o)},i.prototype.$_setImageMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e)},i.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(t.IconLocation.LEFT)},i.TYPE="check",i.STYLE="rg-check-renderer",i.FOR_ID="$$-check-cell-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.CHECKED_STYLE="rg-check-renderer-checked",i.UNCHECKED_STYLE="rg-check-renderer-unchecked",i.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",i}(Co),Eo=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),i.prototype._doInitContent=function(t){e.prototype._doInitContent.call(this,t),t.style.setProperty("display","flex","important")},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),_o.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,r,o,n){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,r,o,n){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(So),ko=function(t){function e(){var i=t.call(this)||this;return i._buttonStyle=e.BUTTON_STYLE,i._hideWhenEmpty=!0,i._spaceKey=!0,i._enterKey=!1,i._itemClickable=!0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._button=ct(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._button;n[this._textProp]=this._makeText(t,e,i),n.setAttribute("class",this._buttonStyle),n.style.visibility=this._hideWhenEmpty&&this._isEmpty(e.value)?"hidden":""},e.prototype.canClick=function(t){return t.target===this._button},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype._doItemClick=function(){this._button.click()},e.TYPE="button",e.STYLE="rg-button-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BUTTON_STYLE="rg-button-renderer-button",e}(yo),Oo=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!0,e._enterKey=!1,e._itemClickable=!0,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterKey",{get:function(){return this._enterKey},set:function(t){this._enterKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classCallback",{get:function(){return this._classCallback},set:function(t){this._classCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._anchor=ct(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},e.prototype._doInitOptions=function(){this._baseUrl=this._linkField=this._urlCallback=this._titleField=this._titleCallback=this._url=this._classCallback=void 0},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._anchor;n[this._textProp]=this._makeText(t,e,i),this._url="","#"===this._baseUrl?(n.removeAttribute("target"),n.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(n.target=null==this.target?"_blank":this.target,n.href=this._url));var s=this.$_getTitle(t,e);s?n.title=s:delete n.title;var a=this.$_getStyle(t,e);a?n.className=a:n.removeAttribute("class")},e.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},e.prototype.canClick=function(t){return t.target===this._anchor},e.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},e.prototype.canClickSpaceKey=function(t){return(this.spaceKey&&32==t.keyCode||this.enterKey&&13===t.keyCode)&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doItemClick=function(){this._anchor.click()},e.prototype.$_getUrl=function(t,e){var i="",r=this._urlCallback;return r&&(i=r.call(this,t.handler,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},e.prototype.$_getTitle=function(t,e){var i="",r=this._titleCallback;return r&&(i=r.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.prototype.$_getStyle=function(t,e){var i="",r=this._classCallback;return r&&(i=r.call(this,t.handler,e)),i||""},e.TYPE="link",e.STYLE="rg-link-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(yo),Ro=function(e){function i(){var r=e.call(this)||this;return r._shapeStyle=i.SHAPE_STYLE,r._shape=po.STAR,r._shapeWidth=16,r._shapeHeight=16,r._shapeLocation=t.IconLocation.LEFT,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!0,configurable:!0}),i.prototype._doInitContent=function(t){var e=ct(t),i=(this._svg=lo.createSVG(t)).style,r=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,o=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;i.display="inline-block",i.width=r+"px",i.height=o+"px";var n=this._span=e.createElement("span");t.appendChild(n),this._br=e.createElement("br")},i.prototype._reset=function(){e.prototype._reset.call(this),this._splitted=this._reversed=void 0},i.prototype._doRenderCell=function(e,i,r,o,n){var s=this._svg,a=this._span;if(this._runShape=this.$_getShape(e,i),s.setAttribute("class",this._shapeStyle),lo.renderSVG(e,s,this.$_render.bind(this)),this.$_setSpanText(this._makeText(e,i,r)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case t.IconLocation.LEFT:this.$_layoutLeft(this._dom,s,a,!1);break;case t.IconLocation.RIGHT:this.$_layoutRight(this._dom,s,a,!1);break;case t.IconLocation.TOP:this.$_layoutTop(this._dom,s,a,!1);break;case t.IconLocation.BOTTOM:this.$_layoutBottom(this._dom,s,a,!1);break;case t.IconLocation.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,s,a,this._shapeWidth,!1);break;case t.IconLocation.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,s,a,this._shapeWidth,!1);break;case t.IconLocation.TOP_EDGE:this.$_layoutTopEdge(this._dom,s,a,o,n,this._shapeWidth,this._shapeHeight,!1);break;case t.IconLocation.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,s,a,o,n,this._shapeWidth,this._shapeHeight,!1);break;case t.IconLocation.CENTER:this.$_layoutCenter(this._dom,s,a,!1);break;default:this.$_layoutLeft(this._dom,s,a,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==t.IconLocation.TOP_EDGE||this._shapeLocation==t.IconLocation.BOTTOM_EDGE?this._setHeight(n):this._clearHeight()},i.prototype.$_getShape=function(t,e){var i=void 0,r=this._shapeCallback;return r&&(i=r.call(this,t.handler,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},i.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new fo:(e=this._polygon?this._polygon:this._polygon=new po(t),this._polygon.shape=t)),e},i.prototype.$_render=function(t,e,i,r){if(this._runShape){var o=this.$_getDrawing(this._runShape);o&&o.draw(e,i,r)}},i.TYPE="shape",i.STYLE="rg-shape-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i.SHAPE_STYLE="rg-shape-renderer-shape",i}(Co),Po=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),i.prototype._doInitContent=function(t){t.style.setProperty("display","flex","important"),e.prototype._doInitContent.call(this,t)},i.prototype._doClearContent=function(t){e.prototype._doClearContent.call(this,t),_o.clearFlex(t)},i.prototype.$_layoutLeft=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT)},i.prototype.$_layoutRight=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT)},i.prototype.$_layoutTop=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP)},i.prototype.$_layoutBottom=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM)},i.prototype.$_layoutLeftEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.LEFT_EDGE)},i.prototype.$_layoutRightEdge=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.RIGHT_EDGE)},i.prototype.$_layoutTopEdge=function(e,i,r,o,n){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.TOP_EDGE)},i.prototype.$_layoutBottomEdge=function(e,i,r,o,n){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.BOTTOM_EDGE)},i.prototype.$_layoutCenter=function(e,i,r){_o.layoutFlex(e,i,r,this._itemGap,this._verticalEdgePad,t.IconLocation.CENTER)},i}(Ro),Do=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._inactiveStyle=e.INACTIVE_STYLE,i._barCount=10,i._minimum=NaN,i._maximum=NaN,i._startRate=50,i._endRate=100,i._absoluteValue=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=ct(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=lo.createSVG(e)).style;i.position="absolute",i.left="0px",i.width="100%",i.top=(100-Math.max(this._startRate,this._endRate))/2+"%",i.height=Math.max(this._startRate,this._endRate)+"%"},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._svg;this._value=parseFloat(e.value),n.setAttribute("class",this._barStyle),lo.renderSVG2(t,n,this.$_render.bind(this))},e.prototype.$_render=function(t,e){var i=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum));for(var r=100/Math.max(this._startRate,this._endRate),o=(100-2*(this._barCount+1))/this._barCount,n=0,s=this._startRate*r,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var u=l<i?null:this._inactiveStyle;e.sbounds(u,n+"%",100-s+"%",o+"%",s+"%"),n+=o+2,s+=a}},e.TYPE="signalbar",e.STYLE="rg-signalbar-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-signalbar-renderer-bar",e.INACTIVE_STYLE="rg-signalbar-renderer-inactive",e}(yo),To=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new oo,i.$_render=function(t,e,i,r){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new $(0,0,i,100)))}.bind(i),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=ct(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=lo.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._svg;this._value=null==e.value?"":String(e.value),this._value&&(this._value=this._value.toUpperCase()),n.setAttribute("class",this._barStyle),lo.renderSVG(t,n,this.$_render)},e.TYPE="code39",e.STYLE="rg-code39-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code39-renderer-bar",e}(yo),Lo=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new io,i.$_render=function(t,e,i,r){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new $(0,0,i,100)))}.bind(i),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=ct(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=lo.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._svg;this._value=null==e.value?"":String(e.value),n.setAttribute("class",this._barStyle),lo.renderSVG(t,n,this.$_render)},e.TYPE="code128",e.STYLE="rg-code128-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code128-renderer-bar",e}(yo),Mo=/\$\{[^{}]*\}/g,Fo=function(){function t(){this._template="",this._tokens=[]}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{set:function(t){this._pattern=t},enumerable:!0,configurable:!0}),t.prototype.realize=function(t,e,i,r){for(var o="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];"string"==typeof a?o+=a||"":1==a.type?o+=e.value||"":2==a.type?o+=e.item.getData(t.dataSource.getFieldIndex(a.field))||"":4===a.type?o+=(e instanceof Yr?e.getDisplayText(t,i):e.value)||"":o+=r?r.call(this,t.handler,e,a.field)||"":a.field}return o},t.prototype.realizeHeader=function(t,e,i){for(var r="",o=0,n=this._tokens;o<n.length;o++){var s=n[o];if("string"==typeof s)r+=s;else if(1==s.type)r+=t.displayText;else if(e)r+=(a=e.call(this,i.handler,t,s.field))||"";else{var a;r+=null!=(a=t.getValue(s.field))?a:s.field}}return r},t.prototype.realizeSummary=function(t,e,i,r){for(var o="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)o+=a;else if(1==a.type)o+=e.getDisplayText(i);else if(r)o+=(l=r.call(this,t.column.grid.handler,t,a.field))||"";else{var l;o+=null!=(l=t.getValue(a.field))?l:a.field}}return o},t.prototype.realizeGroupSummary=function(t,e,i,r){for(var o="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)o+=a;else if(1==a.type)o+=e.getDisplayText(i);else if(r)o+=(l=r.call(this,t.column.grid.handler,t,a.field))||"";else{var l;o+=null!=(l=t.getValue(a.field))?l:a.field}}return o},t.prototype.realizeForm=function(t,e,i){for(var r="",o=0,n=this._tokens;o<n.length;o++){var s=n[o];"string"==typeof s?r+=s:1==s.type||2==s.type||(i?i.call(this,t.getHandler(),e,s.field):r+=s.field)}return r},t.prototype.$_parse=function(t){var e=this._tokens=[];if(t){for(var i,r=t.length,o=this._pattern||Mo,n=0;i=o.exec(t);){var s=i[0],a=i.index;a>n&&(e.push(t.substring(n,a)),n=a);var l=s.substring(2,s.length-1),u={type:"value"===l?1:"text"===l?4:0==l.indexOf("value:")?2:3,field:l};2==u.type&&(u.field=u.field.substring(6)),e.push(u),n+=s.length}n<r&&e.push(t.substring(n,r))}},t}(),No=function(t){function e(){var e=t.call(this)||this;return e._output=void 0,e._inputFocusable=!1,e._html="",e._parser=new Fo,e.template="<span>${value}</span>",e._itemClickable=!0,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=t?new RegExp(t):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},set:function(t){this._output=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!0,configurable:!0}),e.prototype.clearAndAssignFrom=function(e){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",t.prototype.assignFrom.call(this,e)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._html=null},e.prototype.canClick=function(t){var e=ht(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&i.className.indexOf("rg-")>=0||this._dom===i)},e.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},e.prototype._doRenderCell=function(t,e,i,r,o){var n=this._callback;n?this.$_setHtml(n.call(this,t.handler,e,r,o)):this.$_setHtml(this._parser.realize(t,e,i,this._valueCallback))},e.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},e.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},e.TYPE="html",e}(yo),Vo=function(e){function i(){var t=e.call(this)||this;return t.$_userComparer=function(t,e,i){if(this._labelComparer)return this._labelComparer(t,e._rowId,i.rowId)},t}return r(i,e),i.prototype.run=function(e,i,r,o,n,s,a){this._rs=e.provider;var l=this._ds=this._rs.dataSource;this._parent=e,this._field=i;var u=this._ds.getField(i);if(this._labelComparer=this._ds._comparers[i]||this._rs._labelComparer[i],this._labelComparer)this._comparer=this.$_userComparer;else switch(u.dataType){case t.ValueType.NUMBER:case t.ValueType.DATETIME:this._comparer=l.compareNumbers;break;case t.ValueType.BOOLEAN:this._comparer=l.compareBools;break;case t.ValueType.OBJECT:this._comparer=l.compareObjects.bind(l);break;default:this._comparer=o?l.compareTexts.bind(l):l.compareValues.bind(l)}this.$_sort(n,s,r,a)},i.prototype.$_sort=function(e,i,r,o){do{var n=this._parent,s=this._field,a=e,l=i,u=Math.floor((e+i)/2),h=n.getItem(u).dataRow,c=n.getItem(u).row;do{if(r==t.SortDirection.ASCENDING){for(;a<=l&&(0==(d=this._comparer(this._field,c,n.getItem(a).row))&&o&&(d=h-n.getItem(a).dataRow),!(d<=0));)a++;for(;a<=l&&(0==(d=this._comparer(s,c,n.getItem(l).row))&&o&&(d=h-n.getItem(l).dataRow),!(d>=0));)l--}else{for(;a<=l&&(0==(d=this._comparer(s,c,n.getItem(a).row))&&o&&(d=h-n.getItem(a).dataRow),!(d>=0));)a++;for(;a<=l;){var d;if(0==(d=this._comparer(s,c,n.getItem(l).row))&&o&&(d=h-n.getItem(l).dataRow),d<=0)break;l--}}a<=l&&(a!=l&&n._exchangeItems(a,l),a++,l--)}while(a<=l);e<l&&this.$_sort(e,l,r,o),e=a}while(e<i)},i}(Ct),Bo=function(t){function e(){return t.call(this)||this}return r(e,t),e}($r),Ao=function(t){function e(e,i,r){var o=t.call(this)||this;return o._runtime=new Bo,o._owner=e,o._exprNode=ue.Default.parse(i,["value","values"]),o._runtime=new Bo,o._callback=r,o}return r(e,t),e.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},e.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var r=this._owner.getItemOfRow(t+i,!0);r instanceof gr&&this.$_setCheckable(r)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var r=this._owner.getItemOfRow(t+i,!0);r instanceof gr&&this.$_setCheckable(r)}},e.prototype.updateRowList=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e],o=this._owner.getItemOfRow(r,!0);o instanceof gr&&this.$_setCheckable(o)}},e.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e],!0);i instanceof gr&&this.$_setCheckable(i)}},e.prototype.$_setCheckable=function(t){var e,i=this._callback;i?e=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),e=this._exprNode.evaluate(this._runtime)),t._setCheckable(e)},e}($e),$o=function(e){function i(i){var r=e.call(this,i)||this;return r._sortMode=t.SortMode.AUTO,r._filterMode=t.FilterMode.AUTO,r._filterOr=!1,r._checkableExpression=null,r._rows=[],r._filteredItems=[],r._pageItems=[],r._sortedItems=[],r._pubItems=r._rows,r._items=r._rows,r._distinctRows=[],r._rowCount=0,r._fixedCount=0,r._fixedSorting=!1,r._maxItemCount=0,r._itemCount=0,r._pubCount=0,r._filtered=!1,r._filtering=!1,r._filters=[],r._filterRuntime=new Vr,r._filterLock=0,r._fixedFiltering=!1,r._sorted=!1,r._sortFields=[],r._sortDirections=[],r._sortCases=[],r._labelComparer={},r._sorter=null,r._defSorter=null,r._paging=!1,r._pagingSource=a.ROWS,r._pageSize=10,r._pageCount=-1,r._pageStartIndex=-1,r._currPage=0,r._pageStart=0,r._summaryMode=t.SummaryMode.AGGREGATE,r._summaryMap=null,r._checkableTag=null,r._checkFieldIndex=-1,r}return r(i,e),i.prototype._doDispose=function(){function t(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,t(this._rows),t(this._filteredItems),t(this._pageItems),t(this._sortedItems),t(this._pubItems),t(this._items),t(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,e.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(t){var e=this._rows[t];return e&&e._getExtents()},i.prototype.setCommandStates=function(t,e){var i=this._rows[t];null!=e&&i&&i._setExtents(e)},Object.defineProperty(i.prototype,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFiltered",{get:function(){return this._filtered},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isSorted",{get:function(){return this._sorted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPaging",{get:function(){return this._paging},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageStartIndex",{get:function(){return this._pageStart},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sorter",{get:function(){return this._sorter||this._defSorter},set:function(t){this._sorter=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Ao(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Ao(this,null,t),this._dataSource&&this._checkableTag.connect(this._dataSource))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!0,configurable:!0}),i.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],r=void 0,o=0;o<e;o++){var n=this._dataSource.getValue(o,t);n!=r&&i.indexOf(n)<0&&i.push(n),r=n}return i},i.prototype.beginFilter=function(){this._filterLock++},i.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i))},i.prototype.hasFilter=function(t){var e=this._filters[t];return e&&e.length>0},i.prototype.addFilter=function(t,e){var i=e&&e.criteria;if(t>=0){this._fireFilterAdded(t,i);var r=this._filters[t];if(r||(r=[],this._filters[t]=r),e.criteria||e.callback){var o=new Fr(e);return r.push(o),this.applyFilters(),o}}},i.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e.model);var i=this._filters[t],r=i.indexOf(e);r>=0&&(i.splice(r,1),this.applyFilters())}},i.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e.length>0&&(e.length=0,this.applyFilters())}},i.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},i.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&i.length>0)return!0}return!1},i.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(this._filterLock>0)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},i.prototype.orderBy=function(e,i,r,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),void 0===o&&(o=!0),this._fireSort(e,i,r),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var n=e?e.length:0,s=i?i.length:0,a=r?r.length:0,l=0;l<s;l++)i[l]=i[l]==t.SortDirection.ASCENDING||i[l]==t.SortDirection.DESCENDING?i[l]:t.SortDirection.ASCENDING;for(l=0;l<n;l++)this._sortFields.push(e[l]),s>l?this._sortDirections.push(i[l]):s>0?this._sortDirections.push(i[s-1]):this._sortDirections.push(t.SortDirection.ASCENDING),a>l?this._sortCases.push(r[l]):a>0?this._sortCases.push(r[a-1]):this._sortCases.push(t.SortCase.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{o&&this._fireRefresh()}finally{this._fireSorted()}},i.prototype.getSortFields=function(){return this._sortFields.slice()},i.prototype.getSortDirections=function(){return this._sortDirections.slice()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.setPaging=function(t,e,i,r){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===r&&(r=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&r==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=r,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},Object.defineProperty(i.prototype,"page",{get:function(){return this._paging?this._currPage:-1},enumerable:!0,configurable:!0}),i.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},Object.defineProperty(i.prototype,"pageCount",{get:function(){if(this._paging){if(this._pageCount>=0)return this._pageCount;var t=this.$_getPageItems();return Math.floor((t.length+this._pageSize-1)/this._pageSize)}return 0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())},enumerable:!0,configurable:!0}),i.prototype.getPageOfDataRow=function(t){if(this._paging){if(t<0||t>=this._dataSource.rowCount)return-1;var e=this.$_getPageItems();if(!e||!e.length)return-1;for(var i=0;i<e.length;i++)if(e[i].dataRow===t)return Math.floor(i/this._pageSize);return-1}return 0},i.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],r=0;r<e;r++){var o=t?this._rows[r]:this._pubItems[r];o.checked&&i.push(o.dataRow)}return i},i.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():Ao.clearCheckables(this),this._fireRefresh()},i.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},i.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>-1?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(t.getData(this._checkFieldIndex)):e},i.prototype.setItemChecked=function(t,e){if(this._checkFieldIndex>-1){var i=this.dataSource.getField(this._checkFieldIndex),r=i.readBooleanValue(t.getData(this._checkFieldIndex));return!!r!=e&&(r=(i._boolParser||i._ownerBoolParser).toText(e),t.setData(this._checkFieldIndex,r)),!0}return!1},i.prototype.getJsonRows=function(){return this._pubItems.map((function(t){return t.getRowObject()}))},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){t!==this._dataSource&&(this.$_clearRows(!0),this._dataSource&&(this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this),this._dataSource.unregisterCommandListener(this)),this._dataSource=t,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._pubCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._pubCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sorted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.sorted},enumerable:!0,configurable:!0}),i.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},i.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},i.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},i.prototype.getIndexOfRow=function(t){if(t>=0&&t<this._rows.length){var e=this._rows[t];return e&&this._pubItems.indexOf(e)>=0?e.index:-1}return-1},i.prototype.getItemOfRow=function(t,e){if(t>=0&&t<this._rows.length){var i=this._rows[t];return i.index>=0||e?i:null}return null},i.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},i.prototype.setFixed=function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._filtering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},i.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},i.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},i.prototype.getAllItems=function(){return this._pubItems.slice()},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},i.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},i.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},i.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},i.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},i.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},i.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},i.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var r=this._rows[e];r.dataRowId>=0&&(t[r.dataRowId]={exts:r._extents,heights:r.heights&&r.heights.slice()})}},i.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},i.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},i.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},i.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&this.maxItemCount>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,r=this._rowCount;i<r;i++){var o=this._rows[i]=this.$_createRow(i);if(t&&t.hasOwnProperty(o.dataId)){var n=t[o.dataId];o._extents=n.exts,o.heights=n.heights&&n.heights.slice()}}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},i.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},i.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.maxItemCount>0?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||this._dataSource.hiddenCount>0)for(var r=0;r<this._rowCount;r++){var o=this._rows[r],n=this._dataSource.getRowState(this._rows[r].dataRow),s=this._dataSource.isHiddenRow(this._rows[r].dataRow);this.hideDeleted&&gt(n)||s?o._index=-1:o._index=0}else for(r=0;r<this._rowCount;r++)this._rows[r]._index=0;var a=this.fixedCount,l=a>0&&!this._fixedFiltering,u=this._rows.length;if(!t){r=0;for(var h=this._filters.length;r<h;r++)if(g=this._filters[r])for(var c=0;c<g.length;c++)g[c].prepare(this._filterRuntime,this._dataSource)}this._paging||(u=Math.min(u,i));var d=0;for(r=0;r<this._rowCount&&d<u;r++)if((o=this._rows[r]).index>=0)if(t||l&&d<a)this._filteredItems.push(o),d++;else{var p=!this._filterOr,f=0,_=0;for(h=this._filters.length;_<h;_++){var g;if((g=this._filters[_])&&f++,this._filterOr){if(g&&this.$_select(g,o,_)){p=!0;break}}else if(g&&!this.$_select(g,o,_)){p=!1;break}}p||0===f?(this._filteredItems.push(o),d++):o._index=-1}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var y=this._sortedItems;for(r=y.length;r--;)y[r].index<0&&y.splice(r,1)}else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},i.prototype.$_buildPageItems=function(){var t=this.$_getPageItems();this._pageItems.length=0;for(var e=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,r=this.maxItemCount>0?this.maxItemCount:i,o=Math.min(this._pageSize,r);e<i&&o>0;e++,o--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},i.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},i.prototype.$_compareFuncs=function(e,i){for(var r={},o=this._dataSource,n=0,s=e.length;n<s;n++){var a=o.getField(e[n]);if(a){var l=o.getDataComparer(a.index)||this._labelComparer[a.index],u=i[n]==t.SortCase.INSENSITIVE;if(!l)switch(a.dataType){case t.ValueType.DATETIME:case t.ValueType.NUMBER:l=o.compareNumbers.bind(o);break;case t.ValueType.BOOLEAN:l=o.compareBools.bind(o);break;case t.ValueType.OBJECT:l=o.compareObjects.bind(o);break;default:l=u?o.compareTexts.bind(o):o.compareValues.bind(o)}l&&(r[e[n]]=l)}}return r},i.prototype.$_sortRows=function(e){void 0===e&&(e=null);var i=e||this._items.slice(),r=[];this._fixedCount>0&&!this._fixedSorting&&(r=i.splice(0,this._fixedCount));var o=this.$_compareFuncs(this._sortFields,this._sortCases);i.sort(function(e,i){for(var r,n,s,a=0,l=0,u=this._sortFields.length;l<u&&(n=this._sortDirections[l],s=this._sortFields.length==l+1,!(r=o[this._sortFields[l]])||0===(a=r(this._sortFields[l],e.dataRow,i.dataRow)));l++);return 0===(a*=n===t.SortDirection.DESCENDING?-1:1)&&s?n===t.SortDirection.DESCENDING?i.dataRow-e.dataRow:e.dataRow-i.dataRow:a}.bind(this)),this._sortedItems=r.concat(i)},i.prototype.$_createRow=function(t){var e=new yr(t);return this.attachItem(e),e._dataRowId=e.dataId,e},i.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;t>=0;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},i.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new cr(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},i.prototype.$_summarize=function(e){var i=this._dataSource;if(i)if(this._filtered){for(var r=this._items.length,o=new Array(r),n=0;n<r;n++)o[n]=this._pubItems[n].dataRow;i.summarizeRange(e,o,this._summaryMode==t.SummaryMode.STATISTICAL)}else i.summarize(e,this._summaryMode==t.SummaryMode.STATISTICAL)},i.prototype.$_needSort=function(){return this._sorted&&this._sortMode==t.SortMode.AUTO},i.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==t.FilterMode.AUTO},i.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&this._dataSource.deletedCount>0||this._dataSource.hiddenCount>0},i.prototype.$_select=function(t,e,i){for(var r=0,o=t.length;r<o;r++)if(t[r].select(this._filterRuntime,e.parent,e,i))return!0},i.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;t>=0;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&this._sortFields.length>0},i.prototype.$_getPageItems=function(){return this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items},i.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_resetSummary(),this._fireReset(),this.dataSource=null},i.prototype.onDataProviderReset=function(t){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},i.prototype.onDataProviderRefresh=function(t){this._refreshItems()},i.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},i.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.prototype.onDataProviderRowInserting=function(t,e,i){return!0},i.prototype.onDataProviderRowInserted=function(t,e,i){var r=this._rows,o=e<r.length?r[e]:null,n=this.$_createRow(e);r.splice(e,0,n);for(var s=e,a=r.length;s<a;s++)r[s]._dataRow=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;e=null!=i?i:Math.max(0,o?l.indexOf(o):l.length),l.splice(e,0,n)}this._sorted&&(l=this._sortedItems,e=null!=i?i:Math.max(0,o?l.indexOf(o):l.length),l.splice(e,0,n)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)}this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(n)},i.prototype.onDataProviderRowsInserted=function(t,e,i,r){if(!(i<0)){for(var o,n=this._rows,s=e<n.length?n[e]:null,a=[],l=0;l<i;l++)a.push(o=this.$_createRow(e+l)),n.splice(e+l,0,o);var u=n.length;for(l=e;l<u;l++)n[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var h=this._filteredItems;for(e=null!=r?r:Math.max(0,s?h.indexOf(s):h.length),l=0;l<a.length;l++)h.splice(e+l,0,a[l])}if(this._sorted)for(h=this._sortedItems,e=null!=r?r:Math.max(0,s?h.indexOf(s):h.length),l=0;l<a.length;l++)h.splice(e+l,0,a[l]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},i.prototype.onDataProviderRowRemoving=function(t,e){return!0},i.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&(i=(e=this._filteredItems).indexOf(t))>=0&&e.splice(i,1),this._sorted&&(i=(e=this._sortedItems).indexOf(t))>=0&&e.splice(i,1),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},i.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,r=i[e];i.splice(e,1);for(var o=i.length-1;o>=e;o--)i[o]._dataRow=o;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(r),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(r)},i.prototype.onDataProviderRowsRemoving=function(t,e){return!0},i.prototype.$_silentRemoveRows=function(t){if(this._filtered)for(var e=this._filteredItems,i=0;i<t.length;i++){var r=t[i];(o=e.indexOf(r))>=0&&e.splice(o,1)}if(this._sorted)for(e=this._sortedItems,i=0;i<t.length;i++){var o;r=t[i],(o=e.indexOf(r))>=0&&e.splice(o,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},i.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){e.length>1&&e.sort((function(t,e){return t-e}));for(var i=this._rows,r=e[0],o=[],n=e.length-1;n>=0;n--)o.push(i[e[n]]),i.splice(e[n],1);for(n=this._rows.length-1;n>=r;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(o),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},i.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},i.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},i.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},i.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},i.prototype.onDataProviderValueChanging=function(t,e,i,r){return!0},i.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},i.prototype.onDataProviderRowMoving=function(t,e,i){return!0},i.prototype.onDataProviderRowMoved=function(t,e,i){var r=this._rows,o=r.splice(e,1);r.splice(i,0,o[0]);for(var n=r.length,s=e=Math.min(e,i);s<n;s++)r[s]._dataRow=s;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},i.prototype.onDataProviderRowsMoving=function(t,e,i,r){return!0},i.prototype.onDataProviderRowsMoved=function(t,e,i,r){this._refreshItems()},i.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},i.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},i.prototype.onDataProviderStateChanged=function(t,e){if(this.hideDeleted){var i=this._rows[e];gt(i.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},i.prototype.onDataProviderRowHided=function(t,e,i){if(this._filtered=this.$_checkFiltered(),i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var r=this.getItemsByRows(e);this.$_silentRemoveRows(r)}this._fireRefresh()}else this._refreshItems()},i.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){for(var i=!1,r=0,o=e.length;r<o;r++){var n=e[r],s=this._rows[n];if(gt(s.rowState)){i=!0;break}}if(i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var a=this.getItemsByRows(e);this.$_silentRemoveRows(a)}this._fireRefresh()}}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},i.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},i.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},i}(Cr),jo=function(t){function e(e,i,r){var o=t.call(this)||this;return o._owner=e,o._exprNode=ue.Default.parse(i,["value","values"]),o._runtime=new Bo,o._callback=r,o}return r(e,t),e.clearCheckables=function(t){for(var e=function t(e){if(e){e.setCheckable(!0);for(var i=e.count;i--;){var r=e.getItem(i);r instanceof Go&&t(r)}}},i=t.itemCount;i--;){var r=t.getItem(i);r instanceof Go&&e(r)}},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof Go&&this.$_setCheckable(e,!0)}},e.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof Go&&this.$_setCheckable(i,e)},e.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof Go&&this.$_setCheckable(i,!0)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof Go&&this.$_setCheckable(e,!1)},e.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e],o=this._owner.getItemOfRow(r.rowId);o instanceof Go&&this.$_setCheckable(o,!1)}},e.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof Go&&this.$_setCheckable(i,!1)}},e.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,r=void 0;if(i?r=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),r=this._exprNode.evaluate(this._runtime)),t.setCheckable(r),e)for(var o=t.count;o--;){var n=t.getItem(o);n instanceof Go&&this.$_setCheckable(n,!0)}}},e}(Ct),Ho=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._extents={},e}return r(e,t),e.prototype.connect=function(t){this._extents={}},e.prototype.disconnect=function(){this._extents={}},e.prototype.clearRows=function(){this._extents={}},e.prototype.setRows=function(){},e.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;e>=0;e--)this.addRow(t.getChild(e))},e.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e];this.addRow(r)}},e.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;e>=0;e--)this.removeRow(t.getChild(e))},e.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e];this.removeRow(r)}},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t){},e.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},e.prototype.setExtents=function(t,e){this._extents[t.rowId]=e},e}(Ct),Wo=function(t){function e(){var e=t.call(this)||this;return e._extents=0,e}return r(e,t),e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){},enumerable:!0,configurable:!0}),e}(gr),Go=function(e){function i(t){var i=e.call(this)||this;return i._iconHeight=0,i._dataRow=t,i}return r(i,e),i.getTemp=function(t,e){return i.$_tempItem._dataRow=t,i.$_tempItem[gr.PARENT]=e,i.$_tempItem},i.prototype.dispose=function(){this._dataRow=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._dataRow},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasChildren",{get:function(){return this.count>0||this._dataRow&&this._dataRow.hasChildren},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rootItem",{get:function(){for(var t=this;t.level>1;)t=t.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return t.SummaryMode.AGGREGATE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!0,configurable:!0}),i.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},i.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},i.prototype._setExtents=function(t){var e;null===(e=this.provider)||void 0===e||e._extents.setExtents(this,t)},Object.defineProperty(i.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDataRow",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footer?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),i.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},Object.defineProperty(i.prototype,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"descendantCount",{get:function(){return this._dataRow.descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._dataRow.rowState},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!this.hasChildren},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.TREE},enumerable:!0,configurable:!0}),i.prototype.getFooter=function(t){return this._footer},i.prototype.isFooter=function(t){return t===this._footer},i.prototype.canEdit=function(){return!0},i.prototype.createFooter=function(){this._footer||(this._footer=new Wo)},i.prototype.setExpanded=function(t,e,i){(t!=this.expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},i.prototype.getData=function(t){return t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.getValue(t)},i.prototype.setData=function(t,e){t=this.dataSource?this.dataSource.getFieldIndex(t):t,this._dataRow.setValue(t,e,!1)},i.prototype.setItem=function(t,i){e.prototype.setItem.call(this,t,i),i._addChildren(t.children),t.clear()},i.prototype.exchange=function(t,e){this._exchangeItems(t,e)},i.prototype.moveChild=function(t,e){var i=t+e,r=this._children,o=r[t];if(e<0)for(var n=t;n>i;n--)r[n]=r[n-1];else for(n=t;n<i;n++)r[n]=r[n+1];r[i]=o},i.prototype.moveChildren=function(t,e,i){for(var r=this._children,o=r.splice(t,e),n=t+i,s=0;s<e;s++)r.splice(n+s,0,o[s])},i.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},i.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},i.$_tempItem=new i(null),i}(mr),Uo=function(t){function e(e){var i=t.call(this,null)||this;return i._rs=e,i}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.setExpanded=function(t,e,i){},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!0,configurable:!0}),e}(Go),zo=function(t){function e(e){var i=t.call(this)||this;return i._fixedCount=0,i._items=new Array,i._list=new Array,i._rs=e,i}return r(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),e.prototype.getItem=function(t){return this._items[t]},e.prototype.setItem=function(t,e){this._items[t]=e},e.prototype.indexOf=function(t){return this._items.indexOf(t)},e.prototype.clear=function(){this._items.length=0},e.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},e.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,r=t.index+1;r<i.length&&i[r].level>t.level;){if(i[r]==t.footer){e.footerWhenCollapsed||(i[r]._index=-1,i.splice(r,1));break}i[r]._index=-1,i.splice(r,1)}},e.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},e.prototype.getPrior=function(t){return t&&t.visible&&t.index>0?this._items[t.index-1]:null},e.prototype.insert=function(t,e){this._items.splice(e,0,t)},e.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(i>=0&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},e.prototype.$_collectChildren=function(t,e,i,r){for(var o=0,n=t.count;o<n;o++){var s=t.getItem(o);s&&(e.push(s),(i&&s.level<r||s.expanded)&&this.$_collectChildren(s,e,i,r))}t.footer&&e.push(t.footer)},e.prototype.$_expandItem=function(t,e,i){var r,o=this._items,n=this._list;if(r=t instanceof Uo?this._fixedCount:t.index+1,i=Math.max(0,i),n.length=0,this.$_collectChildren(t,n,e,i>0?t.level+i:1e6),e){for(var s=r,a=o.length;s<a&&!(o[s].level<=t.level);s++);o.splice(r,s-r)}for(s=0,a=n.length;s<a;s++)o.splice(r+s,0,n[s])},e.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},e}(Ct),Yo=function(e){function i(){var i=e.call(this,null)||this;return i._sortMode=t.SortMode.AUTO,i._expandWhenGrouping=!0,i._footerWhenExpanded=!0,i._footerWhenCollapsed=!0,i._labelComparer={},i._summaryMode=t.SummaryMode.AGGREGATE,i._groupSummaryMode=t.SummaryMode.AGGREGATE,i._checkableExpression=null,i._checkableCallback=null,i._extents=new Ho,i._filters={},i._filterRuntime=new Vr,i._filtered=!1,i._sorter=new Vo,i._sortFields=[],i._sortDirections=[],i._sortCases=[],i._visibleItems=new zo(i),i._itemMap=[],i._itemCount=0,i._summaryMap=null,i._filterLock=0,i._includeParentItem=!0,i._checkFieldIndex=-1,i}return r(i,e),i.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null,e.prototype._doDispose.call(this)},i.prototype.getCommandStates=function(t){var e=this._itemMap[t.rowId];return e&&e._getExtents()},i.prototype.setCommandStates=function(t,e){var i=t&&this._itemMap[t.rowId];null!=e&&i&&i._setExtents(e)},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new jo(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new jo(this,null,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t},enumerable:!0,configurable:!0}),i.prototype.$_needSort=function(){return this._sortFields&&this._sortFields.length>0&&this._sortMode==t.SortMode.AUTO},i.prototype.insertItem=function(t,e,i,r){var o=this._visibleItems;t.collapsed&&o.expand(t,!1);var n=o.indexOf(t.getItem(i));if(r){t.insert(i+1,e);for(var s=o.count,a=t.level+1;++n<s&&!(o.getItem(n).level<=a););o.insert(e,n)}else t.insert(i,e),o.insert(e,n)},i.prototype.appendItem=function(t,e){var i,r=this._visibleItems;t.collapsed&&r.expand(t,!1),i=t.count>0?r.indexOf(t.getItem(t.count-1)):r.indexOf(t);for(var o=r.count,n=t.level;++i<o&&!(r.getItem(i).level<=n););t.add(e),r.insert(e,i)},i.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},i.prototype.$_calcLevel=function(t,e,i){var r,o,n=t.count,s=e;for(r=0;r<n;r++)(o=t.getItem(r))&&(s=Math.max(s,e+1),i&&!o.expanded||(s=Math.max(s,this.$_calcLevel(o,e+1,i))));return s},i.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},i.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var r=0,o=t.count;r<o;r++){var n=t.getItem(r);n instanceof Go&&(n.expanded||n.level<i)&&this.$_setExpanded(n,!0,i)}},i.prototype._expandItem=function(t,e,i,r,o){if(t&&(e||!t.expanded)){if(o&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,r),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,r>0?t.level+r:1e6);try{this._fireRefresh()}finally{o&&this._fireExpanded(t)}}},i.prototype.expand=function(t,e,i,r){void 0===r&&(r=0),this._expandItem(t,i,e,r,!0)},i.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,t>0?t+1:0,!0)},i.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,r=t.count;i<r;i++){var o=t.getItem(i);o instanceof Go&&this.$_setCollapsed(o,!0)}},i.prototype._collapseItem=function(t,e,i,r){if(t&&(e||t.expanded)){if(r&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{r&&this._fireCollapsed(t)}}},i.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},i.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},i.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},i.prototype.orderBy=function(e,i,r,o){void 0===o&&(o=!0),this._fireSort(e,i,r),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var n=e?e.length:0,s=i?i.length:0,a=r?r.length:0,l=0;l<n;l++)this._sortFields.push(e[l]),s>l?this._sortDirections.push(i[l]):s>0?this._sortDirections.push(i[s-1]):this._sortDirections.push(t.SortDirection.ASCENDING),a>l?this._sortCases.push(r[l]):a>0?this._sortCases.push(r[a-1]):this._sortCases.push(t.SortCase.SENSITIVE);try{this._saveAndRefresh(!0,o),o&&this._fireRefresh()}finally{this._fireSorted()}},i.prototype.getSortFields=function(){return this._sortFields.concat()},i.prototype.getSortDirections=function(){return this._sortDirections.concat()},i.prototype.getSortCases=function(){return this._sortCases.concat()},i.prototype.beginFiltering=function(){this._filterLock++},i.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,r=e.rowId,o=r<=-1||this.$_selectItem(e.parent,e),n=0;n<i;n++){var s=new Go(e._dataRow._children[n]);s[gr.PARENT]=e,s&&!this.dataSource.isHiddenRow(s.rowId)&&(o=this.$_prepareFiltering(t,s)||o)}return t[r]=o},i.prototype.endFiltering=function(t,e,i){var r={};t&&this._includeParentItem&&(r={},this.$_prepareFilters(),this.$_prepareFiltering(r,this._rootItem)),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(e,i,r))},i.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&e.length>0},i.prototype.addFilter=function(t,e){this._fireFilterAdded(t,e.text);var i=this._filters[t];i||(i=[],this._filters[t]=i);var r=new Fr(e);return i.push(r),r},i.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);for(var i=this._filters[t],r=i.length;r--;)if(i[r].model===e){i.splice(r,1),this.applyFilters(null,null);break}}},i.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e&&e.length>0&&(e.splice(0,e.length),this._filters[t]=null,this.applyFilters(null,null))}},i.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters(null,null))},i.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&e.length>0)return!0}return!1},i.prototype.$_prepareFilters=function(){var t=this.dataSource,e=t.fieldCount;for(var i in this._filters)Number(i)>=e&&(this._filters[i]=null);if(this._filtered=this.hasFilters())for(var r in this._filters){var o=this._filters[r];if(o)for(var n=o.length;n--;)o[n].prepare(this._filterRuntime,t)}},i.prototype.applyFilters=function(t,e,i){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e)}}},i.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},i.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof Go)for(var r=0,o=e.count;r<o;r++){var n=e.getItem(r),s=void 0;n.checked&&(s=n.row)&&i.push(s),t(n,i)}}(this._rootItem,t),t},i.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof Go)for(var r=0,o=e.count;r<o;r++){var n=e.getItem(r),s=void 0;n.checked&&(s=n.dataRow)>=0&&i.push(s),t(n,i)}}(this._rootItem,t),t},i.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},i.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():jo.clearCheckables(this),this._fireRefresh()},i.prototype.$_checkChildren=function(t,e,i){for(var r=0,o=t.count;r<o;r++){var n=t.getItem(r);n&&(i?n.checkable&&this._setCheckItem(n,e):this._setCheckItem(n,e)),n instanceof Go&&this.$_checkChildren(n,e,i)}},i.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},i.prototype.checkAll=function(t,i,r,o){i?e.prototype.checkAll.call(this,t,i,r,o,!1):(this.$_checkChildren(this._rootItem,t,r),o?this._fireItemAllChecked(t):this._fireRefreshClient())},i.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},i.prototype.setItemChecked=function(t,e){return this._checkFieldIndex>-1&&(t.setData(this._checkFieldIndex,e),!0)},i.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>=0?t.getData(this._checkFieldIndex):e},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._ds},set:function(t){t!==this._ds&&(this.$_clearItems(),this.$_resetSummary(),this._ds&&(this._ds.removeTag(this._extents),this._ds.removeListener(this),this._ds.unregisterCommandListener(this)),this._ds=t,this._ds&&(this.$_buildTree(),this._ds.addTag(this._extents),this._ds.addListener(this,0),this._ds.registerCommandListener(this)),this._fireReset())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._visibleItems.count},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._sortFields&&this._sortFields.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.sorted},enumerable:!0,configurable:!0}),i.prototype._createRootItem=function(){var t=new Uo(this);return this._setExpanded(t,!0),t},i.prototype.getItem=function(t){return t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},i.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},i.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},i.prototype.$_collectItems=function(t,e){for(var i=0,r=t.count;i<r;i++){var o=t.getItem(i);o instanceof Go&&(e.push(o),this.$_collectItems(o,e))}},i.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},i.prototype.getJsonRows=function(){return this.getAllItems().map((function(t){var e=t.getRowObject();return e.__level=t.level,e}))},i.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},i.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},i.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},i.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},i.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},i.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},i.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},i.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},i.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},i.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},i.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},i.prototype.findItem=function(e,i,r,o,n){var s=this.dataSource;if(!s)return-1;if(this.itemCount<1)return-1;var a=Math.min(e.length,i.length);if(a<1)return-1;var l=!r||r.allFields,u=r&&r.caseSensitive,h=r&&r.partialMatch,c=null,d=[],p=r.compareCallback;p="function"==typeof p?p:ft.compareTextValue;for(var f=0;f<a;f++)d[f]=s.getField(e[f]).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n);for(var _=o;_<=n;_++){var g=this._visibleItems.getItem(_),y=g.dataRow,m=g.dataRow>=0;if(m)for(f=0;f<a;f++){var b=g.getData(e[f]),v=s.getOrgFieldName(e[f]);switch(d[f]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[f]instanceof Date)m=p.call(s.handler,i[f],b,u,h,y,v);else{if(!c){var w=/[.]/.test(i[f])?"yyyy.MM.dd":/[/]/.test(i[f])?"yyyy/MM/dd":/[-]/.test(i[f])?"yyyy-MM-dd":"yyyyMMdd";c=new Je(w)}m=p.call(s.handler,i[f],b?c.getText(b):b,u,h,y,v)}break;default:m=p.call(s.handler,i[f],b,u,h,y,v)}if(m&&!l)return _;if(!m&&l)break}if(m)return _}return-1},i.prototype.findCell=function(e,i,r,o,n,s){var a=this.dataSource;if(!a)return null;if(this.itemCount<1)return null;for(var l=r&&r.caseSensitive,u=r&&r.partialMatch,h=a.fieldCount,c=e.length,d=null,p=[],f=0;f<h;f++)p[f]=a.getField(f).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n),(s=Math.max(0,s))>=e.length&&(o++,s=0);var _=r.compareCallback;_="function"==typeof _?_:ft.compareTextValue;for(var g=o;g<=n;g++){var y=this._visibleItems.getItem(g),m=y.dataRow,b=!1;if(y.dataRow>=0)for(f=g>o?0:s;f<c;f++){var v=e[f],w=a.getOrgFieldName(v);if(v>=0&&v<h){var C=y.getData(v);switch(p[v]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)b=_.call(a.handler,i,C,l,u,m,w);else{if(!d){var x=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";d=new Je(x)}b=_.call(a.handler,i,C?d.getText(C):C,l,u,m,w)}break;default:b=_.call(a.handler,i,C,l,u,m,w)}if(b)return{itemIndex:g,fieldIndex:v,searchFieldIndex:f}}}}return null},i.prototype.$_internalAddItem=function(t,e,i){var r=Go.getTemp(e,t),o=this.dataSource;if(!(this.hideDeleted&&gt(r.rowState)||o.isHiddenRow(e.rowId)))return r&&(null!=i?i:this.$_selectItem(t,r))?(r=new Go(e),t.insert(e.index,r),this._itemCount++,this._itemMap[e.rowId]=r,r):void 0},i.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},i.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&gt(t.rowState)){var i=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},i.prototype.$_selectField=function(t,e,i,r){for(var o=0,n=t.length;o<n;o++){var s=t[o];if(!(s.model instanceof Mr)&&s.select(this._filterRuntime,e,i,r))return!0}return!1},i.prototype.$_selectItem=function(t,e){if(!e)return!1;for(var i in this._filters){var r=this._filters[i];if(r&&!this.$_selectField(r,t,e,Number(i)))return!1}return!!e},i.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},i.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},i.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},i.prototype.$_buildItems=function(t,e,i){void 0===e&&(e=!1);for(var r=t.row,o=r.count,n=0;n<o;n++){var s=r.getChild(n),a=this.$_internalAddItem(t,s,i?i[s.rowId]:null);a&&(e&&a._restoreExpanded(),s.count>0&&this.$_buildItems(a,e,i))}},i.prototype.$_sortItem=function(t){var e=t.count;e>1&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var r=t.getItem(i);r instanceof Go&&this.$_sortItem(r)}},i.prototype.$_sort=function(e,i,r,o){var n,s=this._sortFields[i],a=this._sortDirections[i],l=this.dataSource,u=this._sortCases[i]==t.SortCase.INSENSITIVE;if(this._sorter.run(e,s,a,u,r,o,i+1==this._sortFields.length),n=l.getField(s).dataType==t.ValueType.TEXT&&u?l.equalTexts.bind(l):l.equalValues.bind(l),i+1<this._sortFields.length){for(var h=r,c=h;h<o;)h++,n(s,e.getItem(h).row,e.getItem(h-1).row)||(this.$_sort(e,i+1,c,h-1),c=h);c<o&&this.$_sort(e,i+1,c,o)}},i.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);var i=this.dataSource;this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary();for(var r=i.fieldCount,o=this._sortFields,n=this._sortDirections,s=this._sortCases,a=o.length;a--;)(o[a]<0||o[a]>=r)&&(o.splice(a,1),n.splice(a,1),s.splice(a,1));this.sorted&&this._rootItem.count>0&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},i.prototype.$_resetSummary=function(){this._summaryMap=[]},i.prototype.$_resetGroupSummary=function(){},i.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},i.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new cr(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},i.prototype.$_summarize=function(e){var i=this.dataSource;if(i)if(this._filtered||this.hideDeleted||i.hiddenCount>0){for(var r=this._rootItem.getDescendants(!1),o=r.length,n=[],s=0;s<o;s++){var a=r[s];a instanceof Go&&!i.isHiddenRow(a.rowId)&&n.push(a.row)}e.count=n.length,i.summarizeRange(e,n,this.summaryMode==t.SummaryMode.STATISTICAL)}else e.count=i.rowCount,i.summarize(e,this.summaryMode==t.SummaryMode.STATISTICAL)},i.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(i.ITEM_CHANGED,t)},i.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.EXPANDING,t)},i.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(i.EXPANDED,t)},i.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(i.COLLAPSED,t)},i.prototype._fireParentChanging=function(t,e,r){return!(this._eventLock<=0)||this.fireConfirmEvent(i.PARENT_CHANGING,t,e,r)},i.prototype._fireParentChanged=function(t,e,r){this._eventLock<=0&&this.fireEvent(i.PARENT_CHANGED,t,e,r)},i.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},i.prototype._saveAndRefresh=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&this.$_saveExpanded(this._rootItem);var i={};this.hasFilters()&&function t(e,i){i[e.dataId]=!0,e.children.length>0&&e.children.forEach((function(e){t(e,i)}))}(this._rootItem,i),this.$_clearItems(),this.$_buildTree(t,i),e&&this._fireRefresh()},i.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},i.prototype.onTreeDataProviderDisposed=function(t){this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},i.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},i.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},i.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},i.prototype.onDataProvderCleared=function(t){this._refreshItems()},i.prototype.onTreeDataProviderRowCountChanged=function(t,e){},i.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},i.prototype.onTreeDataProviderRowAdded=function(t,e){var i=this._itemMap[e.parent.rowId];if(i){var r=this.$_internalAddItem(i,e,!0);r?(this.$_buildItems(r),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(e,!1),e.parent.level>0&&this._checkableTag.addRow(e.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var r,o=this._itemMap[e.rowId];if(o&&i&&(r=i.length)>0){for(var n=0;n<r;n++){var s=i[n],a=this.$_internalAddItem(o,s,!0);a&&this.$_buildItems(a)}this.$_clearSummary(),o.expanded?this._expandItem(o,!0,!1,0,!1):this._fireItemChanged(o),this._checkableTag&&(this._checkableTag.addRows(i),e.level>0&&this._checkableTag.addRow(e))}this.$_needSort()&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},i.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var r=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),r.expanded&&r.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},i.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,r=!1,o=0;o<i;o++){var n=e[o],s=this._itemMap[n.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),r=!0)}}this.$_clearSummary(),r&&this._fireRefresh()},i.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},i.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i)}this._checkableTag&&this._checkableTag.updateRow(e)},i.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},i.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},i.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},i.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var r=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(r)}this._checkableTag&&this._checkableTag.updateRow(e)},i.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},i.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},i.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var r=this._itemMap[e.rowId];this.$_internalRowStateChanged(r,i),this._checkableTag&&this._checkableTag.updateRow(e),!r&&i&&this._saveAndRefresh()},i.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,r=!1;if(1==i){var o=e[0];r=!(l=this._itemMap[o.rowId]),this.$_internalRowStateChanged(l),this._checkableTag&&this._checkableTag.updateRow(o),r&&this._saveAndRefresh()}else if(i>0){var n=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l=this._itemMap[e[s].rowId];if(r=r||!l,l&&gt(l.rowState)){var u=l.parent;this.$_internalRemoveItem(l),u.expanded&&u.visible&&this._visibleItems.remove(l),n=!0}}this._checkableTag&&this._checkableTag.changeStates(e),n&&this.$_clearSummary(),r?this._saveAndRefresh():this._fireRefresh()}},i.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var r=this._itemMap[e.rowId];r&&(r.parent.moveChild(r.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh())}},i.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){if(!this.$_needSort()){var r=this._itemMap[e[0].rowId];r&&(r.parent.moveChildren(r.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh())}},i.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,r){var o=this._itemMap[e.rowId];if(o){var n=this._itemMap[i.rowId];this.$_needSort()&&(r=n?n.count():0),o.changeParent(n,r),this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,r){var o=this._itemMap[e[0].rowId];if(o){var n=this._itemMap[i.rowId];this.$_needSort()&&(r=n?n.count():0);for(var s=0;s<e.length;s++){var a=e[s];(o=this._itemMap[a.rowId]).changeParent(n,r+s)}this.$_resetVisibleItems(),this._fireRefresh()}},i.prototype.onTreeDataProviderRowsHideChanged=function(t,e,i){if(i){for(var r=!1,o=0,n=e.length;o<n;o++){var s=e[o],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),r=!0}}r&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},i.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.ITEM_CHANGED="onTreeItemProviderItemChanged",i.EXPANDING="onTreeItemProviderExpanding",i.EXPANDED="onTreeItemProviderExpanded",i.COLLAPSING="onTreeItemProviderCollapsing",i.COLLAPSED="onTreeItemProviderCollapsed",i.PARENT_CHANGING="onTreeItemProviderParentChanging",i.PARENT_CHANGED="onTreeItemProviderParentChanged",i}(Cr),qo=function(t){function e(e){var i=t.call(this)||this;return i._rs=e,i}return r(e,t),e.prototype.getCount=function(t){return this._rs.getNumber(t)},e.prototype.getSum=function(t){return this._rs.getSum(t)},e.prototype.getMax=function(t){return this._rs.getMax(t)},e.prototype.getMin=function(t){return this._rs.getMin(t)},e.prototype.getAvg=function(t){return this._rs.getAvg(t)},e.prototype.getVar=function(t){return this._rs.getVar(t)},e.prototype.getVarp=function(t){return this._rs.getVarp(t)},e.prototype.getStdev=function(t){return this._rs.getStdev(t)},e.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},e.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},e.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)},e}(Ct),Ko=function(e){function i(t,i,r){var o=e.call(this,i&&i.row)||this;return o._values=[],o._changeValues=[],o._started=!1,o._checkDiff=!1,o._strictDiff=!1,o._invalidFields=[],o._rs=t,o._target=i,o._state=r,o}return r(i,e),i.prototype.dispose=function(){this._values=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var r=0;r<i;r++){var o=e.getField(r),n=this._values[r],s=o.readValue(t[r]);this._values[r]=s,this._started&&parent&&!o.equalValues(n,s)&&this._rs._editItemCellUpdated(this,r,n,s)}}else this._values=[]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!0,configurable:!0}),i.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},i.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var r=i.getField(t),o=this._values[t];e=r.readValue(e),this._values[t]=e,this._started&&this.parent&&!r.equalValues(o,e)&&this._rs._editItemCellUpdated(this,t,o,e)},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowState",{get:function(){return this._target?this._target.rowState:t.RowState.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return!!this._target&&this._target.expanded},enumerable:!0,configurable:!0}),i.prototype.getData=function(t){var e=this.dataSource;if((t=e.getFieldIndex(t))<0||t>=e.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},i.prototype.setData=function(t,e){var i=this.dataSource;if((t=i.getFieldIndex(t))<0||t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var r=i.getField(t),o=this._values[t];e=r.readValue(e);var n=!this._checkDiff;n||(n=this._strictDiff?!r.equalValues(o,e):!r.sameValues(o,e)),n&&(this._values[t]=e,this._changeValues[t]=!0,this.parent&&(this._rs._editItemCellUpdated(this,t,o,e),this._rs._editItemCellEdited(this,t)))},i.prototype.getRowData=function(){return this._values.concat()},i.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,r=t.fieldCount;i<r;i++)e[t.getOrgFieldName(i)]=this._values[i];return e}return null},i.prototype.isEdited=function(t){return this._changeValues[t]},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs&&this._rs.source},enumerable:!0,configurable:!0}),i}(Go),Xo=function(e){function i(t){var i=e.call(this,null,t)||this;return i._observers=[],i._appending=!1,i._insertAfter=!1,i._insertIndex=-1,i._rs=new Yo,i.source=i._rs,i._summarizer=new qo(i._rs),i}return r(i,e),i.prototype._doDispose=function(){this._rs=null,this._summarizer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!0,configurable:!0}),i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},i.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(i.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t},enumerable:!0,configurable:!0}),i.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},i.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},i.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},i.prototype.clearFilters=function(t){this._rs.clearFilters(t)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFiltering()},i.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},Object.defineProperty(i.prototype,"includeParentItem",{set:function(t){this._rs.includeParentItem=t},enumerable:!0,configurable:!0}),i.prototype.expand=function(t,e,i,r){this._rs.expand(t,e,i,r)},i.prototype.collapse=function(t,e){this._rs.collapse(t,e)},i.prototype.expandAll=function(t){this._rs.expandAll(t)},i.prototype.collapseAll=function(){this._rs.collapseAll()},i.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},i.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},Object.defineProperty(i.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!0,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getAllItems=function(){return this._rs.getAllItems()},i.prototype.getItem=function(t){return this._rs.getItem(t)},i.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},i.prototype.findItem=function(t,e,i,r,o){return this._rs.findItem(t,e,i,r,o)},i.prototype.findCell=function(t,e,i,r,o,n){return this._rs.findCell(t,e,i,r,o,n)},i.prototype.checkItem=function(t,e,i,r){this._rs.checkItem(t,e,i,r)},i.prototype.checkAll=function(t,e,i,r){this._rs.checkAll(t,e,i,r)},i.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._rs.itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._rs.movable},enumerable:!0,configurable:!0}),i.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},i.prototype.canAppend=function(){return!1},i.prototype.canInsert=function(t){return!!t},i.prototype.canDelete=function(t){return!!t},i.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},i.prototype._doBeginUpdate=function(e){return this._editingItem=this._editItem=this._createEditItem(e,t.ItemState.UPDATING,null),this.$_replaceItem(e,this._editItem),this._editItem},i.prototype._doBeginAppend=function(e){return this._editingItem=this._editItem=this._createEditItem(null,t.ItemState.APPENDING,e),this._editItem},i.prototype._doBeginInsert=function(e,i,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),o)this._appending=!0,e.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,t.ItemState.INSERTING,i),this._rs.appendItem(e,this._editItem);else{var n=e.parent;this._appending=!1,this._insertAfter=r,this._insertIndex=n.indexOf(e),this._editingItem=this._editItem=this._createEditItem(e,t.ItemState.INSERTING,i),this._rs.insertItem(n,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},i.prototype._doCompleteUpdate=function(t){var e=!1;if(this.dataSource){this.$_replaceItem(this._editItem,t);var i=this._editItem.row;try{e=i.update(this._editItem.values,!1)}catch(e){throw this.$_replaceItem(t,this._editItem),e}e||this.$_replaceItem(t,this._editItem)}return e},i.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=this._editItem,r=!1;if(e){var o=i.parent,n=o.row,s=e.createRow(i.values,-1,!1),a=i.parent.indexOf(i);this._rs.removeItem(i);try{r=this.isAppending?n.addChild(s,!1):n.insertChild(a,s,!1)}catch(t){throw this._appending?this._rs.appendItem(o,i):this._rs.insertItem(o,i,this._insertIndex,this._insertAfter),t}if(r){var l=o.itemOfRow(s.rowId);i.setCheckable(l.checkable),this._copyExtents(i,l),i.heights&&(l.heights=i.heights.slice())}else this._appending?this._rs.appendItem(o,i):this._rs.insertItem(o,i,this._insertIndex,this._insertAfter)}return r},i.prototype._doCancelEdit=function(i,r){i==t.ItemState.UPDATING?(this.$_replaceItem(this._editItem,r),this._copyExtents(this._editItem,r)):i==t.ItemState.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),e.prototype._doCancelEdit.call(this,i,r)},i.prototype._doCommitEdit=function(i,r){return i==t.ItemState.UPDATING||t.ItemState.INSERTING,e.prototype._doCommitEdit.call(this,i,r)},i.prototype.remove=function(t){if(t){var e=t.row;e&&e.parent.removeChild(e)}},i.prototype.getRemovableRows=function(t){if(t.length>0){for(var e=[],i=0,r=t.length;i<r;i++){var o=this._rs.getItem(t[i]);e.push(o.dataId)}return e}},i.prototype.removeRows=function(t){t&&this.dataSource.removeRows(t)},i.prototype.updateRows2=function(t){},i.prototype.setDataSource=function(t){this._rs.dataSource=t},Object.defineProperty(i.prototype,"rootItem",{get:function(){return this._rs._rootItem},enumerable:!0,configurable:!0}),i.prototype._createEditItem=function(e,i,r){this._editingItem=null;var o=this.dataSource;if(!o)return null;var n,s=o.fieldCount;switch(i){case t.ItemState.UPDATING:n=this._editingItem=new Ko(this,e,i);for(var a=0;a<s;a++)n.setValue(a,e.getData(a));this._copyExtents(e,n),e.heights&&(n.heights=e.heights.slice());break;case t.ItemState.INSERTING:case t.ItemState.APPENDING:if((n=this._editingItem=new Ko(this,null,i))._setExtents(0),r)for(a=0;a<s;a++)r.length>a&&n.setValue(a,r[a])}return this._editingItem},i.prototype.onItemProviderFilterAdd=function(t,e,i){},i.prototype.onItemProviderFilterRemove=function(t,e,i){},i.prototype.onItemProviderFilterClear=function(t,e){},i.prototype.onItemProviderFilterClearAll=function(t){},i.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},i.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},i.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},i.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},i.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},i.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},i.prototype.onItemProviderSorted=function(t){this._fireSorted()},i.prototype.onItemProviderDataLoadComplated=function(){this._fireDataLoadComplated()},i.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(Yo.ITEM_CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(Yo.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(Yo.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(Yo.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this._eventLock<=0&&this.fireEvent(Yo.COLLAPSED,e)},i}(Er),Qo=function(t){function e(i){var r=t.call(this,i)||this;return Object.setPrototypeOf(r,e.prototype),r}return r(e,t),e}(Error),Jo=function(t){function e(i,r,o,n){var s=t.call(this,r)||this;return Object.setPrototypeOf(s,e.prototype),s.level=i,s.column=o,s.userMessage=n,s}return r(e,t),e.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},e}(Qo),Zo=function(e){function i(i){var r=e.call(this)||this;return r._active=!0,r._mode=t.ValidationMode.ALWAYS,r._level=t.ValidationLevel.ERROR,r._name=i,r}return r(i,e),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?ue.Default.parse(t,i.CAPITAL_INDEXERS):null)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),i.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new Jo(this._level,e,null,this._message)}},i.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},i.CAPITAL_INDEXERS=["value","values"],i}(Ct),tn=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._isColumn=t,i}return r(i,e),i.prototype._doDispose=function(){this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)},enumerable:!0,configurable:!0}),i.prototype.clear=function(){this._items=[]},i.prototype.addAll=function(t){if(t&&t.length>0)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},i.prototype.validate=function(e,i,r,o){for(var n=0;n<this._items.length;n++){var s=this._items[n];if(s.active&&(s.mode==e||s.mode==t.ValidationMode.ALWAYS))try{s.validate(i)}catch(t){if(!(r=r&&!this._isColumn)||A(s.level,o)<0)throw t instanceof Jo?(t.level=s.level,t):new Jo(s.level,t)}}},i.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t)){ft.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var r=new Zo;r.assignFrom(t[e]),this._items.push(r)}}},i}(Ct),en=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._dataSource=null,e._fieldCount=0,e}return r(e,t),e.prototype._doDispose=function(){this._item=null,this._dataSource=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0},enumerable:!0,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_CHECKED:return this._item.checked}throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new It("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(i)}throw new It("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,r){var o=r?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(o)}throw new It("Invalid identifier indexer: "+t)},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES},e}(Dt),rn=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){this._index=null,this._dataSource=null,t.prototype._doDispose.call(this)},e.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._index.itemIndex;case e.ID_DATAROW:return this._index.item.dataRow;case e.ID_INDEX:return this._index.column.index;case e.ID_FIELD:return this._index.dataColumn.dataIndex;case e.ID_CHECKED:var i=this._index.item;return!!i&&i.checked;case e.ID_TAG:return this._index.column.tag;case e.ID_BASE:var r=this._index.dataColumn.baseIndex;return r>=0?this._index.item.getData(r):void 0}throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){var r=this._dataSource.fieldCount;if(i<0||i>=r)throw new It("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(i)}throw new It("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,r){var o=r?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i),n=this._dataSource.fieldCount;if(o<0||o>=n)throw new It("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(o)}throw new It("Invalid identifier indexer: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_DATAROW=2,e.ID_INDEX=3,e.ID_FIELD=4,e.ID_CHECKED=5,e.ID_TAG=6,e.ID_BASE=7,e.ID_VALUES=8,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,datarow:e.ID_DATAROW,index:e.ID_INDEX,field:e.ID_FIELD,checked:e.ID_CHECKED,tag:e.ID_TAG,base:e.ID_BASE,values:e.ID_VALUES},e}(Dt),on=function(e){function i(t){var i=e.call(this)||this;return i._cellList={},i._owner=t,i}return r(i,e),Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellList",{get:function(){return this._cellList},enumerable:!0,configurable:!0}),i.prototype.validateCell=function(t,e,i){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel,i)},i.prototype.validateRow=function(e,i,r,o){var n=this._owner.editOptions.commitLevel;if(!r)for(var s=this._owner.getDataColumns(),a=0,l=s.length;a<l;a++){var u=s[a],h=rs.temp(this._owner,e.index,u);try{this.$_validateCell(h,i,!0,n,o)}catch(t){if(!(t instanceof Jo))throw t;if(A(t.level,n)<0)throw t;!o&&this.addInvalidateCell(h,t)}}var c=this._owner.validations;if(c&&c.count>0){var d=this._owner.rowValidationRuntime;d.item=e,c.validate(i?t.ValidationMode.INSERT:t.ValidationMode.UPDATE,d,!0,n)}this.owner._fireValidateRow(e,i,e.getRowObject())},i.prototype.clearInvalidCells=function(t){this.$_clearInvalidateList(t)},i.prototype.clearInvalidCell=function(t){this.$_clearInvalidateCell(t)},i.prototype.getError=function(t){return t.item?(this._cellList[pr(t.item.itemState)?-1:t.dataId]||{})[t.dataField]:null},i.prototype.cloneError=function(t,e){var i=this._cellList;i[t]&&(i[e]=JSON.parse(JSON.stringify(i[t])))},i.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},i.prototype.getInvalidCells=function(){var t=[],e=this._cellList;for(var i in e){var r=e[i];for(var o in r){var n=r[o];t.push({column:n.column,dataRow:n.dataRow,message:n.message,level:n.level})}}return t.length>0?t:null},i.prototype.validateCells=function(e,i,r){var o=this._owner,n=o.getDataColumns(),s=[];if(e=ft.makeArray(e))for(var a=0,l=e.length;a<l;a++)(h=o.getItem(e[a]))&&h.isDataRow&&(delete this._cellList[h.dataId],s.push(h));else{if(i)for(a=0,l=o.itemCount;a<l;a++)(h=o.getItem(a))&&h.isDataRow&&(delete this._cellList[h.dataId],s.push(h));else s=!o.isTree()&&o.paged&&r?o.itemSource.getPagingAllItems():o.getAllItems();this._cellList={}}a=0;for(var u=s.length;a<u;a++){var h;if((h=s[a]).isDataRow){var c=0;for(l=n.length;c<l;c++){var d=n[c],p=os.tempItem(o,h,d);try{this.$_validateCell(p,!1,!1,t.ValidationLevel.IGNORE,!1)}catch(t){}}}}return o.refreshView(),this.getInvalidCells()},i.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},i.prototype.checkRowIds=function(){var t=this.owner.dataSource;for(var e in this._cellList){var i=parseInt(e);t.getDataRow(i)<0&&delete this._cellList[i]}},i.prototype.$_validateCell=function(e,i,r,o,n){var s=e.dataColumn;if(s){var a=this.owner.editOptions.validateOnlyEditColumn,l=!0;if((e.item instanceof Sr||e.item instanceof Ko)&&(l=e.item.isEdited(s.dataIndex)),!a||l||s.required)try{var u=e.item.getData(s.dataIndex);if(s.required){var h=s.grid,c=h&&h.dataSource&&h.dataSource.getField(s.dataIndex);if(c&&c.isEmpty(u)){var d=s.requiredMessage||"Value is required: "+s.fieldName;throw new Jo(s.requiredLevel||t.ValidationLevel.ERROR,d,s,s.requiredMessage)}}var p=s.validations;if(p&&p.count>0){var f=this._owner.columnValidationRuntime;f.setIndex(e),p.validate(i?t.ValidationMode.INSERT:t.ValidationMode.UPDATE,f,r,o)}this.owner._fireValidateCell(e,i,e.item.getData(e.dataField)),!n&&this.$_clearInvalidateCell(e)}catch(t){throw t instanceof Jo&&(t.column=s,!n&&this.$_addInvalidateCell(e,t)),t}}},i.prototype.$_addInvalidateCell=function(t,e){var i=pr(t.item.itemState)?-1:t.dataId,r=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||r<=-1)){var o=this._cellList;(o[i]=o[i]||{})[r]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name}}},i.prototype.$_clearInvalidateCell=function(t){var e=pr(t.item.itemState)?-1:t.dataId,i=t.dataField,r=this._cellList[e];r&&r[i]&&delete r[i]},i.prototype.$_clearInvalidateList=function(t){null!=t?delete this._cellList[t]:this._cellList={},this._owner.refreshView()},i}(Ct),nn=/(.*)/,sn=function(){function t(t){this._pattern=nn,this._replace="$1",this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),t.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},t.prototype.$_parse=function(t){if(t){var e=t.trim().split(ft.colonreg);if(e.length>1){var i=e[0].trim(),r=e[1].trim();i&&r&&('"'==i.charAt(0)&&(i=i.substr(1,i.length-2)),i&&('"'==r.charAt(0)&&(r=i.substr(1,r.length-2)),r&&(this._pattern=new RegExp(i,e[2]||""),this._replace=r)))}}},t.Formatters={},t}(),an=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1},e}(vr),ln=function(t){function e(e,i){var r=t.call(this,i)||this;return r._level=0,r._level=e,r}return r(e,t),Object.defineProperty(e.prototype,"groupLevel",{get:function(){return this._level},enumerable:!0,configurable:!0}),e.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},Object.defineProperty(e.prototype,"merged",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(br),un=function(e){function i(t){var i=e.call(this)||this;return i._fixedCount=0,i._items=[],i._list=[],i._rowCount=NaN,i._rs=t,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,i=t.length-1;i>=0;i--)t[i]instanceof yr&&e++;this._rowCount=e}return this._rowCount},enumerable:!0,configurable:!0}),i.prototype.getItem=function(t){return this._items[t]},i.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,i=0,r=(t=t||this._items).length;i<r;i++){var o=t[i];o._parent=e._rootItem,o._index=-1,o instanceof br&&o._children&&this.clear(o._children)}t.length=0,this.$_changed()},i.prototype.expand=function(t,e,i,r){return this.$_expandItem(t,e,i,r),this.$_changed(),!0},i.prototype.collapse=function(e,i){var r,o,n=this._rs,s=this._items;if(e._expanded=!1,n.mergeMode){if((l=e.index)>=0?(s.splice(l,1),e._index=-1):(l=this.$_firstIndex(e,n.expandedAdornments==t.RowGroupAdornments.SUMMARY,!0))<0&&(l=e.firstItem.index),l>=0)for(;l<s.length&&(u=s[l]).isDescendantOf(e);)s.splice(l,1),u._index=-1,i&&(u instanceof mr||u instanceof an)&&(h=u instanceof mr?u:u instanceof an&&u.parent._expanded?u.parent:null)&&(h._expanded=!1);switch(r=e.footerCount,n.collapsedAdornments){case t.RowGroupAdornments.BOTH:e._index=l,s.splice(l++,0,e);for(var a=0;a<r;a++)s.splice(l+a,0,o=e.getFooter(a)),o._index=l+a;break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(r=e.footerCount)for(a=0;a<r;a++)s.splice(l+a,0,o=e.getFooter(a)),o._index=l+a;else if(r=e.allFooterCount)for(a=0;a<r;a++)s.splice(l+a,0,o=e._allFooters[a]),o._index=l+a;break;case t.RowGroupAdornments.HEADER:default:e._index=l,s.splice(l,0,e)}}else{var l;for((l=e.index)>=0?(s.splice(l,1),e._index=-1):(l=this.$_firstIndex(e,n.expandedAdornments==t.RowGroupAdornments.SUMMARY,!1))<0&&(l=e.firstItem.index);l<s.length;){var u,h;if(!(u=s[l]).isDescendantOf(e))break;s.splice(l,1),u._index=-1,i&&(u instanceof mr||u instanceof vr)&&(h=u instanceof mr?u:u instanceof vr&&u.parent._expanded?u.parent:null)&&(h._expanded=!1)}switch(n.collapsedAdornments){case t.RowGroupAdornments.BOTH:for(e._index=l,s.splice(l++,0,e),r=e.footerCount,a=0;a<r;a++)(o=e.getFooter(a))._index=l+a,s.splice(l+a,0,o);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(r=e.footerCount)for(a=0;a<r;a++)(o=e.getFooter(a))._index=l+a,s.splice(l+a,0,o);else for(a=0;a<e.allFooterCount;a++)(o=e._allFooters[a])._index=l+a,s.splice(l+a,0,o);break;case t.RowGroupAdornments.HEADER:default:e._index=l,s.splice(l,0,e)}}return this.$_changed(),!0},i.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},i.prototype.getPrior=function(t){return null!=t&&t.visible&&t.index>0?this._items[t.index-1]:null},i.prototype.$_changed=function(){this._rowCount=NaN},i.prototype.$_collectChildren=function(e,i,r,o,n){var s,a=this._rs,l=a.expandedAdornments,u=a.collapsedAdornments;if(o&&e&&e._setExpanded(!0),a.mergeMode){var h=void 0;if(!(e instanceof wr))if(l==t.RowGroupAdornments.HEADER||l==t.RowGroupAdornments.BOTH)i.push(e);else if(l==t.RowGroupAdornments.SUMMARY)for(var c=0,d=e.footerCount;c<d;c++)h=e.getFooter(c),i.push(h);for(var p=0,f=e.count;p<f;p++)if((y=e.getItem(p))instanceof mr){var _=y;if(r&&(!n||_.level<=n)||_.expanded)this.$_collectChildren(_,i,r,o,n);else{var g=_.footerCount;switch(u){case t.RowGroupAdornments.BOTH:for(i.push(_),c=0;c<g;c++)h=_.getFooter(c),i.push(h);break;case t.RowGroupAdornments.SUMMARY:case t.RowGroupAdornments.FOOTER:if(g)for(c=0;c<g;c++)h=_.getFooter(c),i.push(h);else for(c=0;c<_.allFooterCount;c++)h=_._allFooters[c],i.push(h);break;case t.RowGroupAdornments.HEADER:default:i.push(_)}}}else e.isFooter(y)||i.push(y);if(!(e instanceof wr)&&e.footer&&(l==t.RowGroupAdornments.FOOTER||l==t.RowGroupAdornments.BOTH))for(p=0,f=e.footerCount;p<f;p++)i.push(e.getFooter(p))}else{if(!(e instanceof wr))if(l==t.RowGroupAdornments.SUMMARY)if(h=e.footer,g=e.footerCount,h)for(c=e.indexOf(h),i.push(h),p=1;p<g;p++)h=e.getItem(c+p),i.push(h);else for(g=e.allFooterCount,p=0;p<g;p++)h=e._allFooters[p],i.push(h);else((s=l)==t.RowGroupAdornments.BOTH||s==t.RowGroupAdornments.HEADER)&&i.push(e);for(p=0,f=e.count;p<f;p++){var y;if((y=e.getItem(p))instanceof mr)if(_=y,h=void 0,g=void 0,r&&(!n||_.level<=n)||_.expanded)this.$_collectChildren(_,i,r,o,n);else switch(u){case t.RowGroupAdornments.HEADER:i.push(_);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:if(h=_.footer){if(g=_.footerCount,i.push(h),g>1){c=_.indexOf(h);for(var m=1;m<g;m++)h=_.getItem(c+m),i.push(h)}}else for(g=_.allFooterCount,m=0;m<g;m++)h=_._allFooters[m],i.push(h);break;case t.RowGroupAdornments.NONE:break;case t.RowGroupAdornments.BOTH:default:if(i.push(_),(h=_.footer)&&(g=_.footerCount,i.push(h),g>1))for(c=_.indexOf(h),m=1;m<g;m++)h=_.getItem(c+m),i.push(h)}else y instanceof vr||i.push(y)}if(!(e instanceof wr)&&function(e){return e==t.RowGroupAdornments.BOTH||e==t.RowGroupAdornments.FOOTER}(l)&&(h=e.footer)&&(g=e.footerCount,i.push(h),g>1))for(c=e.indexOf(h),p=1;p<g;p++)h=e.getItem(c+p),i.push(h)}},i.prototype.$_expandItem=function(e,i,r,o){var n;if(e instanceof wr)n=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case t.RowGroupAdornments.BOTH:n=e.index,this._items.splice(n,1+e.footerCount);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:var s=e.footer;s?(n=s.index,this._items.splice(n,e.footerCount)):e.allFooterCount>0&&(n=e._allFooters[0].index,this._items.splice(n,e.allFooterCount));break;case t.RowGroupAdornments.HEADER:default:n=e.index,this._items.splice(n,1)}r&&(e._index=-1)}else{switch(this._rs.collapsedAdornments){case t.RowGroupAdornments.BOTH:n=e.index,this._items.splice(n,1+e.footerCount);break;case t.RowGroupAdornments.FOOTER:case t.RowGroupAdornments.SUMMARY:e.footerCount>0?(n=e.footer.index,this._items.splice(n,e.footerCount)):e.allFooterCount>0&&(n=e._allFooters[0].index,this._items.splice(n,e.allFooterCount));break;case t.RowGroupAdornments.HEADER:default:n=e.index,this._items.splice(n,1)}r&&(e._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(e,this._list,i,r,o);for(var a=this._list.length,l=0;l<a;l++)this._items.splice(n+l,0,this._list[l])},i.prototype.$_firstIndex=function(t,e,i){var r=t.index;if(r>=0)return r;for(var o=this._items,n=0,s=o.length;n<s;n++){var a=o[n];if(t.isDescendant(a))return a.index}return-1},i.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},i.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},i}(Ct),hn=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},cn=function(e){function i(i,r){var o=e.call(this,i,r)||this;return o._expandedAdornments=t.RowGroupAdornments.BOTH,o._collapsedAdornments=t.RowGroupAdornments.HEADER,o._indentVisible=!0,o._expandWhenGrouping=!1,o._mergeMode=!1,o._summaryMode=t.SummaryMode.AGGREGATE,o._groupSorting=!0,o._grouped=!1,o._checkable=!0,o}return r(i,e),i.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),e.prototype._doDispose.call(this)},i.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},i.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},Object.defineProperty(i.prototype,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),this._footerCounter=t,t&&t.setCounterAware(this),this.$_footerCounterChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),i.prototype.resetAdornments=function(t,e,i){(i||e.expandedAdornments!=this._expandedAdornments||e.collapsedAdornments!=this._collapsedAdornments||e.indentVisible!=this._indentVisible)&&(this._expandedAdornments=e.expandedAdornments,this._collapsedAdornments=e.collapsedAdornments,this._callbackOnwer=t,this._footerCallback=e.createFooterCallback,this._valueForGroupCallback=e.valueForGroupCallback,this._indentVisible=e.indentVisible,this.grouped&&(this._populateItems(),this._fireRefresh()))},Object.defineProperty(i.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._grouped},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this._visibleItems.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},enumerable:!0,configurable:!0}),i.prototype.canGrouping=function(t){return this.fireGrouping(t)},i.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},i.prototype.groupByMode=function(t,e){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},i.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},i.prototype.getGroupLevel=function(t){if(this._groupFields&&t>=0)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},Object.defineProperty(i.prototype,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null},enumerable:!0,configurable:!0}),i.prototype.expand=function(t,e,i,r){if(t&&(!t.expanded||i)&&this.fireExpand(t)&&(t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,r))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},i.prototype.$_collapseChild=function(t,e,i){for(var r=0,o=t.count;r<o;r++){var n=t.getItem(r);n instanceof br&&(n._expanded=!1,this.$_collapseChild(n,e,i))}},i.prototype.collapse=function(t,e,i,r){if(t&&t.expanded){if(this.fireCollapse(t)&&this._visibleItems.collapse(t,e)){t.index>=0&&this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t,r)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},i.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var i=this._rootItem.getItem(e);i instanceof mr&&this.collapse(i,t,!0,null)}},i.prototype.expandAll=function(t,e){for(var i=0;i<this._rootItem.count;i++){var r=this._rootItem.getItem(i);r instanceof mr&&this.expand(r,t,!0,e)}},i.prototype.findItem=function(e,i,r,o,n){var s=this.dataSource;if(!s)return-1;var a=this.itemCount;if(a<1)return-1;var l=Math.min(e.length,i.length);if(l<1)return-1;var u=!r||r.allFields,h=r&&r.caseSensitive,c=r&&r.partialMatch,d=null,p=[];o=Math.max(0,o),n=Math.min(a-1,n);for(var f=0;f<l;f++)p[f]=s.getField(e[f]).dataType;var _=r.compareCallback;_="function"==typeof _?_:ft.compareTextValue;for(var g=o;g<=n;g++){var y=this.$_getItem(g),m=y.dataRow,b=m>=0;if(b)for(f=0;f<l;f++){var v=y.getData(e[f]),w=s.getOrgFieldName(e[f]);switch(p[f]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i[f]instanceof Date)b=_.call(s.handler,i[f],v,h,c,m,w);else{if(!d){var C=/[.]/.test(i[f])?"yyyy.MM.dd":/[/]/.test(i[f])?"yyyy/MM/dd":/[-]/.test(i[f])?"yyyy-MM-dd":"yyyyMMdd";d=new Je(C)}b=_.call(s.handler,i[f],v?d.getText(v):v,h,c,m,w)}break;default:b=_.call(s.handler,i[f],v,h,c,m,w)}if(b&&!u)return g;if(!b&&u)break}if(b)return g}return-1},i.prototype.findCell=function(e,i,r,o,n,s){var a=this.dataSource;if(!a)return null;var l=this.itemCount;if(l<1)return null;var u=r&&r.caseSensitive,h=r&&r.partialMatch,c=this.dataSource.fieldCount,d=e.length,p=null,f=[],_=r.compareCallback;_="function"==typeof _?_:ft.compareTextValue;for(var g=0;g<c;g++)f[g]=a.getField(g).dataType;o=Math.max(0,o),n=Math.min(l-1,n),(s=Math.max(0,s))>=e.length&&(o++,s=0);for(var y=o;y<=n;y++){var m=this.$_getItem(y),b=m.dataRow;if(b>=0)for(g=y>o?0:s;g<d;g++){var v=e[g];if(v>=0&&v<c){var w=m.getData(v),C=a.getOrgFieldName(v),x=!1;switch(f[v]){case t.ValueType.DATETIME:case t.ValueType.DATE:if(i instanceof Date)x=_.call(a.handler,i,w,u,h,b,C);else{if(!p){var I=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";p=new Je(I)}x=_.call(a.handler,i,w?p.getText(w):w,u,h,b,C)}break;default:x=_.call(a.handler,i,w,u,h,b,C)}if(x)return{itemIndex:y,fieldIndex:v,searchFieldIndex:g}}}}return null},i.prototype.getGroupItem=function(t){return function e(i){for(var r=0,o=i.children.length;r<o;r++){var n=i.children[r];if(n.id===t)return n;if(n instanceof br){var s=e(n);if(s)return s}}}(this._rootItem)},Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount},enumerable:!0,configurable:!0}),i.prototype.getItem=function(t,e){return this.grouped&&!e?t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t,e)},i.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,r=[],o=Math.min(i.count,t+e-1),n=t;n<o;n++){var s=i.getItem(n);r.push(s)}return r}return this.source.getItems(t,e)},i.prototype.getAllItems=function(){if(this.grouped){var t=new un(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},i.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,r=e.count;i<r;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t,!1)},i.prototype.getItemOfRow=function(t,e){if(this.grouped){for(var i=this._visibleItems,r=0,o=i.count;r<o;r++){var n=i.getItem(r);if(n.dataRow==t)return n}return null}return this.source.getItemOfRow(t,e)},i.prototype._initialize=function(){e.prototype._initialize.call(this),this._visibleItems=new un(this)},i.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},i.prototype._populateItems=function(){this.$_populateItems(!1)},i.prototype._resetItemIndicies=function(t){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(t):e.prototype._resetItemIndicies.call(this,t)},i.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):e.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},i.prototype.$_groupCheckable=function(t,e){for(var i=0,r=t.count;i<r;i++){var o=t.getItem(i);(o instanceof mr||o instanceof vr)&&o.setCheckable(e),o instanceof mr&&this.$_groupCheckable(o,e)}},i.prototype.setGroupCheckable=function(t){t!=this._checkable&&(this._checkable=t,this.$_groupCheckable(this.rootItem,t))},i.prototype.checkAll=function(t,i,r,o,n){if(this._editItem&&(r?this._editItem.checkable&&this._editItem._setChecked(t):this._editItem._setChecked(t)),i||!this.grouped)e.prototype.checkAll.call(this,t,i,r,o,n);else{var s=this._visibleItems.fixedCount;if(s>0)if(r)for(var a=s;a--;){var l=this.getItem(a);l.checkable&&l._setChecked(t)}else for(a=s;a--;)this.getItem(a)._setChecked(t);var u=this.source._checkFieldIndex>-1;u&&this.dataSource.beginUpdate();try{this.$_checkChildren(this.rootItem,t,r,n)}finally{u&&this.dataSource.endUpdate(!1)}this._fireItemCheckChanged(null,t),o?this._fireItemAllChecked(t):this._fireRefreshClient()}},i.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},i.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},i.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var i=this._visibleItems.getItem(t);if(i instanceof yr)return i}},i.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;t>=0;t--){var e=this._visibleItems.getItem(t);if(e instanceof yr)return e}},i.prototype.getPrevRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index-1;e>=0;e--)if((t=this._visibleItems.getItem(e))instanceof yr)return t}return this.getFirstRow()},i.prototype.getNextRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index+1,i=this._visibleItems.count;e<i;e++)if((t=this._visibleItems.getItem(e))instanceof yr)return t}return this.getLastRow()},i.prototype.$_saveExpand=function(t,e){for(var i=0,r=t.count;i<r;i++){var o=t.getItem(i);if(o instanceof br||o instanceof ln){var n=o.firstItem._dataRowId,s=this.dataSource.getDataRow(n),a=o._groupField;s>=0&&a>=0&&(e[n]={expanded:o._expanded,children:[]},this.$_saveExpand(o,e[n].children))}}},i.prototype.$_restoreExpand=function(t,e){for(var i=0,r=t.count;i<r;i++){var o=t.getItem(i);if(o instanceof br||o instanceof ln){var n=o.firstItem._dataRowId,s=this.dataSource.getDataRow(n),a=o._groupField;s>=0&&a>=0&&e[n]&&(o._setExpanded(e[n].expanded),this.$_restoreExpand(o,e[n].children))}}},i.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,r=this._rootItem;if(t&&i>0&&r&&this.$_saveExpand(r,e),this._clearItems(),this.source){if(this._groupFields){for(var o=this.dataSource.fieldCount,n=this._groupFields.length-1;n>=0;n--)this._groupFields[n]>=o&&this._groupFields.splice(n,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;this._grouped&&i>0&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(r,e),this.$_resetVisibleItems())}},i.prototype.$_checkChildren=function(t,e,i,r){for(var o=0,n=t.count;o<n;o++){var s=t.getItem(o);s&&(i?(r||s.isDataRow)&&s.checkable&&s._setChecked(e):s._setChecked(e)),s instanceof mr&&this.$_checkChildren(s,e,i,r)}},i.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},i.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},i.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new hn(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},i.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var r=ft.cast(t.getItem(e),mr);if(r){var o=ft.cast(r.firstItem,yr);o&&o._displayLevel<0&&(o._displayLevel=r.level),this.$_resetDisplayLevels(r)}}},i.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var r=t.startIndex,o=t.endIndex;if(!(o<r)){var n=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new hn(r,r);l.level=n,t.children.push(l);var u=!this.mergeMode&&this._valueForGroupCallback,h=e.getItem(r),c=h.getData(s);c=u?u.call(this._callbackOnwer,this._callbackOnwer,h.dataRow,a.orgFieldName,c):c;for(var d=r+1;d<=o;d++){var p=(h=e.getItem(d)).getData(s);p=u?u.call(this._callbackOnwer,this._callbackOnwer,h.dataRow,a.orgFieldName,p):p,a.equalValues(p,c)||(l&&(l.endIndex=d-1,l.groupValue=c),(l=new hn(d,d)).level=n,t.children.push(l)),c=p}l&&(l.endIndex=o,l.groupValue=c),d=0;for(var f=t.children.length;d<f;d++)this.$_buildGroups(t.children[d],e,i)}}},i.prototype.$_buildItems=function(t,e,i){var r,o=this.mergeMode,n=e.children.length;if(n>0){r=e.level;for(var s=i[e.level],a=0;a<n;a++){var l=o?new ln(r,s):new br(s);l._setExpanded(this.expandWhenGrouping),t.add(l),l.setCheckable(this._checkable),this.$_buildItems(l,e.children[a],i),l.groupValue=e.children[a].groupValue}}else{var u=e.endIndex-e.startIndex+1,h=this.source.getItems(e.startIndex,u);t.addAll(h),this._incDescendents(t,u)}if((r=t.level)>0){var c=this._callbackOnwer,d=this._footerCallback;if(this._footerCounter)for(var p=0,f=(a=0,this._footerCounter.getGroupFooterCount(t));a<f;a++){var _=!(!d||d(c,t,a));(g=o?new an:new vr).$_footerIndex=a,g.$_vindex=_?-1:p++,g.hiddenFooter=_,t.add(g),g.setCheckable(this._checkable)}else if(d||d(c,t,0)){var g=o?new an:new vr;t.add(g)}}},i.prototype.$_setEditItem=function(t){this._editItem=t},i.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},i.prototype.fireGrouping=function(t){return this.fireConfirmEvent(i.GROUPING,t)},i.prototype.fireGrouped=function(t){this.fireEvent(i.GROUPED)},i.prototype.fireExpand=function(t){return this.fireConfirmEvent(i.EXPAND,t)},i.prototype.fireExpanded=function(t){this.fireEvent(i.EXPANDED,t)},i.prototype.fireCollapse=function(t){return this.fireConfirmEvent(i.COLLAPSE,t)},i.prototype.fireCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,t,e)},i.prototype.onItemProviderRefresh=function(t){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),e.prototype.onItemProviderRefresh.call(this,t))},i.prototype.onItemProviderItemInserted=function(t,i){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),e.prototype.onItemProviderItemInserted.call(this,t,i))},i.prototype.onItemProviderItemDeleted=function(t,i){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),e.prototype.onItemProviderItemDeleted.call(this,t,i))},i.prototype.onItemProviderItemUpdated=function(t,i){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),e.prototype.onItemProviderItemUpdated.call(this,t,i))},i.GROUPING="onGroupedItemProviderGrouping",i.GROUPED="onGroupedItemProviderGrouped",i.EXPAND="onGroupedItemProviderExpand",i.EXPANDED="onGroupedItemProviderExpanded",i.COLLAPSE="onGroupedItemProviderCollapse",i.COLLAPSED="onGroupedItemProviderCollapsed",i}(xr),dn=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._changed=function(){},e.INIT_COUNT=200,e}(Ct),pn=function(t){function e(){var e=t.call(this)||this;return e._level=0,e._mergeMode=!1,e}return r(e,t),e.getDefault=function(t,i){var r=e.$_default;return r._level=t,r._mergeMode=i,r},e.prototype.parseInit=function(t,e,i,r,o){var n=t.itemCount;(r=Math.min(n-i,r))<1||(this._mergeMode?this.$_parseMerged(t,e,i,r,o):this.$_parseNormal(t,e,i,r,o))},e.prototype.parseBounds=function(t,e,i,r,o){if(!(t.itemCount<1)){for(i=Math.max(0,i);i>=0&&o[i]<=0;){var n=t.getItem(i);if(n==this.$_getAncestor(n,this._level))break;i--}for(;i<=r&&o[i]>0;)i++;i<=r&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,r,o):this.$_parseNormalBounds(t,e,i,r,o))}},e.prototype.$_getAncestor=function(t,e){var i=ft.cast(t,mr);for(i||(i=t.parent);i.level>e;)i=i.parent;return i},e.prototype.$_parseNormal=function(t,e,i,r,o){var n=t.itemCount;if(!(n<1)){var s=t.fixedCount,a=t.getItem(i),l=a,u=i,h=u+1;for(o[u]=u+1;h<n;)a=t.getItem(h),(h==s||a.level!=l.level||a.constructor!==l.constructor||a instanceof vr||a instanceof br)&&(u=h),o[h]=u+1,h++,l=a}},e.prototype.$_parseMerged=function(t,e,i,r,o){var n=t.itemCount;if(!(n<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,u=o[l]=l+1;u<n;){s=t.getItem(u);var h=this.$_getAncestor(s,this._level);if(h!=a){if(u>=r)break;a=h,l=u}o[u]=l+1,u++}},e.prototype.$_parseNormalBounds=function(t,e,i,r,o){var n=t.itemCount;if(!(n<1)){var s=t.fixedCount,a=t.getItem(i),l=a,u=i,h=u+1;for(o[u]=u+1;h<n;)a=t.getItem(h),h!=s&&a.level==l.level&&a.constructor===l.constructor||(u=h),o[h]=u+1,h++,l=a}},e.prototype.$_parseMergedBounds=function(t,e,i,r,o){var n=t.itemCount;if(!(n<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,u=l+1;for(o[l]=l+1;u<n;){s=t.getItem(u);var h=this.$_getAncestor(s,this._level);if(h!=a){if(u>r)break;a=h,l=u}o[u]=l+1,u++}}},e.$_default=new e,e}(dn),fn=function(e){function i(){var t=e.call(this)||this;return t._item=null,t._field=-1,t._ds=null,t._fieldCount=0,t._grid=null,t._layout=null,t}return r(i,e),i.getObjectText=function(t,e,i,r){var o=e.objectKey||e.objectCallback,n=o?e.objectKey:i.objectKey,s=o?e.objectCallback:i.objectCallback;return s&&"function"==typeof s?s(i.orgFieldName,t.dataRow,r):n&&r.hasOwnProperty(n)?r[n]:JSON.stringify(r)},i.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},i.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},i.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},i.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},i.prototype.setItem=function(t,e){this._item=t,this._field=e},i.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},i.prototype.isIdentifier=function(t){return t=t.toLowerCase(),i.IDENTS.hasOwnProperty(t)?i.IDENTS[t]:e.prototype.isIdentifier.call(this,t)},i.prototype.evaluateIdentifier=function(e){if(this._item){var r=void 0;switch(e){case i.ID_ROW:return this._item.index;case i.ID_DATAROW:return this._item.dataRow;case i.ID_CHECKED:return this._item.checked;case i.ID_GROUP:return this._item.parent;case i.ID_VALUE:var o=this._ds.getField(this._field);return null!=(r=this._item.getData(this._field))&&o.dataType===t.ValueType.OBJECT?i.getObjectText(this._item,this._column,o,r):r;case i.ID_PREV_VALUES:var n=this._grid.getDataColumns(),s=n.indexOf(this._column);if(!n.length||s<1)return"";for(var a=[],l=0,u=Math.min(s,n.length);l<u;l++)null!=(r=this._item.getData(n[l].dataIndex))&&this._ds.getField(n[l].dataIndex).dataType===t.ValueType.OBJECT?a.push(i.getObjectText(this._item,n[l],n[l].getField(),r)):a.push(r);return a.join("`")}throw new It("Invalid identifier key: "+e)}},i.prototype.evaluateIndexerI=function(e,r){if(this._item){if(e==i.ID_VALUE||e==i.ID_VALUES){if(r<0||r>=this._fieldCount)throw new It("Data field index out of bounds:"+r);var o=this._item.getData(r);if(null!=o&&this._ds.getField(r).dataType===t.ValueType.OBJECT){var n=this._column.grid.columnByField(r);return i.getObjectText(this._item,n,n.getField(),o)}return o}throw new It("Invalid identifier indexer: "+e)}},i.prototype.evaluateIndexerS=function(e,r,o){if(e!=i.ID_VALUE&&e!=i.ID_VALUES)throw new It("Invalid identifier indexer: "+e);if(this._ds){var n=o?this._ds.getFieldIndexC(r):this._ds.getFieldIndex(r);if(n<0||n>=this._fieldCount)throw new It("Data field is not exists:"+r);var s=this._item.getData(n);if(null!=s&&this._ds.getField(n).dataType===t.ValueType.OBJECT){var a=this._column.grid.columnByField(n);return i.getObjectText(this._item,a,a.getField(),s)}return s}},i.ID_ROW=0,i.ID_DATAROW=1,i.ID_CHECKED=2,i.ID_VALUE=3,i.ID_VALUES=4,i.ID_GROUP=5,i.ID_PREV_VALUES=6,i.IDENTS={row:i.ID_ROW,datarow:i.ID_DATAROW,checked:i.ID_CHECKED,value:i.ID_VALUE,values:i.ID_VALUES,group:i.ID_GROUP,prevvalues:i.ID_PREV_VALUES},i}(Dt),_n={},gn=function(e){function i(t){var r=e.call(this)||this;return r._runtime=i.$_runtime=i.$_runtime||new fn,r.criteria=t,r}return r(i,e),i.createRule=function(t){var e="string"==typeof t?t:t&&t.criteria;return e?new i(e):null},i.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?ue.Default.parse(t,null):null,this._changed())},enumerable:!0,configurable:!0}),i.prototype.parseInit=function(e,i,r,o,n){var s=this._layout.isBreakMergeOnEmpty(),a=e.fixedCount,l=e.itemCount,u=e.dataSource.rowCount;if(!((o=Math.min(l-r,o))<1||u<=0)){this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout);for(var h=null,c=r;c<l&&(h=e.getItem(c),!this.$_isRow(h,!1));)n[c]=c+1,c++;if(!(c>=l)){var d,p=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==t.ValueType.OBJECT,f=r=c;if(n[f]=f+1,!(h.dataRow>=u))for(p?d=h.getData(i):(this._runtime.setItem(h,i),d=this._exprNode.evaluate(this._runtime)),c=r+1;c<l;c++)if(h=e.getItem(c),this.$_isRow(h,!1)){if(h.dataRow>=u)break;var _=void 0;if(p?_=h.getData(i):(this._runtime.setItem(h,i),_=this._exprNode.evaluate(this._runtime)),c==a||null==_&&s||(_ instanceof Date&&d instanceof Date?+_!=+d:_!=d)){if(c>=o)break;f=c,d=_}n[c]=f+1}else{if(c>=o)break;d=_n,f=c,n[c]=f+1}}}},i.prototype.parseBounds=function(e,i,r,o,n){var s=this._layout.isBreakMergeOnEmpty(),a=e.itemCount;if(!(a<1)){var l=e.fixedCount,u=this._exprNode.isIdentifier("value")&&this._layout.getDataColumn().valueType!==t.ValueType.OBJECT,h=_n,c=Math.max(0,r),d=c,p=-1;if(this._runtime.setDataSource(e.dataSource),this._runtime.setLayout(this._layout),c>0&&n[c]<=0){var f=e.getItem(c);if(this.$_isRow(f,!1)){var _=void 0;for(u?_=e.getItem(c).getData(i):(this._runtime.setItem(f,i),_=this._exprNode.evaluate(this._runtime)),c--;c>=0&&(f=e.getItem(c),this.$_isRow(f,!1))&&(u?h=f.getData(i):(this._runtime.setItem(f,i),h=this._exprNode.evaluate(this._runtime)),!(c==l||null==h&&s||(h instanceof Date&&_ instanceof Date?+h!=+_:h!=_)));)c--;for(var g=d-1;g>c;g--)n[g]=c+2;d-1>c&&(p=c+1)}else{for(n[c]=c+1,g=d-1;g>c;g--)n[g]=c+2;for(d-1>c+1&&(p=c+2),c--;c>=0&&n[c]<=0&&!this.$_isRow(e.getItem(c),!1);)n[c]=c+1,c--}}for(c=Math.max(0,r);c<=o&&n[c]>0;)c++;for(;c<=o&&!this.$_isRow(e.getItem(c),!1);)n[c]=c+1,c++;if(c<o){for(d=c,f=e.getItem(c),_=void 0,u?_=f.getData(i):(this._runtime.setItem(f,i),_=this._exprNode.evaluate(this._runtime)),c++;c<a;)if(f=e.getItem(c),this.$_isRow(f,!1)){if(u?h=f.getData(i):(this._runtime.setItem(f,i),h=this._exprNode.evaluate(this._runtime)),c==l||void 0===h&&s||(h instanceof Date&&_ instanceof Date?+h!=+_:h!=_)){var y=d;for(p>=0&&(y=p,p=-1),g=d;g<c;g++)n[g]=y+1;if(c>=o)break;_=h,d=c}else n[c]=d+1;c++}else{for(y=d,p>=0&&(y=p,p=-1),g=d;g<c;g++)n[g]=y+1;for(n[c]=c+1,c++;c<a&&!this.$_isRow(e.getItem(c),!1);)n[c]=c+1,c++;if(d=c,c>=o)break}if(c==a&&(h instanceof Date&&_ instanceof Date?+h==+_:h==_))for(y=p>=0?p:d,g=d;g<c;g++)n[g]=y+1}}},i.prototype.$_isRow=function(t,e){var i=t instanceof yr&&!(t instanceof Ir);if(i&&!e){var r=t.parent;i=r.expanded||r.firstItem!==t}return i},i.$_runtime=null,i}(dn),yn=function(t){function e(){return t.call(this)||this}return r(e,t),Object.defineProperty(e.prototype,"head",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return-1},enumerable:!0,configurable:!0}),e}(Ct),mn=function(t){function e(e){var i=t.call(this)||this;return i._group=null,i._column=e.c1._columnObj,i._head=e.top,i._tail=e.bottom,i}return r(e,t),e.borrow=function(t){var i=e.$_rooms.pop();return i?(i._head=t.top,i._tail=t.bottom):i=new e(t),i},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},e.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},e.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},e.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},e.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e.$_roomCount=0,e}(yn),bn=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._layout=e,e._merges=i,i}return r(e,t),e.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,r=e.itemSource,o=this._layout.firstColumn,n=e.getGroupLevel(o.dataIndex),s=e.isGroupedColumn(o)&&o.mergeGrouped?pn.getDefault(n,i.mergeMode):this._layout.$_mergeRuleObj();if(s){for(var a=this._flags=new Array(r.itemCount),l=e.fixedOptions.mergeRows?0:r.fixedCount,u=r.itemCount;u--;)a[u]=0;s._layout=this._layout,s.parseInit(r,o.dataIndex,l,t,a)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var r=this._layout.grid,o=this._layout.firstColumn;if(r&&o){var n=this._rooms,s=r.layoutManager.fixedItemCount,a=r.itemSource,l=r.getGroupLevel(o.dataIndex),u=l>0&&o.mergeGrouped?pn.getDefault(l,r.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),h=r.displayOptions.editItemMerging,c=0;if(this._fixedRooms.length=0,this._rooms.length=0,u&&(u._layout=this._layout,u.parseBounds(a,o.dataIndex,t,e,this._flags)),i)for(;c<s;)if(p=this.$_checkFixedMerge(a,o,c,s)){if(l<1){var d=new mn(p);this._fixedRooms.push(d)}c=p.r2+1}else c+=1;for(c=t;c<=e;){var p;if(p=this.$_checkMerge(a,o,c,0==n.length,s)){var f;if(l<1)(f=a.getItem(p.r2))instanceof ln||f instanceof an||(d=new mn(p),this._rooms.push(d));else if((f=h?a.source.getItem(p.top):a.getItem(p.top)).level>=l){for(var _=f instanceof mr?f:f.parent;_.level>l;)_=_.parent;(d=new mn(p)).group=_,n.push(d)}c=p.r2+1}else c+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,r=0;r<i.length;r++)i[r]=-1;for(;i.length<t;)i.push(-1)}var o=this._cells;for(r=0;r<o.length;r++)o[r]=-1;for(;o.length<e;)o.push(-1)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),r=i.length-1;r>=0;r--){var o=i[r];this.addFixedCells(o.head,o.tail-o.head+1)}for(r=(i=this.getRooms()).length-1;r>=0;r--){o=i[r];var n=Math.max(0,o.head-e-t),s=o.tail-e-t;this.addCells(n,s-n+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,r=this._nextId++,o=t+1;o<t+e;o++)i[o]=r+65535;return i[t]=r,r},e.prototype.addCells=function(t,e){for(var i=this._cells,r=this._nextId++,o=t+1;o<t+e;o++)i[o]=r+65535;return i[t]=r,r},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>-1:this._cells[t-e]>-1},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>-1&&this._fixedCells[t]<65535:(t-=e,this._cells[t]>-1&&this._cells[t]<65535)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=65535:this._cells[t-e]>=65535},e.prototype.getMerged=function(t,e){var i,r=1;if(t<e)for(var o=(i=this._fixedCells)[t],n=t+1;n<i.length&&i[n]-65535==o;n++,r++);else for(t-=e,o=(i=this._cells)[t],n=t+1;n<i.length&&i[n]-65535==o;n++,r++);return r},e.prototype.getMerged2=function(t,e,i,r){for(var o=this._cells,n=o[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?r:1,u=i+1;u<o.length&&o[u]-65535==n;u++)l+=(a=s.getItem(e++)).isData?r:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i,r){if(r>0){var o=e.grid,n=o.displayOptions,s=e.mergeEdit&&o.editOptions.commitByCell||n.editItemMerging,a=i,l=this._flags[a],u=t.getItem(a);if(l<=0||pr(u.itemState)&&!s)return null;for(;a&&!(this._flags[a-1]<l||pr(t.getItem(a-1).itemState));)a--;for(var h=i+1;h<=r;){var c=pr(t.getItem(h).itemState);if(h==r||this._flags[h]>l||c&&!s)return h>a+1||c?as.createRange(a,e.layout,h-1,e.layout):null;h++}}return null},e.prototype.$_checkMerge=function(t,e,i,r,o){if(i>=0){var n=e.grid,s=n.displayOptions,a=e.mergeEdit&&n.editOptions.commitByCell&&n.isEditing()&&n.isItemEditing()||s.editItemMerging,l=i,u=this._flags[l],h=t.getItem(l);if(u<=0||pr(h.itemState)&&!a)return null;if(r)for(;l>o&&!(this._flags[l-1]<u||pr(t.getItem(l-1).itemState));)l--;for(var c=t.itemCount,d=i+1;d<c;){var p=pr(t.getItem(d).itemState);if(this._flags[d]>u||this._flags[d]<=0||p&&!a){if(d>l+1)return as.createRange(l,e.layout,d-1,e.layout);var f=e instanceof Tn?e.groupLevel:-1;return(h=t.getItem(l))instanceof ln&&h.collapsed||h instanceof an&&h.parent.level==f&&(d==i+1||h.parent.collapsed)||(h instanceof ln||h instanceof an)&&h.parent.level>f?as.createRange(l,e.layout,d-1,e.layout):null}d++}if(d>l)return d>l+1?as.createRange(l,e.layout,d-1,e.layout):(f=e instanceof Tn?e.groupLevel:-1,(h=t.getItem(l))instanceof ln&&h.collapsed||h instanceof an&&h.parent.level==f&&(d==i+1||h.parent.collapsed)||(h instanceof ln||h instanceof an)&&h.parent.level>f?as.createRange(l,e.layout,d-1,e.layout):null)}return null},e.MERGE_ROOMS="mergeRooms",e}(Ct),vn=function(t){function e(e){var i=t.call(this,null)||this;return i._column=e,i}return r(e,t),e.prototype._doDispose=function(){this._column=null,this._template=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new Fo),this._template.template=t):this._template=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?ft.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var t=this.column.grid;return t&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName}return null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())},e}(Br),wn=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)for(var e=0,i=Object.keys(t);e<i.length;e++){var r=i[e];this[r]=ft.deepCopy(t[r])}return this},t}(),Cn=function(t){function e(e){var i=t.call(this,e)||this;return i._index=0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expression",{get:function(){return this._expression},set:function(t){t&&(t=t.trim()),t!=this._expression&&(this._expression=t,this._exprNode=t?ue.Default.parse(t):void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Me.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?De.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Te.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?sn.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},e.prototype.realizeSummary=function(t,e){var i=this._template;return i?i.realizeSummary(this,t,e):void 0},e.prototype.realizeGroupSummary=function(t,e){var i=this._template;return i?i.realizeGroupSummary(this,t,e):void 0},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},e.prototype._doChanged=function(){},e}(vn),xn=function(t){function e(e,i){var r=t.call(this)||this;return r._items=[],r._column=e,r._type=i,r._items.push(r.$_createSummary()),r}return r(e,t),e.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach((function(t){t.dispose()})),this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return t>=0&&t<this.column.grid.getSummaryCount(this._type)&&!this._items[t]&&(this._items[t]=this.$_createSummary()),this._items[t]},e.prototype.assignFrom=function(t){if(ft.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);e>1&&this._items.length>e&&(this._items.length=e),e>0&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++)t[i]?(this._items[i]||(this._items[i]=this.$_createSummary()),this._items[i].assignFrom(t[i])):this._items[i]=null}else this._items[0].assignFrom(t)},e}(Ct),In=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return r(e,t),e.prototype._doChanged=function(){this.column._headerSummaryChanged()},e}(Cn),Sn=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.$_createSummary=function(){return new In(this)},e}(xn),En=function(e){function i(i){var r=e.call(this,i)||this;return r._checkLocation=t.ColumnHeaderItemLocation.NONE,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){var t=this.column,e=this._text;if(!e&&t instanceof Tn){var i=t.getField();e=i?i.header||i.orgFieldName:t.fieldName}return e||(e=t.name),e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!0,configurable:!0}),i.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null,this._grid):void 0},i.prototype._doChanged=function(){this.column&&this.column._headerChanged()},i.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},i}(vn),kn=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return r(e,t),e.prototype._doChanged=function(){this.column._footerChanged()},e}(Cn),On=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.$_createSummary=function(){return new kn(this)},e}(xn),Rn=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=this.excelFormat=this.cellProtectProps=void 0,this},t.prototype.assign=function(t){if("string"==typeof t)this.styleName=t;else if(t)if(t instanceof Pn)for(var e=0,i=Object.keys(this);e<i.length;e++)(n=i[e])in t&&(this[n]=ft.deepCopy(t[n]));else for(var r=0,o=Object.keys(t);r<o.length;r++){var n;"readonly"===(n=o[r]).toLowerCase()?this.readOnly=t[n]:this.hasOwnProperty(n)&&(this[n]=ft.deepCopy(t[n]))}return this},t.prototype.toFormatter=function(t){var e;return t||(t={textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0}),(e=this.textFormat)&&(t.textFormatter&&t.textFormatter.format==e||(t.textFormatter=sn.getFormatter(e))),(e=this.numberFormat)&&(t.numberFormatter&&t.numberFormatter.format==e||(t.numberFormatter=Me.getFormatter(e))),(e=this.datetimeFormat)&&(t.datetimeWriter&&t.datetimeWriter.format==e||(t.datetimeWriter=De.getFormatter(e))),(e=this.booleanFormat)&&(t.booleanFormatter&&t.booleanFormatter.format==e||(t.booleanFormatter=Te.getFormatter(e))),(e=this.prefix)&&(t.prefix&&t.prefix==e||(t.prefix=e)),(e=this.suffix)&&(t.suffix&&t.suffix==e||(t.suffix=e)),t},t}(),Pn=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._resizable=!0,i._movable=!0,i._checked=!1,i._fillWidth=NaN,i._dirty=!1,i._index=-1,i._states={},i._header=new En(i),i._footers=new On(i,"footer"),i._headerSummaries=new Sn(i,"summary"),i._groupFooters=new On(i,"groupFooter"),e&&i.assignFrom(e),i}return r(e,t),e.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(t){if(t=Math.max(0,t),!isNaN(t)&&t!=this._width){var e=this._width;this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),e.prototype.setHeader=function(t){this._header.assignFrom(t)},Object.defineProperty(e.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),e.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!0,configurable:!0}),e.prototype.setFooter=function(t){this.setFooters(t)},Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!0,configurable:!0}),e.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!0,configurable:!0}),e.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},Object.defineProperty(e.prototype,"groupFooters",{get:function(){return this._groupFooters},enumerable:!0,configurable:!0}),e.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"groupFooter",{get:function(){return this._groupFooters.get(0)},enumerable:!0,configurable:!0}),e.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRoot",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),e.prototype.clean=function(){this._dirty=!1},e.prototype.isWritable=function(){return!1},e.prototype.stateFor=function(t){return this._states[t]},e.prototype.setState=function(t,e){this._states[t]=e},e.prototype.getFooter=function(t){return this._footers.get(t)},e.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),this._header.assignFrom(e.header),this._footers.assignFrom(e.footers||e.footer),this._headerSummaries.assignFrom(e.summaries||e.summary||e.headerSummaries||e.headerSummary),this._groupFooters.assignFrom(e.groupFooters||e.groupFooter)},e.prototype.toString=function(){return this.displayText},e.prototype._prepareLayout=function(t,e){},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},e.prototype._propChanged=function(t,e,i){var r=this.grid;r&&r._fireColumnPropertyChanged(this,t,e,i)},e.prototype.$_setIndex=function(t){this._index=t},e.prototype._headerChanged=function(){this._changed()},e.prototype._headerSummaryChanged=function(){this._changed()},e.prototype._footerChanged=function(){this._changed()},e.prototype._resetIndices=function(t){},e.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},e.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)},e}(Ct),Dn=function(e){function i(i){var r=e.call(this,i)||this;return r._blankWhenCopy=!1,r._blankWhenExport=!1,r._ignoreDefaultDynamicStyles=!1,r._textInputCase=t.TextInputCase.NORMAL,r._button=t.CellButton.NONE,r._buttonVisibility=t.ButtonVisibility.DEFAULT,r._editButtonVisibility=t.ButtonVisibility.DEFAULT,r._displayMinusZero=!0,r}return r(i,e),i.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!==this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Me.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!==this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?De.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!==this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Te.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!==this._textFormat&&(this._textFormat=t,this._textFormatter=t?sn.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},i.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i}(Pn),Tn=function(e){function i(i){var r=e.call(this)||this;return r._fieldIndex=-1,r._readOnly=!1,r._valueSeparator=",",r._breakMergeOnEmpty=!1,r._equalBlank=!1,r._values=null,r._labels=null,r._lookupDisplay=!1,r._lookupSource=null,r._lookupKeyFields=null,r._lookupKeyFieldIds=null,r._mergeGrouped=!1,r._sortable=!0,r._sortOrder=-1,r._sortByLabel=!1,r._filterable=!0,r._autoFilter=!1,r._lookupData=null,r._required=!1,r._requiredLevel=t.ValidationLevel.ERROR,r._validations=new tn(!0),r._groupable=!0,r._dataIndex=-1,r._baseIndex=-1,r._valueType=t.ValueType.TEXT,r._groupLevel=-1,r._labelFieldIndex=-1,r._filters=new Nr(r),r._filters.addListener(r),r._autoFilters=new Nr(r),r._autoFilters.addListener(r),r._inlineFilters=new Nr(r),r._inlineFilters.addListener(r),i&&r.assignFrom(i),r}return r(i,e),i.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this._inlineFilters=this._inlineFilters&&this._inlineFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!=this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?gn.createRule(t):null;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!=this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?ue.Default.parse(t,null):void 0,this._layoutChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeEdit",{get:function(){return!!this._mergeEdit},set:function(t){t!=this._mergeEdit&&(this._mergeEdit=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&(this._excelFormulaStatement=t,t?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new Dr(t):this._excelFormulaExprStatement=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataIndex",{get:function(){return this._dataIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseIndex",{get:function(){return this._baseIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueType",{get:function(){return this._valueType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupLevel",{get:function(){return this._groupLevel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t?t.map((function(t,e){return null!=t?String(t):t})):[],this._lookupMap=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lookupSource",{get:function(){return this._lookupSource},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=ft.makeArray(t,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!==this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(t){t!==this._placeHolderStyleName&&(this._placeHolderStyleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelFieldIndex",{get:function(){return this._labelFieldIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeGrouped",{get:function(){return this._mergeGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(this._autoFilter=t,!t&&this._autoFilters&&this._autoFilters.count>0&&this._autoFilters.clear(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filters",{get:function(){return this._filters},set:function(t){t instanceof Nr||this.setFilters(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoFilters",{get:function(){return this._autoFilters},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showInlineFilter",{get:function(){return this._showInlineFilter},set:function(t){t!==this._showInlineFilter&&(this._showInlineFilter=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){t!=this._objectKey&&(this._objectKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lookupData",{get:function(){return this._lookupData},set:function(t){if(t!==this._lookupData){var e=void 0,i=void 0,r=void 0,o=void 0,n={};if(this._lookupData=ft.deepCopy(t),t){ft.isArray(t)?n.list=t:n=t,this._labels=[],this._values=[],this._lookupMap=null,e=n.hasOwnProperty("value")?n.value:"value",i=n.hasOwnProperty("label")?n.label:"label";for(var s=0,a=n.list.length;s<a;s++)null!=(o=null!=(r=n.list[s])[e]?r[e]:r.code)&&this._values.push(null!=r[e]?r[e]:r.code),null!=o&&this._labels.push(null!=r[i]?r[i]:null!=r.text?r.text:o)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellProtectProps",{get:function(){return this._cellProtectProps},set:function(t){this._cellProtectProps=t},enumerable:!0,configurable:!0}),i.prototype.getField=function(){var t=this._dataIndex;if(t>=0){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},i.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._values,i=this._labels;if(e&&e.length>0){this._lookupMap={};for(var r=0;r<e.length;r++)i&&i.length>r?this._lookupMap[e[r]]=i[r]:this._lookupMap[e[r]]=e[r]}}var o;if("string"==typeof t&&t&&this._valueSeparator){for(var n=t.split(this._valueSeparator),s=[],a=(r=0,n.length);r<a;r++)s.push(this._lookupMap&&this._lookupMap[n[r]]?this._lookupMap[n[r]]:n[r]);if(s.length<=0)return"";o=s.join(this._valueSeparator)}else o=this._lookupMap?this._lookupMap[t]:void 0;return o||(null!=this.textOfInvalid?this.textOfInvalid:t)},i.prototype.getLookupIndex=function(t){if(this._values&&this._values.length>0)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},i.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&this._values.length>0)for(var i=ft.isArray(t)?t:String(t).split(this._valueSeparator),r=0,o=i.length;r<o;r++)this._values.indexOf(i[r])>=0&&e.push(this._values.indexOf(i[r]));return e},i.prototype.getLookupValue=function(t){if(this._values&&this._values.length>0)return this._values[t]},i.prototype.getLookupValues=function(t){var e=[];if(this._values&&this._values.length>0)for(var i=0,r=t.length;i<r;i++)t[i]>=0&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},i.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){var r=i.indexOf(t);if(r>=0&&e.length>r)return e[r];if((r=e.indexOf(t))>=0)return e[r]}},i.prototype.getSourceValues=function(t){var e=this._values,i=this._labels;if(i&&e){for(var r=void 0,o=[],n=this._valueSeparator,s=0,a=(t=ft.isArray(t)?t:n&&t?String(t).split(n):ft.makeArray(t)).length;s<a;s++)(r=i.indexOf(t[s]))>=0&&e.length>r?o.push(e[r]):o.push(t[s]);if(o.length>0&&n)return o.join(n);if(o.length>0)return o.join()}},Object.defineProperty(i.prototype,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters},enumerable:!0,configurable:!0}),i.prototype.clearFilters=function(){this.setFilters(null)},i.prototype.addFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this._filters.addAll(ft.makeArray(t),e)}},i.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(ft.makeArray(t))}},i.prototype.activateFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateItems(ft.makeArray(t),e)}},i.prototype.activateAllFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.activateAll(t)},i.prototype.hideColumnFilters=function(t,e){this.$_filters.hideFilters(ft.makeArray(t),e)},i.prototype.hideAllColumnFilters=function(t){this.$_filters.hideAllFilters(t)},i.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleItems(ft.makeArray(t))}},i.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleAll()},i.prototype.getFilter=function(t){var e=this.$_filters,i=e.indexOf(t);return e.getItem(i)},i.prototype.getActiveFilters=function(t){return this.$_filters.getActiveItems(t)},Object.defineProperty(i.prototype,"hasFilters",{get:function(){return this._autoFilter||this._filters.count>0},enumerable:!0,configurable:!0}),i.prototype.isFiltered=function(){return this.$_filters.activeCount>0||this._inlineFilters.activeCount>0},i.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},i.prototype.autoFilterRefresh=function(t){var e=this.grid,i=null==e?void 0:e.dataSource;if(e&&i&&this._autoFilter){var r=e.filterSelector._manager;r&&r.buildItems(this,i,!0,t)}},i.prototype.setInlineFilter=function(t,e){var i=this._inlineFilters,r=i.getItem(0);r||(i.add({name:"inlineFilter"},!1),r=i.getItem(0)),r.criteria!=t&&(void 0===t?(r.criteria=void 0,e?r.active=!1:r._active=!1):(r._active=!1,r.criteria=t,r.active=!!r.criteria))},i.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},i.prototype._prepareLayout=function(t,i){e.prototype._prepareLayout.call(this,t,i)},i.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;e&&(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0&&(this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)),this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t))},i.prototype.isWritable=function(){var t=this.grid.editOptions;return(t.columnEditableFirst?null!=this._editable?this._editable:t.editable:t.editable&&!1!==this._editable)&&!this._readOnly},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},i.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},i.prototype.$_setGroupLevel=function(t){this._groupLevel=t},i.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&this._lookupKeyFields.length>0&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),r=0;r<e;r++)i[r]=t.dataSource.getFieldIndex(this._lookupKeyFields[r]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},i.prototype._changed=function(){e.prototype._changed.call(this)},i.CAPITAL_INDEXERS=["value","values"],i}(Dn),Ln=function(t){function e(e){var i=t.call(this)||this;return i._fieldArray=i._fieldArray||[],i._fields=i._fields||[],e&&i.assignFrom(e),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),e.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,r=this._fieldArray.length;i<r;i++){var o=this._fieldArray[i],n=o.split("..");if(n.length>1){var s=e.getFieldIndex(n[0]),a=e.getFieldIndex(n[1]);if(s>=0&&a>=0)for(var l=Math.min(s,a),u=Math.max(s,a),h=l;h<=u;h++)this._fields.push(h)}else(h=e.getFieldIndex(o))>=0&&this._fields.push(h)}},e}(Dn),Mn=function(){function t(){this._layouts={}}return t.prototype._doDispose=function(){this._layouts=null},t.prototype.find=function(t){return this._layouts[t]},t.prototype.clear=function(){this._layouts={}},t.prototype.load=function(t){if(t=ft.makeArray(t),this._layouts={},t)for(var e=0,i=t.length;e<i;e++){var r=t[e];r.name&&!this._layouts[r.name]&&(this._layouts[r.name]=r.items)}},t}(),Fn=function(e){function i(){var t=e.call(this)||this;return t._visible=!0,t._width=NaN,t._fillWidth=NaN,t._index=-1,t._vindex=-1,t._row=0,t._col=0,t._hrow=0,t._hcol=0,t._cspan=1,t._hspan=1,t._dspan=1,t._clen=1,t._hlen=1,t._dlen=1,t._cellWidth=0,t._fitWidth=NaN,t._defColSpan=1,t._header=t._createHeader(),t._header&&(t._header._layout=t),t}return r(i,e),i.compareLoc=function(t,e){if(null==t||null==e)return 0;if(null==t)return-1;if(null==e)return 1;var i=t.root.vindex,r=e.root.vindex;return i==r&&(t.group===e.group?(i=t.vindex,r=e.vindex):(i=t.dataRoot.vindex,r=e.dataRoot.vindex)),i-r},i.getSource=function(t){return t instanceof Nn?t.source:t},i.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){if(this.$_grid)return this.$_grid;var t=this.root;return t&&t._parent.grid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isNull",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isProxy",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!0,configurable:!0}),i.prototype.$_isVisible=function(t){return this._visible},Object.defineProperty(i.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"owner",{get:function(){return this._parent&&this._parent.owner},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._parent instanceof Jn?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof Jn)return this._root=t;t=t._parent}return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isRoot",{get:function(){return this.root===this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)do{this._dataRoot=t,t=t.group}while(t);else this._dataRoot=this}return this._dataRoot},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vindex",{get:function(){return this._vindex},set:function(t){var e=this._vindex;if(this._parent&&this._parent.$_changeChildVIndex(this,t),this._vindex!=e){this._propChanged("displayIndex",this._vindex,e);var i=this.firstColumn;i&&this instanceof Vn&&i.$_layoutIndexChanged(e,this._vindex)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hrow",{get:function(){return this._hrow},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hcol",{get:function(){return this._hcol},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),this.grid&&(t=Math.max(t,this.grid.displayOptions.minCellWidth)),t!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent&&this._parent._childFillWidthChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupShowMode",{get:function(){return this._groupShowMode},set:function(t){t!=this._groupShowMode&&(this._groupShowMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"domWidth",{get:function(){if(this.grid&&this.grid.layoutManager.isColumnFitted){var t=this.grid,e=t.layoutManager,i=t.fixedOptions.colCount,r=e.cellCount,o=this.$_fixed?e._fixedCellPoints:this.$_rfixed?e._rightCellPoints:this.grid.layoutManager._cellPoints,n=this.$_fixed?this._col:this.$_rfixed?this._col-(r-i):this._col-i;return o[n+(this instanceof jn?this._clen:this._defColSpan)]-o[n]}return this.cellWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"distance",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cspan",{get:function(){return this._cspan},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hspan",{get:function(){return this._hspan},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hlen",{get:function(){return this._hlen},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed},enumerable:!0,configurable:!0}),i.prototype.load=function(e){void 0!==e.width&&(this.width=e.width),void 0!==e.header&&this._header.assignFrom(e.header),void 0!==e.fillWidth&&(this.fillWidth=e.fillWidth),this.groupShowMode=ft.valueIn(e.groupShowMode,t.GroupShowMode)?e.groupShowMode:t.GroupShowMode.ALWAYS,void 0!==e.visible&&(this.visible=e.visible)},i.prototype.isColumn=function(t){return!1},i.prototype.cleanColumns=function(){},i.prototype.findLayout=function(t){return null},i.prototype.getHeaderSpan=function(){return 1},i.prototype.getSummarySpan=function(t){return 1},i.prototype.getFooterSpan=function(t){return 1},i.prototype.getDataSpan=function(){return 1},i.prototype.getGroupFooterSpan=function(t,e){return 1},i.prototype.getDataColumn=function(){return null},i.prototype.getFooterUserSpan=function(t){return null},i.prototype.getSummaryUserSpan=function(t){return null},i.prototype._createHeader=function(){return null},i.prototype._headerChanged=function(){this._changed()},i.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},i.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},i.prototype._getWidth=function(t){return t},i.prototype._getFillWidth=function(t){return t},i.prototype.changeCellWidth=function(t,e,i){var r=i?this.cellWidth:this.domWidth,o=this.domWidth,n=t-r;if(e&&!i&&(n*=this.cellWidth/(isNaN(this._fitWidth)?this.cellWidth:this._fitWidth)),n=Math.round(n),this.owner){var s=this._col,a=void 0;a=this instanceof jn?this._clen:this._defColSpan,this.owner.$_changeCellWidths(s,a,n);var l=this.owner._cellWidths;if(l&&l.length)for(var u=this.owner._dataCells,h=0;h<u.length;h++)for(var c=u[h],d=0;d<a;d++)c[s+d]._cellWidth=l[s+d];this.owner.$_calcGroupWidths()}setTimeout(function(){if(this.domWidth!=o){var t=this.firstColumn;this._propChanged("displayWidth",this.domWidth,o),t&&this instanceof Vn&&t.$_layoutWidthChanged(o,this.domWidth)}}.bind(this),50)},i.prototype._setFitWidth=function(t){this._fitWidth=t},i.prototype._clearFitWidth=function(){this._fitWidth=NaN},i.prototype._changed=function(){this._parent&&this._parent._changed()},i.prototype.$_setMerged=function(t){this._merged=t},i.prototype._propChanged=function(t,e,i){var r=this.grid;r&&r._fireLayoutPropertyChanged(this,t,e,i)},i}(Ct),Nn=function(t){function e(e,i){var r=t.call(this)||this;return r._source=e,r._index=i,r}return r(e,t),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isProxy",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._source.visible},enumerable:!0,configurable:!0}),e.prototype.$_isVisible=function(t){return this._source.$_isVisible(t)},Object.defineProperty(e.prototype,"cols",{get:function(){return this._source.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._source.headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._source.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._source.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._source.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastColumn",{get:function(){return this._source.lastColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundColumn",{get:function(){return this._source.boundColumn},enumerable:!0,configurable:!0}),e.prototype.load=function(t){},e.prototype._isResizable=function(){return!1},e.prototype._isMovable=function(){return!1},e.prototype.clearMergeGrouped=function(){},e}(Fn),Vn=function(e){function i(t){var i=e.call(this)||this;return i._cellSpan=1,i._cellWidths=[],i._cols=1,i._rows=1,i._blanked=!1,i._column=t,i._columnObj=t instanceof Dn?t:null,i}return r(i,e),i.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._defColSpan)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!==this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?gn.createRule(t):void 0===t?void 0:null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!0,configurable:!0}),i.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof Tn&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},Object.defineProperty(i.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankNode",{get:function(){return this._blankNodeRun},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blanked",{get:function(){return this._blanked},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?ue.Default.parse(t,null):void 0===t?void 0:null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(t){this._summarySpans=this._summarySpans||[],t!=this._summarySpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpans[0]=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(t){this._footerSpans=this._footerSpans||[],t!=this._footerSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpans[0]=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(t){this._groupFooterSpans=this._groupFooterSpans||[],t!=this._groupFooterSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpans[0]=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(t){this._footerUserSpans=ft.makeArray(t,!0).slice(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(t){this._summaryUserSpans=ft.makeArray(t,!0).slice(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(t){this._groupFooterUserSpans=ft.makeArray(t,!0).slice(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(t){t!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.canMerge=function(){if(null!=this._mergeRuleObj)return!0;if(this._columnObj instanceof Tn){if(this._columnObj.mergeGrouped)return!0;if(void 0===this._mergeRuleObj)return null!=this._columnObj._mergeRuleObj}},Object.defineProperty(i.prototype,"isNull",{get:function(){return!this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,e=t.indexOf(this);e-- >0;){var r=t[e];if(r instanceof i&&r.lastColumn)return r.lastColumn}return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()},enumerable:!0,configurable:!0}),i.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},i.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,r=this._summarySpans;return i?void 0===(e=i(this.grid.handler,this,t))&&r&&r.length>t&&(e=r[t]):r&&r.length>t&&(e=r[t]),void 0===e?this._cellSpan:e},i.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,r=this._footerSpans;return i?void 0===(e=i(this.grid.handler,this,t))&&r&&r.length>t&&(e=r[t]):r&&r.length>t&&(e=r[t]),void 0===e?this._cellSpan:e},i.prototype.getFooterUserSpan=function(t){return this._footerUserSpans&&this._footerUserSpans[t]},i.prototype.getSummaryUserSpan=function(t){return this._summaryUserSpans&&this._summaryUserSpans[t]},i.prototype.getGroupFooterUserSpan=function(t,e){var i,r=this._groupFooterUserSpanCallback;return r&&(i=r(this.grid.handler,this,t,t.index,e)),i||this._groupFooterUserSpans&&this._groupFooterUserSpans[e]},i.prototype.getGroupFooterSpan=function(t,e){var i,r=this._groupFooterSpanCallback,o=this._groupFooterSpans;return r?void 0===(i=r(this.grid.handler,this,t,e))&&o&&o.length>e&&(i=o[e]):o&&o.length>e&&(i=o[e]),void 0===i?this._cellSpan:i},i.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},i.prototype.getDataColumn=function(){return this._columnObj},i.prototype._createHeader=function(){return new An(this)},i.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},i.prototype._isMovable=function(){for(var t=!0,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t&&(!this._columnObj||this._columnObj.movable)},i.prototype.isColumn=function(t){return this._columnObj===t},i.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},i.prototype.load=function(t){if(this.assignFrom(t),e.prototype.load.call(this,t),!this._columnObj&&"string"==typeof this._column){var i=this.owner&&this.owner.grid;this._columnObj=i?i.columnByName(this._column):null}},i.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},i.prototype.$_isVisible=function(t){return t?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},i.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},i.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},i.prototype._prepareLayout=function(i,r,o){if(e.prototype._prepareLayout.call(this,i,r,o),this._columnObj){this._columnObj._prepareLayout(i,this);var n=this.parent.direction===t.ColumnLayoutDirection.VERTICAL?this.cellSpan+this._dspan-1:this._dspan;(this._blanked=n===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank)))}},i.prototype.toString=function(){return"string"==typeof this._column?this._column:e.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){this.firstColumn instanceof Tn&&this.firstColumn.$_setMergeGrouped(!1)},i.prototype.$_bindColumn=function(t,e,i){if(void 0===i&&(i=!1),this._columnObj||(this._columnObj=e.columnByName(this._column)),this._columnObj){var r=this._columnObj.$_hash;if(t[r])throw"Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText);i||(this._columnObj._layout=this),!i&&(this._columnObj._layout=this),t[r]=this}},i.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:void 0===this._mergeRuleObj&&this._columnObj instanceof Tn?this._columnObj._mergeRuleObj:null},i}(Fn);(bo=t.ColumnLayoutDirection||(t.ColumnLayoutDirection={})).VERTICAL="vertical",bo.HORIZONTAL="horizontal";var Bn,An=function(t){function e(e){var i=t.call(this)||this;return i._layout=e,i}return r(e,t),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(t){this.layout.firstColumn.header.styleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(t){this.layout.firstColumn.header.exportStyleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.isVisible=function(){return!0},e.prototype.getDisplayText=function(){return this._text},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},e.prototype._changed=function(){this._layout&&this._layout._headerChanged()},e}(Ct),$n=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i._showTooltip=void 0,i}return r(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new Fo),this._template.template=t):this._template=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?ft.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!==this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!==this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return Math.max(1,this._rows||1)},set:function(t){t!==this._rows&&(this._rows=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null,this._layout.grid):void 0},e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.doAssignSimple=function(e){return!t.prototype.doAssignSimple.call(this,e)&&"boolean"==typeof e&&(this.visible=e,!0)},e.prototype.isVisible=function(){return this._visible},e.prototype.getDisplayText=function(){return this.text||this.layout.name},Object.defineProperty(e.prototype,"displayText",{get:function(){return this.getDisplayText()},enumerable:!0,configurable:!0}),e}(An),jn=function(e){function i(i,r){var o=e.call(this)||this;return o._direction=t.ColumnLayoutDirection.HORIZONTAL,o._items=[],o._resizable=!0,o._movable=!0,o._hideChildHeaders=!1,o._childColumnMovable=!0,o._visibles=[],o._cols=0,o._rows=0,o._headerRows=0,o._expandedLayouts=[],o._collapsedLayouts=[],o._name=i,o._direction=r==t.ColumnLayoutDirection.VERTICAL?t.ColumnLayoutDirection.VERTICAL:t.ColumnLayoutDirection.HORIZONTAL,o}return r(i,e),i.getNext=function(t){var e=t&&t.parent;return e?((t=e.nextOf(t))||(t=i.getNext(e)),t):null},i.getPrev=function(t){var e=t&&t.parent;return e?((t=e.prevOf(t))||(t=i.getPrev(e)),t):null},i.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},i.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},i.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},i.isRight=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},i.prototype._doDispose=function(){this._items.forEach((function(t){t&&t.dispose()})),this._visibles=this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){e!=t.ColumnLayoutDirection.VERTICAL&&(e=t.ColumnLayoutDirection.HORIZONTAL),e!=this._direction&&(this._direction=e,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vertical",{get:function(){return this._direction==t.ColumnLayoutDirection.VERTICAL},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontal",{get:function(){return this._direction!=t.ColumnLayoutDirection.VERTICAL},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(t){this._movable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){t!=this._hideChildHeaders&&(this._hideChildHeaders=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(t){this._childColumnMovable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++)i[e]._parent=this;this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibles",{get:function(){return this._visibles.slice()},enumerable:!0,configurable:!0}),i.prototype.$_isVisible=function(t){return this.visible&&this._visibles.length>0},Object.defineProperty(i.prototype,"expandable",{get:function(){return this._expandable},set:function(t){t!=this._expandable&&(this._expandable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.contains=function(t){for(var e=0,i=this._items;e<i.length;e++)if(i[e]===t)return!0;return!1},i.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getVisible=function(t){return this._visibles[t]},i.prototype.addColumn=function(t,e){var i=new Vn(t);this.addItem(i,e)},i.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&e>=0&&e<=this._items.length&&(this._items.splice(e,0,t),t._parent=this,this._changed())},i.prototype.removeColumn=function(t){var e=t.layout;this.removeItem(e)},i.prototype.clear=function(t){void 0===t&&(t=!0);for(var e=0,r=this._items;e<r.length;e++){var o=r[e];t&&o instanceof i&&o.clear(),o._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},i.prototype.removeItem=function(t){var e=this.indexOf(t);e>=0&&(this._items.splice(e,1),t._detach(),this._changed())},i.prototype.removeItemAt=function(t){t>=0&&t<this._items.length&&this._items.splice(t,1)[0]._detach()},i.prototype.moveItem=function(t,e){var i=this._items.length;if(t!=e&&t>=0&&t<i&&e>=0&&e<i){var r=this._items[t];this._items.splice(t,1),this._items.splice(e,0,r)}},i.prototype.getColumn=function(t,e,i){var r=this.$_getLeaf(e,i).column;return"string"==typeof r?t.columnByName(r):r},i.prototype.findItem=function(t){if(t)for(var e=0,r=this._items;e<r.length;e++){var o=r[e];if(o instanceof Vn&&o.column===t)return o;if(o instanceof i){var n=o.findItem(t);if(n)return n}}return null},i.prototype.layoutByName=function(t){if(t)for(var e=0,r=this._items;e<r.length;e++){var o=r[e];if(o instanceof Vn&&o.firstColumn.name===t)return o;if(o instanceof i){if(o.name===t)return o;var n=o.layoutByName(t);if(n)return n}}return null},i.prototype.rightOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return Hn(this,e+1)}catch(t){}return null},i.prototype.leftOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(e>0)return Wn(this,e-1)}catch(t){}return null},i.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return Gn(this,e+1)}catch(t){}return null},i.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(e>0)return Un(this,e-1)}catch(t){}return null},i.prototype.lowerOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(e<this.count-1)return zn(this,e+1)}catch(t){}return null},i.prototype.upperOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(e>0)return Yn(this,e-1)}catch(t){}return null},i.prototype.isExpandable=function(){return this.expandable&&this._expandedLayouts.length>0&&this._collapsedLayouts.length>0},i.prototype.expandAll=function(t,e){this.expandable&&(this.expanded=t),this._items.forEach((function(r){r instanceof i&&r.expandAll(t,e)}))},i.prototype._clearFitWidth=function(){e.prototype._clearFitWidth.call(this);for(var t=0,i=this._visibles;t<i.length;t++)i[t]._clearFitWidth()},Object.defineProperty(i.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this._visibles.length>0?this._visibles[0].first:this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return t>0?this._visibles[t-1].last:this},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstColumn",{get:function(){return this._visibles&&this._visibles.length>0?this._visibles[0].firstColumn:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;t>=0;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"boundColumn",{get:function(){return this.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._name},enumerable:!0,configurable:!0}),i.prototype._createHeader=function(){return new $n(this)},i.prototype.load=function(t){this.clear(),void 0!==t.hideChildHeaders&&(this.hideChildHeaders=t.hideChildHeaders),this.expandable=t.expandable,this.expanded=null==t.expanded||t.expanded,void 0!==t.resizable&&(this.resizable=t.resizable),void 0!==t.childColumnMovable&&(this.childColumnMovable=t.childColumnMovable),t.items&&this._loadItems(t.items),e.prototype.load.call(this,t)},i.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var r=i[e].findLayout(t);if(r)return r}return null},i.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},i.prototype._isResizable=function(){return this._resizable},i.prototype._isMovable=function(){for(var t=this._movable,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t},i.prototype._setFitWidth=function(t){if(e.prototype._setFitWidth.call(this,t),this.vertical)for(var i=0,r=this._visibles;i<r.length;i++)if((h=r[i])instanceof Vn){var o=h._cellWidth/this.cellWidth*t;h._setFitWidth(o)}else h._setFitWidth(t);else{for(var n=0,s=0,a=this._visibles;s<a.length;s++)n+=(h=a[s])._cellWidth;for(var l=0,u=this._visibles;l<u.length;l++){var h;o=(h=u[l])._cellWidth/n*t,h._setFitWidth(o)}}},i.prototype._prepareLayout=function(t,i,r){e.prototype._prepareLayout.call(this,t,i,r);for(var o=0,n=this._visibles;o<n.length;o++)n[o]._prepareLayout(t,i,r)},i.prototype.toString=function(){return this._name||e.prototype.toString.call(this)},i.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},i.prototype._loadItems=function(t){for(var e,r=0,o=0,n=t;o<n.length;o++){var s=n[o],a=void 0;r++,"string"==typeof s?e=a=new Vn(s):"number"==typeof s?(a=new Nn(e,r))._width=s:s&&(s.items?a=new i(s.name,s.direction):e=a=new Vn(s.column)),a&&(a._parent=this,a.load(s),this._items.push(a))}},i.prototype.$_bindColumns=function(t,e,r){for(var o=0,n=this._items;o<n.length;o++){var s=n[o];s._root=null,s instanceof i?s.$_bindColumns(t,e,r):!s.isProxy&&s.$_bindColumn(t,e,r)}},i.prototype.$_parseExpandLayouts=function(e){var r=this;this._expandedLayouts.length=this._collapsedLayouts.length=0,this.items.forEach((function(o,n){if(!o.isProxy){switch(o.groupShowMode){case t.GroupShowMode.EXPAND:r._expandedLayouts.push(o);break;case t.GroupShowMode.COLLAPSE:r._collapsedLayouts.push(o);break;default:r._expandedLayouts.push(o),r._collapsedLayouts.push(o)}o instanceof i&&o.$_parseExpandLayouts(e)}}))},i.prototype.$_parseHeaderCells=function(e,r,o){var n=this._direction===t.ColumnLayoutDirection.HORIZONTAL,s=0,a=this._header.isVisible()?this._header.rows:0;if(a&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var l=0,u=this._visibles;l<u.length;l++){var h=u[l],c=!h.isProxy&&h.header.isVisible()?h.header.rows:h.isProxy&&!n?1:0;if(h._hrow=r,h._hcol=o,h._hspan=c,h._hlen=c,h instanceof i)if(c>0&&(e[r][o]=h),h.$_parseHeaderCells(e,r+c,o),c>0){for(var d=0;d<c;d++)for(var p=0===d?1:0;p<h.cols;p++)e[r+d][o+p]=new Nn(h,p);n?o+=h.cols:r+=h.headerRows}else n?o+=h.cols:r+=h.headerRows;else if(e[r][o]=h,n){for(d=1;d<this.headerRows-a;d++)e[r+d][o]=new Nn(h,d),h._hspan++;h._hlen=h._hspan,o+=h.cols}else{for(d=1;d<this.cols;d++)e[r][o+d]=new Nn(h,d);r+=h.rows}n?s=Math.max(h._hlen,s):s+=h._hlen}this._hlen=n?s+a:Math.max(1,s+a)},i.prototype.$_fillHorz=function(t,e,i,r,o,n,s){for(var a=r+n,l=o,u=l+i-1,h=0,c=e-n;h<c;h++)for(var d=u;d>=l;d--){var p=t[a+h][d];if(null!=p){p=Fn.getSource(p);for(var f=d+1;f<=u;f++){var _=t[a+h][f]=new Nn(p,f-l);s?(_._hrow=a+h,_._hcol=f):(_._row=a+h,_._col=f,p.row===_.row&&(p._cspan++,p instanceof Vn&&p._clen++))}break}}},i.prototype.$_fillVert=function(t,e,i,r,o,n,s){for(var a=r+n,l=r+e-1,u=o+i-1,h=o;h<=u;h++)for(var c=l;c>=a;c--){var d=t[c][h];if(null!=d){d=Fn.getSource(d);for(var p=c+1;p<=l;p++){var f=t[p][h]=new Nn(d,p-a);s?(f._hrow=p,f._hcol=h,d.hcol===f.hcol&&(d._hspan++,d instanceof Vn&&d._hlen++)):(f._row=p,f._col=h,d.col===f.col&&(d._dspan++,d instanceof Vn&&d._dlen++))}break}}},i.prototype.$_adjustHeaderCells=function(e){var r=this._header.isVisible()?this._header.rows:0;if(r&&this._hideChildHeaders){this._hspan=this._hlen;for(var o=0,n=0;n<this._hlen;n++)for(var s=0;s<this._clen;s++)if(n||s){var a=this._hrow+n,l=this._hcol+s,u=e[a][l]=new Nn(this,o++);u._hrow=a,u._hcol=l}}else if(this._direction===t.ColumnLayoutDirection.VERTICAL){for(var h=this._clen,c=0,d=this._visibles;c<d.length;c++)(_=d[c])instanceof i&&(_._clen=this._clen,_.$_adjustHeaderCells(e));this.$_fillVert(e,this._hlen,h,this._hrow,this._hcol,r,!0),this.$_fillHorz(e,this._hlen,h,this._hrow,this._hcol,r,!0)}else{for(var p=0,f=this._visibles;p<f.length;p++){var _;(_=f[p])instanceof i&&(_._hlen=this._hlen-r,_.$_adjustHeaderCells(e))}this.$_fillVert(e,this._hlen,this._cols,this._hrow,this._hcol,r,!0),this.$_fillHorz(e,this._hlen,this._cols,this._hrow,this._hcol,r,!0)}},i.prototype.$_parseDataCells=function(e,r,o){for(var n,s=this._direction!=t.ColumnLayoutDirection.VERTICAL,a=0,l=0,u=0,h=this._visibles;u<h.length;u++){var c=h[u];if(c._row=r,c._col=o,c._dspan=1,c._dlen=1,c._cspan=1,c._clen=1,c instanceof i){if(c.$_parseDataCells(e,r,o),s)o+=c.cols;else if(r+=c.rows,2==this.rows){for(var d=1/0,p=0,f=0,_=this.visibles;f<_.length;f++){var g=_[f];d=Math.min(d,g.cols),p=Math.max(p,g.cols),g.ignoreCalcWidth=!1}if(1===d&&p>1)for(var y=0,m=this.visibles;y<m.length;y++)(g=m[y]).ignoreCalcWidth=1===g.cols}}else if(e[r][o]=c,s){for(var b=1;b<this.rows;b++)e[r+b][o]=n=new Nn(c,b),c._dspan++,n._col=o,n._row=r+b;c._dlen=c._dspan,o+=c.cols}else{for(b=1;b<this.cols;b++)e[r][o+b]=n=new Nn(c,b),c._cspan++,n._col=o+b,n._row=r;c._clen=c._cspan,r+=c.rows}s?(l+=c._clen,a=Math.max(c._dlen,a)):(l=Math.max(c._clen,l),a+=c._dlen)}s?(l=Math.max(1,l),this._dlen=a):this._dlen=Math.max(1,a),this._cspan=this._clen=l},i.prototype.$_adjustDataCells=function(e){if(this._direction===t.ColumnLayoutDirection.VERTICAL){for(var r=0,o=this._visibles;r<o.length;r++)(a=o[r])instanceof i&&(a._cspan=a._clen=this._clen,a.$_adjustDataCells(e));this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var n=0,s=this._visibles;n<s.length;n++){var a;(a=s[n])instanceof i&&(a._dlen=this._dlen,a.$_adjustDataCells(e))}this.$_fillVert(e,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(e,this._dlen,this._clen,this._row,this._col,0,!1)}},i.prototype.$_calcSpans=function(){var e=this._header.isVisible();if(this._direction==t.ColumnLayoutDirection.HORIZONTAL){for(var r=0,o=1,n=1,s=0,a=this._visibles;s<a.length;s++)(d=a[s])instanceof i&&d.$_calcSpans(),r+=d.cols,o=Math.max(o,d.headerRows),n=Math.max(n,d.rows);this._rows=n,this._cols=r,e&&this._hideChildHeaders?this._headerRows=this._header.rows:this._headerRows=o+(e?this._header.rows:0)}else{this._cols=1,this._headerRows=e?this._header.rows:0,this._rows=0;for(var l=0,u=this._visibles;l<u.length;l++)(d=u[l])instanceof i&&d.$_calcSpans(),this._headerRows+=d.headerRows,this._rows+=d.rows,this._cols=Math.max(d.cols,this._cols);for(var h=0,c=this._visibles;h<c.length;h++){var d;(d=c[h])instanceof i&&(d._cols=this._cols)}e&&this._hideChildHeaders&&(this._headerRows=this._header.rows)}},i.prototype.$_resetVisibles=function(e){var r=0,o=0,n=this.visibles;this._visibles=[];for(var s=0,a=this._items;s<a.length;s++){var l=a[s];l._index=r++,l instanceof i&&l.$_resetVisibles(e);var u=l.$_isVisible(e);u&&this.expandable&&(u=this._expanded?this._expandedLayouts.indexOf(l)>=0:this._collapsedLayouts.indexOf(l)>=0),u&&(this._visibles.push(l),l._vindex=o++)}if(!e&&n.length!=this._visibles.length&&this.direction===t.ColumnLayoutDirection.HORIZONTAL)for(var h=this;h;)h._cellWidth=NaN,h.width=NaN,h=h.parent;this.$_calcSpans()},i.prototype.$_getLeaf=function(t,e){for(var r=0,o=this._visibles;r<o.length;r++){var n=o[r];if(n instanceof i){var s=n.row,a=s+n.rows;if(t>=s&&t<a){var l=n.col,u=l+n.cols;if(e>=l&&e<u)return this.$_getLeaf(t-s,e-l)}}else if(n.row===t&&n.col===e)return n}return null},i.prototype.$_collectCellWidths=function(t){for(var e=[],r=0,o=this._visibles;r<o.length;r++){var n=o[r],s=n._cellWidth||n.width;if(n instanceof Vn&&isNaN(s)&&(s=t),n instanceof i){var a=n.$_collectCellWidths(t);isNaN(s)&&(s=a),n._cellWidth=s}else n._cellWidth=s;e.push(s)}var l=this.width;return isNaN(l)&&(l=this.vertical?Math.max.apply(null,e):e.reduce((function(t,e){return t+e}),0)),l},i.prototype.$_arrangeCellWidths=function(){var t=this._visibles.length;if(!(t<1)){var e=this._cellWidth||this.width,r=this._visibles;if(!isNaN(e))if(this.vertical)for(var o=0;o<t;o++)r[o]instanceof i&&(r[o]._cellWidth=e);else{for(var n=0,s=0,a=r;s<a.length;s++)n+=(u=a[s])._cellWidth;var l=0;for(o=0;o<t-1;o++){var u=r[o],h=Math.floor(e*u._cellWidth/n);r[o]._cellWidth=h,l+=h}r[t-1]._cellWidth=e-l}for(var c=0,d=r;c<d.length;c++)(u=d[c])instanceof i&&u.$_arrangeCellWidths()}},i.prototype.$_calcCellWidths=function(t,e,i){if(!i){for(var r=e.slice(),o=0;o<r.length;o++)r[o]=0;var n=this.owner._moveColumn,s=t.slice();if(n){var a=s.splice(n.first.row,1);s.splice(0,0,a[0])}for(var l=0;l<s.length;l++)for(var u=s[l],h=0;h<u.length;h++){var c=u[h];n?e[h]=e[h]||c._cellWidth:(!c.isProxy||c._cellWidth>0&&!c.ignoreCalcWidth)&&(e[h]+=c._cellWidth,r[h]++)}for(o=0;o<e.length;o++)e[o]=Math.round(e[o]/Math.max(r[o],1))}for(l=0;l<t.length;l++)for(u=t[l],h=0;h<u.length;h++)u[h]._cellWidth=e[h]},i.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},i.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},i.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},i.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},i.prototype.$_collectHorzColumns=function(t,e,r){if(this.horizontal)for(var o=e;o<=r;o++){var n=this._visibles[o];n instanceof i?n.$_collectHorzColumns(t,0,n.visibleCount-1):n instanceof Vn&&t.push(n._columnObj)}},i.prototype.$_changeChildVIndex=function(t,e){t&&e!=t.vindex&&e>=0&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index)},i.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&e>=0&&e<this._items.length){e=e<=i?e:e+(this._items[e].getHeaderSpan()-1)-(t.getHeaderSpan()-1);for(var r=this._items.splice(i,t.getHeaderSpan()),o=0;o<r.length;o++)this._items.splice(e+o,0,r[o]);this.$_resetVisibles(),this._childIndexChanged(t)}}},i}(Fn),Hn=function(t,e){for(var i=e,r=t.visibleCount;i<r;i++){var o=t.getVisible(i);if(o instanceof Vn)return o;if(o instanceof jn&&(o=Fn.getSource(o.first))instanceof Vn)return o}return null},Wn=function(t,e){for(var i=e;i>=0;i--){var r=t.getVisible(i);if(r instanceof Vn)return r;if(r instanceof jn&&(r=Fn.getSource(r.last))instanceof Vn)return r}return null},Gn=function(t,e){for(var i=e,r=t.visibleCount;i<r;i++){var o=t.getVisible(i);if(o instanceof Vn)return o;if(o instanceof jn&&(o=Fn.getSource(o.first))instanceof Vn)return o}return null},Un=function(t,e){for(var i=e;i>=0;i--){var r=t.getVisible(i);if(r instanceof Vn)return r;if(r instanceof jn&&(r=Fn.getSource(r.last))instanceof Vn)return r}return null},zn=function(t,e){for(var i=e,r=t.visibleCount;i<r;i++){var o=t.getVisible(i);if(o instanceof Vn)return o;if(o instanceof jn&&(o=Fn.getSource(o.first))instanceof Vn)return o}return null},Yn=function(t,e){for(var i=e;i>=0;i--){var r=t.getVisible(i);if(r instanceof Vn)return r;if(r instanceof jn)for(var o=0;o<r.visibleCount;o++){var n=r.getVisible(o);if(n instanceof Vn&&n.col==t.col)return n}}return null},qn=function t(e,i,r){for(var o=r?e.visibleCount:e.count,n=0;n<o;n++){var s=r?e.getVisible(n):e.getItem(n);if(s instanceof Vn){var a=s._columnObj;a&&i.push(a)}else s instanceof jn&&t(s,i,r)}},Kn=function t(e,i,r){for(var o=r?e.visibleCount:e.count,n=0;n<o;n++){var s=r?e.getVisible(n):e.getItem(n);s instanceof Vn?i.push(s):s instanceof jn&&t(s,i,r)}},Xn=function t(e,i,r,o,n){for(var s=o?e.visibleCount:e.count,a=0;a<s;a++){var l=o?e.getVisible(a):e.getItem(a);if(l instanceof Vn&&!n){var u=l._columnObj;u&&i.push(u.name)}else l instanceof jn&&((!r||n)&&i.push(l.name),t(l,i,r,o,n))}},Qn=function t(e,i,r){for(var o=r?e.visibleCount:e.count,n=0;n<o;n++){var s=r?e.getVisible(n):e.getItem(n);if(s instanceof Vn){var a=s._columnObj;a instanceof Tn&&i.push(a)}else s instanceof jn&&t(s,i,r)}},Jn=function(t){function e(e){var i=t.call(this,"$_root_$",null)||this;return i._owner=e,i.header._visible=!1,i}return r(e,t),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.resetColumns=function(t){this.items.length>0&&(this.$_bindColumns({},t,!1),this.$_resetVisibles(!1))},Object.defineProperty(e.prototype,"grid",{get:function(){return this._owner.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this._owner&&this._owner._changed()},e.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},e.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},e.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},e.prototype._setColumns=function(t){var e=this._items;e.length=0;for(var i=0,r=t.count;i<r;i++){var o=new Vn(t.getColumn(i));e.push(o),o._parent=this}this.resetColumns(t)},e}(jn),Zn=function(t){function e(e){var i=t.call(this)||this;return i._cellWidths=[],i._grid=e,i._root=new Jn(i),i}return r(e,t),e.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._root.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._root.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._root._hlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRows",{get:function(){return this._root._dlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._root.first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._root.last},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._root.firstColumn},enumerable:!0,configurable:!0}),e.prototype.load=function(t){return this.$_clear(),this._root._loadItems(t),this._changed(),this},e.prototype.resetColumns=function(t){this._root.resetColumns(t)},e.prototype.cleanColumns=function(){this._root.cleanColumns()},e.prototype.invalidate=function(){this._changed()},e.prototype.invalidateIndices=function(t){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearAddSelection(),this._moveColumn=t,this._changed()},e.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},e.prototype.getVisible=function(t){return this._root.getVisible(t)},e.prototype.add=function(t,e,i){(t=t||this._root).addColumn(e,i)},e.prototype.remove=function(t,e){(t=t||this._root).removeColumn(e)},e.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},e.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},e.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},e.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],r=0;r<i.length;r++)if(i[r]instanceof Vn&&i[r]._columnObj===t)return{row:e,col:r}},e.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],r=0;r<i.length;r++)if(i[r]instanceof Vn&&i[r]._columnObj===t)return{row:e,col:r}},e.prototype.getDataColumns=function(t){void 0===t&&(t=!0);var e=[];return Qn(this._root,e,t),e},e.prototype.collectColumns=function(t,e,i){var r=[];return qn(this._root,r,e),r},e.prototype.collectLayouts=function(t){var e=[];return Kn(this._root,e,!0),e},e.prototype.collectColumnNames=function(t,e,i,r){var o=[],n=this._root;return r?"string"==typeof r?n=function t(e,i){for(var o=0,n=e.count;o<n;o++){var s=e.getItem(o);if(s instanceof jn)return s.name===r?s:t(s)}}(n):r instanceof jn&&(n=r):n=this._root,n?(Xn(n,o,t,e,i),o):null},e.prototype.collectDataColumns=function(t,e){var i=t.col>e.col?e.col:t.col,r=t.col>e.col?t.col:e.col,o=[];Qn(this._root,o,!0);for(var n=o.length-1;n>=0;n--){var s=o[n].layout.col;(s<i||s>r)&&o.splice(n,1)}return o},e.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,r=[];return this._root.$_collectHorzColumns(r,t,i),r},e.prototype.getHomeOf=function(t){return t=Fn.getSource(t),t=this._dataCells[t?t.row:0][0],Fn.getSource(t)},e.prototype.getEndOf=function(t){t=Fn.getSource(t);var e=this._dataCells,i=t?t.row:e.length-1;return t=e[i][e[i].length-1],Fn.getSource(t)},e.prototype.getTopOf=function(t){return t=this._dataCells[0][t.col],Fn.getSource(t)},e.prototype.getBottomOf=function(t,e){var i=this._dataCells;return t=i[i.length-1][t.col],e?t:Fn.getSource(t)},e.prototype.getLowerOf=function(t){t=Fn.getSource(t);var e=this._dataCells,i=t.row,r=t.col,o=0;return i+t.rows<e.length?t=e[i+t.rows][r]:(o=1,t=e[0][r]),{dy:o,layout:Fn.getSource(t)}},e.prototype.getUpperOf=function(t){t=Fn.getSource(t);var e=this._dataCells,i=t.row,r=t.col,o=0;return i>0?t=e[i-1][r]:(o=-1,t=e[e.length-1][r]),{dy:o,layout:Fn.getSource(t)}},e.prototype.getRightOf=function(t){var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?(t=e[i+t.cspan],Fn.getSource(t)):null},e.prototype.getLeftOf=function(t){t=Fn.getSource(t);var e=this._dataCells[t.row],i=t.col;return i>0?(t=e[i-1],Fn.getSource(t)):null},e.prototype.getCellWidths=function(t,e){for(var i=0,r=0;r<e;r++)i+=this._cellWidths[r+t];return i},e.prototype.getLayout=function(t,e,i,r,o,n){function s(a){var l,u;if(a instanceof Vn){var h=a.firstColumn;if(h)return c=(c=h.visible&&a.visible||i)&&o.indexOf(h.name)<0||r.indexOf(h.name)>=0,(d=a.toProxy(!1)).visible=t?c:a.visible,d.width=(t&&e?a._fitWidth:a._cellWidth)||a.width,d.column=h.name,d}else{if(a.isProxy)return(t&&e?a._fitWidth:a._cellWidth)||a.width;if(a instanceof jn){var c,d;u=a._items,l=[],c=(c=a.visible||i)&&o.indexOf(a.name)<0||r.indexOf(a.name)>=0;for(var p=0,f=u.length;p<f;p++)l.push(s.call(this,u[p]));if((d=a.toProxy(!1)).name=a.name,d.items=l,d.visible=t?c:a.visible,d.header=a.header&&a.header.toProxy(!1),t&&d.expandable)switch(n){case"current":break;case"expand":d.expanded=!0;break;case"collapse":d.expanded=!1;break;default:d.expandable=!1}return delete d.width,d}}}void 0===r&&(r=[]),void 0===o&&(o=[]),e=e&&!!this.grid.layoutManager.isColumnFitted;for(var a=this._root._items,l=[],u=0,h=a.length;u<h;u++)l.push(s.call(this,a[u]));return l},e.prototype.expandAll=function(t,e){this._root.expandAll(t,e)},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateLayout()}},e.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},e.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1,this._moveColumn=null},e.prototype.$_refresh2=function(t,e){this._root.$_bindColumns({},t,!0),this._root.$_parseExpandLayouts(),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e)},e.prototype.$_prepareMerges=function(t){for(var e=this.collectColumns(!0,!0,!1),i=0,r=e.length;i<r;i++){var o=e[i],n=this.layoutByColumn(o);if(n&&n.canMerge()){var s=n.merges;s||(s=new bn(n)),s.clear(),s.initialize(10),s.refreshRooms(0,t.itemCount-1,!0)}}},e.prototype.$_prepareLayout=function(t,e,i){for(var r=0,o=this._root.visibleCount;r<o;r++)this._root.getVisible(r)._prepareLayout(t,r<e,r>=o-i)},e.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i),this.$_parseDataCells(i)},e.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,r=0,o=t;r<o.length;r++){var n=o[r];i=Math.max(i,n.headerRows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},e.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,r=0,o=t;r<o.length;r++){var n=o[r];i=Math.max(i,n.rows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e);for(var a=0,l=e;a<l.length;a++)for(var u=l[a],h=0;h<u.length;){var c=u[h];if(c._defColSpan=1,c.isNull)h++;else for(;++h<u.length;){var d=u[h];if(!(!d||d.isProxy&&d.source===c||d.isNull&&d.group===c.group))break;c._defColSpan++}}},e.prototype.$_calculateCellWidths=function(t,e){if(this._dirty){(!this._cellWidths||this._cellWidths.length<=0||!this._moveColumn)&&(t._width=t.$_collectCellWidths(e),t.$_arrangeCellWidths());for(var i=this._cellWidths=[],r=0,o=t.cols;r<o;r++)i.push(0);t.$_calcCellWidths(this._dataCells,i,!1)}else this._resized&&t.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},e.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},e.prototype._columnsChanged=function(t){},e.prototype._columnChanged=function(t){},e.prototype._itemIndexChanged=function(t){this.invalidateIndices(t)},e.prototype._itemWidthChanged=function(t){this.invalidateSize()},e.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},e.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},e.prototype.$_changeCellWidths=function(t,e,i){for(var r=this._cellWidths,o=[],n=0,s=0;s<e;s++)n+=r[t+s],o.push(n);var a=i/n;for(s=0;s<e-1;s++)o[s]=Math.round(o[s]*a);for(o[e-1]=i,s=e-1;s>0;s--)r[t+s]+=o[s]-o[s-1];r[t]+=o[0],this.invalidateSize()},e.prototype.$_calcGroupWidths=function(){var t=this._cellWidths;!function e(i){for(var r=0,o=0;o<i._clen;o++)r+=t[i.col+o];i._width=i._cellWidth=r;for(var n=0,s=i.visibles;n<s.length;n++){var a=s[n];a instanceof jn&&e(a)}}(this._root)},e}(fe),ts=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._columnsChanged=function(e){this.setColumns(e),t.prototype._columnsChanged.call(this,e)},e}(Zn);(Bn=t.VerticalMoveStep||(t.VerticalMoveStep={})).ROW="row",Bn.CELL="cell";var es,is,rs=function(e){function i(t,i,r){void 0===i&&(i=-1);var o=e.call(this,!0)||this;return o._itemIndex=-1,o._grid=t,o._itemIndex=i,o._layout=r instanceof Pn?r.layout:r,o}return r(i,e),i.temp=function(t,e,r){return void 0===e&&(e=0),i.$_temp||(i.$_temp=new i),i.$_temp._grid=t,i.$_temp._itemIndex=e,i.$_temp._layout=r instanceof Fn?r:r&&r.layout,i.$_temp},i.areEquals=function(t,e){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},i.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},i.clearTemp=function(){i.$_temp&&(i.$_temp=i.$_temp.dispose())},i.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},i.prototype._doDispose=function(){this._grid=null,this._layout=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataColumn",{get:function(){var t=this.column;return t instanceof Tn?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueColumn",{get:function(){var t=this.column;return t instanceof Dn?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataField",{get:function(){var t=this.dataColumn;return t instanceof Tn?t.dataIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){if(this._grid){var e=this._grid.getItemOfRow(t,!1);e&&(this.itemIndex=e.index)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.column;if(t instanceof Tn){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||this._itemIndex>=0&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowFixed",{get:function(){if(this._grid){var t=this._grid.layoutManager;return this._itemIndex>=0&&this._itemIndex<t.fixedItemCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):jn.isTop(this._layout))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):jn.isBottom(this._layout))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLeft",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&jn.isLeft(this._layout):0==this._layout.vindex}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isRight",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&jn.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFirst",{get:function(){return!!(this._layout&&this._grid&&this._grid.visibleLayoutCount>0)&&Fn.getSource(this._grid.activeCellLayout.first)===this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var e=t.collectColumns(!0,!0,!0),r=e.indexOf(this._layout.firstColumn);if(r>=0){for(var o=r;o--;){var n=e[o];if(n instanceof Ln)return!1;var s=i.temp(t,this.itemIndex,n);if(t.getWritableAt(s))return!1}return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var e=t.collectColumns(!0,!0,!0),r=e.indexOf(this._layout.firstColumn)+1,o=e.length;r<o;r++){var n=e[r];if(n instanceof Ln)return!1;var s=i.temp(t,this.itemIndex,n);if(t.getWritableAt(s))return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isLast",{get:function(){return!!(this._layout&&this._grid&&this._grid.visibleLayoutCount>0)&&Fn.getSource(this._grid.activeCellLayout.last)===this._layout},enumerable:!0,configurable:!0}),i.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof Pn?e.layout:e,this},i.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},i.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},i.prototype.clone=function(){return new i(this._grid,this._itemIndex,this._layout)},i.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},i.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},i.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},i.prototype.first=function(){this._grid&&(this._itemIndex=0)},i.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},i.prototype.right=function(){var t=this._grid&&this.$_gridLayout().getRightOf(this._layout);t&&(this._layout=t)},i.prototype.left=function(){var t=this._grid&&this.$_gridLayout().getLeftOf(this._layout);t&&(this._layout=t)},i.prototype.next=function(){var t=ns(this._grid,this._layout);if(t)return this._layout=t,!0},i.prototype.prev=function(){var t=ss(this._grid,this._layout);if(t)return this._layout=t,!0},i.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},i.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},i.prototype.firstCell=function(){this._layout=this._grid&&Fn.getSource(this.grid.activeCellLayout.first)},i.prototype.lastCell=function(){this._layout=this.grid&&Fn.getSource(this.grid.activeCellLayout.last)},i.prototype.down=function(e,i,r){void 0===e&&(e=t.VerticalMoveStep.ROW),this._grid&&(e==t.VerticalMoveStep.ROW&&!i||this.isBottom||r?this._itemIndex<this._grid.itemCount-1&&(e==t.VerticalMoveStep.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},i.prototype.up=function(e,i,r){if(void 0===e&&(e=t.VerticalMoveStep.ROW),this._grid)if(e==t.VerticalMoveStep.ROW&&!i||this.isTop||r){if(this._itemIndex>0){if(e==t.VerticalMoveStep.CELL)if(this._grid.spanned){var o=this._grid.$_getUpperOfCell(this);this._layout=o||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout},i.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},i.prototype.assignFrom=function(t){t instanceof i?(this._grid=t._grid,this._layout=t._layout,this._itemIndex=t._itemIndex):e.prototype.assignFrom.call(this,t)},i.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},i.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},i.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},i}(Ct),os=function(t){function e(e,i,r){var o=t.call(this,e,i&&i.index,r)||this;return o._item=i,o}return r(e,t),e.tempItem=function(t,i,r){return e.$_itemTemp||(e.$_itemTemp=new e),e.$_itemTemp._grid=t,e.$_itemTemp._item=i,e.$_itemTemp._itemIndex=i.index,e.$_itemTemp._layout=r instanceof Fn?r:r&&r.layout,e.$_itemTemp},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e}(rs),ns=function(t,e){if(!t||!e)return null;var i=t.layoutManager,r=jn.getNext(e);if(r)return r;for(var o=(e.group?e.root.vindex:e.vindex)+1,n=i.layoutCount;o<n;o++){if((r=i.getLayout(o))instanceof Vn)return r;if(r instanceof jn&&(r=Fn.getSource(r.first)))return r}},ss=function(t,e){if(!t||!e)return null;var i=t.layoutManager,r=jn.getPrev(e);if(r)return r;for(var o=(e.group?e.root.vindex:e.vindex)-1;o>=0;o--){if((r=i.getLayout(o))instanceof Vn)return r;if(r instanceof jn&&(r=Fn.getSource(r.last)))return r}},as=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return r(e,t),e.$_setRange=function(t,e,i,r,o){return t._row1=e<=r?e:r,t._row2=e<=r?r:e,t._col1=i.col<=o.col?i:o,t._col2=i.col<=o.col?o:i,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,t.layout,i.itemIndex,i.layout);var r=new e;return r._row1=r._row2=t.itemIndex,r._col1=r._col2=t.layout,r},e.temp=function(t,i){var r=e.$_TEMP;return i&&t!==i?e.$_setRange(r,t.itemIndex,t.layout,i.itemIndex,i.layout):(r._row1=r._row2=t.itemIndex,r._col1=r._col2=t.layout,r)},e.createRange=function(t,i,r,o){return e.$_setRange(new e,t,i,r,o)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c1",{get:function(){return this._col1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c2",{get:function(){return this._col2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new rs;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new rs;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){if(e){var i=e.col;return t>=this._row1&&t<=this._row2&&i>=this._col1.col&&i<=this._col2.col}return!1},e.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var e=this._col1;this._col1=this._col2,this._col2=e}}else e=this._col1,this._col1=this._col2,this._col2=e;return this},e.prototype.normalizeData=function(){return this.normalize(),this},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(Ct),ls=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_COUNT:return this._getCount();case e.ID_SUM:return this._getSum();case e.ID_MAX:return this._getMax();case e.ID_MIN:return this._getMin();case e.ID_AVG:return this._getAvg();case e.ID_VAR:return this._getVar();case e.ID_VARP:return this._getVarp();case e.ID_STDEV:return this._getStdev();case e.ID_STDEVP:return this._getStdevp();case e.ID_DATA_COUNT:return this._getDataCount();case e.ID_DATA_AVG:return this._getDataAvg()}throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new It("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new It("Invalid identifier indexer: "+t)},e.ID_COUNT=0,e.ID_SUM=1,e.ID_MAX=2,e.ID_MIN=3,e.ID_AVG=4,e.ID_VAR=5,e.ID_VARP=6,e.ID_STDEV=7,e.ID_STDEVP=8,e.ID_DATA_COUNT=9,e.ID_DATA_AVG=10,e.IDENTS={count:e.ID_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,var:e.ID_VAR,varp:e.ID_VARP,stdev:e.ID_STDEV,stdevp:e.ID_STDEVP,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(Dt),us=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,t.prototype._doDispose.call(this)},e.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},e.prototype.isIdentifier=function(e){return e=e.toLowerCase(),ls.IDENTS.hasOwnProperty(e)?ls.IDENTS[e]:t.prototype.isIdentifier.call(this,e)},e.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new It("Data field index out of bounds: "+e);switch(t){case ls.ID_SUM:return this._summarizer.getSum(e);case ls.ID_COUNT:return this._summarizer.getCount(e);case ls.ID_MAX:return this._summarizer.getMax(e);case ls.ID_MIN:return this._summarizer.getMin(e);case ls.ID_AVG:return this._summarizer.getAvg(e);case ls.ID_VAR:return this._summarizer.getVar(e);case ls.ID_VARP:return this._summarizer.getVarp(e);case ls.ID_STDEV:return this._summarizer.getStdev(e);case ls.ID_STDEVP:return this._summarizer.getStdevp(e);case ls.ID_DATA_COUNT:return this._summarizer.getDataCount(e);case ls.ID_DATA_AVG:return this._summarizer.getDataAvg(e)}throw new It("Invalid identifier indexer: "+t)}switch(t){case ls.ID_SUM:case ls.ID_COUNT:return 0;case ls.ID_MAX:case ls.ID_MIN:case ls.ID_AVG:case ls.ID_VAR:case ls.ID_VARP:case ls.ID_STDEV:case ls.ID_STDEVP:return NaN}},e.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var r=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(r<0||r>=this._fieldCount)throw new It("Data field index out of bounds: "+r);switch(t){case ls.ID_SUM:return this._summarizer.getSum(r);case ls.ID_COUNT:return this._summarizer.getCount(r);case ls.ID_MAX:return this._summarizer.getMax(r);case ls.ID_MIN:return this._summarizer.getMin(r);case ls.ID_AVG:return this._summarizer.getAvg(r);case ls.ID_VAR:return this._summarizer.getVar(r);case ls.ID_VARP:return this._summarizer.getVarp(r);case ls.ID_STDEV:return this._summarizer.getStdev(r);case ls.ID_STDEVP:return this._summarizer.getStdevp(r)}throw new It("Invalid identifier indexer: "+t)}switch(t){case ls.ID_SUM:case ls.ID_COUNT:return 0;case ls.ID_MAX:case ls.ID_MIN:case ls.ID_AVG:case ls.ID_VAR:case ls.ID_VARP:case ls.ID_STDEV:case ls.ID_STDEVP:return NaN}},e.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},e.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},e.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},e.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},e.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},e.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},e.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},e.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},e.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},e.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},e.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},e}(ls),hs=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.setItem=function(t){this._item=t},e.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},e.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},e.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},e.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},e.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},e.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},e.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},e.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},e.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},e.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},e.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},e}(us),cs=function(t){function e(e){var i=t.call(this)||this;return i._columns=[],i._orgColumns=[],i._nameMap={},i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._columns.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns.slice()},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(t){return this._columns[t]},e.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var r=i[e],o=this._addColumn(r);if(!o)throw new Error("column is undefined");o.$_owner=this}this._orgColumns=this._columns.slice()},e.prototype.add=function(t,e){var i=this._addColumn(t,void 0===e?-1:e);return null!=i&&(i.$_owner=this),i},e.prototype.remove=function(t){return!!this._removeColumn(t)},e.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},e.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,r=this._columns.length;i<r;i++){var o=this._columns[i];o instanceof Tn&&(o.sortOrder=e.indexOf(o.dataIndex),o.sortDirection=t[o.sortOrder])}},e.prototype.columnByName=function(t){return this._nameMap[t]},e.prototype.columnByField=function(t){if(t>=0)for(var e=0,i=this.count;e<i;e++){var r=this.getColumn(e);if(r instanceof Tn&&r.dataIndex==t)return r}return null},e.prototype.columnsByField=function(t){var e=[];if(t>=0)for(var i=0,r=this.count;i<r;i++){var o=this.getColumn(i);o instanceof Tn&&o.dataIndex==t&&e.push(o)}return e},e.prototype.columnByTag=function(t){if(t)for(var e=0,i=this.count;e<i;e++){var r=this.getColumn(e),o=r.tag;if(ft.isArray(t)&&ft.equalArrays(t,o)||t instanceof Date&&o instanceof Date&&t.getTime()===o.getTime()||"object"==typeof t&&"object"==typeof o&&ft.equalObjects(t,o)||o===t)return r}return null},e.prototype.columnsByTag=function(t){if(t){for(var e=[],i=0,r=this.count;i<r;i++){var o=this.getColumn(i),n=o.tag;(ft.isArray(t)&&ft.equalArrays(t,n)||t instanceof Date&&n instanceof Date&&t.getTime()===n.getTime()||"object"==typeof t&&"object"==typeof n&&ft.equalObjects(t,n)||n===t)&&e.push(o)}return e.length?e:null}return null},e.prototype.restoreColumns=function(){this._restoreColumn()},e.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if(!t||t instanceof Pn||("string"==typeof t&&(t={fieldName:t}),t=Zh.createColumn(t)),t instanceof Pn){if(i.indexOf(t)>=0)throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var r=t.name;if(!r||this._nameMap[r])if(r=t instanceof Tn?t.fieldName:t instanceof Ln?"series":"column",this._nameMap[r]){for(var o=0;o<1e3;o++)if(!this._nameMap[r+o]){t.name=r+=o;break}}else t.name=r;return r&&(this._nameMap[r]=t),t}return null},e.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return e>=0&&(this._columns.splice(e,1),t.$_owner=void 0,!0)},e.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},e.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++)e[t].dispose()},e}(Ct),ds=function(e){function i(){var i=e.call(this,"headerCell")||this;return i._itemOffset=2,i._itemGap=2,i._checkLocation=t.ColumnHeaderItemLocation.NONE,i._checked=!1,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){this._edgeMark=t},enumerable:!0,configurable:!0}),i}(Gr),ps=function(e){function i(i){var r=e.call(this,i)||this;return r._minRowHeight=21,r._minHeight=23,r._height=0,r._resizable=!1,r._itemOffset=2,r._itemGap=2,r._showSelection=!1,r._showTooltip=!1,r._sortWidth=16,r._sortHeight=16,r._filterWidth=16,r._filterHeight=16,r._popupWidth=16,r._popupHeight=16,r._expanderWidth=16,r._expanderHeight=16,r._checkWidth=16,r._checkHeight=16,r._showPopupMenu=t.HandleVisibility.VISIBLE,r._cell=new ds,r.visible=!0,r}return r(i,e),i.prototype._doDispose=function(){this._cell=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayHeight",{get:function(){return this._grid.headerView.height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(t){if(t!=this._heights){t=ft.makeArray(t,!0),this._heights=t&&t.slice();for(var e=0;e<this._heights.length;e++)this._heights[e]=Math.max(this._minRowHeight,isNaN(this._heights[e])?this._minRowHeight:this._heights[e]);this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanderWidth",{get:function(){return this._expanderWidth},set:function(t){t!=this._expanderWidth&&(this._popupWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanderHeight",{get:function(){return this._expanderHeight},set:function(t){t!=this._expanderHeight&&(this._popupHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),i.prototype.setCalcHeights=function(t){this._calcHeights=t.slice()},i.prototype.getCalcHeights=function(){return this._calcHeights},i.prototype.getCell=function(t){var e=this._cell;e.setLayout(t);var i=t instanceof jn?t.header:t.firstColumn.header;if(i&&(e.text=i.displayText,e.template=i.realizeTemplate(),e.showTooltip=i.showTooltip,e.tooltip=i.tooltip,e.edgeMark=i.edgeMark,i instanceof En)){var r=t.firstColumn,o=void 0;e.index.set(-1,t.firstColumn),e.itemOffset=void 0===(o=i.itemOffset)?this._itemOffset:o,e.itemGap=void 0===(o=i.itemGap)?this._itemGap:o,e.checkLocation=i.checkLocation,e.checked=r.checked}return e},i.prototype.getStyleName=function(){return this._styleName},i}(Ar),fs=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},e.prototype.setCell=function(t){this._cell=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._cell.value;case e.ID_FIELD:return this._cell.index.dataField;case e.ID_LEVEL:return this._cell.level}throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){},e.prototype.evaluateIndexerS=function(t,e,i){},e.ID_VALUE=0,e.ID_FIELD=1,e.ID_LEVEL=2,e.IDENTS={value:e.ID_VALUE,field:e.ID_FIELD,level:e.ID_LEVEL},e}(Dt),_s=function(e){function i(t){var i=e.call(this,t)||this;return i._childIndex=0,i._error=null,i._errorDetail=null,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"errorDetail",{get:function(){return this._errorDetail},enumerable:!0,configurable:!0}),i.prototype.calculate=function(){var e=this.valueColumn,i=e&&e.grid;if(this._value=NaN,this._error=null,i&&i.itemSource.summaryMode!=t.SummaryMode.NONE){var r=this._getSummary(e,this._childIndex),o=r&&r.expression,n=void 0;try{if(o&&i.dataCount>0&&e instanceof Tn&&e.dataIndex>=0){var s=i.columnSummaryRuntime;s.setColumn(e,i.summarizer),n=r.evaluate(s,this._childIndex)}var a=r&&r.valueCallback;a&&(n=a(i.handler,e,this._childIndex,r,n)),this._value=n}catch(t){this._error=t,this._errorDetail=t}}},Object.defineProperty(i.prototype,"text",{get:function(){if(this._error)return Gr.ERROR},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),i.prototype.getDisplayText=function(t){var e,i=this._value,r=this.valueColumn,o="";if(void 0!==i&&r)if("string"==typeof i)o=i+"";else if("boolean"==typeof i)o=String(i);else if(i instanceof Date){var n=t.datetimeWriter;o=n?n.getText(this._value):String(i)}else if("number"!=typeof i||isNaN(i))null==i&&(o="");else{var s=t.numberFormatter;o=s?s.getText(i):String(i)}if(o){var a=t.prefix;a&&(o=a+o),(a=t.suffix)&&(o+=a)}return!o&&r&&(o=null===(e=this._getSummary(r,this._childIndex))||void 0===e?void 0:e.text),o},i.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},i.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0},i}(Gr),gs=function(t){function e(){return t.call(this,"footerCell")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)},enumerable:!0,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.footers.get(e)},e}(_s),ys=function(t){function e(e){var i=t.call(this,e)||this;return i._minHeight=23,i._height=0,i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._childIndex=0,i._displayIndex=0,i._runtime=new fs,i._cell=i._createCell(),i.visible=!0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._displayIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},e.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!0);var r,o=t.getSummary(),n=this._cellStyleCallback;n&&(r=n(this._grid.handler,t),e.assign(r)),o&&(n=o.styleCallback)&&(r=n(this._grid.handler,t),e.assign(r));var s=e.styleName||o&&o.styleName||"";return i&&(e.styleName=this.getCellStyleName()+" "+s),e},e.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},e}(Ar),ms=function(t){function e(e){return t.call(this,e)||this}return r(e,t),Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},enumerable:!0,configurable:!0}),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new gs},e.CELL_CSS="rg-footer-cell",e}(ys),bs=function(t){function e(e){var i=t.call(this,e)||this;i._items=[],i._visibles=[];var r=i._createSummary(e);return r.$_owner=i,i._items.push(r),i._visibles.push(i._items[0]),i}return r(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++)i[e].dispose();this._items=null,this._visibles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"canShow",{get:function(){return this.visible&&this._visibles.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.getVisible=function(t){return this._visibles[t]},e.prototype.isVisible=function(){return this.visible&&this.visibleCount>0},e.prototype.assignFrom=function(e){var i;if(t.prototype.assignFrom.call(this,e),e&&e.items?i=ft.makeArray(e.items):ft.isArray(e)&&(i=e),i){for(var r=this._items,o=i.length;r.length>o;)r.pop().dispose();r.length=o;for(var n=0,s=i.length;n<s;n++){var a=i[n];a&&(r[n]||(r[n]=this._createSummary()),r[n].assignFrom(a),r[n].$_owner=this)}this.$_resetVisibles()}},e.prototype.clean=function(){for(var t=0,e=this._items;t<e.length;t++)e[t].clean()},e.prototype.toProxy=function(){for(var e=t.prototype.toProxy.call(this),i=[],r=0;r<this._items.length;r++)i.push(this._items[r].toProxy());return i.length>0&&(e.items=i.slice()),e},e.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},e.prototype.$_resetVisibles=function(){this._visibles.length=0;for(var t=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this.owner&&this.owner.refreshView()},e}(Ar),vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._createSummary=function(t){return new ms(t||this._grid)},e}(bs),ws=function(t){function e(e){var i=t.call(this,e)||this;return i._displayOrder=0,i._headText=null,i._footText=null,i._sumText=null,i._headCell=i._createHeadCell(),i._footCell=i._createFootCell(),i._sumCell=i._createSumCell(),i._filterCell=i._createFilterCell(),i.visible=!0,i}return r(e,t),Object.defineProperty(e.prototype,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.getHeadCell=function(){return this._headCell},e.prototype.getFootCell=function(){return this._footCell},e.prototype.getSumCell=function(){return this._sumCell},e.prototype.getFilterCell=function(){return this._filterCell},e.prototype._createHeadCell=function(){return new Ur(this)},e.prototype._createFootCell=function(){return new Ur(this)},e.prototype._createSumCell=function(){return new Ur(this)},e.prototype._createFilterCell=function(){return new Ur(this)},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this._visChanged=!0},e}(Ar);(es=t.IndicatorValue||(t.IndicatorValue={})).NONE="none",es.INDEX="index",es.ROW="row",(is=t.StateMark||(t.StateMark={})).IMAGE="image",is.TEXT="text",is.NONE="none";var Cs,xs,Is,Ss=function(e){function i(i){var r=e.call(this,"indicatorCell")||this;return r._itemState=t.ItemState.NORMAL,r._indicator=i,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"indicator",{get:function(){return this._indicator},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){var e,i=this._indicator,r=this.index,o=r.item,n="";if(o&&o.itemState==t.ItemState.NORMAL)switch(i.displayValue){case t.IndicatorValue.INDEX:(e=i.owner.getIndicatorIndex(o))>=0&&(e+=i.indexOffset,i.zeroBase||e++,n=String(e));break;case t.IndicatorValue.ROW:o.isDataRow&&(e=r.dataRow,e+=i.rowOffset,i.zeroBase||e++,n=String(e))}return n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),i}(Gr),Es=function(e){function i(i){var r=e.call(this,i)||this;return r._displayValue=t.IndicatorValue.INDEX,r._zeroBase=!1,r._indexOffset=0,r._rowOffset=0,r._minWidth=32,r._maxWidth=0,r._width=0,r._selectable=!0,r._mark=t.StateMark.IMAGE,r._showFocus=!0,r._showSelection=!0,r._displayWidth=0,r._cell=new Ss(r),r.headText="No.",r.footText="\u03a3",r.sumText="\u03a3",r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayWidth",{get:function(){return this._displayWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.getCellType=function(){return"indicator"},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 0},enumerable:!0,configurable:!0}),i.prototype.getCell=function(e){var i=this._cell;if(i.setIndex(e),e.item){var r=e.item.itemState;r==t.ItemState.NORMAL&&this._grid.focusedIndex.itemIndex==e.itemIndex&&(r=t.ItemState.FOCUSED),i.itemState=r}return i},i.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},i.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},i.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},i.prototype.getFilterStyleName=function(){return"rg-rowindicator-filter"},i}(ws),ks=function(t){function e(e){var i=t.call(this,"stateBarCell")||this;return i._bar=e,i}return r(e,t),e.prototype._doDispose=function(){this._bar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(Gr),Os=function(e){function i(i){var r=e.call(this,i)||this;return r._width=20,r._mark=t.StateMark.IMAGE,r._stateTexts={},r._errorVisible=!1,r._stateTexts[t.RowState.CREATED]="C",r._stateTexts[t.RowState.UPDATED]="U",r._stateTexts[t.RowState.DELETED]="D",r._stateTexts[t.RowState.CREATE_AND_DELETED]="X",r._cell=new ks(r),r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stateTexts",{get:function(){return p({},this._stateTexts)},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.getCellType=function(){return"state"},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 1e3},enumerable:!0,configurable:!0}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},i.prototype.getHeadStyleName=function(){return"rg-statebar-head"},i.prototype.getFootStyleName=function(){return"rg-statebar-foot"},i.prototype.getSumStyleName=function(){return"rg-statebar-sum"},i.prototype.getFilterStyleName=function(){return"rg-statebar-filter"},i}(ws),Rs=function(t){function e(){return t.call(this,"checkBarCell")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"getText",{get:function(){return String(this.index.dataRow)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.item.checked},enumerable:!0,configurable:!0}),e}(Gr),Ps=function(e){function i(i){var r=e.call(this,i)||this;return r._width=20,r._exclusive=!1,r._showAll=!0,r._showGroup=!0,r._visibleOnly=!1,r._checkableOnly=!0,r._syncHeadCheck=!1,r._useImages=!1,r._checkLocation=t.ColumnHeaderItemLocation.TOP,r._itemGap=5,r._fieldIndex=-1,r._breakMergeOnEmpty=!1,r._cell=new Rs,r._merged=!1,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._grid.itemSource.setGroupCheckable(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid._checkFieldIndex(this._fieldIndex),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldIndex",{get:function(){return this._fieldIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?Ms.createRule(t):null,this._changed(),this.owner._columnMergeRuleChanged(null))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},i.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},i.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},i.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},i.prototype.getFilterStyleName=function(){return"rg-checkbar-filter"},i.prototype.canMerge=function(){return null!=this._mergeRuleObj},i.prototype.getCellType=function(){return"check"},Object.defineProperty(i.prototype,"staticOrder",{get:function(){return 2e3},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"merges",{get:function(){return this._merges},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"merged",{get:function(){return this._merged},enumerable:!0,configurable:!0}),i}(ws),Ds=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return r(e,t),e.$_setRange=function(t,e,i){return t._row1=e<=i?e:i,t._row2=e<=i?i:e,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,i.itemIndex);var r=new e;return r._row1=r._row2=t.itemIndex,r},e.temp=function(t,i){var r=e.$_TEMP;return i&&t!==i?e.$_setRange(r,t.itemIndex,i.itemIndex):(r._row1=r._row2=t.itemIndex,r)},e.createRange=function(t,i){return e.$_setRange(new e,t,i)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new rs;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new rs;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,t},enumerable:!0,configurable:!0}),e.prototype.contains=function(t){return t>=this._row1&&t<=this._row2},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(Ct),Ts=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._ds=null,e._fieldCount=0,e}return r(e,t),e.prototype._doDispose=function(){this._item=null,this._ds=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setCell=function(t){this._item=t.item},e.prototype.setItem=function(t){this._item=t},e.prototype.clear=function(){this._item=null,this._ds=null},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_GROUP:return this._item.parent}throw new It("Invalid identifier key: "+t)}},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new It("Data field index out of bounds:"+i);return this._item.getData(i)}throw new It("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,r){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new It("Invalid identifier indexer: "+t);if(this._ds){var o=r?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(o<0||o>=this._fieldCount)throw new It("Data field is not exists:"+i);return this._item.getData(o)}},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.ID_GROUP=5,e.ID_PREV_VALUES=6,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES,group:e.ID_GROUP,prevvalues:e.ID_PREV_VALUES},e}(Dt),Ls={},Ms=function(t){function e(i){var r=t.call(this)||this;return r._runtime=e.$_runtime=e.$_runtime||new Ts,r.criteria=i,r}return r(e,t),e.createRule=function(t){var i="string"==typeof t?t:t&&t.criteria;return i?new e(i):null},e.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?ue.Default.parse(t,null):null,this._changed())},enumerable:!0,configurable:!0}),e.prototype.parseInit=function(t,e,i,r,o){var n=this._checkBar.breakMergeOnEmpty,s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((r=Math.min(a-i,r))<1||l<=0)){this._runtime.setDataSource(t.dataSource);for(var u=null;i<a&&(u=t.getItem(i),!this.$_isRow(u,!1));)o[i]=i+1,i++;if(!(i>=a)){this._runtime.setItem(u);var h=this._exprNode.evaluate(this._runtime),c=u.checked,d=i;if(o[d]=d+1,!(u.dataRow>=l)){this._runtime.setItem(u);for(var p=i+1;p<a;p++)if(u=t.getItem(p),this.$_isRow(u,!1)){if(u.dataRow>=l)break;this._runtime.setItem(u);var f=this._exprNode.evaluate(this._runtime),_=u.checked;if(p==s||void 0===f&&n||(f instanceof Date&&h instanceof Date?+f!=+h:f!=h)||_!=c){if(p>=r)break;d=p,h=f,c=_}o[p]=d+1}else{if(p>=r)break;h=Ls,d=p,o[p]=d+1}}}}},e.prototype.parseBounds=function(t,e,i,r,o){var n=this._checkBar.breakMergeOnEmpty,s=t.itemCount;if(!(s<1)){var a,l,u,h=t.fixedCount,c=Ls,d=Math.max(0,i),p=d,f=-1;if(this._runtime.setDataSource(t.dataSource),d>0&&o[d]<=0){var _=t.getItem(d);if(this.$_isRow(_,!1)){for(this._runtime.setItem(_),l=this._exprNode.evaluate(this._runtime),u=_.checked,d--;d>=0&&(_=t.getItem(d),this.$_isRow(_,!1))&&(this._runtime.setItem(_),c=this._exprNode.evaluate(this._runtime),a=_.checked,!(d==h||void 0===c&&n||(c instanceof Date&&l instanceof Date?+c!=+l:c!=l)||u!=a));)d--;for(var g=p-1;g>d;g--)o[g]=d+2;p-1>d&&(f=d+1)}else{for(o[d]=d+1,g=p-1;g>d;g--)o[g]=d+2;for(p-1>d+1&&(f=d+2),d--;d>=0&&o[d]<=0&&!this.$_isRow(t.getItem(d),!1);)o[d]=d+1,d--}}for(d=Math.max(0,i);d<=r&&o[d]>0;)d++;for(;d<=r&&!this.$_isRow(t.getItem(d),!1);)o[d]=d+1,d++;if(d<r){for(p=d,_=t.getItem(d),this._runtime.setItem(_),l=this._exprNode.evaluate(this._runtime),u=_.checked,d++;d<s;)if(_=t.getItem(d),this.$_isRow(_,!1)){if(this._runtime.setItem(_),c=this._exprNode.evaluate(this._runtime),a=_.checked,d==h||void 0===c&&n||(c instanceof Date&&l instanceof Date?+c!=+l:c!=l)||u!=a){var y=p;for(f>=0&&(y=f,f=-1),g=p;g<d;g++)o[g]=y+1;if(d>=r)break;l=c,u=a,p=d}else o[d]=p+1;d++}else{for(y=p,f>=0&&(y=f,f=-1),g=p;g<d;g++)o[g]=y+1;for(o[d]=d+1,d++;d<s&&!this.$_isRow(t.getItem(d),!1);)o[d]=d+1,d++;if(p=d,d>=r)break}if(d==s&&(c instanceof Date&&l instanceof Date?+c==+l:c==l)||u!=a)for(y=f>=0?f:p,g=p;g<d;g++)o[g]=y+1}}},e.prototype.$_isRow=function(t,e){var i=t instanceof yr&&!(t instanceof Ir);if(i&&!e){var r=t.parent;i=r.expanded||r.firstItem!==t}return i},e.$_runtime=null,e}(dn),Fs=function(t){function e(e,i){var r=t.call(this)||this;return r._checkBar=i,r._head=e.top,r._tail=e.bottom,r}return r(e,t),e.borrow=function(t,i){var r=e.$_rooms.pop();return r?(r._head=t.top,r._tail=t.bottom):r=new e(t,i),r},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,null):t=new rs(this._checkBar.owner,this._head,null),t},e.prototype.getTail=function(t){return t?t.set(this._tail,null):t=new rs(this._checkBar.owner,this._tail,null),t},e.prototype.isHead=function(t){return t.itemIndex==this._head},e.prototype.isTail=function(t){return t.itemIndex==this._tail},e.prototype.contains=function(t){return t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e}(yn),Ns=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._nextId=0,i._checkBar=e,e._merges=i,i}return r(e,t),e.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._checkBar.owner,i=e.itemSource,r=this._checkBar._mergeRuleObj;if(r){for(var o=this._flags=new Array(i.itemCount),n=e.fixedOptions.mergeRows?0:i.fixedCount,s=i.itemCount;s--;)o[s]=0;r._checkBar=this._checkBar,r.parseInit(i,-1,n,t,o)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._nextId=0,this._inited&&this._flags&&!(e<t)){var r=this._checkBar.owner;if(r){var o=this._rooms,n=r.layoutManager.fixedItemCount,s=r.itemSource,a=this._checkBar._mergeRuleObj,l=0;if(this._fixedRooms.length=0,this._rooms.length=0,a&&(a._checkBar=this._checkBar,a.parseBounds(s,-1,t,e,this._flags)),i)for(;l<n;)if(h=this.$_checkFixedMerge(s,l,n)){var u=new Fs(h,this._checkBar);this._fixedRooms.push(u),l=h.r2+1}else l+=1;for(l=t;l<=e;){var h;if(null!=(h=this.$_checkMerge(s,l,0==o.length,n))){var c=s.getItem(h.r2);c instanceof ln||c instanceof an||(u=new Fs(h,this._checkBar),this._rooms.push(u)),l=h.r2+1}else l+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,r=0;r<i.length;r++)i[r]=-1;for(;i.length<t;)i.push(-1)}var o=this._cells;for(r=0;r<o.length;r++)o[r]=-1;for(;o.length<e;)o.push(-1)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),r=i.length-1;r>=0;r--){var o=i[r];this.addFixedCells(o.head,o.tail-o.head+1)}for(r=(i=this.getRooms()).length-1;r>=0;r--){o=i[r];var n=Math.max(0,o.head-e-t),s=o.tail-e-t;this.addCells(n,s-n+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,r=this._nextId++,o=t+1;o<t+e;o++)i[o]=r+65535;return i[t]=r,r},e.prototype.addCells=function(t,e){for(var i=this._cells,r=this._nextId++,o=t+1;o<t+e;o++)i[o]=r+65535;return i[t]=r,r},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>-1:this._cells[t-e]>-1},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>-1&&this._fixedCells[t]<65535:(t-=e,this._cells[t]>-1&&this._cells[t]<65535)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=65535:this._cells[t-e]>=65535},e.prototype.getMerged=function(t,e){var i,r=1;if(t<e)for(var o=(i=this._fixedCells)[t],n=t+1;n<i.length&&i[n]-65535==o;n++,r++);else for(t-=e,o=(i=this._cells)[t],n=t+1;n<i.length&&i[n]-65535==o;n++,r++);return r},e.prototype.getMerged2=function(t,e,i,r){for(var o=this._cells,n=o[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?r:1,u=i+1;u<o.length&&o[u]-65535==n;u++)l+=(a=s.getItem(e++)).isData?r:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i){if(i>0){var r=e,o=this._flags[r];if(o<=0)return null;for(var n=e+1;n<=i;){if(n==i||this._flags[n]>o)return n>r+1?Ds.createRange(r,n-1):null;n++}}return null},e.prototype.$_checkMerge=function(t,e,i,r){if(e>=0){var o=e,n=this._flags[o];if(t.getItem(o),n<=0)return null;if(i)for(;o>r&&!(this._flags[o-1]<n);)o--;for(var s=t.itemCount,a=e+1;a<s;){if(this._flags[a]>n||this._flags[a]<=0)return a>o+1?Ds.createRange(o,a-1):t.getItem(o).isDataRow?null:Ds.createRange(o,a-1);a++}if(a>o)return a>o+1?Ds.createRange(o,a-1):t.getItem(o).isDataRow?null:Ds.createRange(o,a-1)}return null},e.MERGE_ROOMS="mergeRooms",e}(Ct),Vs=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.x||0===this.y},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},t.prototype.setEmpty=function(){return this.x=this.y=0,this},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},t}(),Bs=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this)||this;r._x=0,r._y=0,r._width=0,r._height=0,r._visible=!0,r._mouseEnabled=!0,r._elements=null,r._dirty=!0,r._hovered=!1,r._className="",r._name=i;var o=r._dom=r._createDom(e);return o&&r._initDom(o),r}return r(e,t),e.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),ft.detach(this._dom),this._dom=null),this._elements){for(var e=0,i=this._elements;e<i.length;e++)i[e].dispose();this._elements.length=0}this._parent=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._parent&&this._parent.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._elements?this._elements.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._x+this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new Vs(this._x,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new $(this._x,this._y,this._width,this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientRect",{get:function(){return new $(0,0,this._width,this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hovered",{get:function(){return this._hovered},set:function(t){t!=this._hovered&&(this._hovered=t,this._hoverChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return ct(this._dom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._dom&&this._dom.style},enumerable:!0,configurable:!0}),e.prototype.isDom=function(t){return t===this._dom},e.prototype.canHover=function(){return!0},e.prototype.getChildren=function(){return this._elements&&this._elements.concat()},e.prototype.getChild=function(t){return this._elements[t]},e.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},e.prototype.contains=function(t){return this._elements&&this._elements.indexOf(t)>=0},e.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},e.prototype.addChild=function(t){return this.insertChild(-1,t)},e.prototype.insertChild=function(t,e){if(e&&!this.contains(e)){var i=this._elements||[],r=e._dom;if(t<0||t>=i.length)this._dom&&r&&this._dom.appendChild(r),i.push(e);else{if(r){var o=this._elements[t]._dom;this._dom&&o&&this._dom.insertBefore(r,o)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0}return!1},e.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(e>=0)return this.removeChildAt(e)===t}return!1},e.prototype.removeChildAt=function(t){if(t>=0&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},e.prototype.removeLast=function(){return this._elements&&this._elements.length>0?this.removeChildAt(this._elements.length-1):null},e.prototype.clear=function(){var t=this._elements;if((t?t.length:0)>0){for(var e=0,i=t;e<i.length;e++){var r=i[e];r._parent=null,r.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},e.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++)e[t].visible=!1},e.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var r=0,o=this._elements;r<o.length;r++)o[r].invalidate(t,!0)},e.prototype.validate=function(){this._dirty=!1},e.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},e.prototype.getBounds=function(t){return void 0===t&&(t=null),t?t.set(this._x,this._y,this._width,this._height):new $(this._x,this._y,this._width,this._height)},e.prototype.getClientRect=function(t){return void 0===t&&(t=null),t?t.set(0,0,this._width,this._height):new $(0,0,this._width,this._height)},e.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},e.prototype.containsInClient=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.parentToElement=function(t,e,i){for(var r=this;r&&r!=t;)e-=r._x,i-=r._y,r=r._parent;return new Vs(e,i)},e.prototype.translateBy=function(t,e){void 0===e&&(e=null);var i=t;for(e||(e=new $(0,0,this._width,this._height));i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},e.prototype.topBy=function(t,e){for(var i=this._y+e,r=this._parent;r&&r!==t;)i+=r._y,r=r._parent;return i},e.prototype.boundsBy=function(t,e){void 0===e&&(e=null);var i=this._x,r=this._y,o=this._parent;for(e&&(i+=e.x,r+=e.y);o&&o!==t;)i+=o._x,r+=o._y,o=o._parent;return e?new $(i,r,e.width,e.height):new $(i,r,this._width,this._height)},e.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var r=this._parent;r&&void 0!==r._x;)e+=r._x,i+=r._y,r=r._parent;return t?new $(e,i,t.width,t.height):new $(e,i,this._width,this._height)},e.prototype.pointByContainer=function(t,e){for(var i=this._parent;i&&void 0!==i._x;)t+=i._x,e+=i._y,i=i._parent;return new Vs(t+this._x,e+this._y)},e.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new Vs(t,e)},e.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),this.container.toScreen(t)},e.prototype.hitTest=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.findChildAt=function(t,e,i){var r=this._elements,o=r?r.length:0;if(o>0)for(var n=o-1;n>=0;n--){var s=r[n];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var u=s.findChildAt(a,l,i);if(u)return u;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},e.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},e.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},e.prototype.setBounds=function(t,e,i,r){t==this._x&&e==this._y&&i==this._width&&r==this._height||(this._x=t,this._y=e,this._width=i,this._height=r,this.sizeChanged())},e.prototype.setBoundsI=function(t,e,i,r){e>>=0,i>>=0,r>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&r==this._height||(this._x=t,this._y=e,this._width=i,this._height=r,this.sizeChanged())},e.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},e.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,r=t.width>>0,o=t.height>>0;e==this._x&&i==this._y&&r==this._width&&o==this._height||(this._x=e,this._y=i,this._width=r,this._height=o,this.sizeChanged())},e.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},e.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},e.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},e.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},e.prototype._addEventListeners=function(t){},e.prototype._removeEventListeners=function(t){},e.prototype.$_attached=function(t){this._doAttached(t)},e.prototype._doAttached=function(t){},e.prototype.$_detached=function(t){this._doDetached(t)},e.prototype._doDetached=function(t){},e.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},e.prototype._getCssDisplay=function(){return"block"},e.prototype.resetStyleName=function(){this._setClassName(this._dom)},e.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},e.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},e.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},e.prototype._hoverChanged=function(){},e.prototype._visibleChanged=function(){},e.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},e.prototype._doSizeChanged=function(){},e}(fe),As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(Bs),$s=function(t){function e(e,i){void 0===i&&(i=!1);var r=t.call(this,e)||this;return r._active=i,r}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.$_activateView=function(){this._active||(this._doActivateView(),this._active=!0)},e.prototype.$_deactivateView=function(){(void 0===this.active||this._active)&&(this._dodDeactivateView(),this._active=!1)},e}(As);(Cs=t.SelectionMode||(t.SelectionMode={})).NONE="none",Cs.SINGLE="single",Cs.EXTENDED="extended",(xs=t.SelectionStyle||(t.SelectionStyle={})).BLOCK="block",xs.ROWS="rows",xs.COLUMNS="columns",xs.SINGLE_ROW="singleRow",xs.SINGLE_COLUMN="singleColumn",xs.SINGLE="single",xs.NONE="none",(Is=t.SelectionDisplay||(t.SelectionDisplay={})).CELL="cell",Is.CELL_AND_BORDER="cellAndBorder",Is.MASK="mask";var js,Hs,Ws,Gs=function(e){return e==t.SelectionStyle.SINGLE_ROW||e==t.SelectionStyle.SINGLE_COLUMN||e==t.SelectionStyle.SINGLE},Us=function(e){var i=e&&e.style;return i==t.SelectionStyle.ROWS||i==t.SelectionStyle.SINGLE_ROW},zs=function(t){function e(e,i){var r=t.call(this)||this;return r._manager=e,r._runStyle=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._manager&&this._manager.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runStyle",{get:function(){return this._runStyle},enumerable:!0,configurable:!0}),e.prototype.setValues=function(t){var e=this.grid.dataSource,i=this._getRows();i&&i.rows&&i.rows.length>0&&i.fields&&i.fields.length>0&&e.fillValue(i.rows,i.fields,t)},e.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},e.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],r=this.getBounds(),o=r.top,n=r.bottom,s=o;s<=n;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a)}return i},e.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],r=this.getBounds(),o=r.top,n=r.bottom,s=o;s<=n;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a.index)}return i},e.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),r=i.top,o=i.bottom,n=r;n<=o;n++){var s=t.getItem(n);if(s&&s.dataRow>=0){var a=s.dataRow;a>=0&&e.push(a)}}return e},e.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},e.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),r=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:r?r.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},e}(Ct),Ys=function(e){function i(t){var i=e.call(this)||this;return i._items=[],i._locked=!1,i._grid=t,i}return r(i,e),i.prototype._doDispose=function(){this._grid=null,this._items=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exclusiveMode",{get:function(){return this._grid.displayOptions.selectionMode!==t.SelectionMode.EXTENDED},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return 1==this._items.length&&this._items[0].single},enumerable:!0,configurable:!0}),i.prototype.lock=function(){this._locked=!0},i.prototype.unlock=function(){this._locked=!1},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getItems=function(){return this._items.slice()},i.prototype.lastItem=function(){return this._items[this._items.length-1]},i.prototype.add=function(e,i,r){if(this._locked)return null;if(r==t.SelectionStyle.NONE)return this.clear(),null;this.exclusiveMode&&this.clear();var o=null;switch(r){case t.SelectionStyle.COLUMNS:o=new Xs(this,r,e.layout,i.layout);break;case t.SelectionStyle.SINGLE_COLUMN:o=new Xs(this,r,e.layout,e.layout);break;case t.SelectionStyle.ROWS:o=new Ks(this,r,e.itemIndex,i.itemIndex);break;case t.SelectionStyle.SINGLE_ROW:o=new Ks(this,r,e.itemIndex,e.itemIndex);break;case t.SelectionStyle.BLOCK:o=new qs(this,r,e,i);break;case t.SelectionStyle.SINGLE:o=new qs(this,r,e,e)}return o&&this.$_addItem(o)},i.prototype.remove=function(t){if(!this._locked){var e=this._items.indexOf(t);e>=0&&(this._items.splice(e,1),this.fireEvent(i.REMOVED,t),this._changed())}},i.prototype.clear=function(){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(i.CLEARED))},i.prototype.selectRow=function(e,i){i&&this.clear(),this.containsItem(e,Ks)||this.$_addItem(new Ks(this,t.SelectionStyle.ROWS,e,e))},i.prototype.containsItem=function(t,e){for(var i=0,r=this._items.length;i<r;i++){var o=this._items[i];if((!e||o instanceof e)&&o.containsItem(t))return!0}return!1},i.prototype.containsLayout=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsLayout(t))return!0;return!1},i.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},i.prototype.contains=function(t,e){for(var i=0,r=this._items.length;i<r;i++)if(this._items[i].contains(t,e))return!0;return!1},i.prototype.normalize=function(){},i.prototype.canResize=function(t){return t&&!Gs(t._runStyle)},i.prototype._changed=function(t){this.fireEvent(i.CHANGED,t)},i.prototype.$_addItem=function(t){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(i.ADDED,t),this._changed(t)),t},i.prototype.$_itemResized=function(t){this.fireEvent(i.RESIZED,t),this._changed(t)},i.prototype.$_ended=function(t){this.fireEvent(i.ENDED,t)},i.CHANGED="onSelectionChanged",i.ADDED="onSelectionAdded",i.REMOVED="onSelectionRemoved",i.CLEARED="onSelectionCleared",i.RESIZED="onSelectionResized",i.ENDED="onSelectionEnded",i}(fe),qs=function(e){function i(t,i,r,o){var n=e.call(this,t,i)||this;return n._startIndex=r.clone(),n._endIndex=o.clone(),ft.isDebugging()&&n._startIndex.layout,ft.isDebugging()&&n._endIndex.layout,n}return r(i,e),Object.defineProperty(i.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.BLOCK},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return rs.areEquals(this._startIndex,this._endIndex)},enumerable:!0,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid;if(this._startIndex.normalize(t),this._endIndex.normalize(t),rs.areEquals(this._startIndex,this._endIndex))return as.create(this._startIndex);var e=t.activeCellLayout._dataCells,i=this._startIndex.layout,r=this._endIndex.layout,o=void 0,n=void 0;return i.col<=r.col?(o=e[0][i.col],n=e[e.length-1][r.col]):(o=e[0][r.col],n=e[e.length-1][i.col]),as.createRange(this._startIndex.itemIndex,o,this._endIndex.itemIndex,n)},i.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return t>=e&&t<=i},i.prototype.containsLayout=function(t){if(!t)return!1;if(this.single)return this._startIndex.layout===t;var e=t.distance,i=this._startIndex.layout.distance,r=this._endIndex.layout.distance;return i<r?e>=i&&e<=r:e>=r&&e<=i},i.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},i.prototype.resizeTo=function(t){this.grid.isValid(t)&&!rs.areEquals(t,this._endIndex)&&(this._endIndex.assign(t),this._resized())},i.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,r=i.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(!r||(e=r.length)<1)return null;for(var o=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),n=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),s=[],a=o;a<=n;a++){var l=i.getItem(a);if(l&&l.isDataRow){var u={};u.__rowId=l.dataRow;for(var h=0;h<e;h++){var c=r[h];u[c.fieldName]=l.getData(c.dataIndex)}if(s.push(u),t>0&&s.length==t)break}}return s},i.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},i.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},i.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},i.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},i.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),r=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),o=[],n=[],s=i;s<=r;s++)o.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var u=l[a];n.push(u.dataIndex)}return{rows:o,fields:n}}},i.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},i}(zs),Ks=function(e){function i(t,i,r,o){var n=e.call(this,t,i)||this;return n._startRow=r,n._endRow=o,n}return r(i,e),Object.defineProperty(i.prototype,"startRow",{get:function(){return this._startRow},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endRow",{get:function(){return this._endRow},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.ROWS},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?as.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):as.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},i.prototype.contains=function(t,e){return this.containsItem(t)},i.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},i.prototype.containsLayout=function(t){return!0},i.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var r=i.length;if(r<1)return null;for(var o=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=o;a<=n;a++){var l=e.getItem(a);if(l&&l.isDataRow){var u={};u.__rowId=l.dataRow;for(var h=0;h<r;h++){var c=i[h];u[c.fieldName]=l.getData(c.dataIndex)}if(s.push(u),t>0&&s.length==t)break}}return s},i.prototype._inflateLeft=function(t){},i.prototype._inflateRight=function(t){},i.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},i.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,i=t.collectDataColumns(e.first,e.last);if(i&&!(i.length<1)){for(var r=Math.max(0,Math.min(this._startRow,this._endRow)),o=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),n=[],s=[],a=r;a<=o;a++)n.push(t.getItem(a).dataRow);for(var l=0,u=i;l<u.length;l++){var h=u[l];s.push(h.dataIndex)}return{rows:n,fields:s}}},i}(zs),Xs=function(e){function i(t,i,r,o){var n=e.call(this,t,i)||this;return n._startLayout=r,n._endLayout=o,n}return r(i,e),Object.defineProperty(i.prototype,"startLayout",{get:function(){return this._startLayout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endLayout",{get:function(){return this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._runStyle||t.SelectionStyle.COLUMNS},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"single",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout;if(e.col>i.col){var r=e;e=i,i=r}e=t.getTopOf(e),i=t.getBottomOf(i,!0);var o=this.grid.itemCount-1;return as.createRange(0,e,o,i)},i.prototype.contains=function(t,e){return this.containsLayout(e)},i.prototype.containsItem=function(t){return!0},i.prototype.containsLayout=function(t){return t.col>=this.leftLayout.col&&t.col<=this.rightLayout.col},i.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},i.prototype.moveRow=function(t){},i.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},i.prototype.mergeWith=function(t){},i.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var r=e.itemCount,o=[],n=0;n<r;n++){var s=e.getItem(n);if(s&&s.isDataRow){var a={};a.__rowId=s.dataRow;for(var l=0,u=i.length;l<u;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(o.push(a),t>0&&o.length==t)break}}return o},i.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},i.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},i.prototype._inflateTop=function(t){},i.prototype._inflateBottom=function(t){},i.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,r=[],o=[],n=0;n<i;n++)r.push(t.getItem(n).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];o.push(l.dataIndex)}return{rows:r,fields:o}}},i}(zs),Qs=function(t){function e(e){return t.call(this,e,"selectionView")||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-selection"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(As),Js=function(t){function e(e){var i=t.call(this,e,"selectionMask")||this;return i._toped=!1,i._bottomed=!1,i._lefted=!1,i._righted=!1,i._view=new Qs(e),i.addChild(i._view),i}return r(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},e.prototype.updateElement=function(){var t=0,e=0,i=this.width,r=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,r+=10),this._bottomed&&(r+=10),this._view.setBounds(t,e,i,r)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e}(As),Zs=function(t){function e(e,i){var r=t.call(this,e.doc,i)||this;return r._pool=[],r._views={},r._rangeRect=new $,r._grid=e,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new Js(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},e.prototype.removeView=function(t){var e=t.$_hash,i=this._views[e];i&&(this.removeChild(i),this._pool.push(i),delete this._views[e])},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=new $,i=Object.keys(this._views);for(var r in this._views){var o=this._views[r],n=o.item,s=!1;if((1!==i.length||!n.single||!rs.areEquals(n._startIndex,this._grid.focusedIndex))&&(o.prepare(),n instanceof Ks?(s=this.$_getSelectionRowsRect(t,n,o,e),o._lefted=!0,o._righted=!0):n instanceof Xs?(s=this.$_getSelectionColumnsRect(t,n,o,e),o._toped=!0,o._bottomed=!0):s=this.$_getSelectionRangeRect(t,n,o,e),s)){var a=t.contentBounds.y+t.footerBounds.y;e.bottom>a&&(o._bottomed=!0,e.bottom=a)}o.visible=s,o.visible&&(o.setRectI(e),o.updateElement(),o.invalidate())}},e.prototype.$_getSelectionRowsRect=function(t,e,i,r){var o,n,s=this._grid,a=e.getBounds(),l=a.r1,u=a.r2,h=t.itemCount,c=t.fixedItemCount,d=s.topIndex;if(c>0){if(l>=d+c+h||u<0||l>=c&&u<d+c)return!1;var p=t.fixedHeight+s.fixedOptions.rowBarHeight;l<c?o=t.getTableItemBounds(Math.max(0,l)):((o=t.getTableItemBounds(Math.max(0,l-d))).y<p&&(i._toped=!0),o.y=Math.max(o.y,p)),u<c?n=t.getTableItemBounds(u):l<=c&&u<c+d?n=t.getTableItemBounds(Math.min(c+d,c)-1):u>=d?(n=t.getTableItemBounds(Math.min(t.itemCount+c-1,u-d))).y=Math.max(n.y,p):n=o}else{if(!(h>0))return!1;if(l>=d+h||u<d)return!1;p=l-d,o=t.getTableItemBounds(Math.max(0,p)),n=t.getTableItemBounds(Math.min(h-1,u-d)),p<0&&(i._toped=!0)}return r.copy(o.union(n)),r.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),r.right=t.rightLayoutCount>0?t.rightContentBounds.right:t.contentBounds.right,!0},e.prototype.$_getSelectionColumnsRect=function(t,e,i,r,o){var n=this._grid,s=e.getBounds(),a=t.fixedLayoutCount,l=t.rightLayoutCount,u=(t.rightFirstLayout,s.c1.col),h=s.c2.col,c=(n.fixedOptions.colBarWidth,t.getDataRect(s.c1)),d=t.getDataRect(s.c2);if(r.left=Math.min(c.x,d.x),r.right=Math.max(c.right,d.right),r.y=t.contentBounds.y+t.headerBounds.bottom+t.summaryBounds.height,r.height=Math.min(t.dataBounds.height,t.footerBounds.y),o&&o.copy(r),u>=a){var p=t.fixedContentBounds.right;r.x<p&&(i._lefted=!0,r.left=Math.max(r.left,p)),r.right<p&&(i._righted=!0,r.width=0)}if(l>0){var f=t.rightFirstLayout,_=t.rightContentBounds;r.left>_.left?r.width=0:h<f&&r.right>=t.rightContentBounds.left&&(r.right=Math.min(r.right,t.rightContentBounds.x),i._righted=!0)}return!0},e.prototype.$_getSelectionRangeRect=function(t,e,i,r,o){var n=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,n)&&(r.y=n.y,r.bottom=n.bottom,this.$_getSelectionColumnsRect(t,e,i,n,o),r.x=n.x,r.right=n.right,o&&(o.y=r.y,o.height=r.height),!0)},e}(As),ta=ft.isSafari?1:0,ea=function(e){function i(r,o){var n=e.call(this)||this;if(n._textCase=t.TextInputCase.DEFAULT,n._readOnly=!1,n._textReadOnly=!1,n._allowEmpty=!1,n._isMobile=ft.isMobile(),n._isTablet=ft.isTablet(),n._started=!1,n._dateConverter=Je.Default,n._boolConverter=yt.Default,n._cellBounds=new $,n._checkHangeul=!1,n._composing=!1,n._grid=r,n._options=r.editorOptions,n._parentElement=o,n._editor=n._createEditor(o),n._editor.className=i.EDITOR_CSS+n._getInputSelector(),n._container&&(n._container.className=i.CONTAINER_CSS),n._editor.$_owner=n,n._editIndex=r.getIndex(),n._editor){var s=r.container;s.$_addListener(n._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(n),!1),s.$_addListener(n._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(n),!1),s.$_addListener(n._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(n),!1),s.$_addListener(n._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(n),!1)}return n.setVisible(!1,!0),n.$_setEditorId(n._editor),n}return r(i,e),i.copyProc=function(t,e){if(!t.isDisabled()&&!t.editing){var i=t._grid.copyToClipboard(e,null);return null!=i&&(e.clipboardData?e.clipboardData.setData("text/plain",i):window.clipboardData.setData("Text",i)),e.preventDefault()}},i.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},i.getEditorType2=function(t,e){return"string"==typeof t?t:t&&t.type?t.type:"string"==typeof e?e:e&&e.type?e.type:"line"},i.prototype._doDispose=function(){this.unprepare(),this._editor=ft.detach(this._editor),this._container=ft.detach(this._container),this._container=null,this._grid=null,this._controller=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hasList",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._saveDateConverter||(this._saveDateConverter=new Je(t)),this._saveDateConverter.format=t,this._dateConverter=this._saveDateConverter):this._dateConverter=Je.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,t?(this._saveBoolConverter||(this._saveBoolConverter=new yt(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=yt.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return parseInt(this._container.style.width)>ta&&parseInt(this._container.style.height)>ta},enumerable:!0,configurable:!0}),i.prototype.setVisible=function(t,e){void 0===e&&(e=!1);var i=e?!t:this.visible;if(!t&&(this._container.style.width=ta+"px",this._container.style.height=ta+"px",ft.isMobile())){var r=this._grid;if(r){var o=r.container._containerDom,n=ct(this._container);this._editor===n.activeElement&&o&&o.focus()}else this._editor.blur()}t!=i&&this._doVisibleChanged(t)},i.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){var e=ht(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textReadOnly",{get:function(){return this._textReadOnly},enumerable:!0,configurable:!0}),i.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},Object.defineProperty(i.prototype,"allowEmpty",{get:function(){return this._allowEmpty},enumerable:!0,configurable:!0}),i.prototype._setAllowEmpty=function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},Object.defineProperty(i.prototype,"editing",{get:function(){return this._started},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._editor.value},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return!1},enumerable:!0,configurable:!0}),i.prototype.hasButton=function(t,e){return!1},i.prototype.applyOptions=function(t){t&&this.assignFrom(t)},i.prototype.setEditIndex=function(t){this._editIndex.assign(t)},i.prototype.setController=function(t){this._controller=t},i.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},i.prototype.unprepare=function(){},i.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},i.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},i.prototype.isEdited=function(){return!1},i.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},i.prototype.caretToLast=function(){},i.prototype.commit=function(){this._doCommit()},i.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},i.prototype.getEditValue=function(t,e){},i.prototype.setEditValue=function(t){this._oldValue=t},i.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},i.prototype.getEditText=function(){return""},i.prototype.selectAll=function(t){void 0===t&&(t=!1),this._grid.$_editFocused&&(!t&&ft.isMobile()||this._selectAll())},i.prototype.clear=function(){var t=ht(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="")},i.prototype.setFocus=function(){!this._grid.handler._draggable&&(!this._isMobile||!this.hasList)&&this._editor.focus({preventScroll:!0})},i.prototype.setEditorTitle=function(t){},i.prototype.setBounds=function(t,e,i,r,o){},i.prototype.setCellBounds=function(t,e,i,r){this._cellBounds.set(t,e,i,r)},i.prototype.closeList=function(t){},i.prototype.dropDownList=function(t){},i.prototype.buttonClicked=function(t,e){},i.prototype.buttonDown=function(t,e){},i.prototype.buttonUp=function(t,e){},i.prototype.setButtonStyle=function(t,e,i,r,o){return!1},i.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=t.TextInputCase.DEFAULT,this._checkHangeul=!1},i.prototype.$_setEditorId=function(t){},i.prototype._changed=function(){},i.prototype.$_setController=function(t){this._controller=t},i.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},i.prototype._isDateEditor=function(){return!1},i.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},i.prototype._valToStr=function(e){var i=this.editIndex,r="";try{if(void 0!==e||this._mask){var o=i.grid.dataSource.getField(i.dataField);if(o)switch(o.dataType){case t.ValueType.DATETIME:e&&(r=this._dateConverter.getText(e)),this._mask&&(r=this._mask.writeBuffer(r));break;case t.ValueType.BOOLEAN:r=this._boolConverter.toText(e);break;case t.ValueType.NUMBER:isNaN(e)||(r=ft.toStr(e));break;case t.ValueType.OBJECT:var n=i.column._objectKey||o.objectKey;e&&(r=n&&e.hasOwnProperty(n)?e[n]:null!=e&&"object"==typeof e?JSON.stringify(e):"");break;default:r=this._mask?this._mask.writeBuffer(e):e}else r=e}}catch(t){r=e}return null===r?"":r},i.prototype._strToVal=function(e){e=ft.toStr(e);var i=this._editIndex,r=i.dataColumn&&this._textCase==t.TextInputCase.DEFAULT?i.dataColumn.textInputCase:this._textCase;try{var o=i.grid.dataSource.getField(i.dataField);if(o){var n=o.dataType;if(n==t.ValueType.DATETIME||e&&this._isDateEditor()&&n==t.ValueType.TEXT){var s=n==t.ValueType.DATETIME,a=null;return e&&e==this._nowChar&&(a=new Date),!a&&e&&e==this._todayChar&&(a=new Date).setHours(0,0,0,0),a||(this._mask&&(e=this._mask.getStripValue()),a=this._dateConverter.getDate(e)),s?!a||isNaN(a.getFullYear())?void 0:a:a?this._dateConverter.getText(a):void 0}if(n==t.ValueType.BOOLEAN)return this._boolConverter.toBoolEx(e);if(n==t.ValueType.NUMBER)return parseFloat(e);n==t.ValueType.TEXT&&this._mask&&(e=this._mask.getStripValue())}return r===t.TextInputCase.UPPER?e?e.toLocaleUpperCase():e:r===t.TextInputCase.LOWER&&e?e.toLocaleLowerCase():e}catch(t){return}},i.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},i.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},i.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},i.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},i.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},i.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},i.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},i.prototype._sendToParent=function(t,e,i){void 0===e&&(e=void 0);try{var r=ft.isMac&&t.metaKey||!ft.isMac&&t.ctrlKey;if(2==e){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var o=this._controller._grid,n=o.editOptions;if(n.maxLengthToNextCell){var s=n.skipReadOnly,a=o.activeTool,l=this.maxLength,u=this.editIndex.clone(),h=ft.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!h&&!r&&!t.altKey&&o&&o.isEditing(u)&&l>0&&!this._composing&&t.keyCode>47){var c=this._mask?this._mask.getStripValue():this._editor.value;if(this instanceof ua&&this.maxLengthExceptComma){var d=this.getEditValue();isNaN(d)&&null!=d||(c=String(d))}if(c&&c.length>=l)return o.getBodyViewAt(u).spanRight(o.layoutManager,u),u.right(),s&&a._checkReadOnly(u)&&(a._skipReadOnly(u,1)||(u=this.editIndex.clone())),rs.areEquals(u,this.editIndex)||a.setFocused(u,!0,!0),!0}}}catch(t){if(t instanceof Jo)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},i.prototype._commitListValue=function(t){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,t);var e=this._grid;if(e){var i=e.container._containerDom,r=ct(i);this._editor==r.activeElement&&i&&i.focus()}else this._editor.blur()},i.Unselected={},i.InvalidFormat={},i.EDITOR_CSS="rg-editor ",i.CONTAINER_CSS="rg-editor-container",i}(fe),ia=function(){function t(t,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions={9:/[0-9 ]/,0:/[\d]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/},this._tests=null,this._defBuffer=[],this._editor=t,e&&this.setOptions(e)}return t.prototype.dispose=function(){return this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null,null},Object.defineProperty(t.prototype,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())},enumerable:!0,configurable:!0}),t.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},t.prototype.clearBuffer=function(t,e){t=arguments.length>0?t:0,e=arguments.length>1?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},t.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,r=0,o=this._tests.length;i<o;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var n=void 0;n=t[r++];)if(this._tests[i].test(n)){this._buffer[i]=n,this._defBuffer[i]=n;break}}return this._buffer&&this._buffer.join("")},t.prototype.getStripValue=function(){var t=[],e=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,r=this._buffer.length;i<r;i++){var o=this._buffer[i];!this._tests[i]||this._tests[i].test(o)?t.push(o):o==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,r=this._buffer.length;i<r;i++)this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])&&(e.length>0&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},t.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),null!=t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),null!=t.allowEmpty&&(this._allowEmpty=t.allowEmpty),null!=t.showInvalidFormatMessage&&(this._showInvalidFormatMessage=t.showInvalidFormatMessage),null!=t.overwrite&&(this._overwrite=t.overwrite),null!=t.overWrite&&(this._overwrite=t.overWrite),this._restrictNull&&this._editor){var e=this._editor._editor;!e.onclick&&(e.onclick=this.clickHandler.bind(this))}},t.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var r=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(r)&&r==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},t.prototype._changed=function(){},t.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,r=t=arguments.length>0?t:i.selectionStart,o=e=arguments.length>1?e:i.selectionEnd,n=t-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){r=n+1;break}r=n}for(n=e-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){o=n+1;break}o=n}if(r!=t||o!=e){for(n=r;n<=t&&!this._tests[n];n++)r++;for(n=o;n<=e&&!this._tests[n];n++)o++;return i.setSelectionRange(r,o),!0}return r!=t||o!=e},t.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},t.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},t.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,r=t.split("");this._editMask=t,this._buffer=[];for(var o=0,n=r.length;o<n;o++)e.push(i[r[o]]),this._buffer.push(i[r[o]]?this.$_getPlaceHolder(o):r[o])},t.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:this._tests[t]?"_":this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},t.prototype.$_seekPrev=function(t){for(;--t>=0&&!this._tests[t];);return t},t.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return t},t.prototype.$_shiftL=function(t,e){var i=this._editMask.length,r=this._buffer;if(t>=0)for(var o=t,n=this.$_seekNext(e);i>o;o++)if(this._tests[o]){if(!(i>n&&this._tests[o].test(r[n])))break;r[o]=r[n],this._defBuffer[o]=this._defBuffer[n],r[n]=this.$_getPlaceHolder(n),this._defBuffer[n]="",n=this.$_seekNext(n)}},t.prototype.$_shiftR=function(t){for(var e,i,r=this._editMask.length,o=this._buffer,n=t,s=this.$_getPlaceHolder(t);r>n;n++)if(this._tests[n]){if(e=this.$_seekNext(n),i=o[n],this._defBuffer[n]=s,o[n]=s,!(r>e&&this._tests[e].test(i)))break;s=i}},t.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var i=t.which||t.keyCode,r=e.selectionStart,o=e.selectionEnd;if(46===i||8===i)r==o&&(r=46!==i?this.$_seekPrev(r):o=this.$_seekNext(r-1),o=46===i?this.$_seekNext(o):o),this.clearBuffer(r,o),!this._overwrite&&this.$_shiftL(r,o-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,r),Math.max(0,r));else if(39===i||35===i)return this._moveCaret();this._pStart=e.selectionStart}},t.prototype.keyPress=function(t){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var i,r=e.selectionStart,o=e.selectionEnd,n=t.which||t.keyCode;this.clearBuffer(r,o),r!==o&&this.$_shiftL(r,o-1);var s=this.$_seekNext(r-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(i=String.fromCharCode(n))&&(!this._overwrite&&this.$_shiftR(r),this._buffer[s]=i,this._defBuffer[s]=i,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},t.prototype.input=function(t){var e=this._editor.editor;if(!e.readOnly){var i=e.value;/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/.test(i)&&(e.value=e.value.replace(/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/g,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart))}},t}(),ra=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._maxLength=0,t._fontSize=0,t._modified=!1,t}return r(i,e),Object.defineProperty(i.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)},enumerable:!0,configurable:!0}),i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._maxLength=0},Object.defineProperty(i.prototype,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t},enumerable:!0,configurable:!0}),i.prototype.isEdited=function(){return this._modified},i.prototype.setVisible=function(t,i){e.prototype.setVisible.call(this,t,i);var r=this._container.style;if(t?(r.border="",r.boxShadow=""):t||(r.border="none",r.boxShadow="none"),ft.isWinSafari){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},i.prototype.setEditIndex=function(i){e.prototype.setEditIndex.call(this,i);var r=this._editor.style;ft.isMobile()?r.fontSize=Math.max(this.fontSize,16)+"px":this.fontSize>0&&(r.fontSize=this.fontSize+"px");var o=i.valueColumn;if(o)switch(this._textCase==t.TextInputCase.DEFAULT?o.textInputCase:this._textCase){case t.TextInputCase.LOWER:this._editor.style.textTransform="lowercase";break;case t.TextInputCase.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},i.prototype.getEditText=function(){return this._editor.value},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._editor.value=this._valToStr(t)},i.prototype.getEditValue=function(e,i){void 0===e&&(e=!0);var r=this._editField(),o=this._emptyValue;try{var n=r.dataType,s=this._editor.value;if(n==t.ValueType.TEXT)s||void 0===this._emptyValue||(s=this._emptyValue),void 0===(o=this._strToVal(s))&&(o="");else{if(n===t.ValueType.OBJECT){var a=this._editIndex.dataColumn.objectKey||r.objectKey,l=this._editIndex.item.getData(r.index)||{};return l[a]=s,l}if(ft.isWhiteSpace(s))if(void 0!==this._emptyValue)o=this._strToVal(this._emptyValue);else switch(n){case t.ValueType.NUMBER:isNaN(this._oldValue)&&(o=NaN);break;case t.ValueType.DATETIME:null===this._oldValue&&(o=null);case t.ValueType.BOOLEAN:}else o=this._strToVal(s)}if(o===ea.InvalidFormat)return o;o=r.readValue(o)}catch(t){if(e)throw t;o=this._emptyValue}return o},i.prototype._selectAll=function(){this._editor.select&&this._editor.select()},i.prototype._setSelectionRange=function(t,e){try{this._editor.setSelectionRange(t,e)}catch(t){}},i.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return this._editor.value||this._setSelectionRange(0,0),!0},i.prototype._doEndEdit=function(){this._modified=!1},i.prototype._doCommit=function(){},i}(ea),oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._doChanged())},enumerable:!0,configurable:!0}),e.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new ia(this,t))},e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype._createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},e.prototype._createEditor=function(t){var e=ct(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("input"),r=i.style;i.setAttribute("aria-hidden","true"),i.autocomplete="off",r.position="absolute",r.boxSizing="border-box",r.margin="0px",r.padding="0px 2px",r.wordWrap="normal",r.overflow="hidden",r.resize="none",r.border="none",r.outline="none",r.left="0px",r.top="0px",r.width="100%",r.height="100%",r["-webkit-user-modify"]="read-write-plaintext-only",r["white-space"]="pre",r["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var o=this._grid.container;return o.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),o.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),o.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),o.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),this._defMaxLength=i.maxLength>0?i.maxLength:1e6,i},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask=this._mask.dispose())},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e),e.mask&&this.setMask(e.mask)},e.prototype.caretToLast=function(){var t=ft.toStr(this._editor.value).length;this._setSelectionRange(t,t)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:this._defMaxLength},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._dispatchChange())},e.prototype.setBounds=function(t,e,i,r,o){ft.setBounds(this._container,t,e,i,r),0==i||0==r?this._editor.style.width="100%":o>0&&(this._editor.style.height=Math.round(r-4)+"px",this._editor.style.width=o+"px")},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((ft.isIE||ft.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(ft.isIE&&t.ctrlKey&&86==t.keyCode&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if(ft.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void ct(this._editor).execCommand("copy");switch(this._inputValue=e.value,i){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?e.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===i&&e.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&ft.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&ft.isChrome)return!this._sendToParent(t);if(!(t.altKey||t.ctrlKey||t.shiftKey)&&this._mask&&this._mask.restrictNull){var r=e.selectionStart;this._mask._moveCaret(r+1,r+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var o=e.value?e.value.length-1:0;this._mask._moveCaret(o,o)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return ft.isFirefox&&!t.ctrlKey&&!t.altKey&&229!==i&&i>=32&&(i<112||i>130)&&this._requestStart(),!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||ft.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=t.which||t.keyCode;this._sendToParent(t,2),ft.isFirefox?t.ctrlKey||t.altKey||!(0==e||e>=32)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):ft.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():ft.isMac&&t.metaKey&&(99===e||118===e)||e>=32&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())}},e.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._changeHandler=function(t){},e.prototype._inputHandler=function(t){this.isDisabled()||ft.isIE&&!this._started||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())},e.prototype._pasteHandler=function(t){if(!this.isDisabled()){var e=this._grid.pasteOptions;try{var i=void 0,r=(t.originalEvent||t).clipboardData;if(null!=(i=r?r.getData("text/plain"):window.clipboardData.getData("text"))){if(this.visible){if(this._mask){t.preventDefault();var o=this._editor,n=o.value,s=o.selectionStart,a=o.selectionEnd;n=n.substr(0,s)+i+n.substr(a),o.value=this._mask.writeBuffer(n,!0)}return void this._doChanged()}t.preventDefault(),this._grid.pasteFromClipboard(i,t)}}catch(t){if(t instanceof Jo){if(e.throwValidationError)throw t}else if(t instanceof Qo)alert(t.message);else if(t)throw t}}},e.prototype._copyHandler=function(t){ea.copyProc(this,t)},e.prototype._getInputSelector=function(){return null},e}(ra),na=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),Object.defineProperty(e.prototype,"inputCharacters",{get:function(){return this._inputCharacters},set:function(t){t!=this._inputCharacters&&(this._inputCharacters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(t){t!=this._ignoreCharacters&&(this._ignoreCharacters=t)},enumerable:!0,configurable:!0}),e.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,t.prototype.initOptions.call(this)},e.prototype._inputHandler=function(e){this.$_resetValue(),t.prototype._inputHandler.call(this,e)},e.prototype._keyDownHandler=function(e){return this._pStart=e.target.selectionStart,t.prototype._keyDownHandler.call(this,e)},e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_resetValue=function(){var t,e,i=this._editor,r=i.value;this.visible&&((t=this.inputCharacters)&&(e=new RegExp("[^"+t+"]","g")).test(r)&&(i.value=r=r.replace(e,""),null!=this._pStart&&i.setSelectionRange(this._pStart,this._pStart)),(t=this.ignoreCharacters)&&(e=new RegExp("["+t+"]","g")).test(r)&&(i.value=i.value.replace(e,""),null!=this._pStart&&i.setSelectionRange(this._pStart,this._pStart)),this._pStart=null)},e.INPUT_CSS="rg-text-editor",e}(oa),sa=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","password"),i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.prepare=function(){},e.INPUT_CSS="rg-password-editor",e}(oa),aa=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},enumerable:!0,configurable:!0}),e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._minHeight=0,this._height=0,this._altEnterNewLine=!1,this._editor.style.setProperty("overflow","hidden"),this.setReadOnly(!1)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:2e9},e.prototype.setCellEditValue=function(e){t.prototype.setCellEditValue.call(this,e,!1)},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},e.prototype.$_resetBounds=function(){var t,e=ft.getClientRect(this._container);this._height<0?(t=this._grid.getEditCellBounds(this,this._editIndex).height,t+=ft.isMobile()?3:1):this._height>0&&(t=this._height);var i=e.cx,r=e.cy,o=e.width,n=Math.round(e.height);this._editor.scrollWidth>o&&(o=this._editor.scrollWidth+6),t?(this._editor.style.overflow="auto",n=t):this._editor.scrollHeight>n&&(n=this._editor.scrollHeight+6);var s=isNaN(this._minHeight)?0:this._minHeight;s>0&&(n=Math.max(n,s)),e=ft.getClientRect(this._parentElement),o=Math.min(e.width,o),n=Math.min(e.height,n),i+o>e.width&&(i=e.width-o),r+n>e.height&&(r=e.height-n),ft.setBounds(this._container,Math.max(i,0),Math.max(r,0),o,n)},e.prototype.$_createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},e.prototype._createEditor=function(t){var e=ct(t);this._container=this.$_createContainer(e),t.appendChild(this._container);var i=e.createElement("textarea"),r=i.style;i.autocomplete="off",i.setAttribute("aria-hidden","true"),r.position="absolute",r.margin="0px",r.padding="0px",r.wordWrap="normal",r.overflow="hidden",r.resize="none",r.border="none",r.outline="none",r.left="0px",r.top="0px",r.width="100%",r.height="100%",r["-webkit-user-modify"]="read-write-plaintext-only",r["white-space"]="pre",r["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var o=this._grid.container;return o.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),o.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),o.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),o.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),i},e.prototype.setBounds=function(t,e,i,r){ft.setBounds(this._container,t,e,i,r),t>ft.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((ft.isIE||ft.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(ft.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void ct(this._editor).execCommand("copy");switch(i){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 36:case 35:case 38:case 33:case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 13:var r=t.ctrlKey||ft.isMac&&t.metaKey;if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(r&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&r)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var o=e.value;if(o){var n=e.selectionEnd;o=o.substring(0,n)+"\r\n"+o.substring(n),e.value=o,e.setSelectionRange(n+1,n+1),this._doChanged()}}break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||ft.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){var e=t.which||t.keyCode;this.isDisabled()||(ft.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():ft.isMac&&t.metaKey&&(99===e||118===e)||e>=32&&!this._requestStart()&&t.preventDefault())},e.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},e.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,r=(t.originalEvent||t).clipboardData;null!=(i=r?r.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof Jo){if(e.throwValidationError)throw t}else if(t instanceof Qo)alert(t.message);else if(t)throw t}}},e.prototype._copyHandler=function(t){ea.copyProc(this,t)},e.INPUT_CSS="rg-multiline-editor",e}(ra),la=/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/g,ua=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r._addString="000",r._maxIntegerLength=0,r._step=1,r._delay=100,r._regxAll=/[\d]|,|\.|\-|\+|e|E/,r._regxPos=/[\d]|,|\.|\+|e|E/,r._regxInt=/[\d]|,|\+|\-/,r._regxPosInt=/[\d]|,|\+/,r._regx=r._regxAll,r._decLen=void 0,r._decimalFormatter=void 0,r._isMultiple=!1,r._decSep=".",r._groupSep=",",r._active=!1,r._stepChanged=!1,r._editor.style["ime-mode"]="disabled",r._editor.style["-webkit-ime-mode"]="disabled",r._editor.style["-moz-ime-mode"]="disabled",r._editor.style["-ms-ime-mode"]="disabled",r}return r(e,t),Object.defineProperty(e.prototype,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t,t){var e=this._decimalFormatter=new Me(t);e&&(this._decSep=e.separator?e.separator:".",this._groupSep=e.groupSep?e.groupSep:",",this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=".",this._groupSep=",",this._decLen=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){t!==this._step&&0!=t&&(this._step=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t!==this._delay&&(this._delay=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showStepButton",{get:function(){return this._showStepButton},set:function(t){this._showStepButton=t},enumerable:!0,configurable:!0}),e.prototype.setMask=function(t){this._mask=null},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},e.prototype.hasButton=function(t,e){return null!=e.showStepButton&&e.showStepButton},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},e.prototype._inputHandler=function(e){e.data&&e.data.match(la)?e.target.value=this._inputValue:(this._editFormat&&this.$_editFormatting(e),t.prototype._inputHandler.call(this,e))},e.prototype._keyPressHandler=function(e){if(!ft.isFirefox||!e.ctrlKey&&0!==e.charCode){var i=!0,r=String.fromCharCode(e.keyCode||e.charCode);(!this._regx.test(r)||e.target.value&&e.target.value.indexOf(this._decSep)>=0&&r==this._decSep)&&(this._multipleChar&&r===this._multipleChar||(i=!1,(!this.blankWhenSpace||" "!==r)&&e.preventDefault()));var o=e.target.selectionStart,n=e.target.selectionEnd,s=e.target.value,a=new RegExp("\\"+this._groupSep,"g"),l=s?s.split(""):[];if(l.splice(o,n-o,r===this._multipleChar?this._addString:r),l=l.join("").replace(a,""),this.maxLength>0&&i&&this.maxLengthExceptComma&&s&&l.length>this.maxLength&&e.preventDefault(),this._maxIntegerLength>0&&r!==this._decSep){var u=Math.floor(this.$_strToNum(l));if(!isNaN(u)){var h=Math.abs(u).toString().length;this._maxIntegerLength<h&&e.preventDefault()}}this._isMultiple=r==this._multipleChar,t.prototype._keyPressHandler.call(this,e)}else t.prototype._keyPressHandler.call(this,e)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=e.keyCode||e.charCode;if(this._isMultiple=!1,(8===i||46===i)&&this.editing&&this._editFormat){var r=e.target,o=r.value,n=o.length,s=o&&o.split(""),a=r.selectionStart,l=r.selectionEnd;if(a!==l)return t.prototype._keyDownHandler.call(this,e);var u=o[8===i?a-1:a];if(u===this._groupSep||u===this._decSep)if(u===this._decSep&&a===(8===i?o.length:o.length-1));else{s.splice(8===i?a-2:a+1,1),r.value=s.join(""),this.$_editFormatting(e),o=r.value;var h=n-(8===i?o.length:n);r.setSelectionRange(a-h,l-h),this._doChanged(),e.preventDefault()}}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart()},e.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),t.prototype._dispatchChange.call(this))},e.prototype.setEditValue=function(t){var e=parseFloat(t);isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this.$_formatNum(e,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=e},e.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),this.$_resetValue();var i=this._editField().nullValue;try{var r=this._editor.value;if(r=r&&r.trim()){var o=new RegExp("\\"+this._groupSep,"g"),n=new RegExp("[\\"+this._decSep+"]+","g");r=(r=(r=(r=(r=(r=r.replace(o,"")).replace(n,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}i=r?parseFloat(r):void 0}catch(e){if(t)throw e}return i},e.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},e.prototype.buttonDown=function(t,e){var i,r=e.target;ft.stopEvent(e),"up"===r.$_editButtonType?i=this.step:"down"===r.$_editButtonType&&(i=-this.step),i&&(this.$_changeStepValue(i),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(i)}.bind(this),this._delay))}.bind(this),300))},e.prototype.buttonUp=function(t,e){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},e.prototype.setButtonStyle=function(t,e,i,r,o){var n=t.style;i?(0===e?n.top="0px":n.removeProperty("top"),0===e?n.removeProperty("bottom"):n.bottom="0px",n.right=r+"px",n.height="9px"):(n.top="0px",n.removeProperty("bottom"),n.right=r+o*e+"px",n.height="100%"),n.width=o+"px";var s=0===e?"rg-button-step-up":"rg-button-step-down";return t.className=s,t.$_editButtonType=0===e?"up":"down",!0},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.setFocus=function(){!this._stepChanged&&t.prototype.setFocus.call(this)},e.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),r="-"===t[0];t=t.replace(i,"").replace(e,".").replace(/\+/g,"");var o=parseFloat(t);return isNaN(o)?NaN:r?-Math.abs(o):o},e.prototype.$_formatNum=function(t,e,i){var r=t,o=r<0||0==r&&1/r==-1/0?"-":"",n=Math.max(e,i);n=isNaN(n)?2:n;var s=parseInt(r=Math.abs(+r||0).toFixed(n))+"",a=s.length>3?s.length%3:0;if(r.indexOf(".")>=0){for(var l=r.split(".")[1].split("");l.length>0&&"0"===l[l.length-1]&&l.length>e;)l.splice(l.length-1,1);r=l.join(""),n=l.length}return o+(a?s.substr(0,a)+this._groupSep:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(n?this._decSep+r:"")},e.prototype.$_editFormatting=function(t){var e=t.target.value,i=e&&e[e.length-1]==this._decSep,r=t.target.selectionStart,o=t.target.selectionEnd;e=this._isMultiple&&this._addString?e.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString):e,this._isMultiple&&this._addString&&(r+=this._addString.length,o+=this._addString.length);var n,s=e.split(this._decSep);s.length>1&&(s.length=2,s[1]=s[1].substr(0,this._decimalFormatter._maxDigits),e=s.join(this._decSep)),n=2==s.length?Math.min(s[1].length,null!=this._decLen?this._decLen:99):0;var a=this.$_strToNum(e);if(!isNaN(a)){if(this.maxLength>0||this.maxIntegerLength>0){var l=String(a).split(".");this.maxIntegerLength>0&&(l[0]=l[0].substr(0,this.maxIntegerLength));var u=l.join(".");this.maxLength>0&&(u=u.substr(0,this.maxLength)),a=parseFloat(u)}e=this.$_formatNum(a,n,this._decimalFormatter.maxDigits);var h=(e=i&&this._decLen&&e.indexOf(this._decSep)<0?e+this._decSep:e).length,c=t.target.value.length;1==Math.abs(h-c)&&(h>c?(r++,o++):e.indexOf(this._decSep)>=r&&(r--,o--)),t.target.value=e,t.target.setSelectionRange(r,o)}},e.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,r=t.value?t.value.length:0;t.value=t.value.replace(la,"").trim(),(t.value?t.value.length:0)==r?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},e.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},e.prototype.$_changeStepValue=function(t){var e=this.getEditValue();e=null==e||e==isNaN(e)?0:e,e+=t,null!=this._max&&(e=Math.min(this._max,e)),null!=this._min&&(e=Math.max(this._min,e)),this.setEditValue(e),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},e.INPUT_CSS="rg-number-editor",e}(oa),ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-editor-marquee"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.pointerEvents="none"},e.prototype._doDraw=function(t){},e.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement.getBoundingClientRect();e.left="0",e.top="0",e.width=i.width+"px",e.height=i.height+"px",this._setClassName(t)},e}(Bs),ca=function(t){function e(e,i){var r=t.call(this,e,i)||this;if(r._isMobile){var o=ct(i);r._marquee=new ha(o)}return r}return r(e,t),e.prototype.hasButton=function(t,e){return!0},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},e.prototype._centerPopup=function(t,e){var i=e.getBoundingClientRect(),r=t.getBoundingClientRect();t.appendChild(e),e.style.left=(r.width-i.width)/2+"px",e.style.top=(r.height-i.height)/2+"px"},e.prototype._closeMarquee=function(){this._marquee&&ft.detach(this._marquee._dom)},e.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){this._setAllowEmpty(t)},enumerable:!0,configurable:!0}),e}(oa);(js=t.DropDownPosition||(t.DropDownPosition={})).BUTTON="button",js.EDITOR="editor",(Hs=t.DropDownSortStyle||(t.DropDownSortStyle={})).NONE="none",Hs.ASCENDING="ascending",Hs.DESCENDING="descending",(Ws=t.DropDownValueLabel||(t.DropDownValueLabel={})).VALUE="value",Ws.LABEL="label",Ws.VALUE_LABEL="valueLabel",Ws.LABEL_VALUE="labelValue";var da,pa=function(e){function i(r){var o=e.call(this)||this;return o._minWidth=0,o._maxWidth=0,o._dropDownCount=8,o._caseSensitive=!1,o._partialMatch=!1,o._sortStyle=t.DropDownSortStyle.NONE,o._items=null,o._itemIndex=-1,o._dropDownPosition=t.DropDownPosition.BUTTON,o._dropDownWidth=-1,o._displayLabels=null,o._separator=null,o._itemColumned=!1,o._viewGridInside=!1,o._trimLabelText=!0,o._initCount=0,o._moreItemCount=25,o._moreText=null,o._selected=!1,o._clickHandler=function(t){var e=t.currentTarget,r=ft.getChildIndex(e);r>=0&&(this._itemIndex=r,this._selected=!0,this.fireEvent(i.CLOSE_UP,!0))}.bind(o),o._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(o),o._container=r,o._element=o._createList(r.doc),o}return r(i,e),i.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,ft.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&e>=0&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,t>=0)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),i.prototype.setItemIndex=function(t,e,i){var r=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=r.length-1)){if(i&&t>=r.length-1){var o=r[r.length-1];if(o.isMoreButton){var n=t-(r.length-1);n=(Math.floor(n/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(o,n)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=t>=0}},i.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},i.prototype.show=function(e,i,r,o,n){this._containerElement=this._viewGridInside?this._container._container:e,this._sortStyle!=t.DropDownSortStyle.NONE&&this.$_sortItems(),this._show(i,r,o,n)},i.prototype.hide=function(){ft.detach(this._element),this._containerElement=null},i.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},i.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},i.prototype._changed=function(){},i.prototype._createList=function(t){var e=t.createElement("div");return e.className="rg-dropdownlist",e.id="rg-dropdown-list-"+fa.$$_LIST_ID++,e.setAttribute("role","listbox"),e},i.prototype.$_sortItems=function(){this._sortStyle==t.DropDownSortStyle.ASCENDING?this._items.sort((function(t,e){return t.label<e.label?-1:t.label>e.label?1:0})):this._items.sort((function(t,e){return t.label>e.label?-1:t.label<e.label?1:0}))},i.prototype._show=function(t,e,i,r){var o=this._element;if(o){var n=o.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",this._firstChild=null,ft.clearChildren(o),ft.disableSelection(o),this._containerElement.appendChild(o),this._cellWidth=i,this._editBounds=r,n.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,r),this._selected=!1}},i.prototype._getListElement=function(){return this._element},i.prototype.$_resetHeight=function(){var t=this._getListElement();if(this._firstChild){var e=ht(this._firstChild),i=ft.getClientRect(this._firstChild),r=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),o=parseInt(r.marginTop.replace("px",""));o=isNaN(o)?0:o;var n=parseInt(r.marginBottom.replace("px",""));n=isNaN(n)?0:n;var s=this._dropDownCount>0?Math.min(this._dropDownCount,this._items.length):this._items.length;t.style.height=(i.height+o)*s+4+n+"px"}else t.style.height="10px"},i.prototype._resetWidth=function(t){var e=this._element,i=ft.getClientRect(e),r=this._dropDownWidth,o=r,n=e.offsetWidth?e.offsetWidth+(ft.ieOld&&"border-box"===e.style.boxSizing?17:0):0;o<0?o=t:0==o&&(o=10),e.style.width=o+"px";var s=0;if(this._firstChild){var a=ht(this._firstChild),l=this._firstChild.currentStyle||a.getComputedStyle(this._firstChild),u=parseInt(l.marginLeft.replace("px",""));u=isNaN(u)?0:u;var h=parseInt(l.marginRight.replace("px",""));h=isNaN(h)?0:h;for(var c=e.childNodes,d=0;d<c.length;d++)s=Math.max(s,c[d].scrollWidth);s+=e.offsetWidth-e.clientWidth+u+h+2}r<0&&(s=Math.max(s,o));var p=ft.getBrowserSize();o=s=Math.min(s,p.width),ft.ieOld&&(r>=0||s>o)&&(o+=20),o<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(o,n)+"px"},i.prototype.$_resetPosition=function(e,i,r,o){var n=ct(this._element),s=ht(this._element),a=ft.getBrowserSize(),l=ft.getClientRect(this._containerElement),u=ft.getClientRect(this._container._container),h=a.width,c=a.height,d=ft.getClientRect(this._element),p=s.pageXOffset||n.documentElement.scrollLeft,f=s.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(c-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(h-=18),e+=u.left-l.left,i+=u.top-l.top,(ft.ieTen||ft.ieOld||ft.ieLeg)&&(e+=n.documentElement.scrollLeft,i+=n.documentElement.scrollTop),i+d.height>c+f&&o&&(i=i-o.height-d.height)<0&&(i=c-d.height-2),this._dropDownPosition!=t.DropDownPosition.EDITOR?e=Math.max(0,e+r-d.width):e+d.width>h+p&&(e=h-d.width),!ft.isMobile()&&this._viewGridInside&&o&&(i=o.bottom-l.top+2,(l.bottom<o.bottom+d.height||c+f<o.bottom+d.height)&&(i=o.top-d.height-l.top-2)),ft.isMobile()||this._element.offsetParent||(e+=n.documentElement.offsetLeft,i+=n.documentElement.offsetTop),ft.move(this._element,Math.max(0,e),Math.max(0,i))},i.prototype._resetItems=function(t,e,i,r){ft.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,r)},i.prototype._buildItems=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r,o=ct(this._element),n=0,s=function(t,e){var i=e&&e.value?e.value.toString():"",r=o.createElement("span");return r.style.whiteSpace="pre",r.innerHTML=i?ft.htmlEncode(i):"&nbsp;",r.tabIndex=-1,r.className="rg-dropdown-value",ft.disableSelection(r),t.appendChild(r),r},a=function(t,e){var i=e&&e.label?e.label.toString():"";i=this._trimLabelText?i.trim():i;var r=o.createElement("span");return!this._trimLabelText&&(r.style.whiteSpace="pre"),r.innerHTML=i?ft.htmlEncode(i):"&nbsp;",r.tabIndex=-1,r.className="rg-dropdown-label",ft.disableSelection(r),t.appendChild(r),r}.bind(this),l=function(t,e){var i=o.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?ft.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",ft.disableSelection(i),t.appendChild(i)},u=function(t){var e=ft.getTextLength(t.textContent);e>n&&(r=t,n=e)},h=this._items,c=i||(this._element.children.length>0?this.moreItemCount:this.initCount);if(h&&!(h.length<1)){for(var d=e,p=h.length;d<p;d++){if(this._initCount&&d-e>=c&&d<p){var f=o.createElement("div"),_=f.style;_.position="relative",_.cssFloat="none",_.paddingTop="1px",_.paddingBottom="1px",_.paddingLeft="2px",_.paddingRight="2px",_.whiteSpace="nowrap",_.cursor="pointer",_.textAlign="center",ft.disableSelection(f),f.nextIndex=d,f.onclick=this._nextClickHandler,f.isMoreButton=!0,f.className="rg-dropdown-more",a(f,{label:this.moreText}),this._element.appendChild(f);break}var g=h[d],y=o.createElement("div");y.setAttribute("role","option"),y.id=this._element.id+"-"+d.toString();var m=y.style;m.position="relative",m.cssFloat="none",m.paddingTop="1px",m.paddingBottom="1px",m.paddingLeft="2px",m.paddingRight="2px",m.whiteSpace="nowrap",m.cursor="default",y.className=d==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",d===this._itemIndex?y.setAttribute("aria-selected","true"):y.removeAttribute("aria-selected"),ft.disableSelection(y),this._element.appendChild(y),0==d&&(this._firstChild=y),y.onclick=this._clickHandler;var b=null;switch(this.displayLabels){case t.DropDownValueLabel.LABEL:a(y,g);break;case t.DropDownValueLabel.VALUE:s(y,g);break;case t.DropDownValueLabel.LABEL_VALUE:b=a(y,g),l(y,this._separator),s(y,g);break;case t.DropDownValueLabel.VALUE_LABEL:b=s(y,g),l(y,this._separator),a(y,g)}b&&this._itemColumned&&u(b)}if(this._itemColumned&&r){var v=Math.ceil(r.getBoundingClientRect().width);for(d=0,p=this._element.childNodes.length;d<p;d++)(b=this._element.childNodes[d].firstChild).style.display="inline-block",b.style.width=v+"px"}}},i.prototype.$_addMoreItems=function(t,e){var r=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(r,e),this._resetWidth(this._cellWidth),this.fireEvent(i.EDITOR_FOCUS)},i.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++)(r=t[e]).className=e==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",e==this._itemIndex?r.setAttribute("aria-selected","true"):r.removeAttribute("aria-selected"),e==this._itemIndex&&this.fireEvent(i.ACTIVE_DESCENDENT,r.id);var r,o=this._itemIndex;if(o>=0&&o<t.length)if((r=t[o]).offsetTop<this._element.scrollTop)this._element.scrollTop=r.offsetTop;else{var n=r.offsetTop+ft.getSize(r).height;n>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=n-this._element.clientHeight)}},i.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&this._items.length>0&&t){for(var i=this._items,r=i.length,o=this._caseSensitive?t:t.toLowerCase(),n=[],s=0;s<r;s++){if(h=i[s].label.toString())if(h=this._caseSensitive?h:h.toLowerCase(),this._partialMatch){for(var a="",l=0;l<h.length;l++){var u=ft.hangulToChosung(h[l]);a+=ft.hangulToChosung(o[l]).org?u.org:u.cho}if(a==o)return void this.setItemIndex(s,e,!0)}else if(h==o)return void this.setItemIndex(s,e,!0);n.push(h)}for(s=0;s<r;s++){var h=n[s];if(this._partialMatch){var c=!1;for(l=0;l<o.length;l++){var d=ft.hangulToChosung(h[l]);if(!(d.org&&d.org==o[l]||d.cho&&d.cho==o[l])){c=!1;break}c=!0}if(c)return void this.setItemIndex(s,e,!0)}else if(h&&0==h.indexOf(o))return void this.setItemIndex(s,e,!0)}for(s=0;s<r;s++)if(h=n[s],this._partialMatch){var p=ft.hangulToChosungAll(h),f=ft.hangulToChosungAll(o),_=p.indexOf(f);if(a=h.substr(0,_),~_){l=0;for(var g=_,y=o.length;l<y;l++,g++)u=ft.hangulToChosung(h[g]),a+=ft.hangulToChosung(o[l]).org?u.org:u.cho}if(a&&a.indexOf(o)>0)return void this.setItemIndex(s,e,!0)}else if(h&&h.indexOf(o)>0)return void this.setItemIndex(s,e,!0)}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},i.CLOSE_UP="onDropDownListCloseUp",i.EDITOR_FOCUS="onDropDownListEditorFocus",i.ACTIVE_DESCENDENT="onDropDownListActiveDescendant",i}(fe),fa=function(e){function i(i,r){var o=e.call(this,i,r)||this;o._values=null,o._items=null,o._labels=null,o._displayLabels=t.DropDownValueLabel.LABEL,o._domainOnly=!1,o._dropDownWidth=-1,o._dropDownPosition=t.DropDownPosition.BUTTON,o._dropDownCount=8,o._itemSortStyle=t.DropDownSortStyle.NONE,o._caseSensitive=!1,o._partialMatch=!1,o._commitOnSelect=!0,o._dropDownWhenClick=!1,o._trimLabelText=!0,o._separator=null,o._itemColumned=!1,o._lookup=!1,o._labeling=!1,o._domain=null,o._closing=!1,o._selectedIndex=-1,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(o);var n=o._list=o._createDropDown(i.container);return o._setEditorAria("aria-owns",n._element.id),o._setEditorAria("aria-expanded","false"),o._setEditorAria("aria-haspopup","true"),o._setEditorAria("role","combobox"),o._list.addListener(o),o}return r(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"values",{get:function(){return this._values},set:function(t){(t=ft.makeArray(t,!0))?this._values=t.map((function(t){return null!=t?String(t):t})):this._values=[]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this._itemSortStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!0,configurable:!0}),i.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=ct(this._container),i=ht(this._container);if(t||this._items&&this._items.length>0){var r=this._list,o=this._options,n=e.documentElement,s=ft.getClientRect(this._container);r.viewGridInside=o.viewGridInside,r.displayLabels=this.displayLabels,r.separator=this.separator,r.itemColumned=this.itemColumned,r.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,r.caseSensitive=this._caseSensitive,r.partialMatch=this._partialMatch,r.dropDownCount=this._dropDownCount,r.dropDownWidth=this._dropDownWidth,r.dropDownPosition=this._dropDownPosition,r.sortStyle=this._itemSortStyle,r.valueIndex=this._selectedIndex,r.trimLabelText=this._trimLabelText;var a=this._grid.displayOptions;return r.setZIndex(a.baseZindex+3),this._isMobile&&!this._isTablet?(this._showMarquee(n),r.viewGridInside=!1,r.show(n,0,0,0,null),this._centerPopup(n,r._element)):r.show(e.documentElement,s.cx+1,s.cy+s.height,this._cellBounds.width,ft.getClientRect(this._editor)),r.$_search(this._editor.value,!0),this._setEditorAria("aria-expanded","true"),i.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},i.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;var i=this._isMobile&&!this._isTablet;try{ht(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var r=void 0;if(t&&this._list.selected&&(r=this._list.valueIndex)>=0&&this._items&&this._items.length>r){this._selectedIndex=this._list.valueIndex;var o=this._items[r].value,n=this._labeling?this._items[r].label:this._items[r].value;this._editor.value=n,i?this._commitListValue(o):(r==this._saveIndex&&n==this._saveText||this._dispatchChange(),e&&this._commitOnSelect&&this._dispatchCommit())}else this._selectedIndex=-1}finally{this._closing=!1,this._setEditorAria("aria-expanded","false"),this.setActiveDescendant(null)}return!0}},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=t.DropDownValueLabel.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=t.DropDownPosition.BUTTON,this._dropDownCount=8,this._itemSortStyle=t.DropDownSortStyle.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"\ub354\ubcf4\uae30",this._setEditorAria("aria-activedescendant",null)},i.prototype.setEditIndex=function(t){e.prototype.setEditIndex.call(this,t),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},i.prototype.setEditValue=function(t){var i,r=-1;if(this._value=t,this._lookup){var o=this._domain;o?i=(n=r=o.keys?o.keys.indexOf(t):-1)>=0&&o.values&&o.values.length>n?o.values[n]:t:r=this._editIndex.dataColumn.getLookupIndex(t),this._labeling?(i=o?r>=0&&o.values&&o.values.length>r?o.values[r]:t:r>=0?this._editIndex.dataColumn.getLookupLabel(t):t,e.prototype.setEditValue.call(this,i)):e.prototype.setEditValue.call(this,t)}else if(this._values){for(var n=0,s=this._values.length;n<s;n++)if(t==this._values[n]){r=n;break}this._labeling&&this._labels&&(r<0||this._labels.length>r)?(i=r>=0?this._labels[n]:t,e.prototype.setEditValue.call(this,i)):e.prototype.setEditValue.call(this,t)}else e.prototype.setEditValue.call(this,t);this._selectedIndex=r},i.prototype.isEdited=function(){var t=e.prototype.isEdited.call(this);return t&&this.domainOnly&&(t=void 0!==this.$_getEditValue(!1)),t},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._setEditorAria=function(t,e){e?this._editor.setAttribute(t,e):this._editor.removeAttribute(t)},i.prototype._createDropDown=function(t){return new pa(t)},i.prototype.setCellEditValue=function(t,i){e.prototype.setCellEditValue.call(this,t,i)},i.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},i.prototype.setBounds=function(t,i,r,o,n){e.prototype.setBounds.call(this,t,i,r,o,n)},i.prototype._createEditor=function(t){return e.prototype._createEditor.call(this,t)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(t){e.prototype._compositionstartHandler.call(this,t)},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list,r=i.itemIndex;switch(t.keyCode){case 8:case 46:if(!t.ctrlKey&&!t.shiftKey&&this.domainOnly&&this.allowEmpty);else if(!t.ctrlKey&&!t.shiftKey&&this.textReadOnly)return this._requestStart(),t.preventDefault(),!0;break;case 32:if(this.listing&&i.currentIsMore(r))return i.addMoreItems(),t.preventDefault(),!0;break;case 13:if(this.listing&&i.currentIsMore(r))return i.addMoreItems(),t.preventDefault(),!0;if(this.closeUp(!0,!1))return!this._sendToParent(t);break;case 27:if(this.closeUp(!1,!1))return t.preventDefault(),!0;break;case 40:if(!t.shiftKey&&t.altKey&&!this.listing)return this._requestStart(),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,r+1)),t.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,r+i.dropDownCount)),t.preventDefault(),!0;break;case 38:if(t.altKey&&this.listing)return this.closeUp(!1,!1),t.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,r-1)),t.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,r-i.dropDownCount)),t.preventDefault(),!0}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){this.isDisabled()||(e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault())},i.prototype._inputHandler=function(t){this.isDisabled()||(this.textReadOnly&&(t.target.value=this._oldValue||""),e.prototype._inputHandler.call(this,t))},i.prototype._pasteHandler=function(t){this.isDisabled()||e.prototype._pasteHandler.call(this,t)},i.prototype._copyHandler=function(t){this.isDisabled()||e.prototype._copyHandler.call(this,t)},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},i.prototype._doChanged=function(){this._selectedIndex=-1,e.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},i.prototype.dropDownList=function(t){this.dropDown(t)&&this._setEditorAria("aria-expanded","true")},i.prototype.closeList=function(t){this.closeUp(t,!1),this._setEditorAria("aria-expanded","false")},i.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1,!1):this.dropDown()},i.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,r=t.length;i<r;i++)this._items.push({value:t[i],label:e&&e.length>i?e[i]:t[i]})},i.prototype._refreshItems=function(e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var r=this.editIndex,o=r.item;if(this._values&&(this._values.length>0||i))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==t.DropDownValueLabel.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(r.dataColumn&&r.item&&(r.dataRow>=0||pr(o.itemState))){var n=r.dataColumn;if(n.lookupSource){for(var s=n.lookupKeyFieldIds,a=[],l=0;l<s.length-1;l++)a.push(o.getData(s[l]));var u=n.lookupSource.getTextDomain(a);u&&u.values&&u.values.length>0&&(this.$_setItems(u.keys,u.values),this._labeling=!0,this._lookup=!0,this._domain=u)}else n.values&&n.values.length>0&&(this.$_setItems(n.values,n.labels),this._labeling=this.displayLabels!==t.DropDownValueLabel.VALUE&&n.labels&&n.labels.length>=n.values.length,this._lookup=!0)}if(e&&this.listing){this._list.items=this._items;var h=ft.getClientRect(this._container);this._list._resetItems(h.cx-1,h.cy+h.height,this._cellBounds.width,ft.getClientRect(this._editor))}},i.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i,r=this.text,o=oa.prototype.getEditValue.call(this,t,e),n=o,s=this._editIndex.dataColumn,a=this._selectedIndex,l=a>=0;if(this._lookup){if(this._domain){if(this._labeling&&(n=(i=l?a:this._domain.values?this._domain.values.indexOf(r):-1)>=0&&this._domain.keys&&this._domain.keys.length>i?this._domain.keys[i]:n),this.domainOnly&&n&&(!this._domain.keys||this._domain.keys.indexOf(n)<0))return ea.Unselected}else if(this._labeling&&(n=l?s.getLookupValue(a):s.getSourceValue(r)||o),this.domainOnly&&n&&(!s.values||s.values.indexOf(n)<0))return ea.Unselected}else if(this._labeling&&(i=l?a:this._labels?this._labels.indexOf(r):-1)>=0&&i<this._values.length&&(n=this._values[i]),this.domainOnly&&n&&(!this._values||this._values.indexOf(n)<0))return ea.Unselected;return n},i.prototype.setActiveDescendant=function(t){this._setEditorAria("aria-activedescendant",t)},i.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e,!0),!ft.isMobile()&&this.setFocus()},i.prototype.onDropDownListEditorFocus=function(){this.setFocus()},i.prototype.onDropDownListActiveDescendant=function(t,e){this.setActiveDescendant(e)},i.INPUT_CSS="rg-list-editor",i.$$_LIST_ID=0,i}(ca),_a=function(e){function i(t){var r=e.call(this,t)||this;return r._selectItemIndices=[],r._acceptText=null,r._cancelText=null,r._showButtons=!1,r._showAllCheck=!1,r._acceptClickHandler=function(t){this.fireEvent(i.CLOSE_UP_2,!0)}.bind(r),r._cancelClickHandler=function(t){this.fireEvent(i.CANCEL,!1)}.bind(r),r._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget,i=e.parentElement;if(i){var r=ft.getChildIndex(i),o=e.checked;this.$_changeCheckIndex(i,r,o,!0)}}.bind(r),r._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(r),r._clickHandler=function(t){var e=t.currentTarget;if(2==t.eventPhase){for(var i=ft.getChildIndex(e),r=void 0,o=e.getElementsByTagName("input"),n=0,s=o.length;n<s;n++)if("checkbox"==o[n].type){r=o[n];break}r&&(r.checked=!r.checked),this.$_changeCheckIndex(e,i,r.checked,!0)}}.bind(r),r}return r(i,e),Object.defineProperty(i.prototype,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)},enumerable:!0,configurable:!0}),i.prototype.changeCheckIndex=function(t,e,i){var r=this._listElement.childNodes;if(t>=0&&t<r.length){for(var o=r[t],n=o.getElementsByTagName("input"),s=void 0,a=0,l=n.length;a<l;a++)if("checkbox"==n[a].type){s=n[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(o,t,s.checked,i))}},i.prototype.$_changeCheckIndex=function(t,e,r,o){var n=this._selectItemIndices;if(!(e<0||e>=this._items.length)){var s=this._items[e].index;r?n.indexOf(s)<0&&n.push(s):n.indexOf(s)>=0&&n.splice(n.indexOf(s),1),t.className="rg-multicheck-item"+(r?" rg-multicheck-select":""),t.setAttribute("aria-selected",r?"true":"false"),this._selected=!0,o&&this.fireEvent(i.CHECK_CLICK)}},i.prototype._createList=function(){var t=this._container.doc,e=t.createElement("div");e.className="rg-multicheck",e.id="rg-dropdown-list-"+fa.$$_LIST_ID++,e.setAttribute("role","listbox");var i=t.createElement("div");i.className="rg-multicheck-allcheck",this._allCheckElement=i,i.style.paddingLeft="2px",ft.disableSelection(i),e.appendChild(i);var r=t.createElement("div");r.className="rg-multicheck-list",this._listElement=r,e.appendChild(r);var o=t.createElement("div");return o.style.textAlign="center",o.style.whiteSpace="nowrap",o.className="rg-multicheck-button",this._buttonElement=o,o.style.margin="2px",ft.disableSelection(o),e.appendChild(o),e},i.prototype._getListElement=function(){return this._listElement},i.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},i.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,e=this._allCheck.checked,r=0;r<t;r++)this.changeCheckIndex(r,e,!1);this.fireEvent(i.CHECK_CLICK)},i.prototype._show=function(t,e,i,r){var o=this._element;if(o){var n=o.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="visible",(n=this._listElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",(n=this._buttonElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.marginLeft="0px",n.marginRight="0px",this._firstChild=null,ft.clearChildren(this._listElement),ft.disableSelection(this._listElement),this._containerElement.appendChild(o),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,r),this._itemIndex=-1,this._selectItemIndices.length&&this.setItemIndex(this._selectItemIndices.slice().sort((function(t,e){return t-e}))[0]),this._selected=!1}},i.prototype._resetWidth=function(t){e.prototype._resetWidth.call(this,t);var i=this._element,r=Math.floor(this._buttonElement.getBoundingClientRect().width),o=i.getBoundingClientRect().width;isNaN(r)||(o=Math.max(o,r)),i.style.width=o+"px"},i.prototype._resetItems=function(t,e,i,r){ft.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,r)},i.prototype._buildItems=function(){var e,r=this._container.doc,o=0,n=function(t,e,i){var o=e?e.value.toString():"",n=r.createElement("label");return n.style.whiteSpace="pre",n.innerHTML=o?ft.htmlEncode(o):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,n.className="rg-dropdown-value",ft.disableSelection(n),t.appendChild(n),n}.bind(this),s=function(t,e,i){var o=e?e.label.toString():"";o=this._trimLabelText?o.trim():o;var n=r.createElement("label");return!this._trimLabelText&&(n.style.whiteSpace="pre"),n.innerHTML=o?ft.htmlEncode(o):"&nbsp;",n.htmlFor=i&&i.id,n.tabIndex=-1,n.className="rg-dropdown-label",ft.disableSelection(n),t.appendChild(n),n}.bind(this),a=function(t,e){var i=r.createElement("span");i.style.whiteSpace="pre",i.style.pointerEvents="none",i.innerHTML=e?ft.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-separator",ft.disableSelection(i),t.appendChild(i)}.bind(this),l=function(t){var i=ft.getTextLength(t.textContent);i>o&&(e=t,o=i)}.bind(this),u=this._items;if(u&&!(u.length<1)){for(var h=0,c=u.length;h<c;h++){var d=u[h],p=r.createElement("div");p.setAttribute("role","option"),p.id=this._element.id+"-"+h.toString();var f=p.style;f.position="relative",f.cssFloat="none",f.paddingTop="1px",f.paddingBottom="1px",f.paddingLeft="2px",f.paddingRight="2px",f.whiteSpace="nowrap",f.cursor="default";var _=this._selectItemIndices.indexOf(u[h].index)>=0;p.className="rg-multicheck-item"+(_?" rg-multicheck-select":""),ft.disableSelection(p),this._listElement.appendChild(p),0==h&&(this._firstChild=p),p.onclick=this._clickHandler;var g=r.createElement("input");g.id="$multiCheck_item_"+i.$_checkId++,g.type="checkBox",g.onclick=this._checkClickHandler,g.checked=_,p.setAttribute("aria-selected",_?"true":"false"),p.appendChild(g);var y=null;switch(this.displayLabels){case t.DropDownValueLabel.LABEL:s(p,d,g);break;case t.DropDownValueLabel.VALUE:n(p,d,g);break;case t.DropDownValueLabel.LABEL_VALUE:y=s(p,d,g),a(p,this.separator),n(p,d,g);break;case t.DropDownValueLabel.VALUE_LABEL:y=n(p,d,g),a(p,this.separator),s(p,d,g)}y&&this.itemColumned&&(l(y),p._span=y)}if(this.itemColumned&&e){var m=Math.ceil(e.getBoundingClientRect().width);if(m>0)for(h=0,c=this._listElement.childNodes.length;h<c;h++)(y=this._listElement.childNodes[h]._span)&&(y.style.display="inline-block",y.style.width=m+"px")}}},i.prototype.setButtonOptions=function(t,e,i,r,o){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=r,this._allCheckText=o,this.$_buildButtons()},i.prototype.$_buildButtons=function(){var t=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",ft.clearChildren(this._buttonElement);var e=t.createElement("label"),r=e.style;e.innerHTML=this._acceptText,e.onclick=this._acceptClickHandler,e.className="rg-multicheck-accept",r.cursor="pointer",ft.disableSelection(e),this._buttonElement.appendChild(e),r=(e=t.createElement("label")).style,e.innerHTML=this._cancelText,e.onclick=this._cancelClickHandler,e.className="rg-multicheck-cancel",r.marginLeft="2px",r.cursor="pointer",ft.disableSelection(e),this._buttonElement.appendChild(e);var o=this._allCheckElement;if(o.onclick=this._allCheckClickHandler,ft.clearChildren(o),this._showAllCheck){o.style.display="";var n=t.createElement("input");n.type="checkbox",n.id="$multiCheck_item_"+i.$_checkId++,n.onclick=this._allCheckClickHandler,this._allCheck=n,o.appendChild(n);var s=t.createElement("label");s.innerHTML=this._allCheckText,s.htmlFor=n.id,s.tabIndex=-1,ft.disableSelection(s),o.appendChild(s)}else o.style.display="none"}},i.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var r=t[i];i===this._itemIndex?(ft.addClassName(r,"rg-multicheck-selectitem"),this.fireEvent(pa.ACTIVE_DESCENDENT,r.id)):ft.removeClassName(r,"rg-multicheck-selectitem")}if((e=this._itemIndex)>=0&&e<t.length)if((r=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=r.offsetTop;else{var o=r.offsetTop+ft.getSize(r).height;o>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=o-this._listElement.clientHeight)}},i.CLOSE_UP_2="onMultiCheckListCloseUp",i.CANCEL="onMultiCheckListCancel",i.CHECK_CLICK="onMultiCheckListCheckClick",i.$_checkId=0,i}(pa),ga=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r._showButtons=!0,r._showAllCheck=!1,r._setEditorAria("aria-multiselectable","true"),r}return r(e,t),Object.defineProperty(e.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t},enumerable:!0,configurable:!0}),e.prototype._createDropDown=function(t){return new _a(t)},e.prototype.setMask=function(t){this._mask=null},e.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=ct(this._container),i=ht(this._container);if(t||this._items&&this._items.length>0){var r=this._list,o=this._options;this._selectedIndices=this._selectedIndices||[],r.viewGridInside=o.viewGridInside,r.displayLabels=this.displayLabels,r.separator=this.separator,r.itemColumned=this.itemColumned,r.items=this._items;var n=ft.getClientRect(this._container);this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,r.caseSensitive=this.caseSensitive,r.dropDownCount=this.dropDownCount,r.dropDownWidth=this.dropDownWidth,r.dropDownPosition=this.dropDownPosition,r.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),r.sortStyle=this.itemSortStyle,r.valueIndices=this._selectedIndices.slice(),r.trimLabelText=this.trimLabelText;var s=this._grid.displayOptions;if(r.setZIndex(s.baseZindex+3),this._isMobile&&!this._isTablet){var a=e.documentElement;r.viewGridInside=!1,this._showMarquee(a),r.show(a,0,0,0,null),this._centerPopup(a,r._element)}else r.show(e.documentElement,n.cx+1,n.cy+n.height,this._cellBounds.width,ft.getClientRect(this._editor));return i.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},e.prototype.getCheckValues=function(t,e,i){for(var r=[],o=0,n=t.length;o<n;o++)t[o]>=0&&t[o]<e.length&&r.push(this._labeling&&!i?e[t[o]].label:e[t[o]].value);return r},e.prototype.closeUp=function(t,e){if(this.listing){this._closing=!0;try{var i=this._list,r=this.editIndex&&this.editIndex.dataColumn;if(ht(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),i.hide(),t&&i.selected){if(this._selectedIndices=i.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(r.valueSeparator),!ft.equalArrays(this._saveIndices,this._selectedIndices)||this._editor.value!=this._saveText)if(this._isMobile){var o=this.getCheckValues(this._selectedIndices,this._items,!0).join(r.valueSeparator);this._commitListValue(o)}else this._dispatchChange(),e&&this.commitOnSelect&&this._dispatchCommit()}else this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e)},e.prototype.setEditValue=function(t){var e,i=[],r=[],o=-1,n=ft.isArray(t)?t:t?t.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=t,this._lookup){var s=this._domain;if(s)for(var a=0,l=n.length;a<l;a++)(o=s.keys.indexOf(n[a]))>=0&&(i.push(o),r.push(o<s.values.length?s.values[o]:n[a]));else i=this._editIndex.dataColumn.getLookupIndices(t);this._labeling?(e=s?r.join(this._editIndex.dataColumn.valueSeparator):i.length>0?this._editIndex.dataColumn.getLookupLabel(t):t,oa.prototype.setEditValue.call(this,e)):oa.prototype.setEditValue.call(this,t)}else if(this._values){for(a=0,l=n.length;a<l;a++)(o=this._values.indexOf(n[a]))>=0&&(i.push(o),r.push(this._labels&&o>=0&&this._labels.length>o?this._labels[o]:n[a]));this._labeling&&this._labels?(e=r.join(this._editIndex.dataColumn.valueSeparator),oa.prototype.setEditValue.call(this,e)):oa.prototype.setEditValue.call(this,t)}else oa.prototype.setEditValue.call(this,t);this._selectedIndices=i},e.prototype.setCellEditValue=function(e,i){t.prototype.setCellEditValue.call(this,e,i)},e.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list;return e.ctrlKey&&65==e.keyCode&&this.listing?(e.preventDefault(),i._allCheck.checked=!i._allCheck.checked,i.$_toggleAllCheck(),!0):32===e.keyCode&&this.listing?(i.changeCheckIndex(i.itemIndex,null,!0),e.preventDefault(),!0):t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyPressHandler=function(e){t.prototype._keyPressHandler.call(this,e),this._list._selected=!1},e.prototype._inputHandler=function(e){t.prototype._inputHandler.call(this,e),this._list._selected=!1},e.prototype.$_getEditValue=function(t,e){function i(t,e,i,r,o){var n=[],s=e&&e.split(o.valueSeparator);if(s&&s.length>0)for(var a=0,l=s.length;a<l;a++)r.indexOf(s[a])>=0&&r.indexOf(s[a])<i.length?n.push(i[r.indexOf(s[a])]):(i.indexOf(s[a])>=0||!t.domainOnly)&&n.push(s[a]);return n}void 0===t&&(t=!1),void 0===e&&(e=!1);var r=this._strToVal(this.text),o=oa.prototype.getEditValue.call(this,t,e),n=o,s=this._editIndex.dataColumn,a=this._selectedIndices.slice(),l=[],u=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(u)for(var h=0,c=a.length;h<c;h++)a[h]<this._domain.keys.length&&l.push(this._domain.keys[a[h]]);else r&&(l=i(this,r,this._domain.keys,this._domain.values,s));n=l.join(s.valueSeparator)}}else if(this._labeling&&void 0===(n=u?s.getLookupValues(a):s.getSourceValues(r))&&(n=o),this.domainOnly&&n){if(!s.values)return ea.Unselected;for(h=(n=ft.isArray(n)?n:n&&n.split?n.split(s.valueSeparator):[n]).length-1;h>=0;h--)s.values.indexOf(n[h])<0&&n.splice(h,1)}}else{if(this._labeling){if(u)for(h=0,c=a.length;h<c;h++)a[h]<this._values.length&&l.push(this._values[a[h]]);else r&&(l=i(this,r,this._values,this._labels,s));n=l.join(s.valueSeparator)}if(this.domainOnly&&n){if(!s.values)return ea.Unselected;for(h=(n=ft.isArray(n)?n:n&&n.split?n.split(s.valueSeparator):[n]).length-1;h>=0;h--)s.values.indexOf(n[h])<0&&n.splice(h,1)}}return ft.isArray(n)?n.join(s.valueSeparator):n},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e,!0),!this._isMobile&&this.setFocus()},e.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),!this._isMobile&&this._editor.focus()},e.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},e.INPUT_CSS="rg-multicheck-editor",e}(fa),ya=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r._searchLength=1,r._searchDelay=1e3,r._useCtrlEnterKey=!1,r._useEnterKey=!1,r._initCount=0,r._moreItemCount=25,r._reInquery=!0,r._timer=void 0,r._editor.setAttribute("aria-autocomplate","list"),r}return r(e,t),Object.defineProperty(e.prototype,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText())&&(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),!0)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=13==e.keyCode;if(i&&(i=e.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)),i&&this.editing){e.preventDefault(),e.stopImmediatePropagation(),this.$_stopTimer();var r=this.getEditText();return r&&r!=this._searchKey&&(this._searchKey=r,this._dispatchSearch(r)),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyUpHandler=function(e){this.isDisabled()||(t.prototype._keyUpHandler.call(this,e),ft.isChrome&&this.$_search())},e.prototype._inputHandler=function(e){this.isDisabled()||(t.prototype._inputHandler.call(this,e),ft.isChrome||this.$_search())},e.prototype._doEndEdit=function(){t.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},e.prototype.dropDown=function(e){var i=this._list;return i&&(i.initCount=this.initCount,i.moreItemCount=this.moreItemCount,i.moreText=this.moreText),t.prototype.dropDown.call(this,!0)},e.prototype.buttonClicked=function(t){if(this.listing)this.closeUp(!1,!1);else{this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels)}},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_search=function(){var t=this.getEditText();t&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},e.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&this._list._items.length>0||(this._timer=setInterval(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},e.prototype.$_stopTimer=function(){this._timer&&clearInterval(this._timer)},e.INPUT_CSS="rg-search-editor",e.SEARCH="onSearchCellEditorSearch",e}(fa),ma=function(e){function i(i,r){var o=e.call(this,i,r)||this;return o._values=null,o._items=null,o._labels=null,o._sortStyle=t.DropDownSortStyle.NONE,o._itemIndex=-1,o._displayLabels=null,o._separator=null,o._itemColumned=!1,o._trimLabelText=!0,o.$_selectChanged=null,o._handled=!1,o._globalKeyDownHandler=function(t){var e=ht(this._container);if(!(t.target instanceof e.HTMLTableCellElement))return this._keyDownHandler(t)}.bind(o),o}return r(i,e),i.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"native",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonCount",{get:function(){return 1},enumerable:!0,configurable:!0}),i.prototype.hasButton=function(t,e){return null==t||t},i.prototype._createEditor=function(t){var e=ct(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("select"),r=i.style;return i.setAttribute("aria-hidden","true"),r.position="absolute",r.boxSizing="border-box",r.margin="0px",r.padding="0px",r.wordWrap="normal",r.overflow="hidden",r.resize="none",r.border="none",r.outline="none",r.left="0px",r.top="0px",r.width="100%",r.height="100%",this.$_selectChanged=function(t){var e=t.target;this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),i.addEventListener("change",this.$_selectChanged),this._container.appendChild(i),i},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},i.prototype.setEditIndex=function(t){e.prototype.setEditIndex.call(this,t),this._refreshItems(),this._resetPosition()},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._itemIndex=-1;for(var i=this._editor.options,r=0,o=i.length;r<o;r++)i[r].value===t?(this._itemIndex=r,i[r].selected=!0):i[r].selected=!1},i.prototype.prepare=function(){var t=ht(this._container);this._handled||(t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},i.prototype.unprepare=function(){ht(this._container).removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=t.keyCode,r=ft.isIE&&this.visible;switch(i){case 40:if(t.altKey)return this._requestStart(),!0;if(r)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(r)return!1}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._resetPosition=function(){var t=this._grid;if(!t.editorLender){var e=t.getEditCellBounds(this,this._editIndex);e.x--,e.y--,this.setBounds(e.x,e.y,0,0,0)}},i.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,r=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(i.dataRow>=0||pr(r.itemState))){var o=i.dataColumn;if(o.lookupSource){for(var n=o.lookupKeyFieldIds,s=[],a=0;a<n.length-1;a++)s.push(r.getData(n[a]));var l=o.lookupSource.getTextDomain(s);l&&l.values&&l.values.length>0&&this.$_setItems(l.keys,l.values)}else o.values&&o.values.length>0&&this.$_setItems(o.values,o.labels)}},i.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,r=i.options,o=ct(i),n=r.length-1;n>=0;n--)r.remove(n);n=0;for(var s=t.length;n<s;n++){var a=o.createElement("option");a.value=t[n],a.text=e&&e.length>n?e[n]:t[n],this._items.push({value:a.value,label:a.text}),i.options.add(a,null)}},i.prototype.getEditValue=function(){return this.$_getEditValue()},i.prototype.$_getEditValue=function(){return this._editor.value},i.INPUT_CSS="rg-nlist-editor",i}(oa),ba=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.lastLayout=function(){throw new Error("Method not implemented.")},e.prototype.getText=function(t,e,i,r){throw new Error("Method not implemented.")},e.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},e.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},e.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")},e}(Ct),va=function(t){function e(e,i,r){var o=t.call(this)||this;return o._colCount=0,o._blockPaste=!1,o._lines=[],o._colCount=0,o._blockPaste=!1,o._parse(e,i,r),o}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._lines.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._lines.length||0==this._colCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return 1==this._lines.length&&1==this._colCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._lines[t]},e.prototype._parse=function(t,e,i){var r,o,n,s,a,l=this._lines,u=[],h=t.length,c=0,d="";if(""===t)u.push(t),l.push(u),this._colCount=1;else{for(;c<h;)a=!1,r=t.charAt(c),o=c<h-1?t.charAt(c+1):"",'"'==r?s?n&&'"'==o?(d+=r,c++):n?n=!1:d+=r:(s=!0,n=!0):n||"\r"!=r&&"\n"!=r&&"\t"!=r?(s=!0,d+=r):("\t"==r&&(u.push(d),a=!0),"\r"!=r&&"\n"!=r||(u.push(d),this._colCount=Math.max(this._colCount,u.length),l.push(u),u=[],"\r"==r&&"\n"==o&&c++),d="",s=!1),c++;n&&(d='"'+d),(d.length>0||a)&&u.push(d),u.length>0&&(this._colCount=Math.max(this._colCount,u.length),l.push(u))}if(e&&e instanceof qs&&!e.single&&(!i||1===this._colCount&&1===l.length)){var p=e.startIndex,f=e.endIndex;if(p&&f){var _=e.grid,g=p.layout,y=f.layout,m=p.itemIndex,b=f.itemIndex;if(g.col>y.col){var v=g;g=y,y=v}if(m>b){var w=m;m=b,b=w}g=_.activeCellLayout.getTopOf(g);var C=(y=_.activeCellLayout.getBottomOf(y,!0)).col-g.col+1,x=(y.row-g.row+1)*(b-m+1);c=0;for(var I=0,S=l.length;I<S;I++){for(var E=l[I].slice(),k=E.length;k<C;k++)l[I].push(E[c]),c=c>=E.length?0:c;this._colCount=Math.max(this._colCount,l[I].length)}for(c=0,I=l.length;I<x;I++)l.push(l[c++]),c=c>=l.length?0:c;this._blockPaste=!0,this._startIndex=rs.temp(_,m,g)}}},e}(Ct),wa=function(e){function i(){var t=e.call(this)||this;return t._lastLayout=null,t}return r(i,e),i.prototype._doDispose=function(){return e.prototype._doDispose.call(this)},i.prototype.lastLayout=function(){return this._lastLayout},i.prototype.getText=function(t,e,i,r){var o,n,s,a,l=t.grid,u=this._rangeToCells(t,null,e,r),h=[];if(l.copyOptions.includeHeaderText)for(s=0;s<u.length;s++){var c=[];for(a=0;a<u[s].length;a++)(o=ft.cast(u[s][a],Tn))?c.push(ft.addQuot(o.header.displayText)):c.push("");h.push(c.join("\t"))}if(!i){i=[];for(var d=e.r1,p=e.r2;d<=p;d++)i.push(d)}return i.forEach((function(e){var i=l.getItem(e);if(i.dataRow>=0||fr(i.itemState))for(s=0;s<u.length;s++){var r=[];for(a=0;a<u[s].length;a++)(o=ft.cast(u[s][a],Tn))&&!o.blankWhenCopy?(n=rs.temp(l,e,o).clone(),r.push(t.getData(n))):r.push("");h.push(r.join("\t"))}})),h.join("\r\n")+"\r\n"},i.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+t.getData(e)},i.prototype.getRows=function(e,i,r){if(null==i)return null;var o,n=r.grid,s=n.pasteOptions,a=n.getSelection(),l=r.dataColumn;if(a&&a.single&&!n.isTree()&&l.mergeEdit&&n.editOptions.commitByCell){var u=n.getMergedItems(r.itemIndex,l,!0,!0),h=new rs(n,u[0],l),c=new rs(n,u[u.length-1],l);a=new qs(n.selections,t.SelectionStyle.BLOCK,h,c),o=!0}else{if(s.selectBlockPaste&&n.selections.count>1)return void alert("multi selection paste not supported");a=s.selectBlockPaste&&a}var d=new va(i,a,o);if(d.empty)return null;if(d.single)return d.get(0)[0];d.blockPaste&&d.startIndex&&r.assign(d.startIndex);for(var p=n.activeCellLayout._dataCells,f=p[0][r.layout.col],_=p[p.length-1][Math.min(p[0].length-1,r.layout.col+d.colCount-1)],g=new rs(n,r.itemIndex,f),y=new rs(n,r.itemIndex,_),m=as.create(g,y),b=this._rangeToCells(e,d,m,null),v=void 0,w=void 0,C=void 0,x=void 0,I=[],S=0,E=d.rowCount;S<E;){var k={columns:[],values:[]};for(v=0;v<b.length&&S<E;v++,S++){var O=b[v],R=d.get(S);for(k.columns.push(O),k.values.push(x=[]),C=Math.min(R.length,O.length),w=0;w<C;w++)O[w]?x.push(R[w]):x.push("")}I.push(k)}return I},i.prototype.getCell=function(t,e,i){if(!e)return null;var r=new va(e);return r.empty?null:r.get(0)[0]},i.prototype._rangeToCells=function(t,e,i,r){i.normalizeData(),this._lastLayout=null;var o=i.c1,n=i.c2,s=t.grid.activeCellLayout._dataCells,a=o===n?o.row:0,l=o===n?o.row:s.length-1,u=[];if(r){for(var h=[],c=a;c<=l;c++){for(var d=[],p=0;p<s[0].length;p++){var f=s[c][p];r.indexOf(f)>=0?(d.push(f.firstColumn),h[p]=h[p]||f):d.push(null)}u.push(d)}for(p=s[0].length-1;p>=0;p--)for(c=a;c<=l;c++)!h[p]&&u[c].splice(p,1)}else for(c=a;c<=l;c++){for(d=[],p=o.col;p<=n.col;p++)(f=s[c][p])instanceof Vn?d.push(f.firstColumn):d.push(null);u.push(d)}return this._lastLayout=s[l][n.col],u},i}(ba),Ca=function(e){function i(t){var i=e.call(this)||this;return i._values=null,i._dataRow=-1,i._grid=t,i}return r(i,e),Object.defineProperty(i.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._grid.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return 0!=(1&this._getExtents())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return t.ItemType.ROW},enumerable:!0,configurable:!0}),i.prototype._getExtents=function(){return 0},i.prototype._setExtents=function(t){},Object.defineProperty(i.prototype,"values",{set:function(t){this._values=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!0,configurable:!0}),i.prototype.getRowObject=function(){for(var t={},e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),r=0,o=e.fieldCount;r<o;r++){var n=e.getOrgFieldName(r),s=this._values.hasOwnProperty(r)?this._values[r]:i&&i[r];t[n]=s}return t},i.prototype.getRowData=function(){for(var t=[],e=this.dataSource,i=this._dataRow>=0&&e.getRow(this._dataRow),r=0,o=e.fieldCount;r<o;r++){var n=this._values.hasOwnProperty(r)?this._values[r]:i&&i[r];t[r]=n}return t},i.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._values.hasOwnProperty(t)||this._dataRow<0?this._values[t]:this.dataSource.getRow(this._dataRow)[t]},i.prototype.setIndex=function(t){this._setIndex(t)},i}(gr),xa=function(t){function e(e,i){var r=t.call(this,e)||this;return r._item=i,r}return r(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e}(rs),Ia=function(){function e(t){this._grid=t,this._data=new wa,this._appendingItem=new Ca(t),this._appendingIndex=new xa(t,this._appendingItem)}return e.prototype.dispose=function(){return null},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appendingIndex",{get:function(){return this._appendingIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPasting",{get:function(){return this._pasting},enumerable:!0,configurable:!0}),e.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(!t.length||!t[0].length)return e;for(var i=0,r=t[0].length;i<r;i++)e.push(t[0][i].dataRoot);return e},e.prototype.getData=function(e){var i,r,o,n=this.grid,s=e.layout.firstColumn,a=n.getItem(e.itemIndex),l=n.copyOptions,u=l.datetimeFormat?De.getFormatter(l.datetimeFormat):null,h=l.booleanFormat?Te.getFormatter(l.booleanFormat):null,c=l.copyTextCallback;if(!a||!(fr(a.itemState)||a.dataRow>=0))return"";if(o=a.getData(s.dataIndex),s&&null!=(i=n.dataSource.getField(s.dataIndex))){if(null==(r=c?c.call(this,n,e.itemIndex,e.dataColumn,o):void 0))if(l.copyDisplayText)r=n.getDisplayText(e);else switch(i.dataType){case t.ValueType.DATETIME:case t.ValueType.DATE:r=o?u?u.getText(o):String(o):"";break;case t.ValueType.BOOLEAN:r=null!=o?h?h.formatValue(o):String(o):"";break;case t.ValueType.NUMBER:r=null==o||isNaN(o)?"":String(o);break;case t.ValueType.OBJECT:r=o&&"object"==typeof o?JSON.stringify(o):"";break;default:r=l.lookupDisplay&&(s.lookupDisplay||s.labelField)?Yr.getText(a,s):null!=o?String(o):""}return ft.addQuot(r)}return""},e.prototype.copyEmtpyToClipboard=function(){return""},e.prototype.copyToClipboard=function(t,e,i){return this._data.getText(this,t,e,i)},e.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},e.prototype.pasteCellFromClipboard=function(t,e){if((t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e){var i=this._data.getCell(this,e,t);this._pasteSingleCell(t,i)}},e.prototype.pasteFromClipboard=function(t,e){var i=t.clone();if((t=this._correctIndex(t))&&this._grid.isValid(t)){if(null!=e){var r=this._data.getRows(this,e,t);null!=r&&("string"==typeof r?this._pasteSingleCell(t,r):1==r.length?this._pasteSingleLine(t,r[0]):r.length>1&&this._pasteMultiLines(t,r))}rs.areEquals(t,i)||this._grid.setFocusedIndex(i,!1,!1)}},e.prototype._correctIndex=function(t){if(t){var e=this._grid;if(t.normalize(e),this._grid.isValid(t)&&e.pasteOptions.selectionBase&&e.selections.count>0){var i=e.selections.getItem(0).getBounds().firstCell;t.column=i.column,t.itemIndex=i.itemIndex}}return t},e.prototype._convertValue=function(e,i,r,o,n){var s=void 0,a=r.dataIndex,l=e.getField(a),u=this._grid.delegate.getCellEditor(ea.getEditorType(r.editor));switch(l.dataType){case t.ValueType.NUMBER:s=NaN;var h=void 0;if(o){var c=r.name;if(i.applyNumberFormat){var d=r.getCellStyle(null),p=u instanceof ua&&u.editFormat||"object"==typeof d&&d.numberFormat;p&&(h=new Me(p))}var f=i.numberCharExpOfCol(c);f&&(o=o.replace(f,""));var _=i.numberSeparatorOfCol(c);if(_&&(o=o.replace(_,".")),s=h?+parseFloat(o).toFixed(h.maxDigits):parseFloat(o),i.applyMaxLength){var g=String(s).split(".");u instanceof ua&&u.maxIntegerLength>0&&(g[0]=g[0].substr(0,u.maxIntegerLength)),o=g.join("."),u instanceof ua&&u.maxLength>0&&(o=o.substr(0,u.maxLength)),s=parseFloat(o)}}else""==o&&(s=null);break;case t.ValueType.DATETIME:s=null;var y=i.dateReaders;if(o&&y)for(var m=0;m<y.length&&!(s=y[m].toDate(o));m++);null===s&&(s=new Date(o),isNaN(s.getTime())&&(s=null)),null===s&&(s=l.readValue(o));break;case t.ValueType.BOOLEAN:s=void 0;var b=i.boolReader;o&&b&&(s=b.toBoolStrict(o)),void 0===s&&(s=l.readValue(o));break;default:if(o=String(o))if(u instanceof fa){u.initOptions(),u.applyOptions(r.editor);var v=i.checkDomainOnly&&u.domainOnly,w=i.convertLookupLabel,C=-1,x=[],I=[];if(v||w)if(u.values&&u.values.length>0)I=u.values,x=u.labels;else if(r.lookupSource){var S=r.lookupSource,E=r.lookupKeyFieldIds,k=[];for(m=0;m<E.length-1;m++)k.push(n[E[m]]);var O=S.getTextDomain(k);I=O&&O.keys,x=O&&O.values}else r.values&&r.values.length>0&&(I=r.values,x=r.labels);o=w&&I&&x&&I.indexOf(o)<0&&(C=x.indexOf(o))>=0?I[C]:o,o=I&&I.indexOf(o)>=0?o:v?"":o}else i.applyMaxLength&&u&&u instanceof oa&&u.maxLength>0&&(o=o.substr(0,u.maxLength)),r.textInputCase==t.TextInputCase.LOWER?o=o.toLocaleLowerCase():r.textInputCase==t.TextInputCase.UPPER&&(o=o.toLocaleUpperCase());s=o}return s},e.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],r=0;r<t.length;r++)i.push(e.getItemIndexOfRow(t[r]));i.length>0&&e._fireItemsPasted(i)},e.prototype._cellWritable=function(e,i,r){var o=this._grid,n=o._fireCellPasting(e,r);if("boolean"==typeof n)return n;if(!o.pasteOptions.checkReadOnly)return!0;var s=o.body.getIndexCellStyle(e);if(s&&(null!=s.readOnly||null!=s.editable))return null!=s.editable?s.editable&&!s.readOnly:!s.readOnly;var a=o.body.getRowStyle(e.item,e.itemIndex<o.fixedOptions.rowCount);if("object"==typeof a&&(null!=a.readOnly||null!=a.editable))return null!=a.editable?a.editable&&!a.readOnly:!a.readOnly;var l=o.fixedOptions;if((e.colFixed||e.rightFixed)&&!l.editable||e.rowFixed&&!l.rowEditable)return!1;var u,h=e.item&&e.item.itemState;switch(i||h){case t.ItemState.NORMAL:case t.ItemState.FOCUSED:case t.ItemState.UPDATING:u=o.canUpdate(e.item,e.dataField);break;default:u=!0}var c=this.grid.getBodyCellAt(e,!1);if(c&&c.renderer2&&c.renderer2.canEdit())return u&&!e.dataColumn.readOnly;if(!c){var d=e.dataColumn.renderer;if(d&&"check"===d.type&&null!=d.editable)return u&&d.editable&&!e.dataColumn.readOnly}return u&&e.dataColumn.isWritable()},e.prototype._applyMaskValue=function(t,e){var i,r=this.grid.body.getIndexCellStyle(t);if(r.editor&&r.editor.mask?i=r.editor.mask:r.editor||(i=t.dataColumn.editor&&t.dataColumn.editor.mask),i){var o=new ia(null,i);return o.clearBuffer(),o.writeBuffer(e,!0),o.checkValid()?o.getStripValue():null}return e},e.prototype._applyInputChars=function(t,e){if(!this.grid.pasteOptions.applyInputChars)return e;var i,r,o=this.grid.body.getIndexCellStyle(t).editor||t.dataColumn.editor;return o?((r=o.inputCharacters)&&(i=new RegExp("[^"+r+"]","g")).test(e)&&(e=e.replace(i,"")),(r=o.ignoreCharacters)&&(i=new RegExp("["+r+"]","g")).test(e)&&(e=e.replace(i,"")),e):e},e.prototype._pasteSingleCell=function(t,e){var i,r=this._grid,o=r.dataSource,n=t.dataColumn,s=r.pasteOptions;if(null!=e&&o&&n&&n.isWritable()&&!r.editOptions.readOnly&&t.item.canEdit()){e.lastIndexOf("\r\n")==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1));var a=this._convertValue(o,s,n,e,t.item&&t.item.getRowData());if(a=s.applyEditMask?this._applyMaskValue(t,a):a,a=this._applyInputChars(t,a),this._cellWritable(t,null,a))if(r.isItemEditing()||!r.editOptions.commitByCell&&s.startEdit&&r.edit(t)){i=t.item;var l=[],u=[];u[t.dataField]=a,l[t.dataField]=i.getData(t.dataField),r.setCellUpdateEventLock(s.noEditEvent);try{i.setData(n.dataIndex,a)}finally{r.setCellUpdateEventLock(!1)}r.validateCellCommit(t,t.item.getData(t.dataField)),r._fireEditItemPasted(i,[t.dataField],l,u),r.refreshView()}else{this._pasting=!0;try{var h=r.validationManager,c=s.forceRowValidation,d=s.forceColumnValidation;i=t.item;var p=this._appendingItem.values=c||d?i.getRowData():[];p[n.dataIndex]=a;var f=fr(i.itemState);if(this._appendingItem.dataRow=i.dataRow,this._appendingItem.setIndex(i.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,c&&h.validateRow(this._appendingItem,f,!0,!0),d){this._appendingIndex.column=n;try{h.validateCell(this._appendingIndex,f,!0)}catch(t){if(!(t instanceof Jo))throw t;if(A(t.level,r.editOptions.commitLevel)<0)throw t}}h.clearInvalidCell(this._appendingIndex),r.updatePastedRow(i,p,!c)}finally{this._pasting=!1}}}},e.prototype._pasteSingleLine=function(e,i){var r,o,n,s,a,l,u,h=this._grid,c=h.dataSource,d=h.pasteOptions,p=h.editOptions,f=!1;if(c&&!p.readOnly&&c){if(h.isItemEditing()||!p.commitByCell&&d.startEdit&&h.edit(e)){var _=[],g=[],y=[],m=e.column;for(o=e.item,n=Math.min(i.columns.length,i.values.length),s=0;s<n;s++){var b=i.columns[s],v=i.values[s];for(a=0;a<v.length;a++){u=b[a];var w=v[a];if(u){var C=rs.temp(h,e.itemIndex,u),x=o.getData(u.dataIndex);r=this._convertValue(c,d,u,w,o&&o.getRowData()),r=d.applyEditMask?this._applyMaskValue(C,r):r,r=this._applyInputChars(C,r),h.setCellUpdateEventLock(d.noEditEvent);try{(l=this._cellWritable(C,null,r))&&o.setData(u.dataIndex,r)}finally{h.setCellUpdateEventLock(!1)}l&&(e.column=u,h.validateCellCommit(e,o.getData(u.dataIndex)),_.push(u.dataIndex),g[u.dataIndex]=x,y[u.dataIndex]=r,f=!0)}}}f&&(h._fireEditItemPasted(o,_,g,y),e.column=m,h.refreshView())}else{this._pasting=!0;try{var I=h.validationManager,S=d.forceRowValidation,E=d.forceColumnValidation,k=this._appendingItem;for(o=e.item,k.setIndex(o.index),k.dataRow=o.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=e.itemIndex,y=k.values=S||E?o.getRowData():[],n=Math.min(i.columns.length,i.values.length),b=void 0,v=void 0,s=0;s<n;s++)for(b=i.columns[s],v=i.values[s],a=0;a<v.length;a++)(u=b[a])&&(C=os.tempItem(h,k,u),r=this._convertValue(c,d,u,v[a],k&&k.getRowData()),r=d.applyEditMask?this._applyMaskValue(C,r):r,r=this._applyInputChars(C,r),(l=this._cellWritable(C,null,r))&&(y[u.dataIndex]=r,f=!0));if(f){var O=fr(o.itemState);if(S&&I.validateRow(k,O,!0,!0),E)for(s=0;s<n;s++)for(b=i.columns[s],v=i.values[s],a=0;a<v.length;a++){this._appendingIndex.column=b[a];try{I.validateCell(this._appendingIndex,O,!0)}catch(t){if(!(t instanceof Jo))throw t;if(A(t.level,p.commitLevel)<0)throw t}}I.clearInvalidCells(o.dataId),h.updatePastedRow(o,y,!S)}}finally{this._pasting=!1}}h.selections.clear(),h.selections.add(e,new rs(h,e.itemIndex,this._data.lastLayout()),t.SelectionStyle.BLOCK)}},e.prototype._pasteMultiLines=function(e,i){var r=this._grid,o=r.dataSource;if(o){var n=r.pasteOptions,s=n.checkReadOnly;if(s&&r.editOptions.readOnly)return;var a=n.noDataEvent,l=i.length,u=e.itemIndex,h=o.fieldCount,c=r.getDataColumns(!1),d=c.length,p=r.validationManager,f=n.forceRowValidation,_=n.forceColumnValidation,g=this._appendingItem,y=this._appendingIndex,m=void 0,b=void 0,v=void 0,w=void 0,C=n.eventEachRow,x=[];n.commitEdit&&r.commit(!1)||r.cancel();var I=r.itemCount;a&&o.beginUpdate();var S=void 0,E=void 0;if(!r.isTree()){var k=r.itemSource;S=k.filterMode,E=k.sortMode,k.filterMode=t.FilterMode.EXPLICIT,k.sortMode=t.SortMode.EXPLICIT}try{for(this._pasting=!0,m=0;m<l&&u<I;m++)try{if((W=r.getItem(u)).itemState==t.ItemState.APPENDING)break;for(;W&&W.dataRow<0;)u++,W=r.getItem(u);if(null==W)break;var O=i[m],R=g.values=f||_?W.getRowData():[],P=f||_?W.getRowData():[],D=!1,T=[];for(g.setIndex(W.index),g.dataRow=W.dataRow,v=Math.min(O.columns.length,O.values.length),b=0;b<v;b++){var L=O.columns[b],M=O.values[b];for(w=0;w<M.length;w++)if((B=L[w])&&B instanceof Tn){var F=os.tempItem(r,g,B),N=this._convertValue(o,n,B,M[w],g&&g.getRowData());N=n.applyEditMask?this._applyMaskValue(F,N):N,N=this._applyInputChars(F,N),($=this._cellWritable(F,null,N))&&(D=D||$||!s,T.push(B.dataIndex),P[B.dataIndex]=W.getData(B.dataIndex),R[B.dataIndex]=N)}}if(D)try{y.column=null,y.itemIndex=W.index;var V=fr(W.itemState);if(f&&p.validateRow(g,V,!0,!0),_)for(w=0;w<d;w++){var B=c[w];y.column=B;try{p.validateCell(y,V,!0)}catch(t){if(!(t instanceof Jo))throw t;if(A(t.level,r.editOptions.commitLevel)<0)throw t}}r.updatePastedRow(W,R,!f),p.clearInvalidCells(g.dataId),C&&r._fireEditItemPasted(W,T,P,R),x.push(W.dataRow)}catch(t){if(n.stopOnError)throw t}u++}catch(i){throw u=Math.max(e.itemIndex,u-1),r.setFocusedIndex(e,!1),r.selections.clear(),r.selections.add(e,new rs(r,u,this._data.lastLayout()),t.SelectionStyle.BLOCK),i}if(m<l&&n.enableAppend){for(;m<l;m++){O=i[m],R=g.values=[],P=[],g.dataRow=-1,g.setIndex(-1);try{for(T=[],v=Math.min(O.columns.length,O.values.length),b=0;b<v;b++)for(L=O.columns[b],M=O.values[b],w=0;w<M.length;w++){var $;(B=L[w])&&(F=os.tempItem(r,g,B),N=this._convertValue(o,n,B,M[w],R),N=n.applyEditMask?this._applyMaskValue(F,N):N,N=this._applyInputChars(F,N),($=this._cellWritable(F,t.ItemState.APPENDING,N))&&(T.push(B.dataIndex),R[B.dataIndex]=N,P[B.dataIndex]=void 0))}if(n.fillColumnDefaults)for(w=0;w<d;w++)(B=c[w]).dataIndex>-1&&void 0===R[B.dataIndex]&&void 0!==B.defaultValue&&(R[B.dataIndex]=B.defaultValue);if(n.fillFieldDefaults)for(w=0;w<h;w++)if(void 0===R[w]){var j=o.getField(w);void 0!==j.defaultValue&&(R[w]=j.defaultValue)}try{if(this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,f&&p.validateRow(g,!0,!0,!0),n.forceColumnValidation)for(w=0;w<d;w++){B=c[w],this._appendingIndex.column=B;try{p.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof Jo))throw t;if(A(t.level,r.editOptions.commitLevel)<0)throw t}}r.appendPastedRow(R);var H=o.rowCount-1;if(C){var W=r.getItem(r.getItemIndexOfRow(H));r._fireEditItemPasted(W,T,P,R)}x.push(H)}catch(t){if(n.stopOnError)throw t}}catch(i){throw u=Math.max(e.itemIndex,r.itemCount-1),r.setFocusedIndex(e,!1),r.selections.clear(),r.selections.add(e,new rs(e.grid,u,this._data.lastLayout()),t.SelectionStyle.BLOCK),i}}u=a?-1:r.itemCount}this._fireRowsPasted(x)}catch(t){throw this._fireRowsPasted(x),t}finally{if(this._pasting=!1,a&&(o.endUpdate(),u<0&&(u=o.rowCount)),!r.isTree()){var G=r.itemSource;(G.isFiltered(null)&&G.filterMode!==S||G.sorted&&G.sortMode!==E)&&(G.filterMode=S,G.sortMode=E,G._refreshItems())}}r.setFocusedIndex(e,!1),r.selections.clear(),r.selections.add(e,new rs(e.grid,u-1,this._data.lastLayout()),t.SelectionStyle.BLOCK)}},e}(),Sa=function(e){function i(t){var i=e.call(this,t)||this;return i._cellButtonWidth=16,i._cellButtonHeight=16,i._editButtonWidth=16,i._editButtonHeight=16,i._errorIconWidth=16,i._errorIconHeight=16,i._showChangeMarker=!1,i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._buttonHeight=16,i._dataCell=new Yr,i._hiddenCell=new qr,i._literalCell=new Kr,i._seriesCell=new Xr,i._mergedCell=new Qr,i._rowRuntime=new $r,i._cellRuntime=new jr,i._cs=new Rn,i._rowCs=new _r,i}return r(i,e),i.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._cs=null,this._rowCs=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"rowRuntime",{get:function(){return this._rowRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellRunTime",{get:function(){return this._cellRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(t){t!=this._cellButtonHeight&&(this._cellButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(t){t!=this._errorIconHeight&&(this._errorIconHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonHeight",{get:function(){return this._buttonHeight},enumerable:!0,configurable:!0}),i.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},i.prototype.getCell=function(t,e){return this.getCellAt(t.item,t.column,e)},i.prototype.getCellAt=function(e,i,r){var o,n=this._grid;if(r?o=this._mergedCell:i instanceof Tn?e.index<0||e instanceof Ca?(o=this._hiddenCell,this._hiddenCell.setItem(e)):o=this._dataCell:o=i instanceof Ln?this._seriesCell:i instanceof Kr?this._literalCell:this._dataCell,o.setIndex2(n,e?e.index:-1,i),i instanceof Tn){var s=n.validationManager.getError(o.index);s?(o.error=s.message,o.errorLevel=s.level):(o.error=null,o.errorLevel=t.ValidationLevel.IGNORE)}return o},i.prototype.getHidden=function(t,e){return this._hiddenCell.setIndex(t),this._hiddenCell.setItem(e),this._hiddenCell},i.prototype.getCellSimple=function(t,e){var i=t.column,r=e?this._mergedCell:i instanceof Ln?this._seriesCell:i instanceof Kr?this._literalCell:this._dataCell;return r.setIndex(t),r},i.prototype.getIndexCellStyle=function(t,e){var i=this.getCell(t,!1);return this.getCellStyle(i,this._cs.clear(),!1,e)},i.prototype.getCellStyle=function(t,e,i,r){void 0===r&&(r=!0);var o,n=t.valueColumn,s=this._cellStyleCallback;s&&(o=s(this._grid.handler,t),e.assign(o)),n&&(o=n.getCellStyle(t),e.assign(o));var a=e.styleName||n&&n.styleName||"";return r&&(e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+a),e},i.prototype.getCellFormatters=function(t,e,i,r){if(e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),i){var o=i.grid,n=o.body.getCell(i,!1);e=(r=o.body.getCellStyle(n,r)).toFormatter(e)}return e},i.prototype.getRowStyle=function(t,e,r,o){void 0===r&&(r=!1),void 0===o&&(o=!0);var n=this._rowStyleCallback,s=this._grid,a=this._rowCs;if(a.clear(),o&&n){var l=n(s.handler,t,e)||{};a.assign(l)}if(!a.styleName){var u=i.ROW_STYLE;t.index%2&&s.displayOptions.useAlternateRowStyle&&(u+=i.ALTERNATE_ROW_STYLE),e&&(u+=i.FIXED_ROW_STYLE),r||(u+=i.STATE_ROW_STYLES[t.rowState]||""),t.checked&&(u+=i.CHECKED_ROW_STYLE),a.styleName=u}return a},i.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._rowRuntime.setDataSource(this._ds),this._cellRuntime.setDataSource(this._ds),this._showChangeMarker=t.displayOptions.showChangeMarker},i.ROW_STYLE=" rg-data-row",i.ALTERNATE_ROW_STYLE=" rg-alternate-row",i.FIXED_ROW_STYLE=" rg-fixed-row",i.CHECKED_ROW_STYLE=" rg-checked-row",i.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},i}(Ar),Ea=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return r(e,t),e.prototype._doDispose=function(){return this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},e.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},e.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},e.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},e.prototype._invalidateEditor=function(){},e}(Ct),ka=function(t){function e(e){var i=t.call(this,e)||this;return i._colCount=0,i._rightCount=0,i._rowCount=0,i._rightFixed=!0,i._exceptFromFiltering=!0,i._exceptFromSorting=!0,i._editable=!0,i._rowEditable=!0,i._resizable=!1,i._rowResizable=!1,i._movable=!1,i._colBarWidth=3,i._rightBarWidth=3,i._rowBarHeight=3,i._mergeRows=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))},enumerable:!0,configurable:!0}),e.prototype.$_resetItemSource=function(){var t,e=this.grid;e&&(t=e.itemSource)&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},e.ROW_BAR_STYLE="rg-fixed-row-bar",e.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",e.COLUMN_BAR_STYLE="rg-fixed-column-bar",e}(Ea),Oa=function(e){function i(i){var r=e.call(this,i)||this;return r._refreshMode=t.RefreshMode.ALL,r._columnResizable=!0,r._columnMovable=!0,r._minCellWidth=8,r._defaultColumnWidth=100,r._fitStyle=t.GridFitStyle.NONE,r._rowResizable=!1,r._eachRowResizable=!1,r._autoClearHeights=!0,r._rowHeight=0,r._refCalcHeights=!0,r._dataHeights=null,r._minTableRowHeight=23,r._minRowHeight=23,r._maxRowHeight=0,r._hscrollBar=!0,r._vscrollBar=!0,r._liveScroll=!0,r._scrollDuration=0,r._hscrollDuration=0,r._hintDelay=0,r._rowChangeDelay=0,r._horzPageScroll=!1,r._emptyMessage="\uc774 \uacf3\uc5d0 \ud45c\uc2dc\ud560 \uba54\uc2dc\uc9c0\ub97c DisplayOptions.emptyMessage \uc18d\uc131\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.",r._showEmptyMessage=!1,r._focusVisible=!0,r._focusType="layer",r._rowFocusType=t.RowMaskType.NONE,r._wheelEnabled=!0,r._wheelScrollLines=3,r._wheelScrollHorz=16,r._wheelAccelDelay=0,r._wheelAccelScroll=null,r._wheelDeltaY=0,r._wheelEventPropagate=!0,r._rightClickable=!0,r._remergeWhenColumnMoved=!0,r._editItemMerging=!1,r._showInnerFocus=!0,r._toastZIndex=3e3,r._popupDropdownCount=0,r._selectionMode=t.SelectionMode.SINGLE,r._selectionStyle=t.SelectionStyle.BLOCK,r._selectionDisplay=t.SelectionDisplay.CELL,r._spanSelecting=!0,r._rowHoverType=t.RowMaskType.NONE,r._rowBlockType=t.RowMaskType.NONE,r._showEmptyTooltip=!1,r._showChangeMarker=!0,r._showNativeEditButton=!1,r._baseZindex=2e3,r._useAlternateRowStyle=!0,r._useFocusClass=!1,r._watchDisplayChange=!0,r._syncGridHeight=t.SyncGridHeight.NONE,ft.isMobile()&&(r._selectionStyle=t.SelectionStyle.NONE),(ft.ieNine||ft.ieTen)&&(r._focusType="line"),i.setWatchTimer(r._watchDisplayChange),r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnResizable",{get:function(){return this._columnResizable},set:function(t){this._columnResizable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnMovable",{get:function(){return this._columnMovable},set:function(t){this._columnMovable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fitStyleIncludeFixed",{get:function(){return this._fitStyleIncludeFixed},set:function(t){t!=this._fitStyleIncludeFixed&&(this._fitStyleIncludeFixed=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){this._rowResizable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){this._eachRowResizable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"refCalcHeights",{get:function(){return this._refCalcHeights},set:function(t){t!=this._refCalcHeights&&(this._refCalcHeights=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataHeights",{get:function(){return this._dataHeights},set:function(t){t&&t.length>0?this._dataHeights=t.slice():this._dataHeights=null,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(i.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(i.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){this._scrollDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){this._hscrollDuration=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hintDelay",{get:function(){return this._hintDelay},set:function(t){this._hintDelay=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){this._rowChangeDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(t){this._horzPageScroll=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){this._wheelEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){this._wheelScrollLines=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){this._wheelScrollHorz=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){this._wheelAccelDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){this._wheelAccelScroll=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelDeltaY",{get:function(){return this._wheelDeltaY},set:function(t){this._wheelDeltaY=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){this._wheelEventPropagate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightClickable",{get:function(){return this._rightClickable},set:function(t){this._rightClickable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){this._toastZIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){this._popupDropdownCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearAddSelection())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){t!=this._selectionStyle&&(this.grid.selections.clear(),this._selectionStyle=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spanSelecting",{get:function(){return this._spanSelecting},set:function(t){t!=this._spanSelecting&&(this._spanSelecting=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(e){e!==this._rowBlockCallback&&(this._rowBlockCallback=e,this._rowBlockType!=t.RowMaskType.NONE&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useFocusClass",{get:function(){return this._useFocusClass},set:function(t){t!=this._useFocusClass&&(t||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(t){this.grid.body.editButtonHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this.grid.setWatchTimer(t))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"syncGridHeight",{get:function(){return this._syncGridHeight},set:function(e){e!=this._syncGridHeight&&(this._syncGridHeight=e,e!==t.SyncGridHeight.ALWAYS&&this.grid.recallHeight(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowHeightCallback",{get:function(){return this._rowHeightCallback},set:function(t){this._rowHeightCallback=t,this.grid.clearRowHeights(!1),this._changed()},enumerable:!0,configurable:!0}),i.MIN_TABLE_ROW_HEIGHT=20,i}(Ea),Ra=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.set=function(t,e){return this.width=t,this.height=e,this},t.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},t.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},t.EMPTY=new t,t}(),Pa=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof Zh)return t;t=t.parent}return null},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},e.prototype._getCssSelector=function(){return""},e.prototype._getCssDisplay=function(){return"table"},e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doMeasure=function(t,e,i){return new Ra(e,i)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){},e.prototype._doRender=function(t){},e}(Bs),Da=function(t){function e(e,i,r){void 0===r&&(r=null);var o=t.call(this,e,r)||this;return o._ff=ft.isFirefox,o._chromium=ft.isChromium,o._textProp=ft.TextProp,o._cursor="default",o._model=i,o}return r(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},e}(Pa),Ta=function(t){function e(e){return t.call(this,e,"emptyGridView")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.setMessage=function(t){this._span[ft.TextProp]=t},e.prototype._createDom=function(e){var i=t.prototype._createDom.call(this,e),r=this._span=e.createElement("span");return i.appendChild(r),i},e.prototype._getCssSelector=function(){return"rg-empty-grid"},e.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)},e}(Pa),La=function(t){function e(e,i,r){void 0===r&&(r=null);var o=t.call(this,e,i,r)||this;return o._explicitWidth=NaN,o}return r(e,t),e.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tableRowCount",{get:function(){return this._tbody.childElementCount},enumerable:!0,configurable:!0}),e.prototype.getCellPoint=function(t,e){return(e=e||new Vs).x+=t.offsetLeft,e.y+=t.offsetTop,e},e.prototype._getTableHidden=function(){return!0},e.prototype._getTableCaption=function(){return""},e.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table");this._getTableHidden()&&i.setAttribute("aria-hidden","true"),i.setAttribute("role","grid");var r=i.createCaption();r.textContent="grid table ";var o=r.style;return o.width=o.height="0px",o.overflow="hidden",o.setProperty("padding","0px","important"),o.boxSizing="border-box",(o=i.style).setProperty("table-layout","fixed","important"),o.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.$_view=this.$_hash,e.style.overflow="hidden"},e.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);ft.equalNumbers(e,this._explicitWidth)||(this._table.style.width=e>0?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},e.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},e.prototype._getExplicitWidth=function(t){return NaN},e.prototype._doPrepareTableExtents=function(t){},e.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},e.prototype._doPrepareTableHead=function(t,e){var i,r=ct(e);0==e.childElementCount?((i=r.createElement("tr")).setAttribute("role","row"),e.appendChild(i),this._getTableHidden()&&i.setAttribute("aria-hidden","true"),(l=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var o=this._getCellCount(t);i.childElementCount<o;)(a=r.createElement("th")).scope="col",(l=a.style).setProperty("margin","0px","important"),l.setProperty("padding","0px","important"),l.setProperty("font-size","0px","important"),l.setProperty("line-height","0px","important"),l.height="0px",i.appendChild(a);for(;i.childElementCount>o;)i.removeChild(i.lastChild);for(var n=i.children,s=0;s<n.length;s++){var a,l;(l=(a=n[s]).style).width=this._getCellWidth(t,s)+"px"}},e.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),r=ct(e),o=e.childElementCount;o<i;){var n=r.createElement("td");n.setAttribute("role","gridcell"),e.appendChild(n);var s=this._prepareCellContent(n,o++);n.appendChild(s)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);return e.childElementCount},e.prototype._isFixedHeight=function(t){return!0},e.prototype._getMinRowHeight=function(t){return t.minRowHeight},e.prototype._doPrepareTableRow=function(t,e,i,r){this._prepareTableRowCells(t,r);var o=this._isFixedHeight(t),n=r.children,s=this._isDataTable(),a=o?this._getTableRowHeight(t,i):this._getMinRowHeight(t),l=a-2+"px",u=r.style;r.$_view=this.$_hash,r.$_fix=o,r.$_hei=o?a:0,s||o?u.setProperty("height",a+"px"):u.removeProperty("height"),u.display="";for(var h=0,c=n.length;h<c;h++){var d=n[h];this._ff&&(d.style.height="100%");var p=d.firstElementChild;p||(p=this._prepareCellContent(d,h),d.appendChild(p));var f=p.style,_=o?l:"";!o&&s&&f.removeProperty("height"),_!=f.maxHeight&&(f.maxHeight=_),"hidden"!==f.overflow&&(f.overflow="hidden")}},e.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var r=e[i];this._renderRow(r,i)}},e.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,r=0;r<i.length;r++){var o=i[r];this._renderCell(o.lastElementChild,e,r)}},e.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},e.prototype._prepareCellContent=function(t,e){return ct(t).createElement("div")},e.prototype._doDrawRow=function(t,e){},e.prototype._doDrawCell=function(t,e,i){},e.prototype._getTableRow=function(t,e){return this._tbody.children[e]},e.prototype._getTableRows=function(t,e,i){for(var r=[],o=0;o<i;o++)r.push(this._tbody.children[e+o]);return r},e.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},e.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},e.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,r=i.fixedItemCount,o=t.column?t.column.index:0;return e=r>0?t.itemIndex<r?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,o)},e}(Da),Ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._isDataTable=function(){return!1},e.prototype._doPrepareTableRows=function(t,e){for(var i=this._getTableRowCount(t),r=ct(e);e.childElementCount<i;){var o=r.createElement("tr");e.appendChild(o)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var n=e.children,s=0;s<i;s++)(o=n[s]).style.height=this._getTableRowHeight(t,s)+"px",this._doPrepareTableRow(t,s,s,o)},e.prototype._getTableRowCount=function(t){return 1},e}(La),Fa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._trCount=0,e._trs=1,e}return r(e,t),e.prototype._isDataTable=function(){return!0},e.prototype._getTrs=function(t){return 1},e.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return(i*=this._trs)+(e>0?1:0)},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,r=e*this._trs;return i>0&&e>=i?r+1:r},e.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},e.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),r=this._trs=this._getTrs(t),o=t.fixedItemCount,n=t.itemCount+o,s=this._trCount=this._getTableRowCount(t),a=ct(e);e.childElementCount<s;){var l=a.createElement("tr");l.setAttribute("role","row"),e.appendChild(l)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var u=e.children,h=0,c=0;if(o>0){for(h=0;h<o;h++)for(var d=0;d<r;d++,c++)this._doPrepareTableRow(t,h,c,u[c]);this.$_prepareFixedBar(t,u[c++])}for(;h<n&&c<s;h++){var p=i[h].isData?r:1;for(d=0;d<p&&c<s;d++,c++)this._doPrepareTableRow(t,h,c,u[c])}},e.prototype.$_prepareFixedBar=function(t,e){var i=ht(e),r=this._prepareTableRowCells(t,e),o=t.fixedBarHeight,n=e.style;o>0?n.height=t.fixedBarHeight+"px":n.display="none";for(var s=e.children,a=0;a<r;a++){var l=s[a];l instanceof i.HTMLTableCellElement&&(l.rowSpan=1,l.style.display=""),(l=s[a].firstElementChild)&&(l.style.maxHeight="0px",l.style.overflow="hidden")}return o},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._getCellContent=function(t){return t.firstElementChild},e.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},e.prototype._doUpdateCellContent=function(t,e,i){},e}(La),Na=function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this,e,i)||this;return r._fixed=!1,r._index=new rs,r}return r(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom=ft.detach(this._cellDom),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){rs.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!0,configurable:!0}),e.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},e.prototype.removeCellDom=function(t){void 0===t&&(t=!1),t&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},e.prototype._createDom=function(t){return null},e.prototype._clearCellDom=function(t){t.innerHTML=""},e.prototype._clearCellCache=function(){},Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this.invalidate()},e.prototype._doPrepareValue=function(t,e){},e.prototype._doUpdateContent=function(t,e,i){},e.prototype._doLayoutContent=function(t){},e}(Pa),Va=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return r(e,t),e.prototype._doPrepareValue=function(t,e){},e}(Na),Ba=function(t){function e(){var e=t.call(this)||this;return e._valueSeparator=",",e}return r(e,t),Object.defineProperty(e.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.SERIES_TYPE},enumerable:!0,configurable:!0}),e.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},e.SERIES_TYPE="series",e}(mo),Aa=function(t){function e(){var e=t.call(this)||this;return e._baseValue=NaN,e.$_render=function(t,e,i,r){var o=this._values;if(o&&o.length){for(var n=o.length,s=o[0],a=o[0],l=1;isNaN(s)&&l<n;)a=s=o[l++];for(;l<n;l++){var u=o[l];isNaN(u)||(u<s&&(s=u),u>a&&(a=u))}var h=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,o,s,a,h)}}.bind(e),e}return r(e,t),e.interfaced=function(t){var e=t.type;return!!e&&(e==$a.TYPE||e==ja.TYPE||e==Ha.TYPE)},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this._baseValue},set:function(t){t!=this._baseValue&&(this._baseValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstStyle",{get:function(){return this._firstStyle},set:function(t){t!=this._firstStyle&&(this._firstStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastStyle",{get:function(){return this._lastStyle},set:function(t){t!=this._lastStyle&&(this._lastStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highStyle",{get:function(){return this._highStyle},set:function(t){t!=this._highStyle&&(this._highStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lowStyle",{get:function(){return this._lowStyle},set:function(t){t!=this._lowStyle&&(this._lowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"belowStyle",{get:function(){return this._belowStyle},set:function(t){t!=this._belowStyle&&(this._belowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointStyle",{get:function(){return this._pointStyle},set:function(t){t!=this._pointStyle&&(this._pointStyle=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=ct(t),i=this._div=e.createElement("div");i.style.position="relative",i.style.height="100%",t.appendChild(i);var r=(this._svg=lo.createSVG(i)).style;r.position="absolute",r.left="0px",r.top="0px",r.width="100%",r.height="100%"},e.prototype._doRenderCell=function(t,e,i,r,o){this._div;var n=this._svg;n.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),lo.renderSVG2(t,n,this.$_render)},e.prototype._getPoints=function(t,e,i){for(var r=t.length,o=[],n=i-e,s=0;s<r;s++){var a=t[s],l=5+s/(r-1)*90,u=10+(isNaN(a)||0==n?80:80*(1-(a-e)/n));o.push(l,u)}return o},e.prototype._getBasePoint=function(t,e,i){var r=e-t;return 0+(isNaN(i)||0==r?100:100*(1-(i-t)/r))},e}(function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._getValues=function(t){return t.value||[]},e}(yo)),$a=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._curved=!1,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return r(e,t),e.interfaced=function(t){var i=t.type;return!!i&&i==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curved",{get:function(){return this._curved},set:function(t){t!=this._curved&&(this._curved=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,r,o){for(var n,s=isNaN(o)?r:Math.max(r,o),a=isNaN(o)?i:Math.min(i,o),l=this._getPoints(e,a,s),u=e.length,h=0;h<u-1;h++)if(t.sline(null,l[2*h]+"%",l[2*h+1]+"%",l[2*(h+1)]+"%",l[2*(h+1)+1]+"%"),n=this.pointStyle){var c=l[2*h],d=l[2*h+1];t.scircle(n,c+"%",d+"%","2")}if((n=this.firstStyle)&&(c=l[0],d=l[1],t.scircle(n,c+"%",d+"%","2")),(n=this.lastStyle)&&(c=l[2*(u-1)],d=l[2*(u-1)+1],t.scircle(n,c+"%",d+"%","2")),n=this.highStyle)for(h=0;h<u;h++)e[h]>=r&&(c=l[2*h],d=l[2*h+1],t.scircle(n,c+"%",d+"%","2"));if(n=this.lowStyle)for(h=0;h<u;h++)e[h]<=i&&(c=l[2*h],d=l[2*h+1],t.scircle(n,c+"%",d+"%","2"))},e.TYPE="sparkline",e.STYLE="rg-sparkline-renderer",e.CHART_STYLE="rg-sparkline-renderer-chart",e.LAST_STYLE="rg-sparkline-renderer-last",e.HIGH_STYLE="rg-sparkline-renderer-high",e.LOW_STYLE="rg-sparkline-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Aa),ja=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return r(e,t),e.interfaced=function(t){var i=t.type;return!!i&&i==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,r,o){for(var n,s=isNaN(o)?r:Math.max(r,o),a=isNaN(o)?i:o,l=e.length,u=this._getBasePoint(a,s,o),h=100/l,c=0+h/2,d=s-a,p=h*this._barWidth,f=0;f<l;f++){var _=e[f];if(!isNaN(_)){n=_<=i&&this.lowStyle?this.lowStyle:_>=r&&this.highStyle?this.highStyle:_<o&&this.belowStyle?this.belowStyle:0==f&&this.firstStyle?this.firstStyle:f==l-1&&this.lastStyle?this.lastStyle:null;var g=0==d?1:Math.max(1,Math.floor(100*(_-a)/d));t.pbounds(n,c-p/2,u,p,-g)}c+=h}},e.TYPE="sparkcolumn",e.STYLE="rg-sparkcolumn-renderer",e.CHART_STYLE="rg-sparkcolumn-renderer-chart",e.LAST_STYLE="rg-sparkcolumn-renderer-last",e.HIGH_STYLE="rg-sparkcolumn-renderer-high",e.LOW_STYLE="rg-sparkcolumn-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Aa),Ha=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i._belowHeight=.4,i.belowStyle=e.BELOW_STYLE,i}return r(e,t),e.interfaced=function(t){var i=t.type;return!!i&&i==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"belowHeight",{get:function(){return this._belowHeight},set:function(t){(t=Math.max(0,t))!=this._belowHeight&&(this._belowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,r,o){for(var n=e.length,s=100/n,a=0+s/2,l=s*this._barWidth,u=0+100*(1-this._belowHeight),h=0;h<n;h++){var c=e[h];if(!isNaN(c)&&c!=o){var d=null;c<o&&this.belowStyle&&(d=this.belowStyle);var p=c<o?100:0;t.pbounds(d,Math.floor(a-l/2),Math.floor(p),Math.floor(l),Math.floor(u-p))}a+=s}},e.TYPE="sparkwinloss",e.STYLE="rg-sparkwinloss-renderer",e.CHART_STYLE="rg-sparkwinloss-renderer-chart",e.BELOW_STYLE="rg-sparkwinloss-renderer-below",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Aa),Wa=(function(t){function e(e,i){return t.call(this,e,i||"dataCellView")||this}r(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e.prototype._doUpdateContent=function(t,e,i){i[ft.TextProp]=this._text}}(Va),function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this,e,i)||this;return r._domIndex=-1,r._trs=1,r._fixedHeight=!1,r}return r(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),e.prototype.updateItem=function(t,e,i,r){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=r},e.prototype.clearContent=function(t,e){},e.prototype._createDom=function(){return null},e.prototype.$_getDefaultRenderer=function(t,e){return mo.TYPE},e.prototype._changed=function(){this.invalidate()},e.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},e.prototype._getTableRows=function(t){return this.parent._getTableRows(t,this._domIndex,this._trs)},e.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},e}(Pa)),Ga=function(e){function i(t,i){return void 0===i&&(i=null),e.call(this,t,i)||this}return r(i,e),i.isExpander=function(t){var e=t.className;return"string"==typeof e&&("rg-expander-expanded"==e||"rg-expander-collapsed"==e||e.indexOf("rg-tree-expanded")>=0||e.indexOf("rg-tree-collapsed")>=0)},i.prototype.resetButtons=function(t,e,i){for(var r=t.layoutManager,o=this._trs,n=this.parent._cells,s=this._getFirstCell(r),a=this._getStartCell(r)-s,l=this._getEndCell(r)-s,u=e&&i&&e.head===i.head&&t.canMergeEditing(i),h=0;h<o;h++)for(var c=n[this._domIndex+h],d=a;d<=l;d++){var p=c[d],f=p.layout,_=f.firstColumn;!f.isProxy&&this._item.isDataRow&&_ instanceof Dn&&!u&&this.$_setButtons(t,p,p.cell.firstElementChild)}},i.prototype.moveCellButtons=function(t,e,i){var r=Math.min(i-e.item.index,e.rowSpan-1);if(!this.grid.canMergeEditing(e)&&r!=e.buttonsOffset){var o=e.rowIndex,n=o+r,s=t.getTableItemBounds(o),a=t.getTableItemBounds(n),l=t.grid.body.buttonHeight,u=a.y-s.y;u=Math.floor(u+(a.height-l)/2),e.buttons.style.top=u+"px",e.buttonsOffset=r}},i.prototype.cellRefresh=function(t,e,i,r,o){var n=t.layoutManager;this._updateDataCell(t,n,e,i,r,o)},i.prototype.clearContent=function(t,e){for(var i=this.parent,r=this._getFirstCell(t),o=this._getStartCell(t)-r,n=this._getEndCell(t)-r,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=o;l<=n;l++){var u=a[l],h=u.renderer2;h&&h.clearContent(),u.setBorderBottom(1)}},i.prototype._doLayoutContent=function(t){var e,i=t.grid,r=this._trs,o=i.body,n=this.parent._cells,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s,u=i.focusedIndex,h=u&&u.itemIndex==this._item.index,c=u.column,d=this._item.index;this._item instanceof an&&(l=Math.min(l,this._item.parent.level-1),(d=(e=this._item.parent.firstDataItem).index)>=0&&(e=null));for(var p=rs.temp(i,d),f=0;f<r;f++)for(var _=n[this._domIndex+f],g=a;g<=l;g++){var y=_[g],m=y.layout;if(!m.isProxy){var b=m.firstColumn;y.focused=h&&c===b,y.mouseEntered=!1,p.layout=m;var v=e?o.getHidden(p,e):o.getCellAt(this._item,b,!1);y.visible?(y.width=t.getCellWidth(g),y.height=t.getTableRowHeightFixed(y.trow,y.rowSpan),b instanceof Dn?this._updateDataCell(i,t,o,v,b,y):this._clearDataCell(y)):b instanceof Dn&&this._updateDataCell(i,t,o,v,b,y,!1)}}},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return this._item instanceof ln?Math.min(t.getStartCell()+this._item.groupLevel,t.getEndCell()):t.getEndCell()},i.prototype._createRenderer=function(t,e,i,r,o){return t.delegate.createRenderer(i,r,o)},i.prototype.$_getRenderer=function(t,e,i,r,o){var n,s,a,l,u=e.valueColumn.renderer,h=i.renderer;"string"==typeof h?a=h:h&&(a=h.type,l=h),"string"==typeof u?n=u:u&&(n=u.type,s=u);var c=a||n||(r instanceof Ln?Ba.SERIES_TYPE:this.$_getDefaultRenderer(t,e));if(!o.renderer2||o.rendererChanged||o.renderer2.type!=c)return this._createRenderer(t,e,c,s,l);o.renderer2&&h&&o.renderer2.assignFrom(h)},i.prototype.$_getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype.$_clearAriaProperty=function(t){t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-haspopup")},i.prototype._renderDataCell=function(t,e,i,r,o,n){var s=o.cell,a=t.doc,l=!1,u=this.$_getRenderer(t,i,r,n,o);u&&(o.renderer2&&o.renderer2.clearAndDispose(),o.renderer2=u,o.rendererChanged=!1,l=!0);var h=s.firstElementChild,c=o.renderer2;(o.heighted=this._fixedHeight)&&(h.style.maxHeight=o.height-2+"px"),!l&&c&&c._dom!=h&&(c.clearContent(),l=!0),t.accessibility&&this.$_clearAriaProperty(s),this.$_setButtons(t,o,h);var d=!1,p=o.merged&&t.findGroupItem(o.item,n.dataIndex);if(p&&n.mergeGrouped&&t.rowGroup.$_isExpanderVisible(p)){var f=o.expander;f||((f=o.expander=a.createElement("span")).style.position="absolute",f.style.display="inline-block",f.style.top="2px",f.style.left="2px",s.appendChild(f)),d=p.expanded,f.className=d?"rg-expander-expanded":"rg-expander-collapsed"}else o.clearExpander();var _=c.styleName;o.expander&&(_+=" "+(d?"rg-expanded-cell":"rg-collapsed-cell")),l?c.initContent(i._index,h,_):c.checkClassName(_)?(c.clearContent(),c.initContent(i._index,h,_)):c.index.assign(i._index),c.renderCell(t,i,o);var g=e._showChangeMarker&&i.isValueChanged();if(g!=o.valueChanged){if(g){var y=o.changedMarker;y||((y=o.changedMarker=a.createElement("div")).className="rg-changed-marker",y.style.position="absolute",y.style.display="block",y.style.top="0px",o.changedMarker=y),s.appendChild(y)}else o.changedMarker&&o.valueChanged&&s.removeChild(o.changedMarker);o.valueChanged=g}Ya.addEdgeMark(r.edgeMark||n.edgeMark,o,a)},i.prototype._clearDataCell=function(e){e.setClassName(""),e.setEditor(null,null),e.button=t.CellButton.NONE,e.error=void 0,e.editable=!1,e.readonly=!0,e.setBorderBottom(1);var i=e.cell.firstElementChild;this._fixedHeight&&(i.style.maxHeight=e.height-2+"px"),e.renderer2&&e.renderer2.clearContent(),e.valueChanged=!1},i.prototype._updateDataCell=function(t,e,i,r,o,n,s){void 0===s&&(s=!0);var a=i.getCellStyle(r,n.style.clear(),n.merged);(null==r.value||""==r.value)&&o instanceof Tn&&o.placeHolder&&(a.styleName+=" "+(r.dataColumn.placeHolderStyleName||"rg-data-empty-cell")),a.style&&ft.setStyle(a.style,n.cell),n.refreshFormatters(a),i.getCellFormatters(o,n),n.setEditor(a.editor,o.editor),n.button=o.button,n.error=r.error,n.errorLevel=r.errorLevel;var l=rs.temp(t,n.item.index,n.dataColumn);if(n.editable=t.getEditableAt(l,n.style),n.readonly=t.getReadOnlyAt(l,n.style),n.editable&&!n.readonly||(a.styleName+=" rg-data-readonly-cell"),n.setClassName(a.styleName),!n.merged&&o instanceof Tn&&o.layout.blanked)switch(r.getBlankState()){case y.HEAD:case y.BODY:n.setBorderBottom(0);break;case y.TAIL:case y.NONE:n.setBorderBottom(1)}else n.setBorderBottom(1);s?this._renderDataCell(t,i,r,a,n,o):n.renderer2&&(n.renderer2=n.renderer2&&n.renderer2.clearAndDispose())},i.prototype.$_getButtonVisible=function(e,i,r,o){if(o){var n=e.getIndex(i.item.index,i.dataColumn);return o(e.handler,n.proxy(),i.focused,i.mouseEntered)}var s=i.item.index===e.focusedRow&&i.dataColumn===e.focusedColumn;switch(r){case t.ButtonVisibility.ALWAYS:return!0;case t.ButtonVisibility.HIDDEN:return!1;case t.ButtonVisibility.VISIBLE:return s;case t.ButtonVisibility.ROWFOCUSED:return e.focusedRow==i.item.index||i.mouseEntered;case t.ButtonVisibility.DEFAULT:default:return s||i.mouseEntered}},i.prototype.$_buttonWidth=function(e,i){var r=0;if(i.button!=t.CellButton.NONE){var o=i.layout.getDataColumn();this.$_getButtonVisible(e,i,o.buttonVisibility,o.buttonVisibleCallback)&&(r=e.body.cellButtonWidth)}return r},i.prototype.$_editButtonWidth=function(t,e){var i=0;if(e.editable&&!e.readonly){var r=e.layout,o=r.getDataColumn(),n=e.editorType,s=t.delegate.getCellEditor(n),a=e.editor||o.editor;if(s.hasButton(t.displayOptions.showNativeEditButton,a)){var l=!1;rs.equalsTo(t.focusedIndex,e.item.index,r)&&(l=!!s&&s.listing),t.isEditing()&&e.contains(t.focusedIndex)&&t.canMergeEditing(e)&&e.editWidth>0&&(l=!0),(l||this.$_getButtonVisible(t,e,o.editButtonVisibility,null))&&(i=t.body.editButtonWidth)}}return i},i.prototype.$_editButtonCount=function(t,e){var i=e.editorType,r=t.delegate.getCellEditor(i);return r?r.buttonCount:0},i.prototype.$_editButtonVerti=function(t,e){if("number"===e.editorType){var i=e.editor||e.dataColumn.editor||{};return null==i.direction||"horizontal"!==i.direction}},i.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},i.prototype.$_setButtons=function(e,i,r,o){var n,s,a=i.cell,l=e.doc,u=e.layoutManager,h=this.$_buttonWidth(e,i),c=this.$_editButtonWidth(e,i),d=this.$_errorWidth(e,i),p=c&&this.$_editButtonCount(e,i),f=c&&this.$_editButtonVerti(e,i),_=e.canMergeEditing(i),g=0,y=0,m=void 0;if(h>0&&y++,c>0&&(y+=p),d>0&&y++,i.merged&&(a=(i=i.head).cell,r=i.cell.firstElementChild),y>0){(m=i.buttons)||((m=i.buttons=l.createElement("div")).className="rg-cell-buttons",m.style.position="absolute",m.style.overflow="hidden",a.appendChild(m));var b=e.body.buttonHeight,v=i.height,w=-100;if((n=m.style).height=b+"px",n.right="0px",i.merged){var C=i.rowIndex,x=u.getTableItemBounds(C),I=C;if(_||!i.contains(e.focusedIndex)&&!o)w=i.cell.getBoundingClientRect().height,w=Math.floor((w-b)/2),i.buttonsOffset=_?0:-1;else if(e.focusedRow<e.topIndex)w=-100,i.buttonsOffset=-1;else if(e.focusedRow>e.topIndex+u.itemCount)w=1e4,i.buttonsOffset=-1;else{I=C+(e.focusedRow-i.item.index);var S=u.getTableItemBounds(I);w=S.y-x.y,w=Math.floor(w+(S.height-b)/2),i.buttonsOffset=I-C}}else w=Math.floor((v-b)/2),i.buttonsOffset=0;n.top=Math.floor(w)+"px",g=m.childElementCount}else i.buttons&&(i.clearButtons(),r.style.maxWidth="");for(var E=g;E<y;E++){var k=l.createElement("span");(s=k.style).position="absolute",s.display="inline-block",s.height="100%",s.top="0px",m.appendChild(k)}for(E=g;E>y;E--)m.removeChild(m.lastElementChild);var O=y>0?m.children:null;if(y=0,h>0){if(i.cellButton=O[y++],(s=i.cellButton.style).right="0px",s.width=h+"px",i.resetButtonClass(),e.accessibility){a.removeAttribute("aria-haspopup");var R=i.renderer2;R&&i.button==t.CellButton.POPUP&&!R.itemClickable&&a.setAttribute("aria-haspopup","true")}i.buttonWidth=h}else i.cellButton=null,i.buttonWidth=0;if(c>0){i.editButtons=[];var P=i.editorType,D=e.delegate.getCellEditor(P);for(E=0;E<p;E++){var T=O[y++];D.setButtonStyle(T,E,f,h,c)||((s=T.style).right=h+c*E+"px",s.width=c+"px",i.resetEditClass(T,E)),i.editButtons.push(T)}i.editWidth=c*(f?1:p);var L=rs.equalsTo(e.editController.editIndex,i.item.index,i.layout),M=e.canMergeEditing(i)&&i.contains(e.editController.editIndex);this.$_setButtonZIndex(e,i,e.isEditing()&&(L||M),D)}else i.editButtons=null,i.editWidth=0;if(d>0?(i.errorIcon=O[y],(s=i.errorIcon.style).right=h+i.editWidth+"px",s.width=d+"px",i.resetErrorClass(),i.errorWidth=d):(i.errorIcon=null,i.errorWidth=0),m){var F=i.buttonWidth+i.editWidth+i.errorWidth,N=this.$_getCellWidth2(u,i.tcol,i.colSpan);n.width=F+"px",r.style.maxWidth=N-F+"px"}else r.style.maxWidth=""},i.prototype.$_setButtonZIndex=function(t,e,i,r){var o=e.merged?e.head:e,n=t.displayOptions.baseZindex;function s(t){!i||r&&r.native?t.removeProperty("z-index"):t.zIndex=String(n+1)}o.editButtons&&o.editButtons.forEach((function(t){s(t.style)})),o.cellButton&&s(o.cellButton.style),o.errorIcon&&s(o.errorIcon.style)},i}(Wa),Ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e}(Ga),za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e}(Ga),Ya=function(){function t(t){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=t}return t.addEdgeMark=function(t,e,i){if(t!==e.edgeMark){var r=e.cell;if(t){var o=e.edgeMarker;switch(o||(o=e.edgeMarker=i.createElement("div")),t){case"leftTop":o.className="rg-edgemarker-lefttop";break;case"leftBottom":o.className="rg-edgemarker-leftbottom";break;case"rightTop":o.className="rg-edgemarker-righttop";break;case"rightBottom":o.className="rg-edgemarker-rightbottom";break;default:o.className=t}r.appendChild(o)}else e.edgeMarker&&r.removeChild(e.edgeMarker);e.edgeMark=t}},t.prototype.dispose=function(){this.cell=null},t.prototype.setColSpan=function(t){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute("colspan")),this},t.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(this.rowSpan=t,t>1?this.cell.rowSpan=t:this.cell.removeAttribute("rowspan")),this},t.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.set=function(t,e,i){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute("colspan")),this.rowSpan!=e&&(this.rowSpan=e,e>1?this.cell.rowSpan=e:this.cell.removeAttribute("rowspan")),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},t.prototype.clear=function(t){return this.colSpan>1&&(this.colSpan=1,this.cell.removeAttribute("colspan")),this.rowSpan>1&&(this.rowSpan=1,this.cell.removeAttribute("rowspan")),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.isClickableElt=function(t){return!1},t}(),qa=function(e){function i(i){var r=e.call(this,i)||this;return r.cellButton=null,r.editButtons=null,r.errorIcon=null,r.buttons=null,r.changedMarker=null,r.expander=null,r.item=null,r.grouped=!1,r.rowIndex=-1,r.rows=0,r.trow=-1,r.tcol=-1,r.head=null,r.merged=!1,r.spanHead=null,r.heighted=!1,r.buttonsOffset=0,r.template=void 0,r.marginRight=-1,r.style=new Rn,r.rendererChanged=!1,r.valueChanged=!1,r.mouseEntered=!1,r.focused=!1,r.borderBottom=1,r.readonly=void 0,r.editable=void 0,r.error=void 0,r.errorLevel=t.ValidationLevel.IGNORE,r.errorWidth=0,r.button=t.CellButton.NONE,r.buttonWidth=0,r.editWidth=0,r.edgeMarker=null,r.text=i[ft.TextProp],r}return r(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach((function(t){ft.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},Object.defineProperty(i.prototype,"dataColumn",{get:function(){return this.layout.getDataColumn()},enumerable:!0,configurable:!0}),i.prototype.reset=function(t){return this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.editButtons&&this.editButtons.forEach((function(t){ft.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.cell=t,this},i.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},i.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=sn.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=Me.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=De.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=Te.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},i.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},i.prototype.setEditor=function(t,e){this.editor=t,this.editorType=ea.getEditorType2(t,e)},i.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},i.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},i.prototype.isCellButton=function(t){return t===this.cellButton},i.prototype.isEditButton=function(t){return this.editButtons&&this.editButtons.some((function(e){return e===t}))},i.prototype.isButton=function(t){return t===this.cellButton||this.isEditButton(t)},i.prototype.resetButtonClass=function(){var e=this.button==t.CellButton.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=e},i.prototype.resetEditClass=function(t,e){var i;switch(this.editorType){case"date":case"btdate":case"ndate":i="rg-button-calendar";break;default:i="rg-button-list"}t.className=i},i.prototype.resetErrorClass=function(){var e;switch(this.errorLevel){case t.ValidationLevel.ERROR:e="rg-validation-error";break;case t.ValidationLevel.WARNING:e="rg-validation-warning";break;case t.ValidationLevel.INFO:e="rg-validation-info";break;default:e=""}this.errorIcon.className=e},i.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},i.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.errorWidth=this.buttonWidth=this.editWidth=0)},i.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},i.prototype.contains=function(t){if(t.layout===this.layout){var e=t.itemIndex,i=this.item.index,r=i+this.rowSpan/this.layout._dspan;return i<=e&&e<r}return!1},i.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},i}(Ya),Ka=function(t){function e(e,i){var r=t.call(this,e,i,"bodyView")||this;return r._itemViews=[],r._cells=[],r._spanned=!1,r._ghostStyle={},r}return r(e,t),e.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++)i[r].dispose(),i[r]=null;this._cells=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){return this._cells[0][0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spanned",{get:function(){return this._spanned},enumerable:!0,configurable:!0}),e.prototype.bodyCellByCell=function(t){for(var e=t.parentElement[f],i=0;i<this._cells.length;i++){var r=this._cells[i],o=r[0].item;if(o&&o.index==e)for(var n=0;n<r.length;n++){var s=r[n];if(s&&s.cell===t)return s}}},e.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e],r=i[0].item;if(r&&r.index==t.itemIndex)for(var o=0;o<i.length;o++){var n=i[o];if(n&&n.layout===t.layout)return n}}},e.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},e.prototype.cellByLayout=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var r=e;r<this._cells.length;r++)for(var o=this._cells[r],n=i;n<o.length;n++){var s=o[n];if(s&&s.layout===t)return s}},e.prototype.getCellRectAt=function(t,e,i){var r=this.getCellAt(t,e);return r&&this.getCellRect(t,r,i)},e.prototype.getCellRect=function(t,e,i){i&&e.merged&&(e=e.head);var r=e.layout,o=e.trow,n=e.rowSpan,s=i||n>1&&n==r.getDataSpan()?n:e.item.isData?r._dspan:1,a=t.getTableRowBounds(o,s),l=e.tcol,u=e.colSpan;return this.fixed?(a.x=t.getFixedCellPoint(l),a.width=t.getFixedCellWidth2(l,u)):this.rightFixed?(a.x=t.getRightCellPoint(l),a.width=t.getRightCellWidth2(l,u)):(a.x=t.getCellPoint(l),a.width=t.getCellWidth2(l,u)),a},e.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var r=this.getChild(e);if(r._item===t)return r}},e.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},e.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},e.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},e.prototype.getCheckedLayout=function(t){return t.spanned&&(t=this.getUpperOf(t)),t},e.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,r=t.tcol,o=i+1;o<e.length;o++){var n=e[o][r];if(!n.spanned)return n;if(n.spanHead.trow===n.trow)return n.spanHead}},e.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,r=t.trow,o=t.tcol,n=r+1;n<e.length;n++){var s=e[n][o];if(s.rowIndex!=i)break;if(!s.spanned||s.spanHead.trow===s.trow)return!1}return!0},e.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,r=t.tcol,o=i-1;o>=0;o--){var n=e[o][r];if(!n.spanned)return n;if(n.spanHead.trow===n.trow)return n.spanHead}},e.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,r=t.trow,o=t.tcol,n=r-1;n>=0;n--){var s=e[n][o];if(s.rowIndex!=i)break;if(!s.spanned||s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},e.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},e.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},e.prototype.tdClone=function(t){var e=this.grid,i=t&&e.isValid(t)&&this.getCellAt(e.layoutManager,t);if(i){var r=(i=i.merged?i.head:i).cell,o=r.parentElement;if(o){var n=r.cloneNode(!1);n.appendChild(r.firstElementChild.cloneNode(!1)),n.style.display="none",i.rendererChanged=!0,o.insertBefore(n,r.nextElementSibling),i.reset(n),n.setAttribute("tabindex","0");var s=[];if(o=this._table,ft.isIE)for(;o&&o!==e.container._containerDom;)s.push({top:o.scrollTop,left:o.scrollLeft}),o=o.parentElement;if(n.style.display="",n.focus({preventScroll:!0}),ft.detach(r),o=this._table,ft.isIE)for(;o&&o!==e.container._containerDom;){var a=s.shift();a&&a.top!==o.scrollTop&&(o.scrollTop=a.top),a&&a.left!==o.scrollLeft&&(o.scrollLeft=a.left),o=o.parentElement}}else r.focus()}},e.prototype.refreshTdFocused=function(t,e){var i=this.grid,r=t&&i.isValid(t)&&this.getCellAt(i.layoutManager,t);if(r){r=r.merged?r.head:r;var o=this._tbody,n=Array.prototype.slice.call(o.querySelectorAll("td"));e?s.call(this,r):setTimeout(function(){s.call(this,r)}.bind(this),15)}function s(t){var e=t.cell;e&&(n.forEach((function(t){t!==e&&t.removeAttribute("tabindex")})),e.setAttribute("tabindex","0"),e.focus({preventScroll:!0}))}},e.prototype._doAttached=function(t){var e=this._table;e&&e.setAttribute("role",this.grid.isTree()?"treegrid":"grid")},e.prototype._getCssSelector=function(){return"rg-body"},e.prototype._getTableHidden=function(){return!1},e.prototype._getTableCaption=function(){var t=this.grid;return t&&t.accessibility&&t.WaiOptions&&t.WaiOptions.getDescription()||""},e.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},e.prototype._getTrs=function(t){return t.trs},e.prototype._getTableRowCount=function(e){var i=e.fixedItemCount,r=this.grid,o=this._trs;if(e.syncHeight()){for(var n=0,s=0,a=this.grid.itemCount;s<a;s++)n+=r.getItem(s).isData?o:1;return n+(i?1:0)}if(e.isAutoRowHeights())return(a=Math.max(0,Math.ceil(e._itemsBounds/e.grid.displayOptions.minTableRowHeight)+this._trs-1))+(e.grid.displayOptions.refCalcHeights?5:0);if(e.isRowGrouped()){for(var l=i+e.itemCount,u=(n=0,0);u<l;u++)n+=e.getItem(u).isData?o:1;return n+(i?1:0)}return t.prototype._getTableRowCount.call(this,e)},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(e>=i&&t.isRowGrouped()){var r=this._trs,o=i*r;i>0&&o++;for(var n=i;n<e;n++)t.getItem(n).isData?o+=r:o++;return o}return o=e*this._trs,i>0&&e>=i?o+1:o},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doPrepareTableHead=function(e,i){t.prototype._doPrepareTableHead.call(this,e,i),this._table.caption.innerHTML=this._getTableCaption();for(var r=this._getFirstCell(e),o=this._getLastCell(e)-r+1,n=e.cellLayouts._dataCells,s=0;s<1;s++)for(var a=n[s],l=i.children[s],u=0;u<o;u++){var h=a[u+r];h=h.isProxy?h.source:h;var c=l.children[u];h&&c&&(c[ft.TextProp]=h.header.getDisplayText()||h.firstColumn.header.displayText)}},e.prototype._doMeasure=function(t,e,i){return this._spanned=!1,new Ra},e.prototype.$_refreshRowCells=function(t,e,i,r,o,n,s){for(var a=this._cells,l=s.children,u=this._getFirstCell(t),h=this._getLastCell(t)-u+1,c=a.length,d=r+n;c<d;c++)a.push([]);for(var p=0;p<n;p++){var f=a[r],_=l[r];this.grid.accessibility&&(e?(_.removeAttribute("aria-hidden"),_.setAttribute("aria-rowindex",(e.index+2).toString())):(_.setAttribute("aria-hidden","true"),_.removeAttribute("aria-rowindex"))),this._ghostStyle&&ft.setStyle(this._ghostStyle,_);for(var g=_.children,y=o[p],m=0;m<h;m++){var b=g[m],v=y[m+u],w=f[m];w?w.cell!==b?w.reset(b):w.layout!==v&&(w.rendererChanged=!0,w.layout=v,w.clear(!0)):(w=f[m]=new qa(b)).layout=v,w.spanned=!1,w.item=e,w.rowIndex=i,w.trow=r,w.tcol=m}for(r++,m=h;m<f.length;m++)ft.isDebugging()&&f[m],f[m].dispose();f.length=h}},e.prototype.layoutRow=function(t,e,i,r,o){var n,s=t.lm,a=t.fixedItemCount,l=this.model,u=s.cellLayouts._dataCells,h=this._tbody.rows,c=o.isData?this._trs:1;this.$_refreshRowCells(s,o,i,r,u,c,this._tbody),this.childCount<=i?(n=this.$_borrowView(o),this.addChild(n)):n=this.getChild(i),this.$_setRowCellsDisplay(s,t,e,this._cells,o,i,r,c);var d=o.index,p=h[r];if(p.style.display="",p[f]=d,p.$_idx=r,n.updateItem(o,r,c,this._isFixedHeight(s)),o.isDataRow||o instanceof ln){var _=s.getItemBounds(i);_.width=this.width,n.setRect(_);var g=l.getRowStyle(o,d<a),y=g.styleName;if(o.isDataRow){o.setEditable(g.editable,g.readOnly);for(var m=1;m<this._trs;m++)(b=h[r+m]).$_idx=r+m,b[f]=d,ft.setClassName(b,y)}n.layoutContent(s),ft.setClassName(p,y)}else if(o.isData){for(m=1;m<this._trs;m++){var b;(b=h[r+m]).$_idx=r+m,b[f]=d}n.clearContent(s,1),o instanceof an&&n.layoutContent(s)}else n.clearContent(s,1)},e.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,r=this._tbody,o=r.rows[e],n=this.$_prepareFixedBar(t,o),s=t.grid.hoveredCell;s&&s.trow==e&&s.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),o.$_idx=e,o[f]=-99,o.style.display="",ft.setClassName(o,ka.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,r),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var a=0,l=this._cells[e];a<l.length;a++){var u=l[a];u.className="",u.clearExpander(),u.clearButtons()}return n},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._doDrawCell=function(t,e,i){},e.prototype.getCellAt=function(t,e){var i=e.layout,r=t.fixedItemCount,o=t.topIndex,n=e.itemIndex;if((r>0&&n<r||n>=o&&n-o>=r&&n-o<r+t.itemCount)&&(n>=r&&(n-=o),(n=this.$_getTableIndex(t,n))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[n+s];if(a)for(var l=0;l<a.length;l++){var u=a[l];if(u&&u.layout===i)return u}}return null},e.prototype.getCellView=function(t,e){var i=this.getCellAt(t,e);return i&&i.cell},e.prototype.spanRight=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=this._cells[i.trow][i.tcol+i.colSpan-1].layout))}},e.prototype.spanHead=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=i.layout))}},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},e.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e||(e=this.createRowElement()),e},e.prototype.createRowElement=function(){return new Ga(this.doc)},e.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var r=this._getFirstCell(t),o=this._getFirstCell(t)-r,n=this._getLastCell(t)-r,s=e[i],a=ka.ROW_BAR_CELL_STYLE,l=o;l<=n;l++){var u=s[l];u.clear(!0),ft.setClassName(u.cell,a)}},e.prototype.$_setRowCellsDisplay=function(t,e,i,r,o,n,s,a){var l=this._getFirstCell(t),u=this._getFirstCell(t)-l,h=this._getLastCell(t)-l,c=e.grid,d=e.fixedItemCount,p=i,f=o.isData,_=o.level;if(f||e.mergedRowGrouped)for(var g=0;g<a;g++)for(var y=(V=r[s+g]).length,m=u;m<=h;m++){var b=(B=V[m]).layout,v=b.getDataColumn(),w=b.parent,C=w&&w.vertical;if(B.merged=!1,B.head=null,B.grouped=!1,B.spanned);else if(b.isProxy){for(var x=void 0,I=s;I<s+a;I++){var S=r[I];if(!S)break;for(var E=0;E<S.length;E++)if(S[E].layout===b.source){x=S[E];break}if(x)break}x?B.span(x):B.clear(!1)}else if(!f&&m+l>=_)B.grouped=!0,B.clear(!0);else{var k=void 0,O=1;v&&v.mergeGrouped&&v.groupLevel<=o.parent.level||o.isDataRow&&void 0===(O=(k=b.spanCallback)?k(c.handler,b,B.item.index):void 0)&&(O=b.getDataSpan());var R=0;if(O>1){var P=0,D=b.vindex+1;if(O--,C)for(;P++<O&&P<a&&(T=w.getVisible(D++));)R+=T._dspan,this._cells[s+g+P][m].span(B),this._spanned=!0;else for(;P++<O&&m-u+P<y&&D<w.visibleCount;){var T;if(!(T=w.getVisible(D++)))break;R+=T._cspan,V[m+P].span(B),this._spanned=!0}}var L=b._cspan,M=b._dspan,F=b.merged&&b.merges;if(F&&o instanceof an&&m>=o.parent.level&&(F=null),F)if(B.merged=F.isMerged(n,d),F.isHidden(n,d))B.set(L+R,M,!1),B.head=p[m-u];else{var N=void 0;N=o.isData?(B.rows=F.getMerged(n,d))*M:F.getMerged2(c,o.index,n-d,M),B.set(L+R,N,!0),p[m-u]=B.head=B}else C?B.set(L,M+R,!0):B.set(L+R,M,!0)}}else{var V=r[s];for(m=u;m<=h;m++){var B;(B=V[m]).clear(!1),B.merged=!1,B.grouped=!0}}},e.prototype.$_refreshSpans=function(t,e,i){},e.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},e.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var r=e[i],o=0;o<r.length;o++)r[o].dispose(),r[o]=null;e.length=t},e.prototype.$_cleanTableRows=function(t){for(var e=this._tbody.rows,i=e.length-1;i>=this._cells.length;i--)for(var r=e[i].cells,o=r.length;o--;){for(var n=r[o];n.childElementCount>1;)n.removeChild(n.lastElementChild);n.removeAttribute("rowspan"),n.removeAttribute("colspan")}for(i=e.length-1;i>=t;i--){var s=e[i];s.childElementCount>0?(s.$_idx=-1,s.style.display="none"):ft.detach(s)}},e.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,r=0;if(t.length>0){for(var o=1;o<t.length;o++)i[r++].style.height=t[o]-t[o-1]+"px";r++}for(o=1;o<e.length;o++)i[r++].style.height=e[o]-e[o-1]+"px"},e.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,r=0;if(t.length>0){for(var o=1;o<t.length;o++)for(var n=t[o]-t[o-1],s=i[r++].cells,a=0;a<s.length;a++)s[a].style.height=n+"px";r++}for(o=1;o<e.length;o++)for(n=e[o]-e[o-1],s=i[r++].cells,a=0;a<s.length;a++)s[a].style.height=n+"px"},e.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,r=0,o=this._cells.length;r<o;r++)for(var n=this._cells[r],s=0,a=n.length;s<a;s++){var l=n[s],u=l.height,h=t.getTableRowHeightFixed(l.trow,l.rowSpan);u!=h&&(l.height=h,(l.buttonWidth>0||l.editWidth>0)&&l.buttons&&(l.buttons.style.top=Math.floor((h-i)/2)+"px")),e&&!l.heighted&&(l.cell.firstElementChild.style.maxHeight=l.height-2+"px",ft.ieTen&&(l.cell.firstElementChild.style.height=l.height-2+"px"))}},e.prototype.$_focusChanged=function(t,e,i,r){this.$_cellStateChanged(t,e,"focused",i,r)},e.prototype.$_mouseEnteredChanged=function(t,e,i,r){this.$_cellStateChanged(t,e,"mouseEntered",i,r)},e.prototype.$_cellStateChanged=function(t,e,i,r,o){var n=t.canMergeEditing(e),s=e&&e.item;if(e&&r!=e[i]&&s.isDataRow){var a=this.getRowView(e.item);if(a instanceof Wa){var l=this.model,u=e.dataColumn;if(e[i]=r,u&&e.item.isDataRow){var h=l.getCellAt(e.item,u,!1);if(!o&&a.$_setButtons(t,e,e.cell.firstElementChild),e.merged&&e.head){var c=e.head,d=t.layoutManager,p=this.getCellRect(d,e,!1),f=this.getCellRect(d,e,!0),_=c.renderer2;if(e.focused){var g=p.top-f.top+p.height/2-f.height/2;_.moveClickElement(g,n)}else e.mouseEntered||_.moveClickElement(0,n)}a instanceof Ga&&e.renderer2&&"focused"===i&&e.renderer2.refreshFocusChanged&&a.cellRefresh(t,l,h,u,e)}}}},e.prototype.$_buttonZIndexChanged=function(t,e,i,r){var o=e&&e.item;if(o&&o.isDataRow){var n=this.getRowView(o);n instanceof Wa&&e.dataColumn&&n.$_setButtonZIndex(t,e,i,r)}},e.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var r=e[i],o=0;o<r.length;o++)r[o].layout===t&&(r[o].rendererChanged=!0)},e}(Fa),Xa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"fixed",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype.createRowElement=function(){return new Ua(this.doc)},e}(Ka),Qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.createRowElement=function(){return new za(this.doc)},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(Ka),Ja=function(t){function e(e){var i=t.call(this,e)||this;return i.check=null,i.sort=null,i.filter=null,i.popup=null,i.textSpan=null,i.expander=null,i.rendererClass="",i.html=void 0,i.tooltip="",i.sortWidth=0,i.filterWidth=0,i.checkWidth=0,i.popupWidth=0,i.expanderWidth=0,i.marginLeft=0,i.marginRight=0,i.marginTop=0,i.marginBottom=0,i.edgeMarker=null,i.textSpan=e.firstElementChild.firstElementChild,i}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=this.expander=null,this.layout=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild,r=this.textSpan,o=i.style;return this.checkWidth>0&&(i.removeChild(this.check),this.check=null,this.checkWidth=0),this.filterWidth>0&&(i.removeChild(this.filter),this.filter=null,this.filterWidth=0),this.sortWidth>0&&(i.removeChild(this.sort),this.sort=null,this.sortWidth=0),this.popupWidth>0&&(i.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.expander&&(i.removeChild(this.expander),this.expander=null),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),0!=this.marginLeft&&(o.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(o.marginRight="",this.marginRight=0),0!=this.marginTop&&(o.marginTop="",this.marginTop=0),0!=this.marginBottom&&(o.marginBottom="",this.marginBottom=0),this.text&&(r[ft.TextProp]=this.text=""),this.html&&(r.innerHTML=this.html=""),this},e.prototype.setText=function(t,e){e!=this.text&&(t[ft.TextProp]=this.text=e,this.html="")},e.prototype.setHtml=function(t,e){e!=this.html&&(t.innerHTML=this.html=e,this.text="")},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},e.prototype.setDivMarigns=function(t,e,i,r,o){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),r!=this.marginTop&&(t.marginTop=r?r+"px":"",this.marginTop=r),o!=this.marginBottom&&(t.marginBottom=o?o+"px":"",this.marginBottom=o)},e.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},e.prototype.isClickableElt=function(t){return t===this.filter||t===this.popup||t===this.check||t===this.expander},e}(Ya),Za=function(e){function i(t,i){var r=e.call(this,t,i,"headerView")||this;return r._fixedHeight=!0,r._rowPoints=[],r._cells=[],r}return r(i,e),i.renderCell=function(t,e){e[ft.TextProp]=t.text||""},i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],r=0;r<i.length;r++)i[r].dispose(),i[r]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++){var o=i[r];if(o&&o.cell===t)return o}},i.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++)if(i[r].layout===t)return i[r]},i.prototype.tableCellByLayout2=function(t,e){var i=this._cells,r=i.length;if(!(r<1)){for(var o=i[0].length,n=this._getFirstCell(t),s=this._getStartCell(t)-n,a=this._getEndCell(t)-n,l=s;l<=a;l++)for(var u=0;u<r;u++)if(i[u][l].layout===e)return i[u][l];for(l=s-1;l>=0;l--)for(u=0;u<r;u++)if(i[u][l].layout===e)return i[u][l];for(l=a+1;l<o;l++)for(u=0;u<r;u++)if(i[u][l].layout===e)return i[u][l]}},i.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},i.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++){var o=i[r];if(o.layout===t){if(o.spanned)if(o.layout.parent.vertical){for(var n=e-1;n>=0;n--)if(!this._cells[n][r].spanned)return this._cells[n][r].layout}else for(n=r-1;n>=0;n--)if(!i[n].spanned)return i[n].layout;return t}}},i.prototype.refresh=function(t){for(var e=t.focusedColumn,i=t.layoutManager,r=this._getFirstCell(i),o=this._getLastCell(i)-r+1,n=0;n<this._cells.length;n++)for(var s=this._cells[n],a=0;a<o;a++){var l=s[a],u=l.layout;if(l.visible&&u instanceof Vn){var h=l.cell;h.$_foc=u.isColumn(e),ft.setClassName(h,this.$_getCellSelector(u,h))}}},i.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},i.prototype.getLayoutHeight=function(t,e,i){var r,o;return t instanceof jn?(r=t.hrow,o=i?t.hlen:t.hspan):(r=t.hrow,o=i?e.rowSpan:t.hspan),this._rowPoints[r+o]-this._rowPoints[r]},i.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},i.prototype._getCssSelector=function(){return"rg-header"},i.prototype._isFixedHeight=function(){return this._fixedHeight},i.prototype._getMinRowHeight=function(t){return this._minRowHeight},i.prototype._prepareCellContent=function(t,e){var i=ct(t),r=i.createElement("div"),o=i.createElement("span");return r.appendChild(o),r},i.prototype._doMeasure=function(t,e,i){var r=this.model,o=t.layoutManager.headerRows,n=r.height,s=r.heights,a=[];if(this._minRowHeight=r.minRowHeight,s&&s.length>0){for(var l=0,u=0;u<o;u++)l+=a[u]=Math.max(s[u]||this._minRowHeight,this._minRowHeight);n=l}return n=n<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight)*o:Math.max(this._minRowHeight*o,n),this._fixedHeight=n>=0,n=Math.max(this._minRowHeight*o,r.minHeight,n),r.setCalcHeights(a),Ra.create(e,n)},i.prototype._doPrepareTableExtents=function(t){var e=this.model,i=this._rowPoints,r=this.height,o=e.getCalcHeights(),n=Math.floor(r/t.headerRows);if(i.length=this._getTableRowCount(t)+1,i[0]=0,i.length>0){for(var s=1;s<i.length-1;s++)i[s]=i[s-1]+(o[s-1]||n);i[s]=r}},i.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],r=e.children[0],o=0;r&&o<i.length;o++){var n=i[o].layout.source,s=r.children[o];s&&n&&(s[ft.TextProp]=n.header.getDisplayText()||n.firstColumn.header.displayText)}},i.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,r=this.model,o=t.cellLayouts._headerCells,n=o.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this.$_refreshCells(t,o,this._tbody),this.$_refreshSpans(t,n),this.$_refreshHeadTitle(t,this._thead);for(var u=0;u<n;u++)for(var h=this._cells[u],c=a;c<=l;c++){var d=h[c];if(d.visible||c===a){var p=void 0;d.layout.isProxy?(p=d.layout.source,d=this.tableCellByLayout(p)):p=d.layout;var f=d.cell;if(f.$_foc=p.isColumn(i),d.setClassName(this.$_getCellSelector(p,f)),p.isNull)d.setText(d.textSpan,p.header.getDisplayText());else if(p instanceof jn){var _=r.getCell(p);this._updateGroupCell(e,r,_,d)}else _=r.getCell(p),this._updateCell(e,r,_,d)}}},i.prototype._doRender=function(t){},i.prototype._getTableRowCount=function(t){return t.headerRows},i.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},i.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},i.prototype._doDrawCell=function(t,e,i){},i.prototype._doPrepareTableRow=function(t,i,r,o){e.prototype._doPrepareTableRow.call(this,t,i,r,o);var n=this.model;ft.setClassName(o,n.getStyleName())},i.prototype.$_getCellSelector=function(t,e){var i="",r=t.header.styleName;if(t instanceof jn)i="rg-header-group-cell",r&&(i+=" "+r);else{i="rg-header-cell",e.$_foc?i+=" rg-header-focus":this.grid.isSelectedLayout(t)&&(i+=" rg-header-select");var o=t.firstColumn;(r=r||o&&o.header.styleName)&&(i+=" "+r)}return i},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return t.getEndCell()},i.prototype.$_refreshCells=function(t,e,i){for(var r=this._cells,o=i.children,n=o.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=r.length;l<n;l++)r.push([]);for(var u=0;u<n;u++){for(var h=r[u],c=o[u].children,d=e[u],p=0;p<a;p++){var f=c[p],_=d[p+s],g=h[p];g?g.cell!==f||g.layout!=_&&(g.layout=_,g.clear(!0)):(g=h[p]=new Ja(c[p])).layout=_,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,p),g.spanned=!1}for(p=a;p<h.length;p++)h[p].dispose();h.length=a}for(u=n;u<r.length;u++){var y=r[u];for(p=0;p<y.length;p++)y[p].dispose(),y[p]=null}r.length=n},i.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),r=this._getFirstCell(t)-i,o=this._getLastCell(t)-i,n=0;n<e;n++)for(var s=this._cells[n],a=s.length,l=r;l<=o;l++){var u=s[l],h=u.layout,c=h.parent,d=c&&c.vertical;if(u.spanned);else if(h.isProxy)u.clear(!1);else{var p=0,f=h.getHeaderSpan()-1;if(f>0){var _=0,g=h.vindex+1;if(d)for(;_++<f&&_<e;)p+=c.getVisible(g++)._hspan,this._cells[n+_][l].span();else for(;_++<f&&l-r+_<a&&g<c.visibleCount;)p+=c.getVisible(g++)._cspan,s[l+_].span()}(h instanceof jn||h.isNull)&&u.clear(!0),d?u.set(h._cspan,h._hspan+p,!0):u.set(h._cspan+p,h._hspan,!0),u.width=this._getCellWidth2(t,l,u.colSpan)}}},i.prototype._updateCell=function(e,r,o,n){var s=e.doc,a=e.sortingOptions,l=e.filteringOptions,u=n.layout.firstColumn,h=o.checkLocation,c=h&&h!=t.ColumnHeaderItemLocation.NONE?r.checkWidth:0,d=c>0?r.checkWidth:0,p=u&&this.$_canSortHandleVisible(a,u),f=u&&u.sortDirection||t.SortDirection.NONE,_=p?r.sortWidth:0,g=u&&this.$_canFilterHandleVisible(l,u)?r.filterWidth:0,y=u&&this.$_canPopupHandleVisible(r,u)?r.popupWidth:0,m=n.cell.firstElementChild,b=n.textSpan,v=n.width,w=this.$_getCellHeight(n),C=0,x=0,I=0,S=0,E=m.style;n.setRendererClassName(m,i.RENDERER_STYLE),E.maxHeight=Math.max(w-2,0)+"px";var k=n.check;if(c>0){var O=b.style;k?E=k.style:(k=s.createElement("input"),n.check=k,k.type="checkbox",k.className="rg-header-check",(E=k.style).position="absolute",E.display="inline-block",E.verticalAlign="middle"),n.checkWidth<=0&&(m.appendChild(k),n.checkWidth=c),k.checked=u.checked,k.title=o.text+" "+u.checked?"checked":"unchecked";var R=-1,P=-1;switch(O.removeProperty("display"),h){case t.ColumnHeaderItemLocation.LEFT:case t.ColumnHeaderItemLocation.LEFT_EDGE:m.insertBefore(k,n.textSpan),h===t.ColumnHeaderItemLocation.LEFT?(E.position="relative",E.removeProperty("left"),E.removeProperty("top")):(E.position="absolute",C+=c,R=0,P=Math.floor((w-r.checkHeight)/2));break;case t.ColumnHeaderItemLocation.RIGHT:case t.ColumnHeaderItemLocation.RIGHT_EDGE:m.insertBefore(n.textSpan,k),h===t.ColumnHeaderItemLocation.RIGHT?(E.position="relative",E.removeProperty("left"),E.removeProperty("top")):(E.position="absolute",x+=c,R=v-c,P=Math.floor((w-r.checkHeight)/2));break;case"top":case"topEdge":m.insertBefore(k,n.textSpan),h===t.ColumnHeaderItemLocation.TOP?(O.display="block",E.position="relative",E.removeProperty("left"),E.removeProperty("top")):(E.position="absolute",I+=d,R=Math.floor((v-_-g-r.checkWidth)/2),P=0);break;case"bottom":case"bottomEdge":m.insertBefore(n.textSpan,k),h===t.ColumnHeaderItemLocation.BOTTOM?(O.display="block",E.position="relative",E.removeProperty("left"),E.removeProperty("top")):(E.position="absolute",S+=d,R=Math.floor((v-_-g-r.checkWidth)/2),P=w-r.checkHeight)}R>-1&&(E.left=R+"px"),P>-1&&(E.top=P+"px")}else n.checkWidth>0&&(m.removeChild(k),n.checkWidth=0);var D=n.filter;g>0?(D?E=D.style:(D=s.createElement("span"),n.filter=D,(E=D.style).position="absolute",E.display="inline-block"),n.filterWidth<=0&&(m.appendChild(D),n.filterWidth=g),D.className="rg-header-filtering"+(u.isFiltered()?" filter-activated":""),x+=g,E.left=v-x+"px",E.top=Math.floor((w-r.filterHeight)/2)+"px",E.width=g+"px",E.height=r.filterWidth+"px"):n.filterWidth>0&&(m.removeChild(D),n.filterWidth=0);var T=n.sort;if(p){switch(T?E=T.style:(T=s.createElement("span"),n.sort=T,(E=T.style).position="absolute",E.display="inline-block"),n.sortWidth<=0&&(m.appendChild(T),n.sortWidth=_),f){case t.SortDirection.DESCENDING:T.className="rg-header-sort-descending";break;case t.SortDirection.ASCENDING:T.className="rg-header-sort-ascending";break;default:T.className="rg-header-sort-none"}x+=_,E.left=v-x+"px",E.width=_+"px",a.showSortOrder&&u.sortOrder>=0?(T[ft.TextProp]=(u.sortOrder+1).toString(),E.top=Math.max(0,Math.floor((w-r.sortHeight-10)/2))+"px",E.height=Math.min(n.height,r.sortHeight+10)+"px",E.backgroundPositionY=ft.isIE?"5px":"70%",E.lineHeight=ft.isIE?"1.5em":"1em"):(T[ft.TextProp]="",E.backgroundPositionY="center",E.top=Math.floor((w-r.sortHeight)/2)+"px",E.height=r.sortHeight+"px")}else n.sortWidth>0&&(m.removeChild(T),n.sortWidth=0);var L=n.popup;y>0?(L?E=L.style:(L=s.createElement("span"),n.popup=L,(E=L.style).position="absolute",E.display="inline-block"),n.popupWidth<=0&&(m.appendChild(L),n.popupWidth=y),L.className="rg-header-popup",x+=y,E.left=v-x+"px",E.top=Math.floor((w-r.popupHeight)/2)+"px",E.width=y+"px",E.height=r.popupWidth+"px"):n.popupWidth>0&&(m.removeChild(L),n.popupWidth=0),E=m.style,n.showTooltip=o.showTooltip,n.tooltip=o.tooltip,n.setDivMarigns(E,C,x,I,S);var M=o.template;M?n.setHtml(b,M):n.setText(b,o.text||""),Ya.addEdgeMark(o.edgeMark,n,s)},i.prototype._updateGroupCell=function(t,e,i,r){var o=t.doc,n=r.cell.firstElementChild,s=r.textSpan,a=this.$_getCellHeight(r),l=r.layout,u=0,h=n.style;h.maxHeight=Math.max(a-2,0)+"px";var c=this.$_canExpanderHandleVisible(l),d=r.expander;if(c){r.expander||((d=r.expander=o.createElement("span")).style.position="absolute",d.style.display="inline-block"),d.className=l.expanded?"rg-column-expanded":"rg-column-collapsed";var p=d.style;p.left="2px",p.top=Math.floor((a-e.expanderHeight)/2)+"px",p.width=e.expanderWidth+"px",p.height=e.expanderHeight+"px",u+=e.expanderWidth+2,n.appendChild(r.expander)}else r.expander&&n.removeChild(r.expander);r.showTooltip=i.showTooltip,r.tooltip=i.tooltip,r.setDivMarigns(h,u,0,0,0);var f=i.template;f?r.setHtml(s,f):r.setText(s,i.text||""),Ya.addEdgeMark(i.edgeMark,r,o)},i.prototype.$_canPopupHandleVisible=function(e,i){if(null==i.header.popupMenuName)return!1;switch(e.showPopupMenu){case t.HandleVisibility.VISIBLE:return!0;case t.HandleVisibility.HOVERED:return this.hovered;case t.HandleVisibility.ALWAYS:return!0;case t.HandleVisibility.HIDDEN:return!1}},i.prototype.$_canFilterHandleVisible=function(e,i){var r=e.enabled&&i.hasFilters&&i.filterable;return r&&e.handleVisibility===t.HandleVisibility.HIDDEN&&(r=!1),r},i.prototype.$_canSortHandleVisible=function(e,i){switch(e.handleVisibility){case t.HandleVisibility.VISIBLE:return i.sortOrder>=0;case t.HandleVisibility.HOVERED:return this.hovered&&i.sortOrder>=0;case t.HandleVisibility.ALWAYS:return i.sortable||i.sortOrder>=0;case t.HandleVisibility.HIDDEN:return!1}return i.sortOrder>=0},i.prototype.$_canCheckHandleVisible=function(t,e){return!1},i.prototype.$_canExpanderHandleVisible=function(t){return t.isExpandable()},i.prototype.$_checkHeight=function(){return this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},i.prototype.$_getHeights=function(t){var e=this._tbody.rows;if(0==t.length)for(var i=0,r=this._rowPoints.length-1;i<r;i++)t[i]=0;for(i=0;i<t.length;i++)t[i]=Math.max(t[i],e[i]?e[i].offsetHeight:0)},i.prototype.$_adjustHeights=function(t){var e=this._tbody.rows,i=this._rowPoints;i[0]=0;for(var r=0,o=i.length-1;r<o;r++)e[r].style.height=t[r]+"px",i[r+1]=i[r]+t[r];return i[i.length-1]},i.prototype.$_distributeHeights=function(t,e){for(var i=e.length,r=0,o=0;o<i;o++)r+=e[o];if(t>r){var n=this._tbody.rows,s=t-r,a=s;for(o=0;o<i-1;o++){var l=Math.floor(s*e[o]/r);e[o]+=l,n[o].style.height=e[o]+"px",a-=l}e[o]+=a,n[o]&&(n[o].style.height=e[o]+"px")}},i.RENDERER_STYLE="rg-header-renderer",i}(Ma),tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(Za),el=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.cellCount-1},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(Za),il=function(e){function i(i){var r=e.call(this)||this;return r._refreshMode=t.RefreshMode.ALL,r._leftPos=0,r._rightFixed=!0,r._footerCount=0,r._headerSummaryCount=0,r._layoutCount=0,r._fixedLayoutCount=0,r._rightLayoutCount=0,r._firstLayout=0,r._lastLayout=0,r._layoutsLength=0,r._layouts=[],r._layoutPoints=[],r._fixedLayoutPoints=[],r._rightLayoutPoints=[],r._cellCount=0,r._fixedCellCount=0,r._rightCellCount=0,r._firstCell=0,r._lastCell=0,r._startCell=0,r._endCell=0,r._cellPoints=[],r._fixedCellPoints=[],r._rightCellPoints=[],r._trs=1,r._rowGrouped=!1,r._items=[],r._topIndex=0,r._itemCount=0,r._fixedItemCount=0,r._fullItemCount=0,r._fixedItemPoints=[],r._itemPoints=[],r._fixedTableRowCount=0,r._tableRowCount=0,r._fixedTableRowPoints=[],r._tableRowPoints=[],r._fixedTableItemPoints=[],r._tableItemPoints=[],r._fixedDataHeight=0,r._dataRowHeights=[],r._dataHeight=0,r._fixedBarWidth=0,r._rightBarWidth=0,r._fixedBarHeight=0,r._itemsBounds=0,r._fixedWidth=0,r._rightWidth=0,r._fixedHeight=0,r._autoRowHeights=!1,r._minRowHeight=Oa.MIN_TABLE_ROW_HEIGHT,r._minItemHeight=Oa.MIN_TABLE_ROW_HEIGHT,r._maxHeight=Oa.MIN_TABLE_ROW_HEIGHT,r._itemHeight=0,r._hscrolled=!1,r._vscrolled=!1,r._hscrollBar=!1,r._vscrollBar=!1,r._scrollBarWidth=0,r._scrollBarHeight=0,r._scrollWidth=0,r._fitStyle=void 0,r._grid=i,r}return r(i,e),i.prototype._doDispose=function(){this._grid=null,this._rs=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerCount",{get:function(){return this._footerCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerSummaryCount",{get:function(){return this._headerSummaryCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vscrollBar",{get:function(){return this._vscrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hscrollBar",{get:function(){return this._hscrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataBounds",{get:function(){return this._dataBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bodyBounds",{get:function(){return this._bodyBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gridBounds",{get:function(){return this._gridBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerBounds",{get:function(){return this._headerBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryBounds",{get:function(){return this._summaryBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerBounds",{get:function(){return this._footerBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterPanelBounds",{get:function(){return this._filterPanelBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topContentBounds",{get:function(){return this._topContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leftContentBounds",{get:function(){return this._leftContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowBarBounds",{get:function(){return this._rowBarBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sideContentBounds",{get:function(){return this._sideContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentBounds",{get:function(){return this._contentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedContentBounds",{get:function(){return this._fixedContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"nonFixedBounds",{get:function(){return this._nonFixedBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightContentBounds",{get:function(){return this._rightContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headBounds",{get:function(){return this._headBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sumBounds",{get:function(){return this._sumBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footBounds",{get:function(){return this._footBounds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedWidth",{get:function(){return this._fixedWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultItemHeight",{get:function(){return this._itemHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topIndex",{get:function(){return this._topIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedItemCount",{get:function(){return this._fixedItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fullItemCount",{get:function(){return this._fullItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tableRowCount",{get:function(){return this._tableRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"trs",{get:function(){return this._cellLayouts.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"leftPos",{get:function(){return this._leftPos},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellLayouts",{get:function(){return this._cellLayouts},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layoutCount",{get:function(){return this._layoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightLayoutCount",{get:function(){return this._rightLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstLayout",{get:function(){return this._firstLayout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastLayout",{get:function(){return this._lastLayout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layoutsLength",{get:function(){return this._layoutsLength},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cellCount",{get:function(){return this._cellCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedCellCount",{get:function(){return this._fixedCellCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightCellCount",{get:function(){return this._rightCellCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstCell",{get:function(){return this._firstCell},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastCell",{get:function(){return this._lastCell},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"startCell",{get:function(){return this._startCell},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endCell",{get:function(){return this._endCell},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isColumnFitted",{get:function(){return!!this._fitStyle},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollWidth",{get:function(){return this._scrollWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarWidth",{get:function(){return this._fixedBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedHeight",{get:function(){return this._fixedHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fixedBarHeight",{get:function(){return this._fixedBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clientRect",{get:function(){return this._clientRect},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerRows",{get:function(){return this._cellLayouts.headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataRows",{get:function(){return this._cellLayouts.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topPanelVisible",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minItemHeight",{get:function(){return this._minItemHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fitStyle",{get:function(){return this._fitStyle},enumerable:!0,configurable:!0}),i.prototype.syncHeight=function(){return this.grid.displayOptions.syncGridHeight!==t.SyncGridHeight.NONE},i.prototype.fitSyncHeight=function(){return this._fitSyncHeight},i.prototype.getStartCell=function(){return this._refreshMode==t.RefreshMode.VISIBLE_ONLY?this._startCell:this._firstCell},i.prototype.getEndCell=function(){return this._refreshMode==t.RefreshMode.VISIBLE_ONLY?this._endCell:this._lastCell},i.prototype.getLayout=function(t){return this._layouts[t]},i.prototype.getLayoutBounds=function(t){return new $(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},i.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},i.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},i.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},i.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},i.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},i.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},i.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},i.prototype.getCellPoint=function(t){return this._cellPoints[t]},i.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},i.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},i.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},i.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},i.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},i.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},i.prototype.$_getItems=function(){return this._items},i.prototype.getItem=function(t){return this._items[t]},i.prototype.getDataRowHeights=function(t){var e=this.grid.displayOptions,i=[],r=e.dataHeights;if(r&&r.length>0)for(var o=0;o<t;o++){var n=Math.floor(Math.max(e.minTableRowHeight,r[o]||e.minTableRowHeight));i.push(n)}return i.slice()},i.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions.rowHeight,i=this._dataRowHeights=this.getDataRowHeights(this._trs);return i&&i.length>0&&(e=i.reduce((function(t,e){return t+e}),0)),e<=0&&(e=t.heightMeasurer.rowHeight*this._trs),i.length>0&&this._maxHeight>0&&(e>this._maxHeight||e<this._minItemHeight)&&(this._dataRowHeights=[]),this._maxHeight>0&&(e=Math.min(this._maxHeight,e)),Math.max(this._minItemHeight,e)},i.prototype.measure=function(t,e,i,r,o){var n=this._grid;this._rs=n.itemSource,this._cellLayouts=n._activeCellLayout,this._footerCount=n.footers.visibleCount,this._headerSummaryCount=n.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._focusIndex&&!n.isValid(this._focusIndex)&&this._focusIndex.normalize(n),this._doMeasure(t,r,o)},i.prototype.layout=function(t){var e=this._grid;this._doLayout(e,t),this._adjustLayout(e,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null,this._oldSyncHeight=e.displayOptions.syncGridHeight},i.prototype.getItemHeight=function(t){var e=t.index;return e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},i.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},i.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},i.prototype.getTableItemTop=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t])},i.prototype.getTableItemBottom=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]:(t-=this._fixedItemCount,this._tableItemPoints[t+1])},i.prototype.getItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],i=this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],i=this._itemPoints[t+1]-e),new $(0,e,1e3,i)},i.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var i,r,o=(e?this._fixedContentBounds:this._bodyBounds).y;return this._fixedItemCount>0&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+o,r=this._fixedItemPoints[t+1]+o-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+o,r=this._itemPoints[t+1]+o-i),new $(0,i,1e3,r)},i.prototype.getTableItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],i=this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],i=this._tableItemPoints[t+1]-e),new $(0,e,1e3,i)},i.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[Math.min(t+e,i-1)]-this._fixedTableRowPoints[t]:(i>1&&(t-=i),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},i.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[t]:(this._fixedItemCount>0&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},i.prototype.getTableRowBounds=function(t,e){var i,r;return this._fixedTableRowCount>0&&t<this._fixedTableRowCount?(i=this._fixedTableRowPoints[t],r=this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-i):(this._fixedTableRowCount>0&&(t-=this._fixedTableRowCount+1),i=this._tableRowPoints[t],r=this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-i),new $(0,i,1e3,r)},i.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=Math.round(this._fixedTableRowPoints[e+1]))return e;for(e=0;e<this._tableRowCount;e++)if(t<=Math.round(this._tableRowPoints[e+1]))return e+(this._fixedTableRowCount>0?this._fixedTableRowCount+1:0);return-1},i.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},i.prototype.isMergedCell=function(t){return!1},i.prototype.getMergeRoom=function(t){var e=t.layout;if(e instanceof Vn&&e.canMerge()){var i=e.merges;return i&&i.getRoom(t)}return null},i.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var r,o=this._grid,n=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){r=o.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){for(r=o.rightHeaderView,t-=this._rightContentBounds.x,a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else for(r=o.headerView,t-=this._contentBounds.x,a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}if(s>=0){var l=n[r.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s];return(l=r.getSpanRoot(l))&&!i?l.source:l}},i.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var i,r,o=this.grid,n=t.hcol,s=this.cellCount-this.rightCellCount;if(n<this._fixedCellCount){var a=this._fixedContentBounds.x,l=n,u=(r=o.fixedHeaderView.tableCellByLayout(t))?r.colSpan:t.cols;i=new $(this._fixedCellPoints[l]+a,0,this._fixedCellPoints[l+u]-this._fixedCellPoints[l],0)}else n>=s?(a=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,l=n-s,u=(r=o.rightHeaderView.tableCellByLayout(t))?r.colSpan:t.cols,i=new $(this._rightCellPoints[l]+a,0,this._rightCellPoints[l+u]-this._rightCellPoints[l],0)):(a=this._contentBounds.x,l=n-this._fixedCellCount,u=(r=o.headerView.tableCellByLayout(t))?r.colSpan:t.cols,i=new $(this._cellPoints[l]+a,0,this._cellPoints[l+u]-this._cellPoints[l],0));return i.y=this._contentBounds.y+o.headerView.getLayoutPos(t),i.height=o.headerView.getLayoutHeight(t,r,e),i},i.prototype.getLayoutRect=function(t){var e,i=this.rightFirstLayout;if(t<this._fixedLayoutCount){var r=this._fixedContentBounds.x,o=t;e=new $(this._fixedLayoutPoints[o]+r,0,this._fixedLayoutPoints[o+1]-this._fixedLayoutPoints[o],0)}else t>=i?(r=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,o=t-i,e=new $(this._rightLayoutPoints[o]+r,0,this._rightLayoutPoints[o+1]-this._rightLayoutPoints[o],0)):(r=this._contentBounds.x,o=t-this._fixedLayoutCount,e=new $(this._layoutPoints[o]+r,0,this._layoutPoints[o+1]-this._layoutPoints[o],0));return e},i.prototype.getDataRect=function(t){var e,i=t.col,r=t._clen,o=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var n=this._fixedContentBounds.x,s=i;e=new $(this._fixedCellPoints[s]+n,0,this._fixedCellPoints[s+r]-this._fixedCellPoints[s],0)}else i>=o?(n=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,s=i-o,e=new $(this._rightCellPoints[s]+n,0,this._rightCellPoints[s+r]-this._rightCellPoints[s],0)):(n=this._contentBounds.x,s=i-this._fixedCellCount,e=new $(this._cellPoints[s]+n,0,this._cellPoints[s+r]-this._cellPoints[s],0));return e},i.prototype.getBodyView=function(t){var e=this.rightFirstLayout,i=(t instanceof Fn?t:t.layout).root.vindex;return i<this._fixedLayoutCount?this._grid.fixedBodyView:i>=e?this._grid.rightBodyView:this._grid.bodyView},i.prototype.mouseToIndex=function(t,e,i,r){if(r.set(-1,null),this._layoutCount<1)return r;var o=this.grid,n=this._summaryBounds.bottom,s=-1;if((i-=this._contentBounds.y)>=n&&i<this._footerBounds.y){for(var a=0;a<this._fixedItemCount;a++)if(i>=n+this._fixedItemPoints[a]&&i<n+this._fixedItemPoints[a+1]){s=a,i-=n+this._fixedItemPoints[a];break}if(s<0&&this._itemCount>0){for(a=0;a<this._itemCount;a++)if(i>=n+this._itemPoints[a]&&i<n+this._itemPoints[a+1]){s=a;break}s>=0&&(s+=o.topItem)}}else i>=this._footerBounds.y?s=-2:i<this._headerBounds.y&&(s=-3);if(r.itemIndex=s,t){var l=o.getCellViewOf(t),u=l&&o.getBodyView(l),h=u instanceof Ka&&u.layoutByCell(l);if(h)return r.layout=h,r}return r},i.prototype.mouseToIndexEx=function(t,e,i,r){if(this._layoutCount<1)return r;var o=this.grid,n=this._topIndex+this._fixedItemCount,s=this._summaryBounds.bottom,a=0;if((i-=this._contentBounds.y)<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=n+this._fullItemCount;else if(i>=this._footerBounds.y)a=n+this._fullItemCount;else{a=-1,i-=s;for(var l=0;l<this._fixedItemCount;l++)if(i>=this._fixedItemPoints[l]&&i<this._fixedItemPoints[l+1]){a=l;break}if(a<0&&this._itemCount>0){for(l=0;l<this._itemCount;l++)if(i>=this._itemPoints[l]&&i<this._itemPoints[l+1]){a=l;break}a>=0&&(a+=n)}}r.itemIndex=a;var u=-1,h=this._gridBounds.x;if(e<h)u=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)u=o.visibleLayoutCount-1;else{for(e-=h,l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){u=l;break}if(u<0&&this._rightLayoutCount>0){var c=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+h;for(l=0;l<this._rightLayoutCount;l++)if(c>=this._rightLayoutPoints[l]&&c<this._rightLayoutPoints[l+1]){u=l+this.rightFirstLayout;break}}if(u<0)for(e=e-this._fixedWidth+this._leftPos,l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){u=l;break}}return u>=0&&u<o.visibleLayoutCount?r.layout=o.getVisibleLayout(u):r.layout=null,r},i.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount;if(e>=i){if(e<this._topIndex+i)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}var r=t.layout,o=r.col;if(o>=(i=this._fixedLayoutCount)){if(o=r.col-this._fixedCellCount,this._cellPoints[o]<this._leftPos)return!1;if(this._cellPoints[o+r.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},i.prototype.clearFocusRequest=function(){this._focusIndex=null},i.prototype.focusIsVisible=function(t){return(t=t||this._focusIndex)&&this.cellIsVisible(t)},i.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},i.prototype.isAutoRowHeights=function(){return this._autoRowHeights},i.prototype.isRowGrouped=function(){return this._rowGrouped},i.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},i.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;t>=0;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},i.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==t.GridFitStyle.EVEN_FILL||this.syncHeight()&&this._fitSyncChanged},i.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,r=e._cellWidths,o=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-o-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],o>0){var n=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=0,u=0;s.push(l),a.push(l);for(var h=0;h<o;h++){for(var c=e.getVisible(h),d=c.cols,p=0;p<d;p++)l+=r[u++],a.push(l);n.push(c),s.push(l)}this._fixedCellCount=this._cellCount=u,this._fixedWidth=s[o]+(this._fixedBarWidth=t.colBarWidth)}},i.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,r=this._layoutPoints=[],o=this._cellPoints=[],n=this._fixedLayoutCount,s=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,this._layoutsLength=0,e>0){var a=0,l=this._cellCount;r.push(a),o.push(a);for(var u=0;u<e;u++){for(var h=t.getVisible(u+n),c=h.cols,d=0;d<c;d++)a+=i[l++],o.push(a);s.push(h),r.push(a)}this._layoutsLength=a,this._cellCount=l,this._lastCell=l-1}},i.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,r=this._layoutCount,o=this._rightLayoutPoints=[],n=this._rightCellPoints=[],s=this._layouts;if(this._rightLayoutCount>0){var a=0,l=this._cellCount;o.push(a),n.push(a);for(var u=r-this._rightLayoutCount;u<r;u++){for(var h=e.getVisible(u),c=0;c<h.cols;c++)a+=i[l++],n.push(a);s.push(h),o.push(a)}this._rightCellCount=l-this._cellCount,this._cellCount=l,this._rightWidth=o[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},i.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},i.prototype.$_calcLeftPos=function(){var t=this._focusIndex&&this._focusIndex.layout;if(t){var e=t.root.vindex,i=this._cellPoints,r=this.grid;if(e>=this._fixedLayoutCount&&e<this.rightFirstLayout){var o=t.col-this._fixedCellCount,n=i[o],s=r.displayOptions.horzPageScroll&&"keydown"===r._eventFrom&&r._prevTop===this._topIndex;if(n<this._leftPos)s&&this._leftPos>=i[o+1]&&(n=n-(this.gridBounds.width+i[o]-i[o+1])+(this._fixedContentBounds.width+this._rightContentBounds.width)),this._leftPos=n;else{var a=i[o+t.cols]-this._leftPos-this._scrollWidth;s&&i[o]-this._leftPos>=this._scrollWidth&&(a=Math.max(i[o]-i[this.getLeftCell()],a)),a>0&&(this._leftPos=Math.min(n,this._leftPos+a))}}}this._leftPos=Math.max(0,Math.min(this._leftPos,this._layoutsLength-this._scrollWidth)),this._firstLayout=this._fixedLayoutCount,this._lastLayout=this._layoutCount>0?this._layoutCount-this._rightLayoutCount-1:-1},i.prototype.$_checkFitting=function(e,i){var r=e.fitStyle;if(r!=t.GridFitStyle.NONE){var o=this._cellPoints,n=o.length;if(n>0)return r==t.GridFitStyle.EVEN_FILL||i-o[n-1]>0?r:void 0}},i.prototype.$_fitColumns=function(e,i,r){var o=this;if(e.fitStyleIncludeFixed&&this._fixedCellCount+this._rightCellCount>0){var n=[this._fixedLayoutPoints,this._layoutPoints,this._rightLayoutPoints],s=0;n.forEach((function(t){t.length>0&&(s+=t[t.length-1])}));var a=this._clientRect.width-this._leftContentBounds.width-this._sideContentBounds.width-this._scrollBarWidth;a=a-(this._fixedCellCount?this._fixedBarWidth:0)-(this._rightCellCount?this._rightBarWidth:0),n.forEach((function(t){for(var e=1;e<t.length;e++)t[e]=Math.round(t[e]*(a/s))}));var l=0;n.forEach((function(t,e){var r=0===e?o._fixedCellPoints:1===e?o._cellPoints:o._rightCellPoints,n=t.length,s=i._cellWidths,a=0;r.length=0,r.push(a);for(var u=0;u<n-1;u++){var h=o._cellLayouts.getVisible(l++),c=h._cellWidth,d=t[u+1]-t[u],p=d/c,f=h.hcol,_=h.cols,g=a;h._setFitWidth(d);for(var y=0;y<_-1;y++)g+=s[f+y]*p,r.push(Math.round(g));a+=d,r.push(Math.round(a))}r[r.length-1]=t[n-1]})),this._layoutsLength=ft.getLast(this._layoutPoints),this._fixedWidth=this._fixedCellCount?ft.getLast(this._fixedLayoutPoints)+this._fixedBarWidth:0,this._rightWidth=this._rightCellCount?ft.getLast(this._rightLayoutPoints)+this._rightBarWidth:0,this._fixedContentBounds.width=this._fixedWidth,this.$_measureFixedPane(this.grid),this._contentBounds.left=this._fixedContentBounds.right,this._contentBounds.width=this._layoutsLength,this.$_measureContentPane(this.grid),this._rightContentBounds.left=this._contentBounds.right+this._scrollBarWidth,this._rightContentBounds.width=this._rightWidth,this.$_measureRightPane(this.grid),this._nonFixedBounds=new $(this._fixedContentBounds.right,this._fixedContentBounds.y,this._layoutsLength,this._fixedContentBounds.height)}else{for(var u=0;u<this._layoutCount;u++)(E=this._cellLayouts.getVisible(u)).isFixed&&E._clearFitWidth();var h=this._layoutsLength,c=this._layoutPoints,d=c.length,p=this._fixedLayoutCount,f=[];for(u=1;u<c.length;u++)f.push(c[u]-c[u-1]);if(d>0){var _=e.fitStyle,g=this._layouts;if(_==t.GridFitStyle.EVEN||_==t.GridFitStyle.EVEN_FILL)for(u=1;u<d;u++)c[u]=c[u]*r/h;else if(_==t.GridFitStyle.FILL){var y=0,m=0;for(u=0;u<d-1;u++){var b=g[u+p].fillWidth;b>0?m+=b:y+=f[u]}if(m>0)for(y=r-y,u=1;u<d;u++){var v=(E=g[u-1+p]).fillWidth;c[u]=v>0?c[u-1]+v*y/m:c[u-1]+f[u-1]}else for(u=1;u<d;u++)c[u]=c[u]*r/h}var w=0;for(u=0;u<d-1;u++)c[u]=Math.round(c[u]);for(u=1;u<d-1;u++){var C=c[u]-c[u-1];C<2?(w=2-C,c[u]+=2-C):w>0&&C>2+w&&(c[u]-=w,w=0)}var x=this._cellPoints=[],I=i._cellWidths,S=0;for(x.push(S),u=0;u<d-1;u++){var E,k=(E=this._cellLayouts.getVisible(u+p))._cellWidth,O=c[u+1]-c[u],R=O/k,P=E.hcol,D=E.cols,T=S;E._setFitWidth(O);for(var L=0;L<D-1;L++)T+=I[P+L]*R,x.push(Math.round(T));S+=O,x.push(Math.round(S))}x[x.length-1]=c[d-1]}this._layoutsLength=c[d-1]=r}},i.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},i.prototype._doMeasureTopPane=function(t,e){e.height=0},i.prototype.$_measureViewHeights=function(t,e){var i;i=0,t.header.visible?(this._headerBounds=e.clone(),i=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=i):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new $,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=i,e.topBy(i),i=0,t.filterPanel.visible?(this._filterPanelBounds=e.clone(),i=t.filterPanelView.measure(t,e.width,e.height).height,this._filterPanelBounds.height=i):(this._filterPanelBounds=this._filterPanelBounds||new $,this._filterPanelBounds.setEmpty()),this._fixedFilterBounds=this._filterPanelBounds.clone(),this._rightFilterBounds=this._filterPanelBounds.clone(),this._filterBounds.y=e.y,this._filterBounds.height=i,e.topBy(i),i=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),i=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=i):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new $,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=i,e.topBy(i),i=0,t.footers.canShow?(this._footerBounds=e.clone(),i=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=i):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new $,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=i;var r=this._sumBounds.bottom;i=this._footBounds.y-r,this._rowBarBounds.y=r,this._rowBarBounds.height=i},i.prototype.$_sortSections=function(t){var e=[t.rowIndicator,t.stateBar,t.checkBar];return e.sort((function(t,e){var i=t.displayOrder,r=e.displayOrder;return i==r?t.staticOrder-e.staticOrder:i-r})),e},Object.defineProperty(i.prototype,"sectionObjects",{get:function(){return this._sectionObjects},enumerable:!0,configurable:!0}),i.prototype.$_measureLeftPane=function(t){this._sectionObjects=this.$_sortSections(t);var e,i=this._leftContentBounds.clone().move();this._headBounds=i.clone(),this._sumBounds=i.clone(),this._footBounds=i.clone(),this._filterBounds=i.clone(),e=t.rowBarContainer.measure(t,i.width,i.height),this._rowBarBounds=i.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,i.leftBy(e.width),this._headBounds.width=this._sumBounds.width=this._footBounds.width=this._filterBounds.width=this._leftContentBounds.width},i.prototype._measureSidePane=function(t){if(t.isSidePaneVisible()){var e=this._sideContentBounds.clone(),i=t.sideContentPane.measure(t,e.width,e.height);this._sideContentBounds.width=i.width}else this._sideContentBounds.width=0},i.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedFilterBounds.x=i.x,this._fixedFilterBounds.y=i.y,this._fixedFilterBounds.width=i.width,i.topBy(this._fixedFilterBounds.height),e>0&&(t.fixedFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedFilterBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),e>0&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),e>0&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},i.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightFilterBounds.x=i.x,this._rightFilterBounds.y=i.y,this._rightFilterBounds.width=i.width,i.topBy(this._rightFilterBounds.height),e>0&&(t.rightFilterView._rowPoints=t.filterPanelView._rowPoints.slice()),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightFilterBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),e>0&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),e>0&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},i.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds&&(this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height)),this._filterPanelBounds&&(this._filterPanelBounds.x=i.x,this._filterPanelBounds.y=i.y,this._filterPanelBounds.width=i.width,i.topBy(this._filterPanelBounds.height)),this._summaryBounds&&(this._summaryBounds.x=i.x,this._summaryBounds.y=this._filterPanelBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height)),this._dataBounds=i.clone(),this._footerBounds&&(this._footerBounds.x=i.x,this._footBounds.y=this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height)),this._bodyBounds=i},i.prototype.getRowHeightOfCallback=function(t,e){var i=t.getItem(e),r=t.displayOptions.rowHeightCallback;if(r){var o=r.call(this,t.handler,i.type,e),n=[],s=void 0,a=this.trs;if(null!=o){if(Array.isArray(o))for(n=o.slice(0,a),l=o.length;l<a;l++)n.push(this.minRowHeight);else{s=0;for(var l=1;l<a;l++){var u=Math.max(this.minRowHeight,l%2?Math.floor(o/a):Math.round(o/a));n.push(u),s+=u}n.push(Math.max(o-s,this.minRowHeight))}var h=n.reduce((function(t,e){return t+e}),0);return i.heights=n.slice(),h}}},i.prototype.$_getItemHeight=function(e,i){var r=e.getItem(i),o=r.height;if(!isNaN(o))return o;if(this._autoRowHeights)return this._minItemHeight;if(e.displayOptions.rowHeightCallback&&ft.included(r.type,t.ItemType.ROW,t.ItemType.TREE)){var n=this.getRowHeightOfCallback(e,i);if(n)return n;r.heights=null}else r.heights=null;return this._itemHeight},i.prototype.$_calcItemPoints=function(t){var e=this.grid;if(!("mousedown"===e._eventFrom&&this._focusIndex&&this._topIndex<this._focusIndex.itemIndex-this._fixedItemCount-Math.max(0,this._fullItemCount-1))){t=null==t||t;var i=e.itemSource,r=this.syncHeight(),o=r?1/0:this._itemsBounds;this._topIndex=r?0:this._topIndex;var n=0,s=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],s>0){this._fixedItemPoints.push(n);for(var a=0;a<s&&n<o;a++)n+=this.$_getItemHeight(e,a),this._fixedItemPoints.push(n),this._fixedItemCount++;this._fixedHeight=n,n+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var l=e.itemCount-this._fixedItemCount;if(this._itemPoints=[n],this._itemCount=0,this._fullItemCount=0,l>0&&n<o){var u=this._topIndex,h=-1;if(this._focusIndex&&(h=this._focusIndex.itemIndex)>=this._fixedItemCount&&h<u+this._fixedItemCount){var c=h-this._fixedItemCount;null==(d=e.topIndexChanging(u,h-this._fixedItemCount-u,!0,!1))||isNaN(d)||(c=this._topIndex+d),u=this._topIndex=c}for(a=u;a<l&&n<o;a++)n+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(n);if(this._fullItemCount=this._itemCount-(n>o?1:0),t&&h>=this._topIndex+this._fixedItemCount+this._fullItemCount){n=this.fixedItemCount>0?this._fixedHeight+e.fixedOptions.rowBarHeight:0;var d,p=h-this._fixedItemCount-Math.max(0,this._fullItemCount-1)-this._topIndex;for(null==(d=e.topIndexChanging(this._topIndex,p,t,!1))||isNaN(d)||(p=d),this._topIndex+=p,this._itemPoints=[n],this._itemCount=0,this._fullItemCount=0,a=this._topIndex;a<e.itemCount-this._fixedItemCount&&n<o;a++)n+=this.$_getItemHeight(e,a+this._fixedItemCount),this._itemCount++,this._itemPoints.push(n);this._fullItemCount=this._itemCount-(n>=o?1:0)}}else this._topIndex=0}},i.prototype.$_updateScrollInfo=function(e,i,r){var o=this._reqScrollBarWidth,n=this._reqScrollBarHeight,s=r?this._tableItemPoints:this._itemPoints,a=s[s.length-1],l=this._layoutsLength,u=i.fitStyle==t.GridFitStyle.EVEN_FILL,h=this.syncHeight();this._hscrolled=l>this._scrollWidth,this._vscrolled=!h&&(this._topIndex>0||e.itemCount>this._itemCount+this._fixedItemCount||a>this._bodyBounds.height);var c=n>0&&this._hscrolled&&!u,d=o>0&&this._vscrolled;c!=d&&(c?o>0&&!h&&(d=a>this._bodyBounds.height-n):n>0&&!u&&(c=l>this._scrollWidth-o)),this._hscrollBar=c,this._vscrollBar=d,this._hscrolled=this._hscrolled||c,this._vscrolled=this._vscrolled||d,this._scrollBarWidth=d?o:0,this._scrollBarHeight=c?n:0,this._scrollWidth-=this._scrollBarWidth},i.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},i.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(t>0){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this.syncHeight()?1/0:this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();this._fullItemCount=this._itemCount-(e[this._itemCount]>=i?1:0);var r=this._focusIndex?this._focusIndex.itemIndex:-1;if(r>=0&&this._itemCount>this._fullItemCount&&r>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var o=this.grid,n=e[this._itemCount],s=0;n>i;)n-=e[++s];var a=o._prevTop+1!==this._topIndex;if(s>0&&"mousedown"!==o._eventFrom){var l=o.topIndexChanging(this._topIndex,s,!!this._focusIndex,!0);null==l||isNaN(l)||(s=l),e.splice(0,s),this._topIndex+=s,this._itemCount-=s,this._fullItemCount-=s,n=e[0];for(var u=0;u<e.length;u++)e[u]-=n;if(n=e[e.length-1],o.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;n<i&&this._topIndex+this._fixedItemCount+this._itemCount<o.itemCount;)e.push(n+=this.$_getItemHeight(o,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;a&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var h=e[e.length-1];this._rowBarBounds.height=h}},i.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,r=this._leftPos,o=r+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var n=0;n<i;n++)if(e[n]>r){this._startCell+=n-1;break}for(n=i-2;n>=0;n--)if(e[n]<o){this._endCell+=n;break}},i.prototype.$_calcTableRowPoints=function(){var t,e,i=this._trs,r=this._items,o=this._fixedItemCount,n=this._itemCount+o,s=this._fixedTableRowPoints=[],a=this._tableRowPoints=[],l=this._dataRowHeights,u=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,o>0){for(var h=this._fixedItemPoints;u<o;u++){var c=h[u];if(t=r[u],s.push(c),this._fixedTableRowCount++,t.isData){e=t.heights||l;for(var d=Math.floor((h[u+1]-c)/i),p=Math.round(h[u+1]-c)/i,f=1;f<i;f++)s.push(c+=e[f-1]?e[f-1]:f%2?d:p),this._fixedTableRowCount++}}s.push(this._fixedDataHeight=this._fixedItemPoints[o])}if(this.itemCount>0){for(h=this._itemPoints;u<n;u++)if(c=h[u-o],d=h[u-o+1]-c,t=r[u],a.push(c),this._tableRowCount++,t.isData){e=t.heights||l;var _=Math.floor(d/i);for(p=Math.round(d/i),f=1;f<i;f++)a.push(c+=e[f-1]?e[f-1]:f%2?_:p),this._tableRowCount++}a.push(this._dataHeight=h[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},i.prototype._doMeasure=function(t,e,i){var r=this._grid,o=r.displayOptions,n=r.fixedOptions,s=t.clone();this._refreshMode=o.refreshMode,this._autoRowHeights=o.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=i,this._minRowHeight=o.minTableRowHeight,this._maxHeight=o.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,o.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),r.heightMeasurer.measure(r),this.$_calcFixedCellPoints(n,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(n,this._cellLayouts),this._itemHeight=this._calcDefaultRowHeight(r);var a=r.container._containerDiv;!this.syncHeight()&&this._oldSyncHeight&&this._oldSyncHeight!==r.displayOptions.syncGridHeight&&a.style.height!==r.container._orgCssHeight&&(a.style.height=r.container._orgCssHeight),function(){this._topContentBounds=s.clone(),this.$_measureTopPane(r),s.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=s.clone(),this.$_measureLeftPane(r),s.leftBy(this._leftContentBounds.width),this._sideContentBounds=s.clone(),this._measureSidePane(r),s.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(r,s.clone().move()),this._fixedContentBounds=s.clone(),this.$_measureFixedPane(r),s.leftBy(this._fixedContentBounds.width),this._rightContentBounds=s.clone(),this.$_measureRightPane(r),this._rightContentBounds.x=s.right-this._rightContentBounds.width,s.width-=this._rightContentBounds.width,this._contentBounds=s.clone(),this.$_measureContentPane(r),this._clientRect=t.clone(),this._nonFixedBounds=new $(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height)}.call(this),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._filterPanelBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(r,o);var l=this._fitStyle;(this._fitStyle=this.$_checkFitting(o,this._scrollWidth))?(this.$_fitColumns(o,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):r._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=l)&&r.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this._gridBounds=new $(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,this._footerBounds.y-0),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},i.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},i.prototype._doLayoutTopPane=function(t,e){},i.prototype.$_layoutLeftPane=function(t,e){var i=this._leftContentBounds;function r(t,e,i,r){t._dom.appendChild(t._table),t.visible=e.visible,i&&(t.setRect(r),t.layoutContent(this))}(e.visible=!i.isEmpty)?(e.setRect(i),r.call(this,t.headView,t.header,!1,this._headBounds),r.call(this,t.sumView,t.headerSummaries,!0,this._sumBounds),r.call(this,t.footView,t.footer,!0,this._footBounds),r.call(this,t.filterView,t.filterPanel,!0,this._filterBounds),t.rowBarContainer.visible=t.rowIndicator.visible||t.stateBar.visible||t.checkBar.visible):[t.headView,t.sumView,t.footView].forEach((function(t){t&&ft.detach(t._table)}))},i.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},i.prototype._prepareItems=function(t){for(var e=this._topIndex+this._fixedItemCount,i=0;i<this._fixedItemCount;i++){var r=this._rs.getItem(i);this._items.push(r)}var o=this.grid.bodyView,n=t?o._getTableRowCount(this):this._itemCount;for(i=0;i<n&&(r=this._rs.getItem(i+e));i++)this._items.push(r);t&&(this._itemCount=this._items.length-this._fixedItemCount)},i.prototype.$_layoutFixedPane=function(t,e){var i,r=this._fixedContentBounds;(e.visible=!r.isEmpty)?(e.setRect(r),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFilterView).visible=t.filterPanel.visible)&&(i.setRect(this._fixedFilterBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,e.layoutContent(this,r.width,r.height)):(t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFilterView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1)},i.prototype.$_layoutRightPane=function(t,e){var i,r=this._rightContentBounds;(e.visible=!r.isEmpty)?(this._rightFixed||this._hscrolled||(r.x=this._contentBounds.right),e.setRect(r),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFilterView).visible=t.filterPanel.visible)&&(i.setRect(this._rightFilterBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,e.layoutContent(this,r.width,r.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFilterView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1)},i.prototype.$_layoutContentPane=function(t,e){var i,r=this._contentBounds;(e.visible=!r.isEmpty)?(r.x-=this._leftPos,e.setRect(r),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=r.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.filterPanelView).visible=t.filterPanel.visible)&&(this._filterPanelBounds.width=r.width,i.setRect(this._filterPanelBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(this._summaryBounds.width=r.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(this._footerBounds.width=r.width,i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).visible=!0,this._bodyBounds.width=r.width,e.layoutContent(this,r.width,r.height)):t.headerView.visible=t.headerSummaryView.visible=t.footerView.visible=t.bodyView.visible=!1},i.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},i.prototype._doLayout=function(t,e){var i;this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),i=t._topContentPane,this.$_layoutTopPane(t,i),i=t._leftContentPane,this.$_layoutLeftPane(t,i);var r=Date.now();i=t._fixedContentPane,this.$_layoutFixedPane(t,i),i=t._rightContentPane,this.$_layoutRightPane(t,i),i=t._contentPane,this.$_layoutContentPane(t,i),ft.trace("LAYOUT CONTENTS: "+(Date.now()-r))},i.prototype.$_adjustHeader=function(t,e,i,r){var o=t.fixedHeaderView,n=t.rightHeaderView,s=t.headerView,a=t.header.height,l=s.height,u=0,h=!1;if(i&&(h=o.$_checkHeight()),!h&&r&&(h=n.$_checkHeight()),!h&&e&&(h=s.$_checkHeight()),h){var c=[],d=0;i&&(o.$_getHeights(c),a>0?o.$_distributeHeights(a,c):d=Math.max(d,o.$_adjustHeights(c))),r&&(n.$_getHeights(c),a>0?n.$_distributeHeights(a,c):d=Math.max(d,n.$_adjustHeights(c))),e&&(s.$_getHeights(c),a>0?s.$_distributeHeights(a,c):d=Math.max(d,s.$_adjustHeights(c))),a<0&&(u+=d-l,this._headBounds.height=d,i&&this._fixedHeaderBounds.height!=d&&(this._fixedHeaderBounds.height=d,o.setRect(this._fixedHeaderBounds),o.$_adjustHeights(c)),r&&this._rightHeaderBounds.height!=d&&(this._rightHeaderBounds.height=d,n.setRect(this._rightHeaderBounds),n.$_adjustHeights(c)),e&&this._headerBounds.height!=d&&(this._headerBounds.height=d,s.setRect(this._headerBounds),s.$_adjustHeights(c)))}return u},i.prototype._adjustLayout=function(e,i){var r,o=this._autoRowHeights,n=e._fixedContentPane,s=e._rightContentPane,a=e._contentPane,l=e.fixedHeaderView,u=e.rightHeaderView,h=e.headerView,c=e.headView.visible,d=n.visible,p=s.visible,f=a.visible,_=0,g=0,y=this.$_adjustHeader(e,f,d&&h.visible&&l.visible,p&&u.visible);if(0!=y&&(g=this._fixedFilterBounds.y=this._rightFilterBounds.y=this._filterPanelBounds.y=this._filterBounds.y+=y,d&&(e.fixedFilterView.y=g),p&&(e.rightFilterView.y=g),f&&(e.filterPanelView.y=g),c&&(e.filterView.y=g)),0!=y&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y=this._filterBounds.bottom),e.headerSummaries.canShow&&0!=y&&(d&&(e.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),p&&(e.rightHeaderSummaryView.y=this._rightSummaryBounds.y),f&&(e.headerSummaryView.y=this._summaryBounds.y),c&&(e.sumView.y=this._sumBounds.y)),i.topBy(this._headBounds.height+this._sumBounds.height+this._filterBounds.height),0!=y&&(g=this._sumBounds.bottom,_=Math.min(i.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=g,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=_),(r=e.fixedBodyView).visible&&r.setRect(this._fixedBodyBounds),(r=e.bodyView).visible&&r.setRect(this._bodyBounds),(r=e.rightBodyView).visible&&r.setRect(this._rightBodyBounds),this.$_layoutBodyRows(e,d,f,p,this._bodyBounds.height),this.$_adjustTableRowHeights(),o&&this.$_recalcScrollInfo(e),this.syncHeight()){var m=this.topContentBounds.height+this.headerBounds.height+this.footerBounds.height+this.summaryBounds.height+this.scrollBarHeight+this._filterBounds.height,b=e.container._containerDom,v=e.container._containerDiv,w=b.offsetWidth-b.clientWidth,C=v.offsetHeight,x=this._tableItemPoints[this._tableItemPoints.length-1];(this._fitSyncHeight=this.itemCount>0&&(m+x+w>=C||e.displayOptions.syncGridHeight===t.SyncGridHeight.ALWAYS))?v.style.height=m+x+w+"px":(e.recallHeight(),x=C-m-w+(this.topPanelVisible?0:1));var I=new $(0,0,b.clientWidth,b.clientHeight);e.setRect(I),this._topContentBounds.width=I.width,this.$_layoutTopPane(e,this.grid._topContentPane),this._bodyBounds.height=this._fixedBodyBounds.height=this._rightBodyBounds.height=x,e.bodyView.setRect(this._bodyBounds),e.fixedBodyView.setRect(this._fixedBodyBounds),e.rightBodyView.setRect(this._rightBodyBounds),this._contentBounds.height=this._fixedContentBounds.height=this._rightContentBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._footerBounds.height+this._filterBounds.height,this._contentBounds.x=this._leftContentBounds.width+this._sideContentBounds.width+this._fixedContentBounds.width,this.$_layoutContentPane(e,e._contentPane),this.$_layoutFixedPane(e,e._fixedContentPane),this.$_layoutRightPane(e,e._rightContentPane),this._gridBounds.height=this._headerBounds.height+this._summaryBounds.height+this._bodyBounds.height+this._filterBounds.height,this._footBounds.y=this._footerBounds.y=this._fixedFooterBounds.y=this._rightFooterBounds.y=this._bodyBounds.bottom,e.footView.setRect(this._footBounds),e.footerView.setRect(this._footerBounds),e.fixedFooterView.setRect(this._fixedFooterBounds),e.rightFooterView.setRect(this._rightFooterBounds),i=this._gridBounds.clone()}else this._fitSyncHeight=!1;if(this._topIndex>0){var S=o?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+S<=this._gridBounds.bottom&&(o?this.$_fillBottomAuto(e,d,f,p,this._bodyBounds.height):this.$_fillBottomFixed(e,d,f,p,this._bodyBounds.height)),0==this._topIndex){var E=this._vscrollBar;this.$_recalcScrollInfo(e),this._vscrollBar!=E&&this._fitStyle&&(this.$_layoutBodyRows(e,d,f,p,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}e.fixedBodyView.visible&&e.fixedBodyView.$_resetCellHeights2(this,o),e.bodyView.visible&&e.bodyView.$_resetCellHeights2(this,o),e.rightBodyView.visible&&e.rightBodyView.$_resetCellHeights2(this,o);var k=this._tableItemPoints;this._dataBounds.height=k[k.length-1],g=this._sumBounds.bottom,_=Math.min(i.height,this._dataBounds.height),this._rowBarBounds.y=g,this._rowBarBounds.height=_,d&&e._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height),p&&e._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height),(r=e.headView).visible&&(r.setRect(this._headBounds),r.layoutContent(this)),e.rowBarContainer.setRect(this._rowBarBounds),e.rowBarContainer.layoutContent(this)},i.prototype.$_layoutBodyRows=function(t,e,i,r,o,n){function s(t,e,i,r){p._items.push(t),m.forEach((function(o,n){o&&o.layoutRow(e,b[n],i,r,t)}))}function a(e,i,r,o){var n=e.height,s=[];if(!t.displayOptions.refCalcHeights||isNaN(n)){for(var a=0;a<S;a++)s[a]=0;m.forEach((function(t){for(var e=t&&t._tbody.children,i=0;e&&i<S;i++)s[i]=Math.round(Math.max(s[i],I,e[r+i].offsetHeight))})),e.heights=s}else if(e.heights)s=e.heights;else{var l=0,u=0;for(a=0;a<S;a++)l+=u=a%2?Math.floor(n/S):Math.round(n/S),s.push(u);s.push(w-l)}n=0;var h=s.reduce((function(t,e){return t+e}),0)+3;if(h>E){var c=E/h;h=E;for(var d=0;d<s.length-1;d++)h-=s[d]=Math.max(I,Math.floor(s[d]*c));s[s.length-1]=Math.max(I,h)}for(d=0;d<S;d++)n+=s[d],o.push(i+=s[d]);return f.setRowHeight(e,n,!1),n}void 0===n&&(n=!0);var l,u=e&&this._fixedCellCount>0?t.fixedBodyView:null,h=i&&this.cellCount>0?t.bodyView:null,c=(r&&this._rightCellCount)>0?t.rightBodyView:null,d=this._dataRowHeights,p=this;if(n&&this.$_checkColumnMerging(t,this.syncHeight()),l=h||u||c){var f=t.itemSource,_=f?Math.min(f.fixedCount,f.itemCount):0,g=this._autoRowHeights,y={lm:this,grid:t,topIndex:this._topIndex,fixedItemCount:_,mergeFixed:t.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},m=[u,h,c],b=[[],[],[]];m.forEach((function(t){t&&t._doPrepareContent(p)})),o=this.syncHeight()?1/0:o;var v,w,C,x,I=this._minRowHeight,S=l._trs,E=this._maxHeight>0?Math.min(Math.max(this._maxHeight,I*S),o):o,k=Math.floor(m.reduce((function(t,e){return e?Math.max(e.tableRowCount,t):t}),0)/S),O=0,R=0,P=0,D=[],T=[],L=[];this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[];var M=Math.min(_,this._fixedItemCount,Math.ceil(o/I));if(this._fixedHeight=0,_>0){D.push(R),T.push(P);for(var F=O,N=0;N<M;N++)s(f.getItem(N),y,N,F),F+=S;for(N=0;N<_&&R<o;N++){x=f.getItem(N);var V=S;if(this._items.indexOf(x)<0&&s(x,y,N,O),g)P+=w=a(x,P,O,T);else{v=P,w=this._fixedItemPoints[N+1]-this._fixedItemPoints[N],C=Math.floor(w/V);for(var B=Math.round(w/V),A=x.heights||d,$=0;$<V-1;$++)T.push(P+=A[$]?A[$]:$%2?B:C);T.push(P=v+w)}this._fixedTableRowCount+=V,R+=w,D.push(R),this._fixedDataHeight=R,O+=V}this._fixedHeight=R,R<o&&(w=0,m.forEach((function(t){t&&(w=t.layoutFixedBar(p,O))})),O++,R+=w,P+=w),k=k-this._fixedItemCount-1}this._fixedItemCount=D.length?D.length-1:0;var j=t.itemCount-this._fixedItemCount,H=[R];if(L.push(R),M=Math.min(j,k,Math.ceil((o-R)/I)),this._itemCount=0,this._fullItemCount=0,j>0&&R<o){var W=this._topIndex,G=-1;for(this._focusIndex&&(G=this._focusIndex.itemIndex)>=this._fixedItemCount&&G<W+this._fixedItemCount&&(W=this._topIndex=G-this._fixedItemCount),F=O,N=0;N<M&&N+W<j&&(x=f.getItem(N+W+_));N++)s(x,y,this._fixedItemCount+N,F),F+=x.isData?S:1;for(N=W;N<j&&R<o;N++){if(V=(x=f.getItem(N+_)).isData?S:1,this._items.indexOf(x)<0&&s(x,y,this._fixedItemCount+N-W,O),x.isData)if(g)P+=w=a(x,P,O,L);else{for(v=P,w=this._itemPoints[N-W+1]-this._itemPoints[N-W],C=Math.floor(w/V),B=Math.round(w/V),A=x.heights||d,$=0;$<V-1;$++)L.push(P+=A[$]?A[$]:$%2?B:C);L.push(P=v+w)}else w=this._itemPoints[N-W+1]-this._itemPoints[N-W],L.push(P+=w);this._tableRowCount+=V,R+=w,H.push(R),this._itemCount++,this._dataHeight=R,O+=V}this._fullItemCount=this._itemCount-(R>o?1:0)}g&&m.forEach((function(t){t&&t.$_resetHeights(T,L)})),ft.ieOld&&m.forEach((function(t){t&&t.$_resetCellStyleHeights(T,L)})),this._fixedItemPoints=D,this._itemPoints=H,this._fixedTableRowPoints=T,this._tableRowPoints=L,this._dataBounds.height=H[H.length-1];var U=this._items.length=this.fixedItemCount+this._itemCount;m.forEach((function(t){t&&t.cleanRows(U,O)}))}},i.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){for(var t=this._items,e=this._trs,i=this._fixedTableRowPoints,r=this._fixedTableItemPoints=[0],o=0,n=1,s=this._fixedItemCount;n<=s;n++,o++)r.push(i[n*e]);i=this._tableRowPoints,r=this._tableItemPoints=[i[0]],n=0;var a=0;for(s=this._itemCount;n<s;n++,o++)t[o].isData?r.push(i[a+=e]):r.push(i[++a])}else this._tableItemPoints=this._tableRowPoints.slice()},i.prototype.$_fillBottomFixed=function(t,e,i,r,o){for(var n=this._dataBounds.height,s=this._topIndex,a=0;(n+=this.$_getItemHeight(this.grid,s--))<this._bodyBounds.height&&s>=0;)a++;this._topIndex=Math.max(0,this._topIndex-a),this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,r,o),this.$_adjustTableRowHeights()},i.prototype.$_fillBottomAuto=function(t,e,i,r,o){for(;this._topIndex>0&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var n=this._tableItemPoints,s=n[1]-n[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,r,o),this.$_adjustTableRowHeights(),s+(n=this._tableItemPoints)[n.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(this._autoRowHeights),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,r,o),this.$_adjustTableRowHeights();break}}},i.prototype.$_prepareColumnMerges=function(t,e,i,r){for(var o=this._fixedItemCount,n=this._itemCount,s=!1,a=0,l=t.length;a<l;a++){var u=t[a],h=u&&u.layout;h&&h.canMerge()&&((c=h.merges)||((c=new bn(h)).clear(),c.initialize(dn.INIT_COUNT)),c.refreshRooms(e,i,r),c.prepareCells(o,n),c.refreshCells(o,this.topIndex),u.layout.$_setMerged(!0),s=!0)}var c,d=this.grid.checkBar;return d.canMerge()?((c=d.merges)||((c=new Ns(d)).clear(),c.initialize(dn.INIT_COUNT)),c.refreshRooms(e,i,r),c.prepareCells(o,n),c.refreshCells(o,this.topIndex),d._merged=!0):d._merged=!1,s},i.prototype.$_checkColumnMerging=function(t,e){void 0===e&&(e=!1);var i=t.fixedOptions,r=i.rowCount,o=this._contentBounds.height/this._minItemHeight-r,n=this._topIndex,s=r>0&&i.mergeRows,a=e?r:r+n,l=e?t.itemCount-1:Math.min(t.itemCount-1,r+n+o-1);this.$_prepareColumnMerges(t.getHorzColumns(),a,l,s)},i}(Ct),rl=function(t){function e(e){var i=t.call(this,e)||this;return i.summaryIndex=0,i.rendererClass="",i.style=new wn,i.html=void 0,i.text=e[ft.TextProp],i}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.layout=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),this.text&&(i[ft.TextProp]=this.text=""),this.html&&(i.innerHTML=this.html=""),this},e.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=sn.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=Me.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=De.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=Te.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},e.prototype.setText=function(t){t!==this.text&&(this.cell.firstElementChild[ft.TextProp]=(this.text=t)||"")},e.prototype.setHtml=function(t){t!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=t)||"")},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)},e}(Ya),ol=function(t){function e(e,i,r){var o=t.call(this,e,i,r)||this;return o._rowPoints=[],o._cells=[],o}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++){var o=i[r];if(o&&o.cell===t)return o}return null},e.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._doDrawCell=function(t,e,i){},e.prototype._doRender=function(t){},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype._prepareCellContent=function(t,e){return ct(t).createElement("div")},e.prototype._doMeasure=function(t,e,i){for(var r=t.layoutManager,o=this._getSummaryRows(r),n=this._getCollection(),s=this._getSummaryHeight(t.heightMeasurer),a=0,l=this._rowPoints=[a],u=0,h=t.layoutManager.getDataRowHeights(o),c=h.reduce((function(t,e){return t+e}),0),d=0,p=n.visibleCount;d<p;d++){var f=n.getVisible(d),_=Math.max(c,f.height);_<=0&&(_=s*o),_=Math.max(f.minHeight,_);for(var g=Math.floor(_/o),y=0,m=0;m<o-1;m++)h[m]?(a+=Math.round(h[m]*(_/c)),l.push(a),y+=Math.round(h[m]*(_/c))):(a+=g,l.push(a),y+=g);a+=_-y,l.push(a),u+=_}return Ra.create(e,u)},e.prototype._doPrepareTableExtents=function(t){},e.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],r=e.children[0],o=0;r&&o<i.length;o++){var n=i[o].layout.source,s=r.children[o];s&&n&&(s[ft.TextProp]=(n.header.getDisplayText()||n.firstColumn.header.displayText)+" summary")}},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),r=this._getSummaryCount(t),o=t.cellLayouts._dataCells,n=o.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this._refreshCells(t,r,o,this._tbody),this.$_refreshSpans(t,n*r),this.$_refreshHeadTitle(t,this._thead);for(var u=0;u<r;u++)for(var h=i.getVisible(u),c=0;c<n;c++){var d=this._cells[u*n+c],p=this._getTableRow(t,u*n+c);ft.setClassName(p,h.styleName||"");for(var f=a;f<=l;f++){var _=d[f];if(_.visible){var g=_.layout;if(g.isProxy)_.setText(""),_.setClassName(h.getCellStyleName());else if(g instanceof jn)_.setText(""),_.setClassName(h.getCellStyleName());else{var y=h.getCell(g);this._updateCell(e,h,y,_)}}}}},e.prototype._updateCell=function(t,e,i,r){var o=i,n=o.getSummary(),s=e.getCellStyle(i,r.style.clear());if(r.setClassName(s.styleName),r.setRendererClassName(this._getRendererStyle()),r.refreshFormatters(s),n){e.getCellFormatters(n,r);var a=o.getTemplate(r);void 0===a?r.setText(o.getDisplayText(r)):r.setHtml(a)}else r.setText("")},e.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},e.prototype._refreshCells=function(t,e,i,r){for(var o=this._cells,n=r.children,s=n.length,a=i.length,l=this._getFirstCell(t),u=this._getLastCell(t)-l+1,h=o.length;h<s;h++)o.push([]);h=0;for(var c=0;h<e&&c<s;h++)for(var d=0;d<a;d++){for(var p=o[c],f=n[c].children,_=i[d],g=0;g<u;g++){var y=_[g+l],m=p[g];m?m.cell!==f[g]||m.layout!=y&&(m.layout=y,m.clear(!0)):(m=p[g]=new rl(f[g])).layout=y,m.spanned=!1,m.summaryIndex=h}for(c++,g=u;g<p.length;g++)p[g].dispose();p.length=u}for(c=s;c<o.length;c++){var b=o[c];for(g=0;g<b.length;g++)b[g].dispose(),b[g]=null}o.length=s},e.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),r=this._getFirstCell(t)-i,o=this._getLastCell(t)-i,n=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,u=r;u<=o;u++){var h=a[u],c=h.layout,d=c.parent,p=d&&d.vertical;if(h.spanned);else if(c.isProxy)h.clear(!1);else{var f=0,_=0,g=this._getSpanOf(c,h.summaryIndex)-1,y=this._getUserSpanOf(c,h.summaryIndex);if(y){var m=y.footerCount||0,b=m>0?m*e:y.rowspan||1,v=y.colspan||1;h.set(v,b,!0);for(var w=0;w<b;w++)for(var C=0;C<v;C++){var x=this._cells[w+s]&&this._cells[w+s][C+u];x&&x!==h&&x.span()}}if(!y&&g>0){var I=0,S=c.vindex+1;if(p)for(;I++<g&&I<n&&(E=d.getVisible(S++));)_+=E._dspan,this._cells[s+I][u].span();else for(;I++<g&&u-r+I<l&&S<d.visibleCount;){var E;if(!(E=d.getVisible(S++)))break;f+=E._cspan,a[u+I].span()}}c.isNull&&h.clear(!0),!y&&h.set(c._cspan+f,c._dspan+_,!0)}}},e.prototype._doPrepareTableRow=function(e,i,r,o){t.prototype._doPrepareTableRow.call(this,e,i,r,o)},e}(Ma),nl=function(t){function e(e,i){return t.call(this,e,i,"footerView")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-footer"},e.prototype._getRendererStyle=function(){return"rg-footer-renderer"},e.prototype._getSummaryRows=function(t){return t.dataRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.footerHeight},e.prototype._getSummaryCount=function(t){return t.footerCount},e.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getFooterUserSpan(e)},e.prototype._getTableRowCount=function(t){return t.dataRows*t.footerCount},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)},e}(ol),sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(nl),al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(nl),ll=function(t,e){return"object"==typeof t&&Object.prototype.toString.call(t).indexOf(e)>=0},ul=function(t){function e(e,i){var r=t.call(this)||this;return r._active=!1,r._completed=!1,r._dragging=!1,r._currentX=0,r._currentY=0,r._container=e,r._name=i,r}return r(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},e.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},e.prototype.start=function(t,e,i,r){return void 0===r&&(r=null),this.cancel(),!(!this._active||!this._doStart(t,e,i,r))&&(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),!0)},e.prototype.drag=function(t,e,i){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i)))&&(this._moveFeedback(e,i),!0)},e.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.drop=function(t,e,i){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i)?(this._doCompleted(t,e,i),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.getRequest=function(){return null},e.prototype.getNextRequest=function(t,e){return null},Object.defineProperty(e.prototype,"currentX",{get:function(){return this._currentX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentY",{get:function(){return this._currentY},enumerable:!0,configurable:!0}),e.prototype._showFeedback=function(t,e){},e.prototype._moveFeedback=function(t,e){},e.prototype._hideFeedback=function(){},e.prototype._doActivate=function(){},e.prototype._doDeactivate=function(){},e.prototype._doStart=function(t,e,i,r){return!0},e.prototype._doDrag=function(t,e,i){return!0},e.prototype._doCanceled=function(t,e){},e.prototype._canAccept=function(t,e,i){return!0},e.prototype._doCompleted=function(t,e,i){},e.prototype._doEnded=function(){},e}(Ct),hl=function(t){function e(e,i){var r=t.call(this,e.container,i)||this;return r._grid=e,r}return r(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(ul),cl=function(t){function e(e,i){var r=t.call(this,e.layout.grid,"columnResizeTracker")||this;r._request=e,r._feedback=i;var o=e.layout;return r._layoutX=e.x+e.offset-o.domWidth,r._offset=e.offset,r}return r(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,r){var o=this.grid.layoutManager,n=o.contentBounds.y,s=o.contentBounds.bottom;return this._feedback.resize(2,s-n),this._feedback.move(e-this._offset,n),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){this._request.layout;var r=this.grid.displayOptions.minCellWidth;return(e-=this._offset)>=this._layoutX+r&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},e.prototype._doEnded=function(){var t=this.grid.displayOptions.minCellWidth,e=Math.max(t,this._feedback.x-this._layoutX);this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(e,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},e}(hl),dl=function(t){function e(e,i,r){var o=t.call(this,e.layout.grid,"columnMoveTracker")||this;return o._timer=null,o._colLoop=0,o._colPrevLoop=0,o._interval=0,o._request=e,o._layout=e.layout,o._cellFeedback=i,o._feedback=r,o}return r(e,t),e.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,i,r,o){var n=this.grid,s=n.layoutManager,a=this._layout.parent,l=s.getHeaderCellRect(this._layout,!0);a.horizontal?(this._offset=i-l.x,this._feedback.setBounds(l.x,l.y,e.WING_SIZE,l.height)):(this._offset=r-l.y,this._feedback.setBounds(l.x,l.y,l.width,e.WING_SIZE)),this._feedback.visible=!1,this._cellFeedback.setBounds(l.x,l.y,l.width,l.height),this._cellFeedback.model=n.header.getCell(this._layout),this._cellFeedback.dragging=!1,n.addFeedbackElement(this._cellFeedback),n.addFeedbackElement(this._feedback);var u=this._feedback._dom.style;return u.borderLeft=u.borderRight=u.borderTop=u.borderBottom="",!0},e.prototype._doDrag=function(t,e,i){var r=this.grid,o=this._layout.parent,n=this.grid.layoutManager;if(i<n.contentBounds.y&&r.canGrouping())return!1;if(e<n.gridBounds.x||e>n.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=n.getHeaderCellAt(e,i),a=this.$_findTarget(s);ft.trace("MOVE: ",this._layout.displayText+" => "+(null==a?void 0:a.displayText)),a&&!r.canMoveToLayout(a)&&(a=null),this.$_setTarget(a),this._cellFeedback.dragging=!0,o.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset}return!0},e.prototype._doCanceled=function(){this.$_stopTimer()},e.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},e.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},e.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},e.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,r=0;e>i.clientRect.right?(r=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-r,this._colLoop++):e<i.gridBounds.x&&(r=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-r,this._colLoop++),r>0&&(this._interval=4-r),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&t.leftPos>0&&(t.leftCell-=1)),this.$_setTarget(null)},e.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},e.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,r=this._feedback,o=r._dom.style,n=this.grid.layoutManager;if(this.currentX,this.currentY,this._target=t,r.visible=null!=t&&t.parent===i&&t!==e){var s=n.getHeaderCellRect(t,!0);if(i.horizontal){var a=e.hcol;o.height=s.height+"px",t.hcol<a?(o.borderRight="none",o.borderLeft="",r.x=s.x):t.hcol>a&&(o.borderLeft="none",o.borderRight="",r.x=s.right-r.width)}else{var l=e.row;o.width=s.width+"px",t.row<l?(o.borderBottom="none",o.borderTop="",r.y=s.y):t.row>l&&(o.borderTop="none",o.borderBottom="",r.y=s.bottom-r.height)}}},e.WING_SIZE=7,e}(hl),pl=function(t){function e(e,i){var r=t.call(this,e.grid,"rowResizeTracker")||this;return r._request=e,r._feedback=i,r}return r(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,r){var o=this.grid.layoutManager,n=o.leftContentBounds.x,s=o.rightContentBounds.right;return this._feedback.resize(s-n,2),this._feedback.move(n,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i){var r=this.grid,o=r.displayOptions,n=Math.max(o.minRowHeight,i-this._request.offset-this._request.rowTop);(n=0===o.maxRowHeight?n:Math.min(o.maxRowHeight,n))>=r.layoutManager.bodyBounds.height&&(n=r.layoutManager.bodyBounds.height-1),this._request.variable?r.setRowHeight(this._request.itemIndex,n):o.rowHeight=n},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(hl),fl=function(t){function e(e,i){var r=t.call(this,e.grid,"rowResizeTracker")||this;return r._request=e,r._feedback=i,r}return r(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,r){var o=this.grid.layoutManager,n=o.leftContentBounds.x,s=o.rightContentBounds.right;return this._feedback.resize(s-n,2),this._feedback.move(n,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i){var r=this.grid.header,o=Math.max(r.minHeight,i-this._request.offset-this._request.top);r.height=o},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(hl),_l=function(e){function i(t,i,r){var o=e.call(this,t.grid,"rowMoveTracker")||this;return o._targetRow=-1,o._timer=null,o._request=t,o._proxy=i,o._line=r,o}return r(i,e),i.updateLineFeedback=function(t,e,i,r,o,n,s){if(o<0||n<0||o>=t.width||n>=t.height)return r.visible=!1,-1;var a=t.layoutManager;n-=a.contentBounds.y;var l=a.contentBounds.right,u=-1,h=-1;if(n<a.summaryBounds.bottom)h=Math.max(0,a.topIndex-1),u=a.getTableItemTop(0);else if(n>=a.footerBounds.y)h=a.topIndex+a.fullItemCount,u=a.getTableItemBottom(a.fullItemCount);else{var c=n-a.summaryBounds.bottom,d=a.getTableItemIndex(c),p=a.getTableItemHeight(d);(h=d)>=a.fixedItemCount&&(h+=a.topIndex),h!=e&&(c<a.getTableItemTop(d)+p/2?(u=a.getTableItemTop(d),h>e&&(h=Math.max(a.topIndex,h-1))):(u=d>-1?a.getTableItemBottom(d):s?0:-1)>=0&&h<e&&h++)}return u+=a.contentBounds.y+a.summaryBounds.bottom,r.visible=h>e?h>e+i-1:h>=0&&h!=e,r.visible?(r.resize(l-0,2),0==t.itemCount&&(u+=a.defaultItemHeight),r.move(0,u)):h=-1,n<a.summaryBounds.bottom?t.topIndex--:n>=a.footerBounds.y&&t.topIndex++,h},i.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sourceItems",{get:function(){return this._sourceItems},enumerable:!0,configurable:!0}),i.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},i.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linkable",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype.getRequest=function(){return this._request},i.prototype._doStart=function(e,i,r,o){var n=this.grid,s=ct(e),a=0==n.selections.count;if(!a){var l=n.selections.getItem(0);a=function(e){var i=e&&e.style;return i==t.SelectionStyle.COLUMNS||i==t.SelectionStyle.SINGLE_COLUMN}(l)||!l.containsItem(this._request.itemIndex)}a&&(n.setFocusedItem(this._request.itemIndex),n.selections.selectRow(this._request.itemIndex,!0)),this._sourceItems=n.selections.getItem(0).getItemIndices(),s.body.appendChild(this._proxy._dom),n.addFeedbackElement(this._line);var u=this.$_updateLine(i,r);return this._proxy.setZIndex(n.displayOptions.baseZindex+6),this.$_updateProxy(i,r,u,!1),!0},i.prototype._doDrag=function(t,e,i){var r=this.grid,o=r.layoutManager,n=this.$_updateLine(e,i),s=r.container.findContainer(null,t);return this.$_updateProxy(e,i,n,r.container!==s),(i-=o.contentBounds.y)>o.footerBounds.y||i<o.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},i.prototype._doCompleted=function(t,e,i){if(this._targetRow>=0){var r=this.grid;if(r.canMoveRow(!0,!1)&&r.dataDropOptions.getEnabled(r,this._sourceItems,this._targetRow)){var o=this._request.itemIndex,n=r.dataDropOptions.callback;n?n(r.handler,this._sourceItems,r.handler,this._targetRow):this._targetRow>o?r.moveSelection(this._targetRow-(o+this._sourceItems.length-1),"mouseup"):this._targetRow<o&&r.moveSelection(this._targetRow-o,"mouseup")}}},i.prototype._doCanceled=function(t,e){},i.prototype._doEnded=function(){var t=this.grid;this.$_stopTimer(),t.removeFeedbackElement(this._line),t.doc.body.removeChild(this._proxy._dom)},i.prototype.$_updateLine=function(t,e){return this._targetRow=i.updateLineFeedback(this.grid,this._request.itemIndex,this._sourceItems.length,this._line,t,e,!1)},i.prototype.$_updateProxy=function(t,e,i,r){var o=this.grid,n=ft.getOffset(o.container._containerDom);n.y+=e,n.x+=t+20;var s=!0;if(!r)for(var a=o.getSelectedItems(),l=a[0].level,u=1,h=a.length;u<h;u++)if(a[u].level!==l){s=!1;break}s=s&&o.canMoveRow(!0,r)&&(r||o.dataDropOptions.getEnabled(o,this._sourceItems,i));var c=o.dataDropOptions.getLabel(o,this._sourceItems,i);this._proxy.move(n.x,n.y),this._proxy.setEnabled(void 0!==s?s:i>=0),this._proxy.setLabel(c),this._proxy.draw()},i.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},i.prototype.$_timerHandler=function(){var t=this.currentX,e=this.currentY;this.$_updateLine(t,e)},i}(hl),gl=function(t){function e(e,i,r,o){var n=t.call(this,e.index.grid,i)||this;return n._request=e,n._currX=r,n._currY=o,n}return r(e,t),e.prototype._doDispose=function(){this._request.dispose(),this._request=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollable",{get:function(){var t=this._getItem().getBounds();return t.top===t.bottom},enumerable:!0,configurable:!0}),e.prototype.getRequest=function(){return this._request},e.prototype._doCanceled=function(){},e.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},e.prototype.spanHome=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanHead(e.layoutManager,t)},e.prototype.spanRight=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanRight(e.layoutManager,t)},e}(hl),yl=function(e){function i(t,i,r){var o=e.call(this,t,"blockSelectTracker",i,r)||this;return o._timer=null,o._rowPrevLoop=0,o._rowLoop=0,o._colPrevLoop=0,o._colLoop=0,o._interval=0,o}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,r,o){var n=this.grid,s=n.selections,a=n.layoutManager,l=o&&o.shiftKey,u=o&&(o.ctrlKey||o.metaKey),h=this._request.index;if(a.isMergedCell(h)&&!(h=n.pointToIndex(e,i,r,!0)).layout)return!1;if(l)this._item=s.count>0&&s.lastItem();else{var c=void 0;u||1===s.count&&s.lastItem()instanceof qs?c=s.lastItem():s.clear(),this._item=c&&c instanceof qs?c:s.add(h,h,t.SelectionStyle.BLOCK)}return!!this._item},i.prototype._doDrag=function(t,e,i){if(this._item){var r=this.grid,o=r.layoutManager;if(this._currX=e,this._currY=i,i-o.contentBounds.y>o.footerBounds.y||i<o.gridBounds.y||e<o.gridBounds.x||e>o.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var n=r.pointToIndex(t,e,i,!0);n.column&&n.itemIndex>=0&&(rs.compareHorz(n,this._item.startIndex)>=0?(this.spanRight(n),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(n))}return!0}},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,r=t.layoutManager,o=0,n=0;i>r.footerBounds.y?(n=Math.max(0,Math.min(3,(i-r.footerBounds.y)/40)),this._interval=4-n,this._rowLoop++):i<r.gridBounds.y&&(n=Math.max(0,Math.min(3,(r.gridBounds.y-i)/40)),this._interval=4-n,this._rowLoop++),e>r.clientRect.right?(o=Math.max(0,Math.min(3,(e-r.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<r.gridBounds.x&&(o=Math.max(0,Math.min(3,(r.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++);var s=!1;if(Math.max(o,n)>0&&(this._interval=4-Math.max(o,n)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>r.footerBounds.y?t.topItem+r.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<r.gridBounds.y&&t.topItem>r.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>r.clientRect.right?(t.leftPos+=e-r.clientRect.right,s=!0):e<r.gridBounds.left&&t.leftPos>0&&(t.leftPos-=r.gridBounds.left-e,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},i}(gl),ml=function(e){function i(t,i,r){var o=e.call(this,t,"rowsSelectTracker",i,r)||this;return o._timer=null,o._prevLoop=0,o._loop=0,o._colPrevLoop=0,o._colLoop=0,o._interval=0,o}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,r,o){var n=this.grid,s=n.selections,a=n.layoutManager,l=o&&o.shiftKey,u=o&&(o.ctrlKey||o.metaKey),h=this._request.index;if(a.isMergedCell(h)&&(h=n.pointToIndex(e,i,r,!0)),l)this._item=s.count>0&&s.lastItem();else{var c=void 0;u||1===s.count&&s.lastItem()instanceof Ks?c=s.lastItem():s.clear(),this._item=c&&c instanceof Ks?c:s.add(h,h,t.SelectionStyle.ROWS)}return!!this._item},i.prototype._doDrag=function(t,e,i){if(this._item){var r=this.grid.layoutManager;if(this._currX=e,this._currY=i,i>r.footerBounds.y||i<r.gridBounds.y||e<0||e>r.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var o=this.grid.pointToIndex(t,e,i,!1);o.itemIndex>=0&&this._item.resizeTo(o)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t,e,i=this._grid,r=this._currX,o=this._currY,n=i.layoutManager;o>n.footerBounds.y?(t=Math.max(0,Math.min(3,(o-n.footerBounds.y)/40)),this._interval=4-t,this._loop++):o<n.gridBounds.y&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,o>n.footerBounds.y?i.topIndex=i.topIndex+1:o<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(r>n.clientRect.right?(t=Math.max(0,Math.min(3,(r-n.clientRect.right)/40)),this._interval=4-t,this._colLoop++):r<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-r)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,r>n.clientRect.right?i.leftLayout=i.leftLayout+1:r<n.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex>=0&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},i}(gl),bl=function(e){function i(t,i,r){var o=e.call(this,t,"columnsSelectTracker",i,r)||this;return o._timer=null,o._prevLoop=0,o._loop=0,o._rowPrevLoop=0,o._rowLoop=0,o._interval=0,o}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),i.prototype._getItem=function(){return this._item||this.grid.selections.lastItem()},i.prototype._doStart=function(e,i,r,o){var n,s=this.grid,a=s.selections,l=s.layoutManager,u=o&&o.shiftKey,h=o&&(o.ctrlKey||o.metaKey),c=this._request.index;return l.isMergedCell(c)&&(c=s.pointToIndex(e,i,r,!0)),u?n=a.count>0&&a.lastItem():h||1===a.count&&a.lastItem()instanceof Xs?n=a.lastItem():a.clear(),n&&n instanceof Xs&&n.containsLayout(c.layout)?this._item=n:this._item=a.add(c,c,t.SelectionStyle.COLUMNS),!!this._item},i.prototype._doDrag=function(t,e,i){if(this._item){var r=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<r.gridBounds.x||e>r.clientRect.right||i>r.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var o=this.grid.pointToIndex(t,e,i,!0);null!=o.column&&this._item.resizeTo(o)}return!0}return!1},i.prototype._doEnded=function(){this.$_stopTimer(),e.prototype._doEnded.call(this)},i.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},i.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},i.prototype.$_timerHandler=function(){var t,e,i=this._grid,r=this._currX,o=this._currY,n=i.layoutManager;r>n.clientRect.right?(t=Math.max(0,Math.min(3,(r-n.clientRect.right)/40)),this._interval=4-t,this._loop++):r<n.gridBounds.x&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-r)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,r>n.clientRect.right?i.leftLayout=i.leftLayout+1:r<n.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(o>n.footerBounds.y?(t=Math.max(0,Math.min(3,(o-n.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):o<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-o)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,o>n.footerBounds.y?i.topIndex=i.topIndex+1:o<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},i}(gl),vl=function(t){function e(e,i){var r=t.call(this)||this;return r._clickX=0,r._clickY=0,r._mouseX=0,r._mouseY=0,r._owner=e,r._name=i,r._previous=null,r}return r(e,t),e.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchManager",{get:function(){return this._touchManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!0,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},e.prototype.activate=function(t){this._doActivated(t)},e.prototype.deactivate=function(){this._doDeactivated()},e.prototype.keyDown=function(t){return this._doKeyDown(t)},e.prototype.keyUp=function(t){return this._doKeyUp(t)},e.prototype.keyPress=function(t){return this._doKeyPress(t)},e.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this.dragging&&this._stopDragTracker(e,i,!1),this._doMouseDown(t)},e.prototype.dragFrom=function(t,e){},e.prototype.dropFrom=function(t,e){},e.prototype.cancelFrom=function(t){},e.prototype.mouseMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,r=this.dragTracker,o="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;if(r){if(r.dragging){if(null==o||o>0||ft.ieOld&&o>=0){if(!r.drag(this._mouseEventTarget,e,i)){var n=r.getNextRequest(e,i);n&&(this._stopDragTracker(e,i,!0),this.dragTracker=this._getDragTracker(n,e,i),this._startDragTracker(e,i,t))}}else this._stopDragTracker(e,i,!0);return}if(Math.abs(e-this._clickX)>=3||Math.abs(i-this._clickY)>=3){if(null==o||o>0||ft.ieOld&&o>=0)return void this._startDragTracker(e,i,t);this._stopDragTracker(e,i,!0),this._dragTracker=null}}this._doMouseMove(t)},e.prototype.mouseUp=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?(this._stopDragTracker(e,i,!1),this._dragTracker.clickable&&this._doMouseUp(t)):(this._dragTracker instanceof gl&&this._dragTracker._doEnded(),this._dragTracker=null,this._doMouseUp(t))},e.prototype.mouseEnter=function(t){this._doMouseEnter(t)},e.prototype.mouseLeave=function(t){this._doMouseLeave(t)},e.prototype.mouseOver=function(t){this._doMouseOver(t)},e.prototype.mouseOutside=function(){this._doMouseOutside()},e.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},e.prototype.contextMenu=function(t){return this._doContextMenu(t)},e.prototype.click=function(t){this._doClick(t)},e.prototype.dblclick=function(t){this._doDblClick(t)},e.prototype.setFocus=function(t){this._doSetFocus(t)},e.prototype.focusLeave=function(t){this._doFocusLeave(t)},e.prototype.resetFocused=function(){},e.prototype.touchStart=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchStart(t):this._doTouchStart(t)},e.prototype.touchMove=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchMove(t):this._doTouchMove(t)},e.prototype.touchEnd=function(t){try{this._lastTouch=NaN,this.touchManager?this.touchManager.touchEnd(t):this._doTouchEnd(t)}catch(t){this.touchManager&&this.touchManager.clearTouches()}},e.prototype.touchCancel=function(t){this._lastTouch=NaN,this.touchManager?this.touchManager.touchCancel(t):this._doTouchCancel(t)},e.prototype.lastTouch=function(){return Date.now()-this._lastTouch},Object.defineProperty(e.prototype,"mouseEventTarget",{get:function(){return this._mouseEventTarget},enumerable:!0,configurable:!0}),e.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},e.prototype._doActivated=function(t){},e.prototype._doDeactivated=function(){},e.prototype._doKeyDown=function(t){return!1},e.prototype._doKeyUp=function(t){return!1},e.prototype._doKeyPress=function(t){return!1},e.prototype._doMouseDown=function(t){},e.prototype._doMouseMove=function(t){},e.prototype._doMouseUp=function(t){},e.prototype._doMouseEnter=function(t){},e.prototype._doMouseLeave=function(t){},e.prototype._doMouseOver=function(t){},e.prototype._doMouseOutside=function(){},e.prototype._doMouseWheel=function(t){return!1},e.prototype._doContextMenu=function(t){},e.prototype._doClick=function(t){},e.prototype._doDblClick=function(t){},e.prototype._doSetFocus=function(t){},e.prototype._doFocusLeave=function(t){},e.prototype._getDragTracker=function(t,e,i){return null},e.prototype._startDragTracker=function(t,e,i){void 0===i&&(i=null),this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},e.prototype._stopDragTracker=function(t,e,i){if(this.dragging){var r=this._dragTracker;i?r.cancel():r.drop(this._mouseEventTarget,t,e),this._doDragTrackerFinished(r,i)}},e.prototype._doDragTrackerStarted=function(t){},e.prototype._doDragTrackerFinished=function(t,e){},e.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},e.prototype._doTouchStart=function(t){},e.prototype._doTouchMove=function(t){},e.prototype._doTouchEnd=function(t){},e.prototype._doTouchCancel=function(t){},e}(Ct),wl=function(t){function e(){return t.call(this)||this}return r(e,t),Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dblClickable",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(Ct);!function(t){t.LINE="line",t.PAGE="page",t.THUMB_TRACK="thumbTrack",t.THUMB_END="thumbEnd",t.SCROLL_END="scrollEnd"}(da||(da={}));var Cl,xl=function(t){function e(e,i,r){var o=t.call(this,e,r)||this;return o._scrollBar=i,o}return r(e,t),e.prototype._doDispose=function(){this._scrollBar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"scrollBar",{get:function(){return this._scrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._scrollBar.vertical},enumerable:!0,configurable:!0}),e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doRender=function(t){},e.prototype._changed=function(){this.invalidate()},e}(Bs),Il=function(t){function e(e){return t.call(this,e,null,"scrollEdgeView")||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-scrolledge"},e}(xl),Sl=function(t){function e(e){return t.call(this,e.doc,e,"scrollTrackView")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-scrolltrack"},e}(xl),El=function(t){function e(e,i){var r=t.call(this,e.doc,e,"scrollButtonView")||this;return r._enabled=!0,r._far=i,r}return r(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._far},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},e}(xl),kl=function(t){function e(e){return t.call(this,e.doc,e,"scrollThumbView")||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-scrollthumb"},e}(xl),Ol=function(t){function e(e,i){void 0===i&&(i=!1);var r=t.call(this,e.doc,"scrollBarView")||this;return r._lineScrollSize=1,r._pageScrollSize=1,r._minThumbSize=20,r._min=0,r._max=0,r._pos=0,r._page=0,r._maxPosition=0,r._buttonSize=20,r._needLayout=!0,r._tipView=null,r._container=e,r._vertical=i,r._track=new Sl(r),r.addChild(r._track),r._thumb=new kl(r),r.addChild(r._thumb),r._nearButton=new El(r,!1),r.addChild(r._nearButton),r._farButton=new El(r,!0),r.addChild(r._farButton),r}return r(e,t),e.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPosition",{get:function(){return this._maxPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonSize",{get:function(){return this._buttonSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tipView",{set:function(t){this._tipView=t},enumerable:!0,configurable:!0}),e.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},e.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},e.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},e.prototype.ptInTrack=function(t,e,i){var r=this.containerToElement(t,e);if(this._vertical){if(r.y>=this._nearButton.height&&r.x<this._farButton.y)return!i&&r.y<this._thumb.y||i&&r.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&r.x<this._thumb.x||i&&r.x>=this._thumb.right;return!1},e.prototype.setText=function(t){if(this._tipView&&t){this._tipView.show(),this._tipView.setText(t);var e=void 0,i=void 0;if(this._vertical){var r=this._tipView.width();e=this.x-r-5,i=this._thumb.y}else{var o=this._tipView.height();e=this._thumb.x,i=this.y-o-5}this._tipView.move(e,i)}},e.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},e.prototype.draw=function(){t.prototype.draw.call(this)},e.prototype._doDraw=function(t){},e.prototype._doSizeChanged=function(){this.invalidateLayout()},e.prototype.invalidateLayout=function(){this._needLayout=!0,t.prototype.invalidateLayout.call(this)},e.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,r=this.width,o=(t?i:r)-2*e,n=Math.min(o,Math.max(this._minThumbSize,Math.floor(o*this._page/(this._max-this._min+1)))),s=e+Math.min(o-n,Math.max(0,Math.floor((o-n)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,r,i),t?(this._nearButton.setBounds(0,0,r,e),this._farButton.setBounds(0,i-e,r,e),n<=o&&this._thumb.setBounds(2,s,r-4,n)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(r-e,0,e,i),n<=o&&this._thumb.setBounds(s,2,n,i-4))},e.prototype._doScroll=function(t,i,r){this.fireEvent(e.SCROLLED,t,i,r)},e.SCROLLED="onScrollBarScrolled",e}(Bs),Rl=function(t){function e(e){return t.call(this,e,"scrollThumbTracker")||this}return r(e,t),e.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._doStart=function(t,e,i){var r=this._thumb.scrollBar,o=r.containerToElement(e,i);return r.vertical?this._offset=o.y-this._thumb.y:this._offset=o.x-this._thumb.x,!0},e.prototype._doDrag=function(t,e,i){return this.$_doScroll(e,i,da.THUMB_TRACK)},e.prototype._doCompleted=function(t,e,i){return this.$_doScroll(e,i,da.THUMB_END)},e.prototype._doCanceled=function(t,e){},e.prototype._doEnded=function(){},e.prototype.$_doScroll=function(t,e,i){var r=this._thumb.scrollBar,o=r._maxPosition-r._min+1,n=r._buttonSize,s=r.containerToElement(t,e);if(r.vertical){if((a=r.height-2*n-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-n)*o/a,r._doScroll(i,0,Math.max(Math.floor(s.y),0))}else{var a;if((a=r.width-2*n-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-n)*o/a,r._doScroll(i,0,Math.max(Math.floor(s.x),0))}return!0},e}(ul),Pl=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return void 0!==this._timer},enumerable:!0,configurable:!0}),e.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},e.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},e.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=da.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)},e}(fe),Dl=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,i,r){this._scrollBar=t,this._far=e,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),300),this._ready=!0;var o=this._scrollBar.containerToElement(i,r);this._mouseX=o.x,this._mouseY=o.y,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},e.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},e.prototype.$_fireEvent=function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical){var r=this._mouseY;this._far&&r>i.bottom?(t=da.PAGE,e=1):!this._far&&r<i.y&&(t=da.PAGE,e=-1)}else{var o=this._mouseX;this._far&&o>i.right?(e=1,t=da.PAGE):o<i.x&&(t=da.PAGE,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*e,0)},e}(Ct),Tl=function(t){function e(e){var i=t.call(this,e,"scrollTool")||this;return i._buttonTimer=new Pl,i._trackTimer=new Dl,i._thumbTracker=new Rl(e),i}return r(e,t),e.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),t.prototype._doDispose.call(this)},e.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var r=this.findElementAt(e,i,!1);if(r instanceof xl)if(this._clickElement=r,r instanceof El)this._buttonTimer.start(r);else if(r instanceof kl)this._thumbTracker.thumb=r,this.dragTracker=this._thumbTracker;else if(r instanceof Sl){var o=r.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(r.scrollBar,o,e,i)}},e.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,r=this._clickElement,o="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;null==o||o>0||ft.ieOld&&o>=0?r instanceof El&&this._buttonTimer.active?this._buttonTimer.move(e,i):r instanceof Sl&&this._trackTimer.active&&this._trackTimer.move(e,i):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},e.prototype._doMouseUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(da.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},e.prototype._doTouchStart=function(t){this.mouseDown(t),t.preventDefault()},e.prototype._doTouchEnd=function(t){this.mouseUp(t)},e.prototype._doTouchMove=function(t){this.mouseMove(t)},e}(vl),Ll=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i._element=i.$_createElement(e.doc),i}return r(e,t),e.prototype._doDispose=function(){this._element=ft.detach(this._element),this._container=null,t.prototype._doDispose.call(this)},e.prototype.show=function(){this._container._container.appendChild(this._element)},e.prototype.hide=function(){ft.detach(this._element)},e.prototype.move=function(t,e){ft.move(this._element,t,e)},e.prototype.setText=function(t){this._element.innerHTML=t},e.prototype.width=function(){return this._element.offsetWidth},e.prototype.height=function(){return this._element.offsetHeight},e.prototype.getRect=function(){return this._element.getBoundingClientRect()},e.prototype.$_createElement=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.padding="4px 4px",i.boxSizing="border-box",i.display="lnline-block",i.pointerEvents="none",i.userSelect="none",e.className="rg-scroll-tip-view",e},e}(Ct),Ml=function(t){function e(e,i,r){var o=t.call(this,e,i)||this;return o._contaner=r,o}return r(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._contaner},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(Bs),Fl=function(t){function e(i,r,o){var n=t.call(this)||this;return n._disabled=!1,n._updateRequested=!1,n._layoutNeeded=!1,n._invalidated=!1,n._captured=!1,n._focusing=!1,n._focusingTarget=null,n._hovered=null,n._currentX=0,n._currentY=0,n._rendered=0,n._defaultCursor="default",n._drawing=!1,n._clicked=0,n._clicket=0,n._children=[],n._eventHandlers={},n._eventNodes=[],n._contextMenu=null,n._containerRender=n._render.bind(n),n._scrollTool=new Tl(n),n._cursor="default",n._testWidth=NaN,n._testHeight=NaN,n.prepareContainer(i,r,o),n.invalidateLayout(),n._registerEventHandlers(n._rootElement._dom,n._containerDom),n.activeTool=n._defaultTool=n._createDefaultTool(),e.$_Containers[n.$_hash]=n,n}return r(e,t),e.prototype.getMouseContainer=function(){return e.$_Containers[e.$_mouseContainer]},e.prototype.findContainer=function(t,i){for(var r in e.$_Containers){var o=e.$_Containers[r];if(o.contains(i||t.target))return o}return null},e.getActiveGrid=function(){var t=e.$_Containers[e.$_ActiveGrid];return t&&t._gridView},e.setActiveGrid=function(t){if(t!==e.$_ActiveGrid){var i=e.$_Containers[t],r=void 0;if(i=i&&i._gridView,window.RealGrid&&(r=window.RealGrid.onActiveGridChanged)){var o=e.$_Containers[e.$_ActiveGrid];r((o=o&&o._gridView)&&o.handler,i&&i.handler)}i._fireGridActivated()}e.$_ActiveGrid=t},e.getGridInstance=function(t){if("string"==typeof t&&(t=document.getElementById(t)),ll(t,"HTMLDivElement"))for(var i in e.$_Containers){var r=e.$_Containers[i];if(r._containerDiv===t)return r.gridView}},e.clearContainer=function(t){e[t]&&delete e[t],e.$_ActiveGrid===t&&(e.$_ActiveGrid=null)},e.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},e.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),ft.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,ft.clearElements(this._containerDiv),t.prototype._doDispose.call(this),delete e.$_Containers[this.$_hash]},Object.defineProperty(e.prototype,"doc",{get:function(){return this._doc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),this._activeTool=t,t&&t.activate(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTool",{get:function(){return this._defaultTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measurer",{get:function(){return this._measurer},enumerable:!0,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},e.prototype.getTableCell=function(t){return null},e.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},e.prototype.setFocus=function(){this._containerDom.focus()},e.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(ft.getTimer())},e.prototype.toScreen=function(t){var e=this._containerDom.getBoundingClientRect();return t.x+=e.left,t.y+=e.top,t},e.prototype.pointToScreen=function(t,e){var i=this._containerDom.getBoundingClientRect();return{x:t+i.left,y:e+i.top}},e.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new $(t.left,t.top,t.width,t.height)},e.prototype.getHtml=function(){return this._containerDom.outerHTML},e.prototype.addElement=function(t){return this._rootElement.addChild(t)},e.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},e.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},e.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;var r=this._textMeasurer.style;return i?(r.fontSize=i.fontSize,r.fontFamily=i.fontFamily,r.fontWeight=i.fontWeight,r.fontStyle=i.fontStyle):(r.removeProperty("font-size"),r.removeProperty("font-family"),r.removeProperty("font-weight"),r.removeProperty("font-style")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},e.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var t=this._checkMeasurer.getBoundingClientRect(),e=dt(this._doc).getComputedStyle(this._checkMeasurer);this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}}return this._checkRect},e.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},e.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},e.prototype.contains=function(t){var e=t;if(e instanceof dt(this.doc).HTMLElement)for(var i=e.parentElement;i;){if(i===this._containerDom)return!0;i=i.parentElement}return!1},e.prototype.getDomPosition=function(t){return this.offsetDomPosition(t,{x:0,y:0})},e.prototype.offsetDomPosition=function(t,e){var i=dt(this._doc),r=this._containerDom.getBoundingClientRect(),o=t.getBoundingClientRect(),n=i.getComputedStyle(this._containerDom);return e.x=o.left-r.left-Math.round(parseFloat(n.borderLeftWidth)),e.y=o.top-r.top-Math.round(parseFloat(n.borderTopWidth)),e},e.prototype.cancelOtherContainer=function(t){for(var i in e.$_Containers){var r=e.$_Containers[i];if(r!==this){var o=r._activeTool;o&&o.cancelFrom(t)}}},e.prototype._doDisabledChanged=function(){},e.prototype.prepareContainer=function(t,e,i){if(!t)throw new Error("container is null!");if(ll(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!ll(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var r=this._doc=this._containerDiv.ownerDocument,o=dt(r),n=this._containerDiv.getElementsByClassName("rg-root");if(n&&n.length>0)throw new Error("Grid is already contained ContainerDiv");o.requestAnimationFrame=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame||function(t){return o.setTimeout(t,10)};var s=this._containerDom=r.createElement("div");this._container=this._containerDom;var a=s.style;this._cursor=a.cursor,this._containerDiv.appendChild(s),s.setAttribute("tabindex","0"),a.position="relative",a.width="100%",a.height="100%",a.boxSizing="border-box",a.overflow="hidden",a["-webkit-touch-callout"]="none",a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(r),this._measurer=r.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer);var l=this._textMeasurer=r.createElement("span");l.setAttribute("aria-hidden","true"),l.style.position="absolute",l.style.left="-10000px",l.style.top="-10000px",l.style.display="block",this._container.appendChild(l);var u=this._checkMeasurer=r.createElement("input");u.type="checkbox",u.title="grid check measurer",u.tabIndex=-1,u.setAttribute("aria-hidden","true"),u.style.position="absolute",u.style.left="-1000px",u.style.top="-11000px",u.style.display="block",this._container.appendChild(u),this._doPrepareContainer(s,e,i)},e.prototype._doPrepareContainer=function(t,e,i){},e.prototype._createRootElement=function(t){var e=new Ml(t,"root",this);return this._containerDom.appendChild(e._dom),e},e.prototype.isLayoutNeeded=function(){return this._layoutNeeded},e.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},e.prototype.invalidate=function(t){var e=dt(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},e.prototype.invalidateElement=function(t){var e=dt(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},e.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this._doBeforeRender(),this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},e.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,r=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new $(0,0,i,r)),this._layoutNeeded)try{this._doLayout(new $(0,0,i,r))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new $(0,0,i,r));this._doRenderHtml(new $(0,0,i,r))},e.prototype._layoutChildren=function(t){},e.prototype._doLayout=function(t){},e.prototype._doAfterRender=function(){},e.prototype._doPrepareRender=function(t){},e.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},e.prototype._doDrawContainer=function(t){},e.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var r=t.getChild(e);r.visible&&this._drawElement(r)}},e.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++)t.getChild(e).validate()},e.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},e.prototype._registerEventHandlers=function(t,e){var i=ht(t);t.style.cursor=this._defaultCursor,this.$_addListener(i,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(i,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(i,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(i,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(i,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(i,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(i,"mousedown",this._globalMouseDownHandler.bind(this),!1),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(t,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(t,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(t,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!ft.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchstart",this._touchStartHandler.bind(this),!!ft.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!!ft.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchend",this._touchEndHandler.bind(this),!1),this.$_addListener(t,"touchcancel",this._touchCancelHandler.bind(this),!1),this.$_addListener(t,"touchleave",this._touchLeaveHandler.bind(this),!1)},e.prototype.$_addListener=function(t,e,i,r){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,r]),t.addEventListener(e,i,r),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},e.prototype.$_removeListener=function(t,e){if(t in this._eventHandlers){var i=this._eventHandlers[t];if(e in i)for(var r=i[e],o=r.length;o--;){var n=r[o];t.removeEventListener(e,n[0],n[1])}}},e.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,r=e.length;i<r;i++){var o=e[i];if(o in this._eventHandlers){var n=this._eventHandlers[o];for(var s in n)for(var a=n[s],l=a.length;l--;){var u=a[l];o.removeEventListener(s,u[0],u[1])}}}},e.prototype._doResized=function(t){},e.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},e.prototype._isOutChildElement=function(t){return!1},e.prototype.$_checkKeyElement=function(t){var e=ht(t.target);return t.target===t.currentTarget&&t.target===this._containerDom||t.target instanceof e.HTMLTableCellElement&&ft.isAncestorOf(this._containerDom,t.target)},e.prototype._keyDownHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyDown(t)},e.prototype._keyUpHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyUp(t)},e.prototype._keyPressHandler=function(t){this._isEnabled()&&this.$_checkKeyElement(t)&&this._activeTool.keyPress(t)},e.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect();return new Vs(t.clientX-e.left,t.clientY-e.top)},e.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},e.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t},e.prototype._clickHandler=function(t){this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},e.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},e.prototype.$_setMouseTarget=function(t){for(var e=ht(this._containerDom),i=t.target;i&&!(i instanceof e.HTMLElement);)i=i.parentElement||i.parentNode;this.activeTool._mouseEventTarget=i instanceof e.HTMLElement?i:null},e.prototype._mouseDownHandler=function(t){if(this._isEnabled()){e.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var i=this.findElementAt(this._currentX,this._currentY,!1);i&&i.getAncestor(Ol)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.mouseDown(t)}else t.preventDefault()},e.prototype._mouseMoveHandler=function(t){var i;if(this._containerDom.parentElement&&(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled())){i=this._activeTool,this.$_setMouseTarget(t),i.mouseMove(t);var r=i.dragTracker;if(r&&r.linkable&&e.$_mouseContainer==this.$_hash)for(var o in e.$_Containers){var n=e.$_Containers[o];n!==this&&(i=n._activeTool)&&i.dragFrom(t,r)}}},e.prototype._mouseUpHandler=function(t){var i=e.$_mouseContainer==this.$_hash,r=this._activeTool;try{if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var o=r.dragTracker;if(this.$_setMouseTarget(t),r.mouseUp(t),r instanceof Tl&&(this.activeTool=r.previous),o&&o.linkable&&i){var n=this.findContainer(t);if(n&&n!==this){var s=n._activeTool;s&&s.dropFrom(t,o)}}}else t.preventDefault()}finally{r&&(this.setCursor("default"),r.dragTracker=null),i&&(e.$_mouseContainer=-1)}},e.prototype._mouseEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},e.prototype._mouseLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},e.prototype._mouseOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},e.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},e.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t))&&ft.stopEvent(t))},e.prototype._focusHandler=function(t){},e.prototype._blurHandler=function(t){},e.prototype._selectstartHandler=function(t){return!1},e.prototype._focusinHandler=function(t){},e.prototype._globalMouseDownHandler=function(t){ft.isAncestorOf(this._containerDiv,t.target)||this._isOutChildElement(t)||(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t))},e.prototype._focusoutHandler=function(t){ft.isAncestorOf(this._containerDiv,t.target)&&t.relatedTarget&&!ft.isAncestorOf(this._containerDiv,t.relatedTarget)&&!this._isOutChildElement(t)&&(this._focused=!1,this._isEnabled()&&this._activeTool.focusLeave(t))},e.prototype._focusHandlerFireFox=function(t){t.target===this._containerDom||ft.isAncestorOf(this._containerDom,t.target)?this._isEnabled()&&(this._containerDom.setAttribute("tabindex","-1"),this._focused=!0,this._activeTool.setFocus(t.target)):this._isOutChildElement(t)||(this._containerDom.setAttribute("tabindex","0"),this._focused=!1)},e.prototype._touchStartHandler=function(t){if(this._isEnabled()){this._activeTool.setFocus(),this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(Ol)?this.activeTool=this._scrollTool:this.activeTool||(this.activeTool=this._defaultTool),this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchStart(t))}else t.preventDefault()},e.prototype._touchMoveHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchMove(t))},e.prototype._touchEndHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchEnd(t),this._activeTool instanceof Tl&&(this.activeTool=this._activeTool.previous))},e.prototype._touchCancelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchCancel(t))},e.prototype._touchLeaveHandler=function(t){this._isEnabled()&&this._activeTool.touchEnd(t)},e.$_Containers={},e.$_mouseContainer=-1,e.$_ActiveGrid=null,e}(fe),Nl=function(t){function e(e,i,r){void 0===r&&(r="gridHeadCellView");var o=t.call(this,e,r)||this;return o._text="",o._styleName="",o._textChanged=!1,o._model=i,o}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._clearCellCache=function(){t.prototype._clearCellCache.call(this),this._textChanged=!0},e.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ft.TextProp]=this._text)},e}(Na),Vl=function(e){function i(t,i){var r=e.call(this,t,i,"chekHeadCellView")||this;return r._checked=!1,r}return r(i,e),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),i.prototype._clearCellCache=function(){this._check=this._image=this._span=this._label=null},i.prototype._doUpdateContent=function(e,i,r){var o,n=e.doc,s=this.model,a=s.showAll&&!s.exclusive;if(a&&!this._check){var l=this._check=n.createElement("input");l.id="$$-grid-head-check",o=l.style,l.type="checkbox",l.className="rg-checkbox",l.tabIndex=-1,o.display=s.useImages?"none":"inline-block",r.appendChild(l);var u=this._image=n.createElement("span");(o=u.style).display=s.useImages?"inline-block":"none",r.appendChild(u);var h=this._label=n.createElement("label");h.setAttribute("for",this._check.id),h[ft.TextProp]="grid head check",(o=h.style).display="none",r.appendChild(h)}if(a?(this._check.style.display=s.useImages?"none":"inline-block",this._image.style.display=s.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(ft.detach(this._check),ft.detach(this._image),ft.detach(this._label),this._check=this._image=this._label=null),this._textChanged&&(this._span||(this._span=n.createElement("span"),this._span.style.display="block",r.appendChild(this._span)),this._span[ft.TextProp]=this._text),a&&this._span&&this._text){var c=s.useImages?this._image:this._check,d=this._span,p=c.parentElement,f=null!=s.itemGap?s.itemGap+"px":"5px";switch((o=d.style).margin="",s.checkLocation){case t.ColumnHeaderItemLocation.BOTTOM:p.insertBefore(d,c),o.display="block",o.marginBottom=f;break;case t.ColumnHeaderItemLocation.LEFT:p.insertBefore(c,d),o.display="inline-block",o.marginLeft=f;break;case t.ColumnHeaderItemLocation.RIGHT:p.insertBefore(d,c),o.display="inline-block",o.marginRight=f;break;case t.ColumnHeaderItemLocation.TOP:default:p.insertBefore(c,d),o.display="block",o.marginTop=f}}},i.prototype.$_updateContent=function(){var t=this.model;t.showAll&&!t.exclusive&&(this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked")},i}(Nl),Bl=function(t){function e(e){var i=t.call(this,e.doc,null,"gridHeadView")||this;i._cells=[];var r=e.doc;return i.addChild(i._indicatorCell=new Nl(r,e.rowIndicator)),i.addChild(i._stateCell=new Nl(r,e.stateBar)),i.addChild(i._checkCell=new Vl(r,e.checkBar)),i}return r(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()},enumerable:!0,configurable:!0}),e.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getHeadModel(t);return e instanceof ws?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-head"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,r=t.sectionObjects;this._cells=[];for(var o=0,n=r;o<n.length;o++){var s=n[o];s instanceof Es&&(((e=this._indicatorCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.rowIndicator.width):e.removeCellDom()),s instanceof Os&&(((e=this._stateCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.stateBar.width):e.removeCellDom()),s instanceof Ps&&(((e=this._checkCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.checkBar.width):e.removeCellDom(!0))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._cells.length,r=this._getTableRowCount(t),o=this._thead,n=o&&o.children[0],s=0;s<i;s++){var a=this._cells[s],l=a.model,u=l.getHeadCell(),h=this._getTableCell(0,s),c=h.firstElementChild,d=this.$_getCellSelector()+" "+l.getHeadStyleName();if(this._chromium){h.rowSpan=r,c.style.maxHeight=this.height-2+"px";for(var p=1;p<r;p++)this._getTableCell(p,s).style.display="none"}if(n){var f=n.children[s];f&&(f[ft.TextProp]=l.getCellType()+" head")}a.setStyleName(h,c,d),a.updateCell(e,u,c)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return this._chromium?Math.max(1,t.headerRows):1},e.prototype._getTableRowHeight=function(t,e){var i=t.grid;if(this._chromium&&(i.fixedHeaderView.visible||i.headerView.visible)){var r=(i.headerView.visible?i.headerView:i.fixedHeaderView)._rowPoints;return r.length<2?this.height:r[e+1]-r[e]}return this.height},e.prototype._getCellCount=function(t){return this._cells.length},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype._doPrepareTableRow=function(e,i,r,o){t.prototype._doPrepareTableRow.call(this,e,i,r,o);var n=e.grid.header.styleName;ft.setClassName(o,n)},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-head-cell",e}(Ma),Al=function(t){function e(e){var i=t.call(this,e,"gridFootCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ft.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(Na),$l=function(t){function e(e){var i=t.call(this,e,null,"gridFootView")||this;i._cells=[],i._count=0;for(var r=0;r<3;r++)i.addChild(i._cells[r]=new Al(e));return i}return r(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getFootModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getFootModel(t);return e instanceof ws?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-foot"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,r=t.sectionObjects;this._count=0;for(var o=0,n=r;o<n.length;o++){var s=n[o];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof Es?e.width=i.rowIndicator.width:s instanceof Os?e.width=i.stateBar.width:s instanceof Ps&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,r=this._thead,o=r&&r.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var n=0;n<i;n++){var s=this.getChild(n),a=s.model,l=a.getFootCell(),u=this._getTableCell(0,n),h=u.firstElementChild,c=this.$_getCellSelector()+" "+a.getFootStyleName();if(o){var d=o.children[n];d&&(d[ft.TextProp]=a.getCellType()+" foot")}s.setStyleName(u,c),s.text=a.footText,s.updateCell(e,l,h)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-foot-cell",e}(Ma),jl=function(t){function e(e){var i=t.call(this,e)||this;return i._numberFormat=Me.DEFAULT_FORMAT,i._datetimeFormat=De.DEFAULT_FORMAT,i._datetimeWriter=De.Default,i._numberFormatter=Me.Default,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?sn.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?De.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Me.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Te.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),e}(Ea),Hl=function(t){function e(e){var i=t.call(this)||this;return i._message="",i._visible=!0,i._zIndex=void 0,i._styleName="rg-toast",e&&i.assignFrom(e),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){t!=this._zIndex&&(this._zIndex=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:t.prototype.assignFrom.call(this,e)},e}(Ct),Wl=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropdownCount=8,i._showing=!1,i._container=e,i._element=i.$_createElement(e.doc),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},e.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e);var i=this._span=t.createElement("span");return this.$_disableSelection(i),e.appendChild(i),e},e.prototype.$_show=function(t){var e=t.message;if(e){var i=this._element;if(i){var r=this._span,o=this._container._gridView.displayOptions;r.innerHTML=e,i.className=t.styleName,i.style.position="absolute",i.style.overflow="hidden",i.style.zIndex=null!=t.zIndex?t.zIndex:o.toastZIndex,this._container._container.appendChild(i);var n=ft.getBoundingClientRect2(i),s=ft.getBoundingClientRect2(this._container._container),a=n.width+10,l=n.height+10,u=s.width,h=s.height;i.style.left=(u-a)/2+"px",i.style.top=(h-l)/2+"px"}}},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e}(Ct),Gl=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._container=e.container,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i){if((!this._active||e)&&(this.close(),(t=t instanceof Hl?t:t?new Hl(t):null)&&t.visible))return this._toast||(this._toast=new Wl(this._container)),this._toast.show(t),this._active=!0,void(i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0));i&&i()},e.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},e}(Ct),Ul=function(e){function i(i){var r=e.call(this,i)||this;return r._enabled=!0,r._style=t.SortStyle.EXCLUSIVE,r._handleVisibility=t.HandleVisibility.VISIBLE,r._commitBeforeSorting=!0,r._toast=new Hl({visible:!1,message:"Sorting..."}),r._keepFocusedRow=!1,r._textCase=t.SortCase.SENSITIVE,r._showSortOrder=!1,r._pageSorting=!1,r}return r(i,e),i.prototype._doDispose=function(){this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},enumerable:!0,configurable:!0}),i}(Ea),zl=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof Zh)return t;t=t.parent}return null},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},e.prototype._doMeasure=function(t,e,i){return new Ra(e,i)},e.prototype._doLayoutContent=function(t,e,i){},e}(As),Yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e}(zl),ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(zl),Kl=function(t){function e(e){var i=t.call(this,e.doc,"fixedColumnBar")||this;return i._grid=e,i}return r(e,t),e.prototype._getCssSelector=function(){return ka.COLUMN_BAR_STYLE},e}(As),Xl=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},e.prototype._doLayoutContent=function(e,i,r){this._barView||(this._barView=this._createBar(e.grid),this.addChild(this._barView),this._barView2=this._createBar(e.grid),this.addChild(this._barView2)),t.prototype._doLayoutContent.call(this,e,i,r)},e.prototype._createBar=function(t){return new Kl(t)},e.prototype._layoutBars=function(t,e,i){var r=t.fixedBarWidth,o=t.footBounds.height;if(this._barView.visible=r>0,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-o,t.dataBounds.bottom);this._barView.setBounds(e-r,0,r,n),o>0&&(this._barView2.visible=!0,this._barView2.setBounds(e-r,i-o,r,o))}},e}(ql),Ql=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-right-column-bar"},e}(As),Jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._createBar=function(){return new Ql(this.doc,"rightColumnBar")},e.prototype._layoutBars=function(t,e,i){var r=t.rightBarWidth,o=t.footBounds.height;if(this._barView.visible=r>0,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-o,t.dataBounds.bottom);this._barView.setBounds(0,0,r,n),o>0&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-o,r,o))}},e}(Xl),Zl=(function(t){function e(e,i){void 0===i&&(i=null);var r=t.call(this,e,i)||this;return r.visible=!1,r}r(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-message-pane"},e.prototype._doLayoutContent=function(e,i,r){t.prototype._doLayoutContent.call(this,e,i,r)}}(zl),/[\u3131-\u314e\u314f-\u3163\uac00-\ud79d]/g),tu=function(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var r=new Date(e,0,1),o=4-r.getDay()+1;return r.setDate(o),r.getFullYear()==e&&i--,o=7*i,r.setDate(r.getDate()+o),r},eu=function(t,e,i){var r,o=function(t){var i=new Date(t),r=i.getDay();r=r<e?-3-r:4-r;var o=i.getDate();return i.setDate(o+r),i},n=t.getFullYear(),s=o(new Date(n,0,1)),a=o(new Date(n,t.getMonth(),t.getDate())),l=s.getFullYear(),u=a.getFullYear();return u<n?(s=o(new Date(l,0,1)),r=Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===u?1:0)):r=u>n?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===u?1:0),String(u)+(null!=i?i:"")+(r<10?"0"+r:String(r))},iu=function(t){function e(e){var i=t.call(this)||this;return i._tooltips=[],i._items=[],i._enabled=!0,i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items&&this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t},enumerable:!0,configurable:!0}),e.prototype.load=function(t){this.clear()},e.prototype.clear=function(){this._items=[],this._tooltips=[]},e.prototype.contains=function(t){return!1},e.prototype.getTooltip=function(t){return null},e}(Ct),ru=function(t){function e(e,i){var r=t.call(this,e)||this;return i&&r.load(i),r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){if(t.prototype.load.call(this,e),e){var i=ft.makeArray(e.dates,!0);e.tooltips=ft.makeArray(e.tooltips,!0);for(var r=0,o=i.length;r<o;r++){var n=i[r],s=void 0;if(n instanceof Date||"number"==typeof n)(s=new Date(n)).setHours(0,0,0,0);else if("string"==typeof n){4!==n.length&&8!==n.length||!/^[0-9]*$/.test(n)||(n=4===n.length?n.replace(/(\d{2})(\d{2})/,"$1/$2"):n.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var a=n.split(/[.//-]/);if(2==a.length)try{s=parseInt(a[0]).toString()+"/"+parseInt(a[1]).toString()}catch(t){}else 3==a.length&&(s=Je.getSimpleDateNull(n))}s&&(this._items.push(s),e.tooltips[r]&&this._tooltips.push(e.tooltips[r]))}null!=e.enabled&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},e.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var r=this._items[e];if(r instanceof Date&&r.getFullYear()===t.getFullYear()&&r.getMonth()===t.getMonth()&&r.getDate()===t.getDate())return e;if(r===t.getMonth()+1+"/"+t.getDate())return e}return-1},e.prototype.contains=function(t){return this.getItemIndex(t)>=0},e.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return e>=0?this._tooltips[e]:null},e}(iu),ou=function(t){function e(e,i){var r=t.call(this,e)||this;return i&&r.load(i),r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){t.prototype.load.call(this,e),e&&(this._items=ft.makeArray(e.days,!0),this._tooltips=ft.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},e.prototype.contains=function(t){return t instanceof Date&&this._items.indexOf(t.getDay())>=0},e.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return e>=0?this._tooltips[e]:null},e}(iu),nu=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._count=-1,e}return r(e,t),e.prototype._doDispose=function(){this._editor=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return-1==this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.setNull=function(){this.clear()},e.prototype.getDateConvert=function(){return this._editor&&this._editor._dateConverter},e.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},e.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=ft.isArray(t)?t:[t]).length;e<i;e++){var r=t[e],o=void 0;switch(r.type){case"day":o=new ou(this,r);break;case"date":o=new ru(this,r)}o.count>0&&this._items.push(o)}this._count=this._items.length}else this._count=-1},e.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},e}(Ct),su=function(t){function e(i,r){var o=t.call(this)||this;o._month=-1,o._clickHandler=function(t){ft.stopEvent(t,!0);var i=t.currentTarget,r=ft.getChildIndex(i);r>=0&&(this._month=r,this.fireEvent(e.CLOSE_UP,this._month)),this.hide()}.bind(o);var n=ct(r);return o._listElement=r,o._months=i.months,o._element=o.$_createPicker(n),o._element.style.zIndex=String(i._baseZindex+2),o}return r(e,t),e.prototype._doDispose=function(){this._listElement=null,ft.detach(this._element),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"month",{get:function(){return this._month},set:function(t){this._month=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listElement",{get:function(){return this._listElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._container&&this._container.contains(this._element)},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,r){if(this._container=t,t){t.appendChild(this._element);var o=ct(t),n=ft.getClientRect(this._element),s=ft.getScrolled(o);if(r&&this._listElement){var a=this._listElement.getBoundingClientRect().width;e=parseInt(this._listElement.style.left.replace("px",""))+a/2,i=parseInt(this._listElement.style.top.replace("px",""))}e=Math.max(s.sx,e-n.width-2),i=Math.max(s.sy,i-n.height/2+13),ft.move(this._element,e,i)}},e.prototype.hide=function(){ft.detach(this._element),this._container=null},e.prototype.$_createPicker=function(t){var e=t.createElement("div"),i=e.style;i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",e.className="rg-cal-month-picker",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this);for(var r=1;r<=12;r++){var o=t.createElement("div"),n=o.style;n.position="relative",n.cssFloat="none",o.className="rg-cal-month-picker-item",ft.disableSelection(o),e.appendChild(o),o.onclick=this._clickHandler,o.onmouseup=this._clickHandler;var s=t.createElement("span");s.innerHTML=ft.htmlEncode((this._months?this._months[r-1]:r)+" "),s.tabIndex=-1,ft.disableSelection(s),o.appendChild(s)}return e},e.CLOSE_UP="onMonthPickerCloseUp",e}(fe),au=function(e){function i(r,o){var n=e.call(this)||this;return n._minWidth=0,n._maxWidth=0,n._yearNavigation=!1,n._dropDownPosition=t.DropDownPosition.BUTTON,n._showToday=!0,n._viewGridInside=!1,n._showWeeks=!1,n._startWeek=0,n._weekSelectable=!1,n._weekSeparator="",n._date=new Date,n._selected=!1,n._focused=!0,n._canceled=!1,n._clickHandler=function(t){var e=this.$_getCellDate(this._currDate,t.currentTarget.$_day+1);if(this._editor.containsRange(e)){var r=this._holidays&&this._holidays.contains(e);r&&!r.enabled||(this.date=new Date(e),this._selected=!0,this.focused=!0,this._editor.$_selectDate(this._date),!this.showButtons&&this.fireEvent(i.CLOSE_UP,!0))}}.bind(n),n._dblClickHandler=function(t){this.fireEvent(i.CLOSE_UP,!0)}.bind(n),n._yearWeekClickHandler=function(t){var e,i=t.currentTarget.$_yearWeek;i&&(e=tu(i)),e&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0)}.bind(n),n._mouseupHandler=function(t){!this._isMobile&&this._editor.setFocus()}.bind(n),n._editor=o,n._container=r,n._yearDisplayFormat=o.yearDisplayFormat,n._monthDisplayFormat=o.monthDisplayFormat,n._months=o.months,n._weekDays=ft.week_days,n._element=n.$_createPicker(o),n._element.addEventListener("mouseup",n._mouseupHandler),n._monthPicker=new su(o,n._element),n._monthPicker.addListener(n),n}return r(i,e),i.prototype._doDispose=function(){this._monthPicker=this._monthPicker&&this._monthPicker.dispose(),this._element&&(this._element.removeEventListener("mouseup",this._mouseupHandler),ft.detach(this._element)),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(t){t?this._date&&this._date.getTime()===t.getTime()||(this._currDate=new Date(t),this._date=new Date(t),this.listing&&this.$_buildCalendar()):null===t&&(this._date=null)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"monthListing",{get:function(){return this._monthPicker.listing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canceled",{get:function(){return this._canceled},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._calendar.tHead.style.opacity=t?"1.0":"0.5")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"today",{get:function(){return this.date=new Date},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._footer&&(this._footer.style.display=t?"":"none"),this._showButtons=t),this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveElement&&(this._saveElement.textContent=t),this._saveLabel=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement.textContent=t),this._cancelLabel=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){t!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement.textContent=t),this._deleteLabel=t)},enumerable:!0,configurable:!0}),i.prototype.setWeekDays=function(t){t!=this._weekDays&&(ft.isArray(t)&&t.length>=7?this._weekDays=t:this._weekDays=ft.week_days)},i.prototype.closeMonth=function(){this._monthPicker.hide()},i.prototype.show=function(t,e,i,r,o){this._containerElement=!ft.isMobile()&&this._viewGridInside?this._container._container:t,this.$_show(e,i,r,o)},i.prototype.hide=function(){this.focused=!1,this._monthPicker.hide(),ft.detach(this._element),this._containerElement=null},i.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&ft.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.startDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()-(e+7)%7),this.date=t},i.prototype.endDay=function(){var t=new Date(this._currDate),e=t.getDay()-this._startWeek;return t.setDate(t.getDate()+(6-e)),this.date=t},i.prototype._changed=function(){},i.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},i.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div");this._id=i.id="rg-calendar-"+lu.$$_LIST_ID++;var r=i.style;return r.position="absolute",r.cssFloat="none",r.clear="both",r.boxSizing="border-box",r.margin="0px",r.overflow="auto",r.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._calendar=this.$_createCalendar(e),i.appendChild(this._calendar),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i},i.prototype.$_createHeader=function(t){var e=this,i=this._headerElement=t.createElement("div"),r=i.style;r.position="relative",i.className="rg-cal-header";var o=t.createElement("div");(r=o.style).position="relative",r.textAlign="center",r.height="100%",i.appendChild(i.$_title=o),o.className="rg-cal-yearmonth";var n=t.createElement("span");(r=n.style).position="relative",r.verticalAlign="top",r.height="16px",n.className="rg-cal-year",o.appendChild(o.$_year=n),n.innerHTML="2020\ub144",n.onclick=function(t){};var s=this.$_createYearSpin(t);o.appendChild(o.$_yearSpin=s);var a=t.createElement("span");(r=a.style).position="relative",r.verticalAlign="top",a.className="rg-cal-month",o.appendChild(o.$_month=a),a.innerHTML="1\uc6d4",a.onmousedown=function(t){ft.stopEvent(t,!0);var e=ft.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,e.x,e.y,!ft.isMobile()&&this._viewGridInside)}.bind(this);var l=t.createElement("span");(r=l.style).position="absolute",r.left="4px",r.minWidth="17px",r.minHeight="17px",l.className="rg-cal-prev-month",i.appendChild(i.$_prev=l),l.onclick=function(t){ft.incMonth(this._currDate,-1),this.$_buildCalendar()}.bind(this);var u=t.createElement("span");(r=u.style).position="absolute",r.right="4px",r.minWidth="17px",r.minHeight="17px",u.className="rg-cal-next-month",i.appendChild(i.$_next=u),u.onclick=function(t){ft.incMonth(this._currDate,1),this.$_buildCalendar()}.bind(this);var h=this._todayElement=t.createElement("span");return(r=h.style).position="absolute",r.right="35px",r.top="2px",h.className="rg-cal-today-button",i.appendChild(h),h.innerHTML="Today",h.onclick=function(t){var i=new Date;e.focused=!0,e.date=i,e._selected=!0,e._editor.$_selectDate(e._currDate)},i},i.prototype.$_createYearSpin=function(t){var e=t.createElement("div"),i=e.style;i.display="inline-block",i.visibility="hidden",i.position="relative",i.width="15px",i.height="100%",i.marginRight="2px";var r=t.createElement("span");(i=r.style).position="absolute",i.top="10%",i.left="0px",i.width="15px",i.height="40%",i.display="block",r.className="rg-cal-next-year",e.appendChild(r),r.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this);var o=t.createElement("span");return(i=o.style).position="absolute",i.top="50%",i.left="0px",i.width="15px",i.height="40%",i.display="block",o.className="rg-cal-prev-year",e.appendChild(o),o.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),e},i.prototype.$_createFooter=function(t){var e,r=t.createElement("div"),o=r.style;return o.display="none",r.className="rg-cal-buttons",e=this._deleteElement=t.createElement("span"),this._deleteLabel&&(e.textContent=this._deleteLabel),e.className="rg-cal-delete-button",(o=e.style).float="left",e.onclick=function(t){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),r.appendChild(e),e=this._saveElement=t.createElement("span"),this._saveLabel&&(e.textContent=this._saveLabel),e.className="rg-cal-save-button",(o=e.style).float="right",e.onclick=function(t){this.fireEvent(i.CLOSE_UP,!0)}.bind(this),r.appendChild(e),e=this._cancelElement=t.createElement("span"),this._cancelLabel&&(e.textContent=this._cancelLabel),e.className="rg-cal-cancel-button",(o=e.style).float="right",e.onclick=function(t){this._selected=!1,this._canceled=!0,this.fireEvent(i.CLOSE_UP,!1)}.bind(this),r.appendChild(e),r},i.prototype.$_createCalendar=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"],i=t.createElement("table"),r=i.style;r.margin="2px",i.className="rg-cal-days-table";var o=i.createTHead();o.className="rg-cal-weeks";var n=t.createElement("tr");o.appendChild(n);var s=[],a=t.createElement("th");(r=a.style).minWidth="20px",r.textAlign="center",a.className="rg-cal-week-year-week",n.appendChild(a);var l=t.createElement("span");a.appendChild(l),o.$_weeks=a;for(var u=0;u<7;u++){var h=t.createElement("th");(r=h.style).minWidth="20px",r.textAlign="center",h.className="rg-cal-week-"+e[u],n.appendChild(h);var c=t.createElement("span");c.innerHTML=ft.htmlEncode(this._weekDays[u]),h.appendChild(c),s.push(c)}o.$_cells=s;var d=t.createElement("tbody");d.className="rg-cal-days",i.appendChild(i.$_body=d);for(var p=d.$_rows=[],f=d.$_yearweeks=[],_=0;_<6;_++){var g=t.createElement("tr");d.appendChild(g),p.push(g),g.$_cells=s=[];var y=t.createElement("td");(r=y.style).padding="1px",g.appendChild(y);var m=t.createElement("span");for(y.appendChild(y.$_span=m),f.push(y),u=0;u<7;u++){var b=t.createElement("td");(r=b.style).padding="1px",b.className="rg-cal-day rg-cal-week-"+e[(u+this._startWeek)%7],g.appendChild(b),b.onclick=this._clickHandler,b.ondblclick=this._dblClickHandler;var v=t.createElement("span");b.appendChild(b.$_span=v),b.id=this._id+"-"+_.toString()+"-"+u.toString(),s.push(b)}}return i},i.prototype.$_show=function(e,i,r,o){var n=ct(this._element),s=dt(n);this.focused=!1,this._selected=!1,this._canceled=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._footer.style.display=this.showButtons?"":"none",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"70px":"40px";var a=this._date;this._currDate=a?new Date(a):new Date,this._today=new Date,this.$_buildCalendar(),ft.disableSelection(this._element),this._containerElement.appendChild(this._element);var l=ft.getBrowserSize(),u=ft.getClientRect(this._containerElement),h=ft.getClientRect(this._container._container),c=l.width,d=l.height,p=ft.getClientRect(this._element),f=s.pageXOffset||n.documentElement.scrollLeft,_=s.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(d-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(c-=18),e+=h.left-u.left,i+=h.top-u.top,(ft.ieTen||ft.ieOld||ft.ieLeg)&&(e+=n.documentElement.scrollLeft,i+=n.documentElement.scrollTop),i+p.height>d+_&&(i=i-o.height-p.height)<0&&(i=d-p.height-2),this._dropDownPosition!=t.DropDownPosition.EDITOR?e=Math.max(0,e+r-p.width):e+p.width>c+f&&(e=c-p.width),!ft.isMobile()&&this._viewGridInside&&(i=o.bottom-u.top+2,(u.bottom<o.bottom+p.height||d+_<o.bottom+p.height)&&(i=o.top-p.height-u.top-2)),ft.isMobile()||this._element.offsetParent||(e+=n.documentElement.offsetLeft,i+=n.documentElement.offsetTop),ft.move(this._element,Math.max(0,e),Math.max(0,i))},i.prototype.$_checkFocusedWeek=function(t,e,i){var r=this.$_isFocusedWeek(t,e.$_yearWeek);e.className="rg-cal-week-year-week "+(r?"rg-cal-week-year-focusweek":"")},i.prototype.$_isFocusedWeek=function(t,e){return t&&e&&eu(t,this._startWeek)==e},i.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},i.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},i.prototype.$_buildCalendar=function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],r=this._header,o=this._currDate,n=r.$_prev,s=r.$_next,a=r.$_title,l=o.getFullYear(),u=o.getMonth();a.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",l+""):l+"\ub144")+"&nbsp;",this._months&&this._months.length>0?a.$_month.innerHTML=this._months[u]:a.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(u+1).toString()):u+1+"\uc6d4";var h=a.$_year.innerText+a.$_month.innerText;n.title=0==u?l-1+"/12":l+"/"+ft.pad(u),s.title=11==u?l+1+"/01":l+"/"+ft.pad(u+2);for(var c=this._calendar.tHead.$_cells,d=0;d<7;d++){var p=c[(d+7-this._startWeek)%7];p.innerHTML=ft.htmlEncode(this._weekDays[d]),p.parentElement.className="rg-cal-week-"+i[d]}this._calendar.tHead.$_weeks.style.display=this.showWeeks?"":"none";for(var f=this._calendar.$_body,_=f.$_yearweeks,g=(d=0,_.length);d<g;d++)_[d].style.display=this.showWeeks?"":"none",_[d].onclick=this.weekSelectable?this._yearWeekClickHandler:null;var y=f.$_rows,m=ft.month_days[ft.isLeapYear(l)?1:0][u],b=new Date(o);b.setDate(1);var v=(b.getDay()+7-this._startWeek)%7;30==m&&6==v||31==m&&v>=5?ft.addChild(f,y[5]):ft.removeChild(f,y[5]),28==m&&0==v?ft.removeChild(f,y[4]):ft.addChild(f,y[4]);var w,C,x=0,I=_[0];if(c=y[0].$_cells,v>0){var S=l,E=u-1;E<0&&(S--,E=11);var k=ft.month_days[ft.isLeapYear(S)?1:0][E];for(d=0;d<v;d++){(L=c[d]).removeAttribute("title");var O=new Date(this._currDate);L.$_day=d-v,O.setDate(L.$_day+1);var R=this._editor.containsRange(O);0===d&&(I.$_yearWeek=eu(O,this._startWeek),I.$_span.innerText=I.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,I,R)),L.$_span.innerHTML=k-v+d+1,L.className="rg-cal-day rg-cal-prev-day "+(R?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(d+this._startWeek)%7]}}for(d=v;d<7;d++)(L=c[d]).removeAttribute("title"),L.$_day=x++,L.$_span.innerHTML=x,(b=new Date(this._currDate)).setDate(x),R=this._editor.containsRange(b),0===d&&(I.$_yearWeek=eu(b,this._startWeek),I.$_span.innerText=I.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,I,R)),w=this.$_isFocusedDay(o,x),C=this.$_isToday(o,x),w&&this._editor._editor.setAttribute("aria-activedescendant",L.id),L.setAttribute("aria-label",h+" "+x.toString()),C?L.setAttribute("aria-current","date"):L.removeAttribute("aria-current"),R?L.removeAttribute("aria-disabled"):L.setAttribute("aria-disabled","true"),t="rg-cal-day "+(w?"rg-cal-focusday ":""),t+=C?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(b))?e.styleName+" rg-cal-holiday ":"",t+=R?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(d+this._startWeek)%7],L.className=t,e&&(t=e.getTooltip(this.$_getCellDate(o,x)))&&(L.title=t);for(var P=1;P<6&&x<m;P++){c=y[P].$_cells;var D=_[P];for(d=0;d<7;d++)if(x<m)(L=c[d]).removeAttribute("title"),L.$_day=x++,(b=new Date(this._currDate)).setDate(x),R=this._editor.containsRange(b),0===d&&(D.$_yearWeek=eu(b,this._startWeek),D.$_span.innerText=D.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,D,R)),L.$_span.innerHTML=x,w=this.$_isFocusedDay(o,x),C=this.$_isToday(o,x),w&&this._editor._editor.setAttribute("aria-activedescendant",L.id),L.setAttribute("aria-label",h+" "+x.toString()),C?L.setAttribute("aria-current","date"):L.removeAttribute("aria-current"),R?L.removeAttribute("aria-disabled"):L.setAttribute("aria-disabled","true"),t="rg-cal-day "+(w?"rg-cal-focusday ":""),t+=this.$_isToday(o,x)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(b))?e.styleName+" rg-cal-holiday ":"",t+=R?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(d+this._startWeek)%7],L.className=t,e&&(t=e.getTooltip(this.$_getCellDate(o,x)))&&(L.title=t);else for(var T=1;d<7;d++){var L;(L=c[d]).removeAttribute("title"),L.$_day=x++,(b=new Date(this._currDate)).setDate(x),R=this._editor.containsRange(b),L.$_span.innerHTML=T++,L.className="rg-cal-day rg-cal-next-day "+(R?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(d+this._startWeek)%7]}}},i.prototype.onMonthPickerCloseUp=function(t,e){var i=e-this._currDate.getMonth();i&&(ft.incMonth(this._currDate,i),this.$_buildCalendar()),!ft.isMobile()&&this._editor.setFocus()},i.CLOSE_UP="onDatePickerCloseUp",i}(fe),lu=function(e){function i(i,r){var o=e.call(this,i,r)||this;o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._yearNavigation=!1,o._dropDownPosition=t.DropDownPosition.BUTTON,o._dropDownWhenClick=!1,o._showToday=!0,o._yearDisplayFormat="{Y}\ub144",o._monthDisplayFormat="{M}\uc6d4",o._months=null,o._weekDays=null,o._showWeeks=!1,o._startWeek=0,o._weekSelectable=!1,o._weekSeparator="",o._commitOnSelect=!1,o._holidays=null,o._showButtons=!0,o._saveLabel="Save",o._cancelLabel="Cancel",o._deleteLabel="Delete",o._holidayCollection=new nu,o._closing=!1,o._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(o);var n=i.editorOptions;o._yearDisplayFormat=n.yearDisplayFormat,o._monthDisplayFormat=n.monthDisplayFormat,o._months=n.months,o._weekDays=n.weekDays,o._baseZindex=i.displayOptions.baseZindex,o._list=new au(i.container,o),o._list.addListener(o);var s=o._editor;return s.setAttribute("aria-owns",o._list._element.id),s.setAttribute("aria-expanded","false"),s.setAttribute("aria-haspopup","true"),o}return r(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){t!=this._editFormat&&(this._editFormat=t,this.datetimeFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){this._yearNavigation=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showToday",{get:function(){return this._showToday},set:function(t){this._showToday=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){this._yearDisplayFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){this._monthDisplayFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"months",{get:function(){return this._months},set:function(t){this._months=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){this._weekDays=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){this._showWeeks=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t=null==t||isNaN(t=Math.floor(t))?0:t,this._startWeek=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){this._weekSelectable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){this._weekSeparator=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){t!=this._defaultShowDate&&(this._defaultShowDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultDate",{get:function(){return this._defaultDate},set:function(t){t!=this._defaultDate&&(this._defaultDate=t instanceof Date?new Date(t):t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"holidays",{get:function(){return this._holidays},set:function(t){this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new nu,this._holidayCollection.editor=this,this._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._list.listing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"monthListing",{get:function(){return this._list.monthListing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){this._saveLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){this._cancelLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){this._deleteLabel=t},enumerable:!0,configurable:!0}),i.prototype.dropDown=function(t){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var e=ct(this._container),i=dt(e),r=this._grid.editorOptions,o=this._list,n=e.documentElement,s=ft.getClientRect(this._container);return o.viewGridInside=r.viewGridInside,o.yearNavigation=this._yearNavigation,o.dropDownPosition=this._dropDownPosition,o.showToday=this._showToday,o.yearDisplayFormat=this._yearDisplayFormat,o.monthDisplayFormat=this._monthDisplayFormat,o.months=this._months,o.minDate=this._minDate,o.maxDate=this._maxDate,o.showWeeks=this._showWeeks,o.startWeek=this._startWeek||0,o.weekSelectable=this.weekSelectable,o.weekSeparator=this.weekSeparator,o.showButtons=this.showButtons,o.saveLabel=this.saveLabel,o.cancelLabel=this.cancelLabel,o.deleteLabel=this.deleteLabel,o.holidays=this._holidayCollection.isNull?r._holidayCollection:this._holidayCollection,this._weekDays&&this._weekDays.length>0&&o.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(n),o.show(n,0,0,0,null),this._centerPopup(n,o._element)):o.show(n,s.cx+1,s.cy+s.height,this._cellBounds.width,ft.getClientRect(this._editor)),o.focused=t,this._editor.setAttribute("aria-expanded","true"),i.addEventListener("mousedown",this._globalMouseHandler),!0}},i.prototype.closeUp=function(t){if(this.listing){var e=dt(ct(this._container));this._closing=!0;try{e.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1,this._editor.setAttribute("aria-expanded","false")}return!0}},i.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=t.DefaultShowDate.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete"},i.prototype.setEditIndex=function(i){e.prototype.setEditIndex.call(this,i);var r=this._editField().dataType;this._weekSelectable=this._weekSelectable&&r!==t.ValueType.DATE&&r!==t.ValueType.DATETIME},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this.weekSelectable?this._date=tu(t):this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},i.prototype.getEditValue=function(i,r){void 0===i&&(i=!0),void 0===r&&(r=!1);var o=e.prototype.getEditValue.call(this,i),n=this._editField().dataType;return o&&r&&(n==t.ValueType.DATE||n==t.ValueType.DATETIME)&&(o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},i.prototype._createEditor=function(t){return e.prototype._createEditor.call(this,t)},i.prototype._textHandler=function(){this._requestStart(!1)},i.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list;if(i.monthListing)return 27==t.keyCode&&(this.closeMonthList(),ft.stopEvent(t,!0),!0);var r=this.listing,o=r&&i.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return ft.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return ft.stopEvent(t,!0),!0;break;case 36:if(o)return t.preventDefault(),this.$_selectDate(i.startDay()),ft.stopEvent(t,!0),!0;break;case 35:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.endDay()),!0;break;case 37:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.incDay(-1)),!0;break;case 39:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.incDay(1)),!0;break;case 33:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.incMonth(t.shiftKey?-12:-1)),!0;break;case 34:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.incMonth(t.shiftKey?12:1)),!0;break;case 40:if(t.altKey&&!r)return this._requestStart(),ft.stopEvent(t,!0),this._list.focused=!0,this.$_setListDate(),!0;if(r)return ft.stopEvent(t,!0),o?this.$_selectDate(i.incDay(7)):this._list.focused=!0,!0;break;case 38:if(t.altKey&&r)return this.closeUp(!1),ft.stopEvent(t,!0),!0;if(r)return ft.stopEvent(t,!0),o?this.$_selectDate(i.incDay(-7)):this._list.focused=!1,!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&r&&(ft.stopEvent(t,!0),this._list.date=new Date,this.$_selectDate(this._list.date))}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=this._list,r=t.keyCode||t.which,o=String.fromCharCode(r);if(o.toLocaleLowerCase()==this.todayChar){if(ft.stopEvent(t,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today),!0}else{if(ft.isFirefox&&(t.ctrlKey||0===r))return void e.prototype._keyPressHandler.call(this,t);if(ft.isMac&&t.metaKey&&ft.included(r,99,118))return void e.prototype._keyPressHandler.call(this,t);if(!this._regx.test(o))return void t.preventDefault()}e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},i.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,r=e.selectionEnd,o=e.value?e.value.length:0;e.value=e.value.replace(Zl,"");var n=e.value?e.value.length:0;this._isMobile||(n==o?e.setSelectionRange(i,r):e.setSelectionRange(r,r))}},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),e.prototype._dispatchChange.call(this))},i.prototype._changeHandler=function(t){e.prototype._changeHandler.call(this,t)},i.prototype._pasteHandler=function(t){e.prototype._pasteHandler.call(this,t)},i.prototype._copyHandler=function(t){e.prototype._copyHandler.call(this,t)},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this)&&(this._isMobile?t&&this.dropDown(!1):!1!==t&&this.dropDown(!1),!0)},i.prototype.setBounds=function(t,i,r,o,n){e.prototype.setBounds.call(this,t,i,r,o,n)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(!this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype.dropDownList=function(t){this.dropDown(!0)},i.prototype.closeList=function(t){this.closeUp(t)},i.prototype.closeMonthList=function(){this._list.closeMonth()},i.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown(!0)},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype._isDateEditor=function(){var e=this._editField().dataType;return e==t.ValueType.DATE||e==t.ValueType.DATETIME||!this.weekSelectable},i.prototype.$_selectDate=function(t){if(t){if(this._date=t,this.containsRange(t)){var e=void 0;e=this.weekSelectable?eu(t,this._startWeek,this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},i.prototype.$_setListDate=function(){var e,i=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),r=this._editor.value;switch(this._mask&&(r=this._mask.getStripValue()),e=this.weekSelectable?tu(r):this._dateConverter.getDateNull(r),this._defaultShowDate){case t.DefaultShowDate.TODAY:e=new Date;break;case t.DefaultShowDate.NORMAL:break;case t.DefaultShowDate.TODAY_WHEN_NULL:e=e||new Date;break;case t.DefaultShowDate.DEFAULT_WHEN_NULL:e=e||i;break;case t.DefaultShowDate.DEFAULT:e=i}e&&(this._list.date=e)},i.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},i.INPUT_CSS="rg-date-editor",i.$$_LIST_ID=0,i}(ca),uu=function(e){function i(i,r,o){var n=e.call(this)||this;n._dropDownPosition=t.DropDownPosition.BUTTON,n._viewGridInside=!1,n._selected=!1,n._focused=!1;var s=dt(i.doc);return n._jquery=s&&s.jQuery,n._editor=r,n._container=i,n._btOptions=o,n._element=n.$_createList(i.doc),n}return r(i,e),i.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"date",{get:function(){return this._date},set:function(t){if(this._date=t,t.getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this._jquery&&this._jquery(this._element).datepicker("update",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")},enumerable:!0,configurable:!0}),i.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},i.prototype.keydown=function(t){if(this._jquery){this._jquery(this._element).datepicker("keydown",t);var e=this._jquery(this._element).data("datepicker").viewDate;e instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date))}},i.prototype.$_createList=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.zIndex=String(this._editor._baseZindex+2),i.margin="0px",i.overflow="auto",e.className="rg-calendar",e},i.prototype.show=function(t,e,i,r,o){if(this._containerElement=ft.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,r,o)},i.prototype.$_createCalendar=function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(e).datepicker&&this._jquery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){var e=t.date;e&&!this._editor.containsRange(e)||(e?(this._date=new Date(e),this._selected=!0):(this._date=void 0,this._selected=!0),this.fireEvent(au.CLOSE_UP,!0))}.bind(this)),!0)},i.prototype.$_show=function(e,i,r,o){var n=this._container.doc,s=dt(n);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var a=this._date;this._currDate=a?new Date(a):new Date;var l=ft.getBrowserSize(),u=ft.getClientRect(this._containerElement),h=ft.getClientRect(this._container._container),c=l.width,d=l.height,p=ft.getClientRect(this._element),f=s.pageXOffset||n.documentElement.scrollLeft,_=s.pageYOffset||n.documentElement.scrollTop;n.documentElement.scrollWidth>n.documentElement.clientWidth&&(d-=18),n.documentElement.scrollHeight>n.documentElement.clientHeight&&(c-=18),e+=h.left-u.left,i+=h.top-u.top,(ft.ieTen||ft.ieOld||ft.ieLeg)&&(e+=n.documentElement.scrollLeft,i+=n.documentElement.scrollTop),i+p.height>d+_&&o&&(i=i-o.height-p.height)<0&&(i=d-p.height-2),this._dropDownPosition!=t.DropDownPosition.EDITOR?e=Math.max(0,e+r-p.width):e+p.width>c+f&&(e=c-p.width),!ft.isMobile()&&this._viewGridInside&&o&&(i=o.bottom-u.top+2,(u.bottom<o.bottom+p.height||d+_<o.bottom+p.height)&&(i=o.top-p.height-u.top-2)),ft.isMobile()||this._element.offsetParent||(e+=n.documentElement.offsetLeft,i+=n.documentElement.offsetTop),ft.move(this._element,Math.max(0,e),Math.max(0,i))},i.prototype.today=function(){return this.date=new Date},i.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&ft.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},i.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},i.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),r=ft.month_days[ft.isLeapYear(e)?1:0][i];t.setDate(r)}return this.date=t},i}(fe),hu=function(e){function i(i,r){var o=e.call(this,i,r)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._dropDownPosition=t.DropDownPosition.BUTTON,o._dropDownWhenClick=!1,o._commitOnSelect=!1,o._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,o._closing=!1,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(o),o}return r(i,e),i.prototype._doDispose=function(){this._globalMouseHandler=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t},enumerable:!0,configurable:!0}),i.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=ct(this._container),e=dt(t),i=this._grid,r=this._list=new uu(i.container,this,this._btOptions),o=t.documentElement,n=ft.getBounds(this._container);return r.addListener(this),r.viewGridInside=this._options&&this._options.viewGridInside,r.dropDownPosition=this._dropDownPosition,r.minDate=this._minDate,r.maxDate=this._maxDate,this.$_setListDate(),this._isMobile&&!this._isTablet?(this._showMarquee(o),r.show(o,0,0,0,null),this._centerPopup(o,r._element)):r.show(t.documentElement,n.x+1,n.y+n.height,this._cellBounds.width,ft.getClientRect(this._editor)),e.addEventListener("mousedown",this._globalMouseHandler),!0}return!1},i.prototype.closeUp=function(t){if(this.listing){var e=dt(ct(this._container));this._closing=!0;try{e.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this._isMobile&&!this._isTablet?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},i.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},i.prototype.dropDownList=function(){this.dropDown()},i.prototype.closeList=function(t){this.closeUp(t)},i.prototype.$_setListDate=function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue());var e=this._dateConverter.getDateNull(t);e&&(this._list.date=e)},i.prototype.selectDate=function(t){this.$_selectDate(t)},i.prototype.$_selectDate=function(t){if(t&&t!=this._date){if(this._date=t,this.containsRange(t)){var e=this._dateConverter.getText(this._date);this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._doChanged()}}else void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._doChanged())},i.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},Object.defineProperty(i.prototype,"listing",{get:function(){return!!this._list&&this._list.listing},enumerable:!0,configurable:!0}),i.prototype.initOptions=function(){e.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},i.prototype._isDateEditor=function(){return!0},i.prototype.setEditValue=function(t){e.prototype.setEditValue.call(this,t),this._date="string"==typeof t?this._dateConverter.getDateNull(t):t},i.prototype.getEditValue=function(i,r){var o=e.prototype.getEditValue.call(this,i),n=this._editField().dataType;return o&&r&&(n==t.ValueType.DATE||n==t.ValueType.DATETIME)&&(o=o.getTime(),o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},i.prototype._requestStart=function(t){return!!e.prototype._requestStart.call(this,t)&&(this._isMobile?t&&this.dropDown():!1!==t&&this.dropDown(),!0)},i.prototype._textHandler=function(){this._requestStart()},i.prototype._compositionstartHandler=function(){this._requestStart()},i.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var i=this._list,r=this.listing,o=r&&i.focused;switch(t.keyCode){case 13:if(this.closeUp(!0))return ft.stopEvent(t,!0),!this._sendToParent(t);break;case 27:if(this.closeUp(!1))return ft.stopEvent(t,!0),!0;break;case 36:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.firstDay()),!0;break;case 35:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.lastDay()),!0;break;case 37:case 39:if(o)return ft.stopEvent(t,!0),i&&i.keydown(t),!0;break;case 33:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.incMonth(-1)),!0;break;case 34:if(o)return ft.stopEvent(t,!0),this.$_selectDate(i.incMonth(1)),!0;break;case 40:if(t.altKey&&!r)return this._requestStart(),ft.stopEvent(t,!0),!0;if(r)return ft.stopEvent(t,!0),o?i.keydown(t):(i.focused=!0,this.$_setListDate()),!0;break;case 38:if(t.altKey&&r)return this.closeUp(!1),ft.stopEvent(t,!0),!0;if(r)return ft.stopEvent(t,!0),o?i.date.getDate()<=7?i.focused=!1:i.keydown(t):i.focused=!1,!0;break;case 84:(t.altKey||t.altKey&&t.ctrlKey)&&r&&(ft.stopEvent(t,!0),i.date=new Date,this.$_selectDate(i.date))}return e.prototype._keyDownHandler.call(this,t)}},i.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var i=this._list,r=String.fromCharCode(t.keyCode||t.charCode);if(r.toLocaleLowerCase()==this.todayChar){if(ft.stopEvent(t,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today()),!0}else{if(ft.isFirefox&&(t.ctrlKey||0===t.charCode))return e.prototype._keyPressHandler.call(this,t);if(!this._regx.test(r))return void t.preventDefault()}e.prototype._keyPressHandler.call(this,t),t.keyCode&&this.textReadOnly&&t.preventDefault()}},i.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,r=e.selectionEnd,o=e.value?e.value.length:0;e.value=e.value.replace(Zl,"");var n=e.value?e.value.length:0;this._isMobile||(n==o?e.setSelectionRange(i,r):e.setSelectionRange(r,r))}},i.prototype.setBounds=function(t,i,r,o,n){e.prototype.setBounds.call(this,t,i,r,o,n)},i.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},i.prototype._dispatchChange=function(){(this._isMobile||this.visible)&&(this.$_resetValue(this._isMobile),e.prototype._dispatchChange.call(this))},i.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},i.prototype._getInputSelector=function(){return i.INPUT_CSS},i.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},i.INPUT_CSS="rg-btdate-editor",i}(ca),cu=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r._minDate=new Date(1970,0,1),r._maxDate=new Date(2100,11,31),r}return r(e,t),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"native",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","date"),i.tabIndex=this._isMobile?-1:0,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this)},e.prototype.hasButton=function(t,e){return null==t||t},e.prototype.setVisible=function(e,i){void 0===i&&(i=!1),t.prototype.setVisible.call(this,e,i),this.visible&&this._editor.click()},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editor;i.min=this._minDate?this.$_toInputDate(this._minDate):"",i.max=this._maxDate?this.$_toInputDate(this._maxDate):""},e.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled())return 40===e.keyCode&&e.altKey?(this._requestStart(),!0):t.prototype._keyDownHandler.call(this,e)},e.prototype.setBounds=function(e,i,r,o,n){t.prototype.setBounds.call(this,e,i,r,o,0),this._editor&&ft.isiOS&&(this._editor.style.minWidth=r+"px",this._editor.style.width=r+"px")},e.prototype.$_toInputDate=function(t){return t?e.Formatter.getText(t):""},e.INPUT_CSS="rg-ndate-editor",e.Formatter=new Je("yyyy-MM-dd"),e}(oa),du=function(e){function i(i){var r=e.call(this,i)||this;return r._readOnly=!1,r._editable=!ft.isMobile(),r._checkable=!0,r._updatable=!0,r._appendable=!1,r._insertable=!1,r._deletable=!1,r._revertable=!1,r._erasable=!1,r._movable=!1,r._commitByCell=!1,r._editWhenFocused=!1,r._commitWhenNoEdit=!1,r._commitWhenExitLast=!1,r._commitWhenLeave=!1,r._crossWhenExitLast=!1,r._validateOnEdited=!0,r._validateOnExit=!1,r._hintOnError=!0,r._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"\uc120\ud0dd\ub41c \ud589(\ub4e4)\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c??",r._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"\uc798\ubabb\ub41c \uc785\ub825 \uc720\ud615\uc785\ub2c8\ub2e4.",r._showInvalidFormatMessage=!0,r._confirmWhenDelete=!0,r._editWhenClickFocused=!1,r._commitLevel=t.ValidationLevel.IGNORE,r._useTabKey=!0,r._useArrowKeys=!0,r._skipReadOnly=!1,r._skipReadOnlyCell=!1,r._verticalMoveStep=t.VerticalMoveStep.CELL,r._enterToTab=!1,r._enterToNextRow=!1,r._enterToEdit=!1,r._maxLengthToNextCell=!1,r._forceInsert=!1,r._forceAppend=!1,r._checkDiff=!1,r._checkCellDiff=!1,r._strictDiff=!1,r._deletableWhenEdit=!0,r._showCommitError=!1,r._firstCellWhenInsert=!1,r._appendWhenInsertKey=!1,r._appendWhenExitLast=!1,r._showOnlyValidationMessage=!0,r._displayEmptyEditRow=!1,r._buttonClickWhenSpace=!1,r._exitGridWhenTab=t.ExitGridWhenTab.NONE,r._cancelWhenLastUndo=!1,r._exceptDataClickWhenButton=!1,r._removeValidateOnCommit=!1,r._validateOnlyEditColumn=!1,r._columnEditableFirst=!1,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(t){t!=this._columnEditableFirst&&(this._columnEditableFirst=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(t){this._removeValidateOnCommit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(t){this._validateOnlyEditColumn=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t},enumerable:!0,configurable:!0}),i.prototype.isWritable=function(){return this._editable&&!this._readOnly},i.prototype.canUpdate=function(t){return!this._readOnly&&(t||this._updatable)},i.prototype.canInsert=function(){return!this._readOnly&&this._insertable},i.prototype.canAppend=function(){return!this._readOnly&&this._appendable},i.prototype.canDelete=function(){return!this._readOnly&&this._deletable},i}(Ea),pu=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cell",{set:function(t){this._cell=t},enumerable:!0,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._cell.itemIndex+1;case e.ID_COLUMN_HEADER:var i=this._cell&&this._cell.column;return i&&i.header&&i.header.text?i.header.text:i.displayText}throw new It("Invalid identifier key: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_COLUMN_HEADER=2,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,dcount:e.ID_COLUMN_HEADER},e}(Dt),fu=function(t){function e(e){var i=t.call(this,e)||this;return i._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}\ub144",i._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}\uc6d4",i._months=null,i._weekDays=null,i._viewGridInside=!1,i._holidays=null,i._titleExprRuntime=new pu,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&(this._titleStatement=t,t?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new Dr(t):this._titleExprStatement=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new nu,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())},enumerable:!0,configurable:!0}),e}(Ea),_u=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){this._datetimeFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){this._booleanFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(t){this._copyTextCallback=t},enumerable:!0,configurable:!0}),e}(Ea),gu=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._startEdit=!0,i._commitEdit=!0,i._enableAppend=!0,i._numberCharsOfCols={},i._numberSeparatorOfCols={},i._stopOnError=!0,i._throwValidationError=!0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){this._singleMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startEdit",{get:function(){return this._startEdit},set:function(t){this._startEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitEdit",{get:function(){return this._commitEdit},set:function(t){this._commitEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableAppend",{get:function(){return this._enableAppend},set:function(t){this._enableAppend=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){this._fillFieldDefaults=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){this._fillColumnDefaults=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){this._forceRowValidation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){this._forceColumnValidation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new bt(this._datetimeFormats[e]))}else this._dateReaders=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateReaders",{get:function(){return this._dateReaders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new yt(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolReader",{get:function(){return this._boolReader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if(this._numberChars=t,t&&t.length>0){for(var e="[",i=0;i<t.length;i++){var r=t[i];e+="\\"==r?"\\"+r:r}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){this._numberSeparator=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&i.length>0){for(var r="[",o=0,n=i.length;o<n;o++){var s=i[o];r+="\\"==s?"\\"+s:s}r+="]",this._numberCharExpOfCols[e]=new RegExp(r,"g")}else this._numberCharExpOfCols[e]=null}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCharExp",{get:function(){return this._numberCharExp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){this._numberSeparatorOfCols=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionBase",{get:function(){return this._selectionBase},set:function(t){this._selectionBase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){this._selectBlockPaste=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopOnError",{get:function(){return this._stopOnError},set:function(t){this._stopOnError=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){this._noDataEvent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){this._eventEachRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){this._checkReadOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){this._checkDomainOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){this._convertLookupLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){this._applyNumberFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){this._applyEditMask=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){this._applyMaxLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyInputChars",{get:function(){return this._applyInputChars},set:function(t){this._applyInputChars=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){this._throwValidationError=t},enumerable:!0,configurable:!0}),e.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},e.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},e}(Ea),yu=function(t){function e(e){var i=t.call(this,e)||this;return i._longTapDuration=500,i._doubleTapInterval=300,i._tapThreshold=4,i._showEditCommander=!0,i._showTooltip=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollOnEditing",{get:function(){return this.grid.editOptions.scrollOnEditing},set:function(t){this.grid.editOptions.scrollOnEditing=t},enumerable:!0,configurable:!0}),e}(Ea),mu=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return r(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype.canFocus=function(){return!0},e}(wl),bu=function(t){function e(e,i){var r=t.call(this,e)||this;return r._style=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"style",{get:function(){return this._style},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return this.grid.selections},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(function(t){function e(e){var i=t.call(this,e.grid)||this;return i._index=e,i}return r(e,t),e.prototype._doDispose=function(){this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e}(mu)),vu=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,r){return this._layout=t,this._x=e,this._y=i,this._offset=r,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!0,configurable:!0}),e}(mu),wu=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,r){return this._layout=Fn.getSource(t),this._x=e,this._y=i,this._offset=r,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!0,configurable:!0}),e}(mu),Cu=function(t){function e(e){var i=t.call(this,e)||this;return i._itemIndex=-1,i._variable=!1,i._rowTop=0,i._offset=0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"variable",{get:function(){return this._variable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowTop",{get:function(){return this._rowTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,r){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=r,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!0,configurable:!0}),e.prototype.canFocus=function(){return!1},e}(mu),xu=function(t){function e(e){var i=t.call(this,e)||this;return i._offset=0,i._top=0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){return this._top=t,this._offset=e,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!0,configurable:!0}),e}(mu),Iu=function(e){function i(t){var i=e.call(this,t)||this;return i._itemIndex=-1,i._offset=0,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),i.prototype.init=function(e,i){return this._selStyle=e&&e.style,this._selStyle==t.SelectionStyle.COLUMNS||this._selStyle==t.SelectionStyle.SINGLE_COLUMN?(this._itemIndex=i,this._offset=0):(this._itemIndex=this._selStyle?e.getBounds().top:i,this._offset=i-this._itemIndex),this},Object.defineProperty(i.prototype,"cursor",{get:function(){return"move"},enumerable:!0,configurable:!0}),i.prototype.canFocus=function(){return this._selStyle==t.SelectionStyle.COLUMNS||this._selStyle==t.SelectionStyle.SINGLE_COLUMN},i}(mu),Su=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,e&&i.assignFrom(e),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:e&&t.prototype.assignFrom.call(this,e)},e}(Ct),Eu=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropDownCount=8,i._showing=!1,i.$_touchendHandler=null,i._container=e,i._element=i.$_createElement(e.doc),i.$_touchendHandler=function(t){t.preventDefault(),this.hide()}.bind(i),ft.isMobile()&&i._element.addEventListener("touchend",i.$_touchendHandler,!1),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),ft.detach(this._element)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,r,o){this._showing=!0;try{this.$_show(t,e,i,r,o)}finally{this._showing=!1}},e.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e.prototype.$_show=function(t,e,i,r,o){var n=this._container.gridView.displayOptions.baseZindex+4,s=this._element,a=t.message;if(s&&a){this._span.innerHTML=a.replace(/\n/g,"<br>"),ft.setClassName(s,"rg-tooltip");var l=s.style;l.position="absolute",l.left=e+"px",l.top=i+"px",l.overflow="hidden",l.zIndex=String(n),this._container._container.appendChild(s);var u=s.getBoundingClientRect(),h=this._container._container.getBoundingClientRect();l.left=u.right>h.right?Math.max(h.right-u.width-h.left-2,0)+"px":s.style.left,u.bottom>h.bottom&&(s.style.top=o?Math.max(0,i-(u.bottom-h.bottom))+"px":Math.max(i-u.height-r,0)+"px"),l.visibility="visible"}},e}(Ct),ku=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._pos=new Vs,i._container=e.container,i}return r(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,r,o){if(!this._active&&(this.close(),(t=t instanceof Su?t:t?new Su(t):null)&&t.visible)){this._tipView||(this._tipView=new Eu(this._container)),this._tipView.show(t,e,i,r,o);var n=this._container.gridView;return n&&this._pos.set(n.mouseX,n.mouseY),this._active=!0,!0}return!1},e.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!!this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,!0)},e}(Ct),Ou=function(t){function e(e){var i=t.call(this)||this;return i._name=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,i,r){return this._doStart(t,e,i,r)},e.prototype.move=function(t,e){},e.prototype.stop=function(t,e){this._doEnd()},e.prototype.drag=function(t,e,i,r){return this._doDrag(t,e,i,r)},e.prototype.drop=function(t,e){try{this._doDrop(t,e)}finally{this._doEnd()}},e.prototype.cancel=function(){try{this._doCancel()}finally{this._doEnd()}},e.prototype.end=function(t){this._doEnd()},e.prototype._doStart=function(t,e,i,r){},e.prototype._doDrag=function(t,e,i,r){return!1},e.prototype._doDrop=function(t,e){},e.prototype._doCancel=function(){},e.prototype._doEnd=function(){},e}(Ct),Ru=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t},enumerable:!0,configurable:!0}),e}(mu),Pu=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(Ru),Du=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"handle",{get:function(){return this._handle},set:function(t){this._handle=t},enumerable:!0,configurable:!0}),e}(Ru),Tu=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),Object.defineProperty(e.prototype,"request",{get:function(){return this._request},set:function(t){this._request=t},enumerable:!0,configurable:!0}),e.prototype.stop=function(){},e.prototype.end=function(t){this._doEnd(t)},e.prototype._doEnd=function(t){},e.prototype.getRequest=function(){return this._request},e}(hl),Lu=function(e){function i(t){var i=e.call(this,t,"mobileBodyScrollTracker")||this;return i._tapX=NaN,i._tapY=NaN,i._vertical=!0,i}return r(i,e),i.prototype._doDispose=function(){this._grid=null,e.prototype._doDispose.call(this)},i.prototype._doStart=function(e,i,r,o){var n=this._grid;if(n.isEditing())switch(n.mobileOptions.scrollOnEditing){case t.ScrollOnEditing.CANCEL:n.cancelEditor(!0);break;case t.ScrollOnEditing.COMMIT:n.commitEditor(!0);case t.ScrollOnEditing.DEFAULT:}return this._tapX=i,this._tapY=r,this._scrolling=void 0,!0},i.prototype._doDrag=function(t,e,i){var r=this._grid,o=e-this._tapX,n=i-this._tapY;if(this._tapX=e,this._tapY=i,this._vertical=Math.abs(2*n)>=Math.abs(o),this._vertical){if(Math.abs(n)>5){var s=r.topIndex,a=r.layoutManager,l=a.fullItemCount,u=r.itemCount,h=n/a.defaultItemHeight;if(h=-(n>0?Math.ceil(h):Math.floor(h)),n=n>0?-1:1,l===u)return this._scrolling=!1,!1;if(void 0===this._scrolling){if(s+l>=u&&1==n||0==s&&-1==n)return this._scrolling=!1,!1;this._scrolling=!0}else this._scrolling&&(r.topIndex=r.topIndex+h)}}else r.leftPos=r.leftPos-o;return!0},i}(Tu),Mu=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doStart=function(t,e,i,r){return!0},e.prototype._doDrag=function(t,e,i){var r=this._grid.pointToIndex(null,e,i,!1);if(r&&r.itemIndex>=0){var o=this.request.handle,n=o.selectionMask.item;n&&n.inflate(o.dir,r)}return!0},e}(Tu),Fu=function(t){function e(e,i){var r=t.call(this,e)||this;return r._touchId=void 0,r._started=null,r._seconded=null,r._startX=NaN,r._startY=NaN,r._tapped=0,r._dragging=!1,r._prevX=NaN,r._prevY=NaN,r._longTapTimer=void 0,r._tracker=null,r._events=[],r._touches=[],r._mobileOptions=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"touchHandler",{get:function(){return this._touchHandler},set:function(t){this._touchHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragHandler",{get:function(){return this._dragHandler},set:function(t){this._dragHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragStartHandler",{get:function(){return this._dragStartHandler},set:function(t){this._dragStartHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragEndHandler",{get:function(){return this._dragEndHandler},set:function(t){this._dragEndHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeHandler",{get:function(){return this._swipeHandler},set:function(t){this._swipeHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tapHandler",{get:function(){return this._tapHandler},set:function(t){this._tapHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleTapHandler",{get:function(){return this._doubleTapHandler},set:function(t){this._doubleTapHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longTapHandler",{get:function(){return this._longTapHandler},set:function(t){this._longTapHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchEndHandler",{get:function(){return this._touchEndHandler},set:function(t){this._touchEndHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchEndt",{get:function(){return this._touchEndt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._mobileOptions},enumerable:!0,configurable:!0}),e.prototype.isSingleTouch=function(){return 1==this._touches.length},e.prototype.clearTouches=function(){this._touches=[]},e.prototype.removeTouches=function(t){for(var e,i,r=0,o=t.length;r<o;r++)e=t[r],(i=this._touches.indexOf(e.identifier))>-1&&this._touches.splice(i,1)},e.prototype.touchStart=function(t){clearTimeout(this._longTapTimer);var e,i=t.changedTouches;if(t.touches.length>1||this._touches.length>0)for(var r=0,o=i.length;r<o;r++)e=i[r],this._touches.push(e.identifier);else i.length>0?(e=this._toOffset(i[0]),this._tracker&&(this._tracker.stop&&this._tracker.stop(e.x,e.y),this._tracker=null),this._touchId=e.identifier,this._touches.push(e.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(t,e.x,e.y)),0==this._tapped?(this._started=ft.getTimer(),this._prevX=this._startX=e.x,this._prevY=this._startY=e.y):(this._seconded=ft.getTimer(),this._prevX=e.x,this._prevY=e.y),this._events=[],this._events.push({x:e.x,y:e.y,t:t.timeStamp}),this._scrollY=window.scrollY,this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(t,this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),this.options.longTapDuration)):alert("no touch ?")},e.prototype.touchMove=function(t){var e=this.$_findTouch(t);if(e&&this.isSingleTouch()){var i=!1;this._dragging&&this._tracker?i=this._dragHandler&&this._dragHandler(this._prevX,this._prevY,e.x,e.y):(Math.abs(this._prevX-e.x)>this.options.tapThreshold||Math.abs(this._prevY-e.y)>this.options.tapThreshold)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,i=this._tracker=this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,e.x,e.y));var r=this._tracker;r instanceof Lu&&r._vertical?r._scrolling?t.preventDefault():ft.isiOS||i&&t.cancelable&&t.preventDefault():(r instanceof dl||i&&t.cancelable)&&t.preventDefault(),this._prevX=e.x,this._prevY=e.y,this._events.push({x:e.x,y:e.y,t:t.timeStamp}),this._events.length>30&&this._events.splice(0,15)}},e.prototype.touchEnd=function(t){if(clearTimeout(this._longTapTimer),void 0===this._touchId)return this._touchEndHandler&&this._touchEndHandler(t),void this.clearTouches();var e=this.$_findTouch(t);if(e&&this.isSingleTouch()){var i=this._container,r=i._currentX=e.x,o=i._currentY=e.y;this._dragging&&this._tracker?(this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe(t)||this._dragEndHandler&&this._dragEndHandler(r,o,!1)):0==this._tapped?(this._tapped=1,this._tapHandler&&this._tapHandler(t,this._startX,this._startY)):1==this._tapped?(this._touchId=void 0,ft.getTimer()-this._started<this.options.doubleTapInterval?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(t,this._prevX,this._prevY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._startY=this._prevY,this._tapHandler&&this._tapHandler(t,this._prevX,this._prevY))):alert("touch end")}else this._dragEndHandler&&this._dragEndHandler(null,null,!1);this._tracker=null,t.touches.length<=0&&this.clearTouches(),this.removeTouches(t.changedTouches),ft.isiOS&&(this._touchEndt=ft.getTimer())},e.prototype.touchCancel=function(t){this.clearTouches(),clearTimeout(this._longTapTimer),this._dragEndHandler&&this._dragEndHandler(null,null,!0),this._tracker=null},e.prototype.$_findTouch=function(t){for(var e=t.changedTouches,i=0;i<e.length;i++){var r=e[i];if(r.identifier==this._touchId)return this._toOffset(r)}return null},e.prototype.$_checkSwipe=function(t){var e=this._events,i=e.length;if(!(i<2)){for(var r=e[i-1],o=e[i-2],n=i-3;n>=0&&!(r.t-o.t>100);n--)o=e[n];var s=o.x,a=o.y,l=r.x,u=r.y,h=Math.sqrt(Math.pow(s-l,2)+Math.pow(a-u,2))/Math.max(16,r.t-o.t);if(h>.1){var c=Math.log(.1/h)/Math.log(.998),d=h*(1-Math.pow(.998,c+1))/(1-.998),p="right",f=Math.round(180*Math.atan2(u-a,l-s)/Math.PI);return f<0&&(f=360+f),f>45&&f<=135?p="bottom":f>135&&f<=225?p="left":f>225&&f<=315&&(p="top"),this._swipeHandler(c,d,p,t)}}},e}(function(t){function e(e){var i=t.call(this)||this;return i._container=e,i}return r(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},e.prototype._touchToOffset=function(t,e){var i=t._containerDom.getBoundingClientRect();return e.x=e.clientX-i.left,e.y=e.clientY-i.top,e},e.prototype._toOffset=function(t){return this._touchToOffset(this._container,t)},e}(Ct)),Nu=(function(t){function e(e){var i=t.call(this)||this;return i._type=e,i}r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0})}(yo),function(t){function e(e,i){var r=t.call(this)||this;return r._inputFocusable=!1,e&&"function"==typeof e.render?(r._impl=e,r._impl.type=i,r.assignFrom(r._impl)):r._impl=null,r._itemClickable=!0,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._impl&&this._impl.type},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},e.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},e.prototype._doRenderCell=function(t,e,i,r,o){var n={};n.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,r,o,n)},e.prototype.preventDefaultEditClick=function(e){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,e):t.prototype.preventDefaultEditClick.call(this,e)},e.prototype._doEditClick=function(e,i,r){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,e,i,r):t.prototype._doEditClick.call(this,e,i,r)},e.prototype.preventDefaultClick=function(e){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,e):t.prototype.preventDefaultClick.call(this,e)},e.prototype._doClick=function(e,i){return this._impl&&this._impl.click?this._impl.click.call(this,i):t.prototype._doClick.call(this,e,i)},e.prototype._doEditKey=function(e,i,r){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,i,r):t.prototype._doEditKey.call(this,e,i,r)},e.prototype.canClick=function(e){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,e):t.prototype.canClick.call(this,e)},e.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):t.prototype.canEdit.call(this)},e.prototype.canEditKey=function(e){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,e):t.prototype.canEditKey.call(this,e)},e}(yo)),Vu=function(t){function e(e,i,r,o){var n=t.call(this)||this;return n._row=e,n._field=i,n._value=r,n._column=o,n._oldValue=ft.deepCopy(e.getData(i)),n}return r(e,t),e.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},e.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},e.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},e}(ei),Bu=function(e){function i(t){var i=e.call(this)||this;return i._editIndex=new rs,i._editors=[],i._starting=!1,i._editRow=-1,i._needPrepare=!1,i._modified=!1,i._commiting=!1,i._canceling=!1,i._resetting=!1,i._dirty=!1,i._editable=!1,i._readOnly=!1,i.$_editFocused=!1,i._resetFocused=!1,i._grid=t,i._defaultEditor=t.delegate.getDefaultCellEditor(),i._defaultEditor&&i._defaultEditor.setController(i),i._defaultEditor&&i._internalHideEditor(i._defaultEditor),i}return r(i,e),i.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,this._editors=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},enumerable:!0,configurable:!0}),i.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},i.prototype.onEditorKeyDown=function(t,e){var i=e.ctrlKey;return this._editor&&(this._editor.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==e.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},i.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},i.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},i.prototype.onEditorChange=function(t){if(this._modified||(this._modified=!0,this._grid._editorStarted(t,this._editIndex)),this.editing){this._grid.makeCellVisible(this._editIndex);var e=t.getEditValue(!1,!1);e=e===ea.Unselected?t.getEditText():e,this._grid._editorChange(t,this._editIndex,e)}},i.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},i.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},i.prototype.onEditorCommit=function(t){return this.commitEditor(!0)},Object.defineProperty(i.prototype,"editIndex",{get:function(){return this._editIndex.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editing",{get:function(){return this._editor&&this._editor.editing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editValue",{get:function(){return this._editor&&this._editor.value},enumerable:!0,configurable:!0}),i.prototype.setFocus=function(t,e){var i;if(e&&(!this._editor||e!==this._editor.editor)){var r=ht(e),o=this._grid,n=void 0,s=null===(i=this._editor)||void 0===i?void 0:i.editor;if((e instanceof r.HTMLInputElement||e instanceof r.HTMLSelectElement)&&(n=o.getTableCell(e))){var a=o.getCellType(n),l=o.getTableView(n),u=l&&l.tableCellByCell&&l.tableCellByCell(n);if("data"===a){var h=this._grid.focusedIndex.clone(),c=this._grid.getBodyCellAt(h,!0),d=c&&c.renderer2;if((d instanceof No||d instanceof Nu)&&d.inputFocusable)return;s&&(s.tabIndex=-1)}else if("inlineFilter"===a){if(o.isItemEditing()&&o.filterPanel.beforeCommit&&o.commit(!1),!o.isEditing())return s&&(s.tabIndex=0),void o.makeColumnVisible(u.layout&&u.layout.firstColumn)}else if(ft.included(a,"header","layoutHeader","footer","summary")&&!u.isClickableElt(e)&&ft.isFocusableTemplate(n,e))return}}this.$_focusToEditor(t,e)},i.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},i.prototype.reprepareEditor=function(t){rs.areEquals(t,this._editIndex)&&(this.editing?this._editor.selectAll():(this._needPrepare=!0,this._prepareEditor(t)))},i.prototype.invalidateEditor=function(){this._dirty=!0},i.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},i.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0))},i.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},i.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t)&&this._prepareEditor(t))},i.prototype.requestPrepareEditor=function(){this._needPrepare=!0},i.prototype.dataColumnChanged=function(t){if(t&&this._editor&&this._editIndex&&this._editIndex.dataColumn===t){var e=!t.isWritable()||t.readOnly;e!=(!this._editable||this._readOnly)&&(this.editing?this._editor.setReadOnly(e):this._prepareEditor(this._editIndex))}},i.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)&&t.item.canEdit()){if(this._editor&&this._editor.editing)return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.editing&&(!this._showEditorTimer&&this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)))return i.editorLender&&i.editorLender.editorShow(t),!0}},i.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i&&this._editable&&!i.editing))return i.dropDownList(!0),!0},i.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},i.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},i.prototype.commitEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!0),!this.editing||this._commiting)return!0;var r=this._editor;if(!r)return!1;var o,n,s=this._grid,a=s.editOptions,l=this._editIndex,u=l.dataColumn,h=!0,c=r._mask;this._commiting=!0;try{if(r.commit(),(this._modified||r.isEdited())&&u&&u.dataIndex>=0)try{try{if((o=c&&!c.checkValid()?ea.InvalidFormat:r.getEditValue(!0,!0))===ea.InvalidFormat)h=!1,a.showInvalidFormatMessage&&c&&c.showInvalidFormatMessage&&alert(c&&c.invalidFormatMessage||a.invalidFormatMessage);else if(o===ea.Unselected)this._modified=!1,h=!0;else{var d={text:r.getEditText(),value:o};this._grid.getEditValue(r,l,d),o=d.value,h=this._grid.editorCommit(l,this._getData(l),o)}}catch(t){h=!1}this._grid.isItemEditing()?h&&o!==ea.Unselected&&(this._setData(l,o),this._grid.isItemEditing(l.item)&&(o=this._getData(l),this._grid.validateCellCommit(l,o)),this._modified=!1):this._modified=!1}catch(t){n=t,h=!1}if(this._resetting=!0,t)try{this._internalHideEditor(r),this._prepareEditor(l,i),r.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(n){if(e)throw n;a.showCommitError&&alert(n.message||n)}}finally{this._commiting=!1}if(h&&s.isCellEditing()){var p=s.itemSource,f=p.editingItem.invalidFields,_=s.validationManager.getError(l);if(_)return f.push(u.dataIndex),a.showCommitError&&alert(_.userMessage||_.message||_),!1;if(f.indexOf(u.dataIndex)>=0&&f.splice(f.indexOf(u.dataIndex),1),s.validationManager.clearInvalidCell(l),f.length>0)return!0;var g=s.canMergeEditing(s.getBodyCellAt(l,!0));if(!p.commit(g))return p.cancel(),!0;s.validationManager.cloneError(-1,l.dataId);var y=rs.temp(s,l.itemIndex,u);if(g){var m=u.layout.merges.getRoom(l),b={},v={};v[u.fieldName]=o;for(var w=m.head;w<=m.tail;w++){var C=s.getItem(w);y.itemIndex=C.index,C.isDataRow&&(b[C.dataRow]=v),s.validationManager.clearInvalidCell(y)}p.updateRows2(b)}}return h},i.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var e=this._grid.itemSource;e.isUpdating&&e.cancel()}}},i.prototype.fillSearchItems=function(t,e,i,r){this.editing&&this._editIndex.column===t&&this._editor instanceof ya&&this._editor.fillItems(e,i,r)},i.prototype.buttonClicked=function(t,e){var i=this._editor,r=this._grid,o=r.getBodyCellAt(t,!1),n=t.layout.getDataColumn();i&&rs.areEquals(this._editIndex,t)&&i.hasButton(r.displayOptions.showNativeEditButton,o.editor||n.editor)&&i.buttonClicked(this._editIndex,e)},i.prototype.buttonDown=function(t,e){this._editor&&this._editor.buttonDown(t,e)},i.prototype.buttonUp=function(t,e){this._editor&&this._editor.buttonUp(t,e)},i.prototype.getData=function(t){return this._getData(t)},i.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},i.prototype.currentEditor=function(){return this._editor},i.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),!this._grid._loading&&this._grid._fireHideEditor(t.editIndex),this._grid.editorLender&&this._grid.editorLender.editorHide(this._editIndex)},i.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},i.prototype.$_getCellEditor=function(t){var e,i=this._grid;if(i.editorLender)e=i.editorLender.getEditor(t);else{var r=i.getBodyCellAt(t);e=r&&r.editor}if(!e){var o=t.valueColumn;o&&(e=o.editor)}var n=i.delegate.getCellEditor(ea.getEditorType(e));return n&&(n.initOptions(),e&&n.applyOptions(e),n.setController(this)),n},i.prototype.resetEditable=function(e){var i=this._editor;if(!i)return!1;var r=this._grid;if(i.setReadOnly(!1),r.editorLender)return this._editor.setEditIndex(e),this._editable=!0,!0;var o=r.editorOptions,n=e.valueColumn,s=e.item,a=r.canEditAt(e);if(o._titleExprStatement&&this._editor.setEditorTitle(e),!a)return this._editable=!1,this.$_hideEdit(e,this._editor),!1;var l=!r.canWriteAt(e);if(!l){var u=s.dataSource,h=u?u.getField(e.dataField):null;l=!h||h.dataType==t.ValueType.OBJECT&&null==(n.objectKey||h.objectKey)}return this._readOnly=l,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(e),this._editable=!0,!0},i.prototype._prepareEditor=function(t,e){void 0===e&&(e=!0);var i=this._grid,r=i.editOptions;if((i.active||i.editorLender)&&(this._dirty=!1,this._grid.isValid(t)&&t.item.canEdit()&&(this._hideEditor(e),this._editor=this.$_getCellEditor(t),this._editor))){this._editIndex.assign(t);var o=this._getData(t);this.resetEditable(t)?(this._editor.prepare(),this._editor.setEditValue(o),this._editor.selectAll(),r.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=setTimeout(function(){i.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),e&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(o))}},i.prototype._hideEditor=function(t){if(void 0===t&&(t=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,t&&this.$_focusToEditor()}},i.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var r=this._editor;r&&(r.endEdit(),this._resetBounds(),r.setVisible(!0,!0),r.beginEdit(t,e),t&&r.clear(),e&&r.selectAll(),i&&r.dropDownList(!1),this.$_focusToEditor(!0))},i.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e){for(var i in t)"callback"!=i&&e._editor.setAttribute(i,t[i]);"function"==typeof t.callback&&t.callback()}},i.prototype._editorActivated=function(t){this._grid.editorActivated(t)},i.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var r=this._grid,o=this._editor,n=this._editIndex,s={},a={};if(this._editable&&o&&!o.editing&&r.$_canShowEditor(n,s,a)){s.type&&(o=this._editor=r.delegate.getCellEditor(ea.getEditorType(s.type))||o),ft.isEmpty(s)||(o.applyOptions(s),o.setEditIndex(n));var l=o._editor;return o.textReadOnly?o.textReadOnly&&l&&(l.readOnly=o.textReadOnly):o.setReadOnly(this._readOnly),this._initEditor(t,e,i),ct(l).activeElement!==l&&(!ft.isMobile()||!o.hasList)&&l.focus(),this._modified=!1,this._editorActivated(this._editor),this.$_setEditorAttrs(a),!0}return!1},i.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditCellBounds(this._editor,this._editIndex),e=this._grid.getEditBounds(this._editor,this._editIndex).width;t.x--,t.y--,t.width++,t.height++,ft.isMobile()&&(t.y-=1,t.height+=2),this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height),t.x<0&&(this._resetFocused=!0)}},i.prototype.$_focusToEditor=function(t,e){var i=this._grid;if(t||i.$_editFocused){var r=this._editor||this._defaultEditor;i.$_showFocusCell=i.$_showFocusCell||e&&r&&e!==r._editor,i.container._setFocusAndScroll(r),this.editing||this._editor&&this._editor.selectAll()}},i.prototype.$_focusToContainer=function(){},i.prototype._getData=function(t){var e=t.dataColumn,i=t.item;if(e&&i&&i.isDataRow){var r=e.dataIndex;if(r>=0)return i.getData(r)}},i.prototype._setData=function(t,e){var i=t.item;if(i){var r=t.dataColumn.dataIndex;r>=0&&(this._grid.undoable?this._grid.execute(new Vu(t.item,r,e,t.column)):i.setData(r,e))}},i.prototype._isEditKey=function(t){return 8==t||t>=46&&t<=90||t>=96&&t<=111||t>=186&&t<=222||13==t&&this._grid.editOptions.enterToEdit},i}(Ct),Au=function(t){function e(e,i,r){var o=t.call(this,e,i,r)||this;return o._col=-1,o._colChanged=!1,o}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getCellIndex=function(t){return t.parentElement[f]},e.prototype._createDom=function(){return null},e.prototype._prepareContent=function(t,e){var i=ct(t).createElement("div");return this._prepareCellContent(i,t),i},e.prototype._clearCellContent=function(t){var e=t.firstElementChild;e&&ft.detach(e)},e.prototype._prepareCellContent=function(t,e){},e.prototype._updateCellContent=function(t,e,i,r){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},e.prototype._layoutCell=function(t,e,i){if(this._colChanged){i.removeAttribute("rowspan"),i.style.removeProperty("display");var r=i.firstElementChild;this._clearCellContent(r),this._prepareCellContent(r,i)}},e.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},e.prototype.$_getCellSelector=function(t,e){var i=this.model.cellStyleCallback,r=this.grid,o=t.parentElement[f],n=r.getItem(o),s=r.getCellType(t);if(i){var a=i(this.grid.handler,s,null==n?void 0:n.index);return a?" "+a:""}return""},e}(Da),$u=function(e){function i(t,i){return e.call(this,t,i,"rowIndicatorView")||this}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},i.prototype.refresh=function(t,e){for(var i=0;i<e;i++){var r=this._getTableCell(i);r.$_foc=t.isFocusedRow(r.parentElement[f]),ft.setClassName(r,this.$_getCellSelector(r))}},i.prototype._getCssSelector=function(){return"rg-rowindicator"},i.prototype.measureWidth=function(t){var e=this.model,i=e.width;if(0==i&&t.dataSource){var r=t.dataSource.rowCount+"";i=t.container.measureText("rg-rowindicator-cell",r)+1}return i=Math.max(e.minWidth>0?e.minWidth:i,Math.min(e.maxWidth>0?e.maxWidth:i)),e._displayWidth=i,i},i.prototype._layoutCell=function(t,i,r){if(e.prototype._layoutCell.call(this,t,i,r),i){var o=this.model.getCell(i);ft.setClassName(r,this.$_getCellSelector(r)),this._updateCellContent(t,o,r.firstElementChild,r)}},i.prototype.$_getCellSelector=function(i,r){var o=this.grid,n=i.parentElement[f],s=i.$_foc,a=this.model,l="rg-rowindicator-cell";if(-99===n)return ka.ROW_BAR_CELL_STYLE;if(s){l+=a.showFocus?" rg-rowindicator-focus":"";var u=o.getItem(n);ft.isDebugging();var h=u&&u.itemState;fr(h)?l+=" rg-rowindicator-inserting":h==t.ItemState.UPDATING&&(l+=" rg-rowindicator-editing")}else o.isSelectedItem(n)&&a.showSelection&&(l+=" rg-rowindicator-select");return l+e.prototype.$_getCellSelector.call(this,i,r)},i}(Au),ju=function(e){function i(t,i){var r=e.call(this,t,i,"stateBarView")||this;return r._textMark=!1,r}return r(i,e),i.prototype.rowOf=function(t){return t.parentElement[f]},i.prototype._getCssSelector=function(){return"rg-statebar"},i.prototype.measureWidth=function(t){return t.stateBar.width},i.prototype._layoutCell=function(i,r,o){if(e.prototype._layoutCell.call(this,i,r,o),r){var n=this.model,s=n.mark,a=s==t.StateMark.IMAGE;this._textMark=s==t.StateMark.TEXT;var l=n.getCell(r);ft.setClassName(o,this.$_getCellSelector(o,a)),this._updateCellContent(i,l,o.firstElementChild,o)}},i.prototype._updateCellContent=function(t,e,i,r){i[ft.TextProp]=this._textMark&&e.text||""},i.prototype.$_getCellSelector=function(i,r){var o=this.grid,n=o.getItem(i.parentElement[f]),s=n.dataRow,a="rg-statebar-cell ";if(o.isItemEditing(n)&&this._error&&this.model.errorVisible)switch(this._error.level){case t.ValidationLevel.INFO:a+=" rg-statebar-info";break;case t.ValidationLevel.WARNING:a+=" rg-statebar-warning";break;case t.ValidationLevel.ERROR:a+=" rg-statebar-error"}else if(s>=0&&r)switch(n.rowState){case t.RowState.UPDATED:a+=" rg-statebar-updated";break;case t.RowState.CREATED:a+=" rg-statebar-created";break;case t.RowState.DELETED:a+=" rg-statebar-deleted";break;case t.RowState.CREATE_AND_DELETED:a+=" rg-statebar-create-and-deleted"}return a+e.prototype.$_getCellSelector.call(this,i,r)},i}(Au),Hu=function(t){function e(e,i){var r=t.call(this,e,i,"checkBarView")||this;return r._fixedCount=0,r._prevChecked=-1,r._exclusive=!1,r._typeChanged=!1,r._useImage=!1,r._imageChanged=!1,r}return r(e,t),e.prototype.rowOf=function(t){return t.parentElement[f]},e.prototype._getCssSelector=function(){return"rg-checkbar"},e.prototype._doPrepareContent=function(t){var e=t.grid.checkBar;(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},e.prototype._clearCellContent=function(e){e[this._textProp]="",t.prototype._clearCellContent.call(this,e)},e.prototype._prepareCellContent=function(t,i){var r=ct(t),o=e.FOR_ID+this.rowOf(i),n=r.createElement("input"),s=n.style;n.type=this._exclusive?"radio":"checkbox",n.id=o,n.tabIndex=-1,n.className=this._exclusive?"rg-radio":"rg-checkbox",s.display=this._useImage?"none":"inline-block",t.appendChild(n);var a=r.createElement("span");(s=a.style).display=this._useImage?"inline-block":"none",t.appendChild(a);var l=r.createElement("label");l.setAttribute("for",o),(s=l.style).display="none",t.appendChild(l)},e.prototype.measureWidth=function(t){return this.model.width},e.prototype._layoutCell=function(e,i,r){t.prototype._layoutCell.call(this,e,i,r);var o=i&&this.model.getCell(i);ft.setClassName(r,this.$_getCellSelector(r)),r.style.display="",r.removeAttribute("rowspan");var n=e.fixedOptions.rowCount,s=e.checkBar;if(s._merged&&i){var a=s._merges,l=i.itemIndex;if(l=l<n?l:l-e.layoutManager.topIndex,a.isMerged(l,n))if(a.isHidden(l,n))r.style.display="none",r.removeAttribute("rowspan");else{var u=a.getMerged(l,n);r.rowSpan=u}else r.removeAttribute("rowspan")}o&&this._updateCellContent(e,o,r.firstElementChild.firstElementChild,r)},e.prototype._updateCellContent=function(t,i,r,o){var n=i.item,s=r,a=t.checkBar,l=e.FOR_ID+this.rowOf(o);s.checked=n&&n.checked,s.disabled=n&&!n.checkable,s.id=l,o.firstElementChild.style.display=n instanceof yr||n instanceof Go||a.showGroup&&a.fieldIndex<0&&!a.merged?"":"none";var u=this._useImage;this._typeChanged&&(s.setAttribute("type",this._exclusive?"radio":"checkbox"),s.className=this._exclusive?"rg-radio":"rg-checkbox");var h=s.nextElementSibling;if(this._imageChanged&&h&&(s.style.display=u?"none":"inline-block",h.style.display=u?"inline-block":"none"),u&&h){var c=s.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked";c+=s.disabled?" disabled":"",h.className=c}var d=h.nextElementSibling;d.removeAttribute("for"),d.setAttribute("for",l),d[ft.TextProp]=this.rowOf(o)+1+" row "+(n&&n.checkable?n.checked?"checked":"unchecked":"check disable")},e.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},e.prototype.$_getCellSelector=function(i,r){var o=e.CELL_CSS,n=i.parentElement[f],s=this.grid.getItem(n);return(o+=s&&s.checkable?"":" rg-checkbar-disabled")+t.prototype.$_getCellSelector.call(this,i,r)},e.prototype.$_setPrevChecked=function(t){this._prevChecked=t},e.FOR_ID="$$-check-bar-cell",e.CELL_CSS="rg-checkbar-cell",e}(Au),Wu=function(t){function e(e){var i=t.call(this,e.doc,null,"rowBarContainer")||this;i._count=0;var r=e.doc;return i._bars=[e.rowIndicator,e.stateBar,e.checkBar],i.addChild(i._indicatorView=new $u(r,e.rowIndicator)),i.addChild(i._stateView=new ju(r,e.stateBar)),i.addChild(i._checkView=new Hu(r,e.checkBar)),i._views=[i._indicatorView,i._stateView,i._checkView],i}return r(e,t),e.prototype._doDispose=function(){this._bars=this._views=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowIndicator",{get:function(){return this._indicatorView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateBar",{get:function(){return this._stateView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBar",{get:function(){return this._checkView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t},enumerable:!0,configurable:!0}),e.prototype.isVisible=function(){return this._indicatorView.visible||this._stateView.visible||this._checkView.visible},e.prototype.getCellIndex=function(t){return t.parentElement[f]},e.prototype.refresh=function(t){this._indicatorView.visible&&this._indicatorView.refresh(t,this._count)},e.prototype.rowOf=function(t){return t.parentElement[f]},e.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},e.prototype.getCellType=function(t){var e=this._views[t.cellIndex];return e instanceof $u?"indicator":e instanceof ju?"state":e instanceof Hu?"check":void 0},e.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof $u},e.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},e.prototype._isFixedHeight=function(){return!0},e.prototype._doPrepareContent=function(e){if(this._views.length){this._dom.appendChild(this._table);for(var i=0,r=this._views;i<r.length;i++)r[i]._doPrepareContent(e)}else ft.detach(this._table);t.prototype._doPrepareContent.call(this,e)},e.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},e.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return i>0&&e>i?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},e.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var r=0,o=0,n=this._views;o<n.length;o++){var s=n[o];r+=s.width=s.measureWidth(t)}return new Ra(r,i)},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=t.topIndex,r=t.itemCount,o=t.fixedItemCount,n=this._count=o+r,s=this._bars.length,a=e.focusedRow,l=this._views,u=this._thead,h=u&&u.children[0],c=e.displayOptions.useAlternateRowStyle,d=0;d<n;d++){var p=d<o?d:d+i,_=rs.temp(e,p),g=this._getTableRow(t,d);ft.setClassName(g,this.getStyleName(_.item,_.itemIndex%2&&c)),g[f]=p;for(var y=0;y<s;y++){var m=g.cells[y];if(m.$_foc=p==a,l[y]._layoutCell(e,_,m),0===d&&h){var b=h.cells[y];b&&(b[ft.TextProp]=this.getCellType(m)+" column")}}}o>0&&this._layoutFixedBar(e.fixedOptions,o)},e.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return this._bars.length},e.prototype._getCellWidth=function(t,e){return this._views[e].width},e.prototype.$_prepareBars=function(t){var e=this._bars=[],i=this._views=[];t.rowIndicator.visible&&e.push(t.rowIndicator),t.stateBar.visible&&e.push(t.stateBar),t.checkBar.visible&&e.push(t.checkBar),e.length>1&&e.sort((function(t,e){var i=t.displayOrder,r=e.displayOrder;return i==r?t.staticOrder-e.staticOrder:i-r}));for(var r=0,o=e.length;r<o;r++){var n=e[r],s=void 0;(s=n instanceof Es?this._indicatorView:n instanceof Os?this._stateView:this._checkView).$_setCol(r),s._colChanged=s._colChanged||n.visChanged,i.push(s),n.visChanged=!1}this._indicatorView.visible=i.indexOf(this._indicatorView)>=0,this._stateView.visible=i.indexOf(this._stateView)>=0,this._checkView.visible=i.indexOf(this._checkView)>=0},e.prototype._layoutFixedBar=function(t,e){var i=this._tbody.children[e];i.$_idx=e,i[f]=-99,ft.setClassName(i,ka.ROW_BAR_STYLE);for(var r=0;r<i.childElementCount;r++){var o=i.children[r];o.$_foc=!1;var n=this._views[r];n._colChanged&&n._layoutCell(this.grid,null,o),ft.setClassName(o,ka.ROW_BAR_CELL_STYLE)}},e.prototype.getStyleName=function(t,i){var r=e.ROW_STYLE;return r+=Sa.STATE_ROW_STYLES[t.rowState]||"",(r+=i?e.ALTERNATE_ROW_STYLE:"").trim()},e.ROW_STYLE="rg-row-bar",e.ALTERNATE_ROW_STYLE=" rg-alternate-row-bar",e}(Fa),Gu=function(t){function e(e,i){var r=t.call(this,e.doc,"mobileSelectionHandle")||this;return r._dir=i,r._owner=e,r}return r(e,t),e.prototype._doDispose=function(){this._owner=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"selectionMask",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return e.STYLE_NAME+this._dir+"-handle"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.background="red"},e.prototype._doDraw=function(){},e.STYLE_NAME="rg-selection-handle",e}(Bs),Uu=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype._doDispose=function(){},e.prototype.getSelectHandle=function(t){for(var e in this._views){var i=this._views[e];if(i.leftHandle._dom===t)return i.leftHandle;if(i.topHandle._dom===t)return i.topHandle;if(i.bottomHandle._dom===t)return i.bottomHandle;if(i.rightHandle._dom===t)return i.rightHandle}},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new zu(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=(this._grid.selections,new $);for(var i in this._views){var r=this._views[i],o=r.item,n=!1,s=new $;if(r.prepare(),o instanceof Ks||o instanceof Xs||(n=this.$_getMobileSelectionRangeRect(t,o,r,s,e)),n){var a=t.footerBounds.y+t.contentBounds.y;s.bottom>a&&(r._bottomed=!0,s.bottom=a)}r.visible=n,r.visible&&(r.setRectI(s),r.updateElement(),this._layoutHandle(r,s,e),r.invalidate(!1,!0))}},e.prototype._layoutHandle=function(t,e,i){var r,o,n=13,s=13;t._lefted?t.leftHandle.visible=!1:(t.leftHandle.visible=!0,r=i.x-6.5,o=e.y+(e.height-n)/2,t.leftHandle.setBounds(r,o,s,n)),r=i.x+(i.width-s)/2,o=e.y-6.5,!t._toped&&r>=e.x?(t.topHandle.visible=!0,t.topHandle.setBounds(r,o,s,n)):t.topHandle.visible=!1,o=e.bottom-6.5,!t._bottomed&&r>=e.x?(t.bottomHandle.visible=!0,t.bottomHandle.setBounds(r,o,s,n)):t.bottomHandle.visible=!1,t._righted?t.rightHandle.visible=!1:(t.rightHandle.visible=!0,r=i.right-6.5,o=e.y+(e.height-n)/2,t.rightHandle.setBounds(r,o,s,n))},e.prototype.$_getMobileSelectionRowsRect=function(e,i,r,o){return t.prototype.$_getSelectionRowsRect.call(this,e,i,r,o)},e.prototype.$_getMobileSelectionColumnsRect=function(e,i,r,o){return t.prototype.$_getSelectionColumnsRect.call(this,e,i,r,o)},e.prototype.$_getMobileSelectionRangeRect=function(e,i,r,o,n){return t.prototype.$_getSelectionRangeRect.call(this,e,i,r,o,n)},e}(Zs),zu=function(t){function e(e){var i=t.call(this,e)||this;return i._leftHandle=new Gu(i,"left"),i._topHandle=new Gu(i,"top"),i._bottomHandle=new Gu(i,"bottom"),i._rightHandle=new Gu(i,"right"),i}return r(e,t),e.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"leftHandle",{get:function(){return this._leftHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topHandle",{get:function(){return this._topHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomHandle",{get:function(){return this._bottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightHandle",{get:function(){return this._rightHandle},enumerable:!0,configurable:!0}),e.prototype.prepare=function(){t.prototype.prepare.call(this)},e.prototype.updateElement=function(){t.prototype.updateElement.call(this)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},e}(Js),Yu=function(){function t(){}return t.getData=function(e){var i=new t;return i.cellType=e,i},t.getSub=function(e,i){var r=new t;return r.cellType=e,r.subType=i,r},t.getField=function(e,i,r){var o=new t;return o.cellType=e,o.field=o.fieldIndex=i,o.fieldName=r,o},t.getItem=function(e,i,r){var o=new t;return o.cellType=e,o.itemIndex=i,null!=r&&(o.dataRow=r),o},t.getLayout=function(e,i){var r=new t;return r.cellType=e,i instanceof jn?(r.subType="layoutHeader",r.column=i.name):(r.column=i.firstColumn&&i.firstColumn.name,i.firstColumn instanceof Tn&&(r.field=r.fieldIndex=i.firstColumn.dataIndex,r.fieldName=i.firstColumn.fieldName)),r},t.getCell=function(e,i,r){var o=new t;"data"===e&&(o.editable=i.editable,o.readOnly=i.readonly);var n=i.layout;return o.cellType=e,o.itemIndex=r?r.itemIndex:i.item.index,o.dataRow=r?r.dataRow:i.item.dataRow,o.column=i.layout.firstColumn&&i.layout.firstColumn.name,n.firstColumn instanceof Tn&&(o.field=o.fieldIndex=n.firstColumn.dataIndex,o.fieldName=n.firstColumn.fieldName),o},t.getGroupFooter=function(e,i,r,o){var n=new t,s=r.firstColumn;return n.cellType=e,n.itemIndex=i,n.index=o,n.column=s&&s.name,s instanceof Tn&&(n.field=n.fieldIndex=s.dataIndex,n.fieldName=s.fieldName),n},t.getSummary=function(e,i,r){var o=new t;return o.cellType=e,o.index=i,o.column=r.firstColumn&&r.firstColumn.name,r.firstColumn instanceof Tn&&(o.field=o.fieldIndex=r.firstColumn.dataIndex,o.fieldName=r.firstColumn.fieldName),o},t.getGroupElt=function(e,i){var r=new t;return r.cellType=e,r.groupLevel=i,r},t}(),qu=function(t){function e(e,i){var r=t.call(this,e,"focusView")||this;return r._editing=!1,r._focusType="layer",r._inner=i,r}return r(e,t),Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))},enumerable:!0,configurable:!0}),e.prototype.$_createLine=function(t){function e(t,e,i){var r=t.createElement("div");r.className=e?"rg-focus-inner-line":"rg-focus-line";var o=r.style;return o.display="none",o.position="absolute",o.boxSizing="border-box",o.left="0px",o.top="0px",1!==i&&(o.borderTop="none"),2!==i&&(o.borderBottom="none"),3!==i&&(o.borderLeft="none"),4!==i&&(o.borderRight="none"),r}var i=ct(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},e.prototype.$_typeChanged=function(t){var e=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===t?(e.height="0px",e.width="0px",e.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(e.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},e.prototype.$_linePosition=function(t,e,i,r){var o=this._topLine.style,n=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,u=this.parent.height;n.left=o.left=-t+"px",n.width=o.width=l+t+"px",n.top=r-2+"px",a.height=s.height=u+"px",a.left=i-2+"px",n.display=u<r?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},e.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this.resetStyleName())},e.prototype.setActivated=function(t){this._setClassName(null)},e.prototype._getCssSelector=function(){return(this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus")+(this.container._focused?"":" rg-deactive-focus")},e.prototype.setBounds=function(e,i,r,o){if("line"===this._focusType){var n=this._dom.style;n.left=e+"px",n.top=i+"px",this.width=r,this.height=o,this.$_linePosition(e,i,r,o)}else this.x++,t.prototype.setBounds.call(this,e,i,r,o)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e.prototype._beforeDraw=function(e){if("line"===this._focusType){this._setClassName(e);var i=e.style;i.left=this.x+"px",i.top=this.y+"px"}else t.prototype._beforeDraw.call(this,e)},e}(As),Ku=function(t){function e(e,i){void 0===i&&(i=!1);var r=t.call(this,e,"focusMask")||this;return r._focusType="layer",r._focusView=new qu(e,i),r.addChild(r._focusView),r}return r(e,t),e.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))},enumerable:!0,configurable:!0}),e.prototype.$_typeChanged=function(t){var e=this._dom.style;"line"===t?(e.removeProperty("overflow"),e.width="0px",e.height="0px"):(e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px")},e.prototype.updateElement=function(t,e,i,r,o){this._focusView.setBounds(t,e,i,r),this._focusView.setEditing(o,0,!1)},e.prototype.setActivated=function(t){this._focusView.setActivated(t)},e.prototype._getCssSelector=function(){return"rg-focus-mask"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},e.prototype._beforeDraw=function(e){if("line"===this._focusType){this._setClassName(e);var i=e.style;i.left=this.x+"px",i.top=this.y+"px"}else t.prototype._beforeDraw.call(this,e)},e.prototype.setRect=function(e){"line"===this._focusType?e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height||(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):t.prototype.setRect.call(this,e)},e}(As),Xu=function(t){function e(e){var i=t.call(this,e,"rowBlockView")||this;return i.visible=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowblock"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(As),Qu=function(t){function e(e){return t.call(this,e,"headerCellResizer")||this}return r(e,t),e.prototype._getCssSelector=function(){return"_rg-col-resizer_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(As),Ju=function(t){function e(e){var i=t.call(this,e,"headerCellFeedback")||this;return i._modelChanged=!1,i.dragging=!1,i}return r(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{set:function(t){this._model=t,this._modelChanged=!0},enumerable:!0,configurable:!0}),e.prototype._createDom=function(t){var e=t.createElement("table");e.setAttribute("aria-hidden","true");var i=e.createCaption();i.textContent="grid table feedback",i.style.width=i.style.height="0px",i.style.padding="none",i.style.boxSizing="border-box",i.style.overflow="hidden",e.style.setProperty("table-layout","fixed","important");var r=t.createElement("tbody");e.appendChild(r);var o=t.createElement("tr");r.appendChild(o);var n=this._cell=t.createElement("td");return o.appendChild(n),n.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},e.prototype._getCssSelector=function(){return"rg-table"},e.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(Za.renderCell(this._model,this._cell),this._modelChanged=!1)},e}(As),Zu=function(t){function e(e){return t.call(this,e,"headerCellMover")||this}return r(e,t),e.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e.prototype._doDraw=function(t){},e}(As),th=function(t){function e(e){return t.call(this,e,"rowMoverLine")||this}return r(e,t),e.prototype._getCssSelector=function(){return"_rg-row-mover-line_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(As),eh=function(t){function e(e){var i=t.call(this,e,"rowMover")||this;return i._enabled=!0,i._label="1\ud589 \uc774\ub3d9",i}return r(e,t),e.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},e.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},e.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),e.style.whiteSpace="nowrap"},e.prototype._setSizeStyle=function(t){},e.prototype._doDraw=function(t){t[ft.TextProp]=this._label},e}(As),ih=function(e){function i(t,i){var r=e.call(this,t,i)||this;r._rowBlockStart=-1,r._rowBlockEnd=-1;var o=t.doc,n=r._grid=t.gridView;return r._skipIndex=n.getIndex(),r._tempIndex=n.getIndex(),r._tempInnerIndex=n.getIndex(),n.addFeedbackElement(r._rowBlockMask=new Xu(o)),n.addFeedbackElement(r._rowFocusView=new oh(o)),n.addFeedbackElement(r._focusMask=new Ku(o)),n.addFeedbackElement(r._innerFocusMask=new Ku(o,!0)),r}return r(i,e),i.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._grid=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"focused",{get:function(){return this._grid.focusedIndex},enumerable:!0,configurable:!0}),i.prototype.setFocused=function(t,e,i){var r=this._grid;if(r.isValid(t)){var o=r.getItem(t.itemIndex);return!r.isEditing()&&o instanceof Ir&&r.append(),this._grid.setFocusedIndex(t,e,!0,i)}return!1},i.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this.$_resetFocusButton(this.grid.focusedIndex),this._doLayoutChanged()},i.prototype.resetFocused=function(){this.$_resetFocusView()},i.prototype.focusedIndexChanging=function(t){},i.prototype.focusedIndexChanged=function(t,e){var i=this.grid,r=i.layoutManager,o=r.fixedItemCount,n=e.itemIndex;this.grid.setFocusedClass(t,!1),t.itemIndex!==e.itemIndex&&this.grid.setFocusedRowClass(t,!1),(!this.grid.isValid(e)||o>0&&n<o||n>=r.topIndex+o&&n<=o+r.topIndex+r.fullItemCount)&&this.$_resetFocusView(),!i.isEditing()&&e.item instanceof Ir&&i.append()},i.prototype.currentRowChanged=function(e,i){var r=this.grid,o=r.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,o.rowBlockType!=t.RowMaskType.NONE){var n,s=o.rowBlockCallback;s&&((n=s(r.handler,r.getItemIndexOfRow(i)))?(this._rowBlockStart=n.start,this._rowBlockEnd=n.end):this._rowBlockStart=this._rowBlockEnd=-1)}this.$_resetRowBlockMask()},i.prototype.getNextRequest=function(t,e,i,r){return null},i.prototype.isMouseEventTarget=function(t){if(t instanceof Na){var i=t.getAncestor(La);if(i)return i.getContentAt(t.index)==this.mouseEventTarget}return e.prototype.isMouseEventTarget.call(this,t)},i.prototype._doSetFocus=function(t){!ft.isMobile()&&this.grid.setFocus(t),this._focusMask.setActivated(this.grid.container._focused)},i.prototype._doFocusLeave=function(t){this.grid._resetTdFocus=void 0,this.grid.editOptions.commitWhenLeave&&(this.grid.isEditing()||this.grid.isItemEdited())&&this.grid.commit(!1,void 0,!1),this._focusMask.setActivated(this.grid.container._focused)},i.prototype._doLayoutChanged=function(){},i.prototype.$_resetFocusView=function(){var e=this._grid,i=e.layoutManager,r=e.displayOptions,o=e.focusedIndex,n=this._tempInnerIndex.assign(o),s=!1,a=!1,l=!1;if(r.focusVisible&&e.isValid(n)&&!e.isEditing()){var u=n.item,h=e.getBodyViewAt(n),c=h.getCellAt(i,n),d=c;if(!c&&n.layout.merged){var p=i.getMergeRoom(n);p&&(n.itemIndex=i.fixedItemCount+i.topIndex,p.contains(n)&&(c=h.getCellAt(i,n)),c||(n.itemIndex=i.fixedItemCount+i.topIndex+i.itemCount-1,p.contains(n)&&(c=h.getCellAt(i,n))))}if(c&&!c.grouped){var f=e.isEditing(),_=h.getCellRectAt(i,n,!0);if((_=h.boundsByContainer(_)).width>0&&_.height>0){var g=0,y=_.width;if(!n.colFixed&&!n.rightFixed){var m=i.fixedContentBounds;g=Math.max(0,m.right-_.x),y=Math.max(0,_.width-g),m=i.rightContentBounds,y-=_.right-m.x}if(y>0){f&&(_.y--,_.height+=1);var b=_.clone();if((m=i.footerBounds.clone()).y+=i.contentBounds.y,Math.max(0,_.bottom-m.y),_.width=Math.min(_.width,y),_.x+=g,_.bottom=Math.min(_.bottom,m.y),this._focusMask.setRect(_),this._focusMask.focusType=r.focusType,this._focusMask.updateElement(-g,0,b.width,b.height,f),s=!0,e.canMergeEditing(d),d&&d.merged){if(r.showInnerFocus&&(x=h.getCellRectAt(i,n,!1)).height<_.height){this._innerFocusMask.focusType=r.focusType,x.height=Math.min(x.height,_.height);var v=(x=h.boundsByContainer(x)).width-8,w=x.height-8;x.bottom=Math.min(_.bottom+4,x.bottom),this._innerFocusMask.setRect(x.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,v,w,f),l=!0}}else{var C=h.getCellAt(i,n);if(C&&C.renderer2&&C.editable&&C.renderer2.canShowInnerFocus()){var x=h.getCellRectAt(i,n,!1);v=(x=h.boundsByContainer(x)).width-8,w=x.height-8,x.bottom=Math.min(_.bottom+4,x.bottom),this._innerFocusMask.setRect(x.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,v,w,f),l=!0}}}}}else if(!u.isData){var I=e.getRowView(h,u);I&&(_=I.boundsByContainer(),this._focusMask.updateElement(0,0,_.width,_.height,!1),_.x<i.leftContentBounds.right&&(_.x=i.leftContentBounds.right,_.width-=i.leftContentBounds.right-_.x),this._focusMask.setRect(_),s=!0)}}var S=r.rowFocusType;if(S!=t.RowMaskType.NONE){var E=i.footerBounds.y+i.contentBounds.y,k=i.fixedItemCount,O=n.itemIndex;if((O=O>=k?O-i.topIndex:O)>=0&&O<=i.itemCount-1){switch((_=i.getTableItemBounds(O)).y+=i.contentBounds.y+i.bodyBounds.y,_.bottom>E&&(_.bottom=E),S){case t.RowMaskType.DATA:_.x=e.fixedContentPane.x,_.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case t.RowMaskType.FILL:_.x=0,_.width=e.width;break;case t.RowMaskType.ROW:_.x=0,_.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}this._rowFocusView.setRect(_),a=!0}else a=!1}this._rowFocusView.visible=a,this._focusMask.visible=s,this._innerFocusMask.visible=l,this._focusMask.visible,e.setFocusedClass(o,!0),e.setFocusedRowClass(o,!0)},i.prototype.$_resetRowBlockMask=function(){var e=this.grid,i=e.layoutManager,r=i.fixedItemCount,o=e.topItem,n=this._rowBlockMask,s=e.displayOptions.rowBlockType,a=this._rowBlockStart,l=this._rowBlockEnd,u=Math.max(a-o+r,r),h=Math.min(Math.max(l-o+r),i.itemCount+r-1);if(n.visible=s&&s!=t.RowMaskType.NONE&&u>=0&&h>=0&&u<i.itemCount&&u<=h&&a!==l,n.visible){var c=i.footerBounds.y+i.contentBounds.y,d=i.getTableItemBounds(u),p=i.getTableItemBounds(h);switch((d=d.union(p)).y+=i.contentBounds.y+i.bodyBounds.y,d.bottom>c&&(d.bottom=c),s){case t.RowMaskType.DATA:d.x=e.fixedContentPane.x,d.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right;break;case t.RowMaskType.FILL:d.x=0,d.width=e.width;break;case t.RowMaskType.ROW:d.x=0,d.right=e.rightContentPane.width?e.rightContentPane.right:e.contentPane.right}n.setRect(d)}},i.prototype.$_resetFocusButton=function(t){var e,i=this.grid;if(i.isValid(t)){var r=i.getBodyViewAt(t),o=i.getBodyCellAt(t),n=this._tempIndex.assign(t);if(!o&&n.layout.merged){var s=i.layoutManager;(e=s.getMergeRoom(n))&&(n.itemIndex=s.fixedItemCount+s.topIndex,e.contains(n)&&(o=i.getBodyCellAt(n)),o||(n.itemIndex=s.fixedItemCount+s.topIndex+s.itemCount-1,e.contains(n)&&(o=i.getBodyCellAt(n))))}var a=r&&o&&r.getRowView(o.item);a&&a.$_setButtons(i,o,o.cell.firstElementChild,e)}},i.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},i.prototype._doEnter=function(t,e,i,r){var o=t.isEditing(),n=r.shiftKey;if(o&&!e.enterToTab)t.commitEditor(!0);else{var s=i.clone(),a=e.skipReadOnly,l=e.skipReadOnlyCell;if(t.isValid(s))if(e.enterToNextRow&&(!n&&s.itemIndex<t.itemCount-1||n&&s.itemIndex>0))n?s.up():s.down(),l&&this._checkReadOnly(s)&&(this._skipReadOnlyCell(s,n?-1:1)||s.assign(i));else if(!n&&(!e.enterToEdit||o)&&e.enterToTab&&e.crossWhenExitLast&&(s.isLast||e.skipReadOnly&&s.isEditableLast)&&s.itemIndex<t.itemCount-1)s.down(),s.firstCell(),a&&this._skipReadOnly(s,1);else if(n&&(!e.enterToEdit||o)&&e.enterToTab&&e.crossWhenExitLast&&(s.isFirst||e.skipReadOnly&&s.isEditableFirst)&&s.itemIndex>0)s.up(),s.lastCell(),a&&this._skipReadOnly(s,-1);else if((!o||e.enterToTab)&&e.commitWhenExitLast&&s.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof Jo&&(i=t._fireValidationFail(s.item.index,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&s.itemIndex===t.itemCount-1&&(t.append(),t.isItemEditing()&&(s.down(),s.firstCell()))}else(e.enterToTab&&(t.isEditing()||this._checkReadOnly(s))||!e.enterToEdit)&&(t.isEditing()&&t.commitEditor(!0),n?(s.prev(),this._getPrevVisible(t,s)):(s.next(),this._getNextVisible(t,s)),a&&!this._skipReadOnly(s,n?-1:1)&&s.assign(i));else s.normalize(t);rs.areEquals(s,i)?t.isValid(s)&&e.enterToEdit&&!o&&!t.isEditing()&&i&&i.dataColumn&&!this._checkReadOnly(i)&&t.showEditor(i):this.setFocused(s,!0,!0)}return!0},i.prototype._doTab=function(t,e,i,r,o,n){var s=i.clone(),a=!1;if(t.isValid(s)){if(e.useTabKey){var l=e.exitGridWhenTab;if(o){if(e.crossWhenExitLast&&(s.isFirst||e.skipReadOnly&&s.isEditableFirst)&&s.itemIndex>0?(s.up(),s.lastCell()):(s.prev(),this._getPrevVisible(t,s)),e.skipReadOnly&&!this._skipReadOnly(s,-1)&&s.assign(i),rs.areEquals(s,i)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex<=0}if(a)return!ft.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(e.crossWhenExitLast&&(s.isLast||e.skipReadOnly&&s.isEditableLast)&&s.itemIndex<t.itemCount-1)s.down(null,e.skipReadOnly&&s.isEditableLast&&e.crossWhenExitLast),s.firstCell();else if(e.commitWhenExitLast&&s.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof Jo&&(i=t._fireValidationFail(s.itemIndex,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&(t.append(),t.isItemEditing()&&(s.down(),s.firstCell()))}else s.next(),this._getNextVisible(t,s);if(e.skipReadOnly&&!this._skipReadOnly(s,1)&&s.assign(i),rs.areEquals(s,i)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex>=t.itemCount-1}if(a)return!1}}return rs.areEquals(s,i)||this.setFocused(s,!0,!0),n&&(n.preventDefault&&n.preventDefault(),n.stopImmediatePropagation()),!0}}else s.normalize(t),this._skipReadOnly(s,1);return o&&!ft.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1},i.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},i.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},i.prototype._checkReadOnly=function(t){var e=this.grid;if(!e.isValid(t))return!0;var i=e.getWritableAt(t);return null!=i?!i:!t.dataColumn.isWritable()},i.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var r=this._skipIndex;if(r.assign(t),!(i=!this._checkReadOnly(r)))if(e>0){for(;r.next();)if(!this._checkReadOnly(r)){t.assign(r),i=!0;break}}else for(;r.prev();)if(!this._checkReadOnly(r)){t.assign(r),i=!0;break}}return i},i.prototype._skipReadOnlyCell=function(t,e,i){var r=this.grid,o=!t.dataColumn.isWritable()&&!0;if(!o&&r.editOptions.skipReadOnlyCell){var n=this._skipIndex;n.assign(t),o=!this._checkReadOnly(n)}return o},i.prototype._commitCancel=function(e,i){var r=this.grid;try{switch(e.itemState){case t.ItemState.INSERTING:return r.commit(i.forceInsert)||r.cancel(!0),!0;case t.ItemState.APPENDING:return r.commit(i.forceAppend)||r.cancel(!0),!0;case t.ItemState.UPDATING:return r.commit(i.commitWhenNoEdit)||r.cancel(!0),!0}}catch(t){if(t instanceof Jo)return(t=r._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof Qo)return!1;throw t}return!1},i.prototype._doColumnHeaderClicked=function(t,e){},i.prototype._editButtonClicked=function(t,e){},i}(vl),rh=function(t){function e(e){var i=t.call(this,e,"rowHoverView")||this;return i.visible=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowhover"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(As),oh=function(t){function e(e){var i=t.call(this,e,"rowFocusView")||this;return i.visible=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowfocus"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(As),nh=function(e){function i(t,i){var r=e.call(this,t,i)||this;r._tooltipOptions=new Su,r._checkScroll=Date.now(),r._prevScroll=Date.now(),r._wheelDeltaY=0,r._tempRect=new $,r._reqPoint=new Vs,r._swipeTimer=null,r._swipeDistance=0,r._swipeDuration=0,r._swipeStarted=null,r._swipePrev=void 0,r._swipeAmount=0;var o=t.doc,n=r.grid;return r._cellResizer=new Qu(o),r._cellMover=new Zu(o),r._cellFeedback=new Ju(o),r._rowMoverLine=new th(o),r._rowMoverProxy=new eh(o),r._colResizeReq=new vu(n),r._colMoveReq=new wu(n),r._rowResizeReq=new Cu(n),r._headerResizeReq=new xu(n),r._rowMoveReq=new Iu(n),r._tooltipIndex=new rs(n),r._touchManager=r.$_createTouchManager(t,n.mobileOptions),ft.isMobile()&&(r._touchScrollRequest=new Pu(n),r._touchScrollTracker=new Lu(n),r._touchSelectRequest=new Du(n),r._touchSelectTracker=new Mu(n)),r}return r(i,e),i.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),this._touchManager=this._touchManager&&this._touchManager.dispose(),e.prototype._doDispose.call(this)},i.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},i.prototype._doDragTrackerFinished=function(t,e){t.clickable||(this._clickCell=this._clickElement=null)},i.prototype.$_getIndexAt=function(t,e,i,r,o){var n=t.getDataCellIndex(r,this._tempIndex),s=i.getCellAt(e,n);if(s&&s.merged){var a=e.getTableRowIndex(o);if(a<0)return n;var l=i.getRowIndex(a);n.itemIndex=Math.min(Math.max(s.item.index,l),s.item.index+s.rowSpan-1)}return n},i.prototype._doMouseDown=function(e){var i=e.mouseX,r=e.mouseY,o=e.ctrlKey||e.metaKey,n=e.shiftKey,s=e.altKey,a="mousedown"===e.type?e.button:0,l=this.grid,u=l.layoutManager,h=l.editOptions,c=l.focusedIndex.clone(),d=l.selections.exclusiveMode;this._hideTooltip(),l.closePopups(),l.setEventFrom("mousedown");var p,_=this._clickCell=null,g=this._clickElement=null;if(0==a||l.displayOptions.rightClickable){var y=this._tempIndex,m=this.mouseEventTarget,b=0==a&&(this._getEditRequest(m,c,i,r,o,n,s)||this._getSelectRequest(m,i,r,o,n,s));if(!(b instanceof mu)||b.canFocus())if(_=this._clickCell=this._findTableCell(),g=this._clickElement=this.findElementAt(i,r,!1),_){var v=l.getTableView(_),w=v instanceof Za,C=v instanceof Ka,x=v instanceof Wu&&v.isRowIndicator(_);if(w||C||x){var I=l.selections.lastItem();if(C?y=this.$_getIndexAt(l,u,v,_,r):w?(y.assign(l.focusedIndex),y.layout=v.layoutByCell(_)):(y.assign(l.focusedIndex),y.itemIndex=_.parentElement[f]),w){if(o&&n)I&&this.$_resizeSelection(I,y,t.SelectionStyle.COLUMNS);else if(n)return}else{if(n&&I){var S=w?t.SelectionStyle.COLUMNS:x?t.SelectionStyle.ROWS:null;return void this.$_resizeSelection(I,y,S)}if(C){if(this.$_checkAppending(l.focusedIndex,!0,y))return this._clickElement=null,void(this._clickCell=null);var E=v.getCellAt(u,y),k=v.bodyCellByCell(this._clickCell);if(k&&E&&0===a&&k.isEditButton(e.target))this.setFocused(y,!0,!0)&&E.editable&&!E.readonly&&l.editController.buttonDown(y,e);else if(rs.areEquals(y,this.focused)&&h.editWhenClickFocused)l.showEditor();else{var O=!(o&&l.selections.containsCell(y));this.setFocused(y,d||!o,O)}}else if(x&&l.rowIndicator.selectable)if(null==y.column&&y.item.isDataRow&&(y.layout=l.getFirstLayout()),b instanceof bu){this.setFocused(y,d||!o,!1);var R=I&&Us(I)?I.getItemIndices():[];(1!==R.length||R[0]!==y.itemIndex)&&l.selections.selectRow(y.itemIndex,!o)}else O=void 0,O=l.displayOptions.selectionStyle===t.SelectionStyle.SINGLE_ROW?!(o&&l.selections.containsItem(y.itemIndex,null)):!(o&&l.selections.containsCell(y)),this.setFocused(y,d||!o,O)}}}else(p=g)&&"itemIndex"in p&&(y.assign(l.focusedIndex),y.itemIndex=g.itemIndex,this.setFocused(y,!0,!0));!b||l.isItemEditing()&&b.selectable||(this.dragTracker=this._getDragTracker(b,i,r))}l.$_resetHovering(i,r);var P=this.dragTracker;P&&P.startWhenCreated&&(P instanceof gl&&e.shiftKey,this._startDragTracker(i,r,e))},i.prototype.$_checkOtherGridRowMoving=function(t,e){var i=this.grid,r=i.container,o=r.getMouseContainer();if(o&&o!==r)if(r.findContainer(t)!==r)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof _l){var n=r.eventToContainer(t),s=r.findElementAt(n.x,n.y,!1);if(0==i.itemCount||s instanceof Ga||s instanceof Au||s instanceof Wu){var a=_l.updateLineFeedback(i,Number.MAX_VALUE,1,this._rowMoverLine,n.x,n.y,!0),l=i.canMoveRow(!0,!0)&&i.dataDropOptions.getEnabled(o.gridView,e.sourceItems,a),u=i.dataDropOptions.getLabel(o.gridView,e.sourceItems,a);return e.setEnabled(l),e.setLabel(u),i.addFeedbackElement(this._rowMoverLine),l?a:-1}s?(e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)):i.removeFeedbackElement(this._rowMoverLine)}return-1},i.prototype.dragFrom=function(t,e){e instanceof _l&&this.$_checkOtherGridRowMoving(t,e)},i.prototype.dropFrom=function(t,e){if(e instanceof _l){var i=this.grid,r=0==i.itemCount?0:this.$_checkOtherGridRowMoving(t,e);i.removeFeedbackElement(this._rowMoverLine),r>=0&&i.$_dropData(e.grid,e.sourceItems,r)}},i.prototype.cancelFrom=function(t){var e=this.grid;t instanceof _l&&e.removeFeedbackElement(this._rowMoverLine)},i.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,r=t.ctrlKey||t.metaKey,o=t.shiftKey,n=t.altKey,s=this.grid,a=s.layoutManager;s.$_resetHovering(e,i)||this._hideTooltip();var l=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,r,o,n);if(l&&l.cursor?s.setCursor(this.mouseEventTarget,l.cursor):s.setCursor(this.mouseEventTarget,"default"),!l&&!this.dragging){var u=this._findTableCell(),h=u&&s.getTableView(u);if(h instanceof Ka){var c=h.bodyCellByCell(u);if(c&&c.merged){var d=c.head||c,p=this.$_getIndexAt(s,a,h,u,i);if(!d.contains(s.focusedIndex)){if(c.buttons){var f=h.getRowView(d.item);f instanceof Ga&&f.moveCellButtons(a,d,p.itemIndex)}var _=s.canMergeEditing(d);if(d.renderer2&&d.renderer2.refreshFocusChanged){var g=h.getCellRectAt(a,p,!1),y=h.getCellRect(a,d,!0),m=d.renderer2,b=g.top-y.top+g.height/2-y.height/2;m.moveClickElement(b,_)}}}}}},i.prototype._doMouseUp=function(t){var e=t.mouseX,i=t.mouseY,r=(this.findElementAt(e,i,!1),this._findTableCell()),o=this.grid,n=o.layoutManager;o.setEventFrom("mouseup");var s=o.getCellType(r);if(o.setCursor(this.mouseEventTarget,"default"),o.editController.buttonUp(null,t),"data"!==s||!o.isValid(o.focusedIndex)||n.focusIsVisible(o.focusedIndex)||this.dragTracker&&!this.dragTracker.scrollable||(n.makeCellVisible(o.focusedIndex),o.invalidateLayout()),r&&r==this._clickCell&&"header"===s&&!(this._getEditRequest(this.mouseEventTarget,o.focusedIndex,e,i,!1,!1,!1)instanceof vu)){var a=o.getHeaderView(r).layoutByCell(r);a&&this.$_columnHeaderClicked(t,a)}},i.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var r,o=this.grid,n=this.findElementAt(e,i,!1),s=this._findTableCell(),a=this.focused;if(o.accessibility&&(!o._eventFrom||o._eventFrom.indexOf("key")>=0)&&(this._clickCell=s=this._findTableCell(t.target),a=s&&o.getDataCellIndex(s)),o.setEventFrom(null),s&&s==this._clickCell){var l=o.getCellType(s),u=void 0,h=void 0;switch(l){case"head":if(this.$_gridCellClicked(r=Yu.getSub(l,o.headView.getCellType(s))),"check"===r.subType){var c=o.headView._checkCell;ft.included(t.target,c._check,c._image,c._span)&&this._checkAllClicked()}break;case"foot":this.$_gridCellClicked(Yu.getSub(l,o.footView.getCellType(s)));break;case"indicator":case"state":case"check":"check"===l&&this.$_checkCellClicked2(s,t),u=o.rowBarContainer.rowOf(s),h=o.getRowOfItem(u),this.$_gridCellClicked(Yu.getItem(l,u,h));break;case"header":var d=o.getHeaderView(s),p=o.headerView.tableCellByCell(s);p&&p.isClickableElt(t.target)||this.$_gridCellClicked(Yu.getLayout(l,d.layoutByCell(s)));break;case"data":var _=o.getBodyView(s).bodyCellByCell(s);if(rs.equalsTo(a,_.item.index,_.layout)||_.contains(a))if(_.grouped)this.$_gridCellClicked(Yu.getItem("groupHeader",_.item.index,null));else{if(_.isCellButton(t.target))return this.$_cellButtonClicked(_),void(!o.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(Yu.getCell(l,_,a)));if(Ga.isExpander(t.target))return void(!o.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(Yu.getCell(l,_,a)));var g=o.editController._editor;if(_.isEditButton(t.target)||!_.readonly&&g&&g.dropDownWhenClick)return _.getEditIndex(this._tempIndex),this._editButtonClicked(this._tempIndex,t),void this.$_gridCellClicked(Yu.getCell(l,_,a));var y=_.renderer2;if(y&&(r=Yu.getCell(l,_,a),this.$_performRendererClick(_,t,r)))return void((!o.editOptions.exceptDataClickWhenButton||!y.itemClickable)&&this.$_gridCellClicked(r));this.$_gridCellClicked(Yu.getCell(l,_,a))}break;case"footer":var m=o.getFooterView(s).tableCellByCell(s);this.$_gridCellClicked(Yu.getSummary(l,m.summaryIndex,m.layout));break;case"summary":var b=o.getSummaryView(s).tableCellByCell(s);this.$_gridCellClicked(Yu.getSummary(l,b.summaryIndex,b.layout));break;case"inlineFilter":var v=o.getFilterView(s).tableCellByCell(s),w=t.target;w===v.operatorButton&&o.popupMenuManager.show(v.popupMenu,w,this._tempIndex.set(-1,v.layout,this.grid));break;case"sum":this.$_gridCellClicked(Yu.getSub(l,o.sumView.getCellType(s)));break;case"filter":this.$_gridCellClicked(Yu.getSub(l,o.filterView.getCellType(s)));break;case"groupFooter":var C=o.getBodyView(s).bodyCellByCell(s),x=C.item.footerIndex;this.$_gridCellClicked(Yu.getGroupFooter(l,C.item.index,C.layout,x));break;case"groupHead":case"groupFoot":var I=s.$_lev;this.$_gridCellClicked(Yu.getGroupElt(l,I));break;case"groupBar":var S=s[f];h=this.grid.getRowOfItem(S),this.$_gridCellClicked(Yu.getItem(l,S,h))}}else if(n&&n===this._clickElement){var E=this._getClickData(n,t);E&&("gridEmpty"===E.cellType&&o.isEditing()&&o.commitEditor(!0),this.$_gridCellClicked(E))}},i.prototype._getClickData=function(t,e){if(t instanceof Zh||t instanceof Ta||t instanceof Ka)return Yu.getData("gridEmpty")},i.prototype.$_commitRendererEdit=function(t,e,i){var r=e.item,o=e.dataField,n=e.dataColumn,s=!1;try{(s=t.editorCommit(e,r.getData(o),i))&&(t.undoable?t.execute(new Vu(e.item,o,i,e.column)):r.setData(o,i),t.isItemEditing(e.item)&&t.validateCellCommit(e,i))}catch(e){if(!t.editOptions.showCommitError)throw e;alert(e.message||e)}if(s&&t.isCellEditing()){var a=t.itemSource,l=a.editingItem.invalidFields,u=t.validationManager.getError(e);if(u)return l.push(n.dataIndex),void(t.editOptions.showCommitError&&alert(u.userMessage||u.message||u));if(l.indexOf(n.dataIndex)>=0&&l.splice(l.indexOf(n.dataIndex),1),t.validationManager.clearInvalidCell(e),l.length>0)return;var h=t.canMergeEditing(t.getBodyCellAt(e,!0));if(a.commit(h)||a.cancel(),h){var c=n.layout.merges.getRoom(e),d={},p={};p[n.fieldName]=i;for(var f=c.head;f<=c.tail;f++){var _=t.getItem(f);_.isDataRow&&(d[_.dataRow]=p)}a.updateRows2(d)}}},i.prototype.$_performRendererClick=function(t,e,i){var r,o=t.renderer2,n=this.grid,s=n.layoutManager;if(o){if(t.merged){e.mouseX;var a=e.mouseY,l=this._findTableCell(),u=l&&n.getTableView(l);r=this.$_getIndexAt(n,s,u,l,a)}else r=o.index;if(n.canWriteAt(r)&&o.canEdit()&&rs.areEquals(r,n.focusedIndex)&&o.canEditClickAt(e)&&n.edit(r)){var h=o.editClick(r,e);if(h)return h.commit&&this.$_commitRendererEdit(n,r,h.value),!0}if(o.canClick(e)){var c=o.click(r,e);if(c)return ft.extendObj(i,c),!1===n._fireCellItemClicked(r,c)&&o.preventDefaultClick(e),!0}return o.preventDefaultEditClick(e),!1}},i.prototype.$_performRendererKey=function(e,i){var r,o=e.renderer2,n=e.head;if(o)r=o.index;else{if(!n||!(o=n.renderer2))return;var s=e.rowIndex-n.rowIndex;(r=o.index.clone()).incRow(s)}var a=this.grid,l=a.canWriteAt(r)&&o.canEdit();if(rs.areEquals(r,a.focusedIndex)){var u=Yu.getCell(a.getCellType(e.cell),e,r);if(l&&o.canEditKey(i)){if(a.edit(r)){var h=o.editKey(r,i);if(h)return h.commit&&this.$_commitRendererEdit(a,r,h.value),!0}}else if(o.canClickSpaceKey(i)){var c=o.click(r,i);if(c)return ft.extendObj(u,c),!1!==a._fireCellItemClicked(r,c)&&o.itemClick(),!0}else{if(32===i.keyCode&&a.editOptions.buttonClickWhenSpace)return e.button===t.CellButton.ACTION||e.button===t.CellButton.POPUP?(a.closePopups(),this.$_cellButtonClicked(e),!0):(this.$_gridCellClicked(u),!0);if(32===i.keyCode&&a.accessibility&&(e.button===t.CellButton.ACTION||e.button===t.CellButton.POPUP))return a.closePopups(),this.$_cellButtonClicked(e),!0}}},i.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,r=t.ctrlKey||t.metaKey,o=t.shiftKey,n=t.altKey,s=this.grid,a=s.layoutManager,l=this.focused,u=this.findElementAt(e,i,!1),h=this._findTableCell();if(s.setEventFrom(null),h&&h==this._clickCell){var c=s.getCellType(h),d=void 0,p=void 0;switch(c){case"head":this.$_gridCellDblClicked(Yu.getSub(c,s.headView.getCellType(h)));break;case"foot":this.$_gridCellDblClicked(Yu.getSub(c,s.footView.getCellType(h)));break;case"indicator":case"state":case"check":d=s.rowBarContainer.rowOf(h),p=s.getRowOfItem(d),this.$_gridCellDblClicked(Yu.getItem(c,d,p));break;case"header":var _=s.getHeaderView(h),g=s.headerView.tableCellByCell(h);g&&g.isClickableElt(t.target)||this.$_gridCellDblClicked(Yu.getLayout(c,_.layoutByCell(h)));var y=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,r,o,n);if(y instanceof vu){var m=y.layout;m.firstColumn&&s.fitLayoutWidth(m)}break;case"data":var b=s.getBodyView(h),v=b.bodyCellByCell(h),w=this.$_getIndexAt(s,a,b,h,i);if(Ga.isExpander(t.target))return;if(v.grouped)this.$_gridCellDblClicked(Yu.getItem("groupHeader",v.item.index,null));else if(this.$_gridCellDblClicked(Yu.getCell(c,v,l)),rs.areEquals(w,l)){var C=s.editController.currentEditor();s.showEditor(w,void 0,ft.isMobile()&&C.hasList)}break;case"footer":var x=s.getFooterView(h).tableCellByCell(h);this.$_gridCellDblClicked(Yu.getSummary(c,x.summaryIndex,x.layout));break;case"summary":var I=s.getSummaryView(h).tableCellByCell(h);this.$_gridCellDblClicked(Yu.getSummary(c,I.summaryIndex,I.layout));break;case"sum":this.$_gridCellDblClicked(Yu.getSub(c,s.sumView.getCellType(h)));break;case"groupFooter":var S=s.getBodyView(h).bodyCellByCell(h),E=S.item.footerIndex;this.$_gridCellDblClicked(Yu.getGroupFooter(c,S.item.index,S.layout,E));break;case"groupHead":case"groupFoot":var k=h.$_lev;this.$_gridCellDblClicked(Yu.getGroupElt(c,k));break;case"groupBar":var O=h[f];p=s.getRowOfItem(O),this.$_gridCellDblClicked(Yu.getItem(c,O,p))}}else if(u&&u===this._clickElement){var R=this._getClickData(u,t);R&&this.$_gridCellDblClicked(R)}},i.prototype._doMouseWheel=function(t){var e=this.grid;e.setEventFrom(null),e.scrollOnEditing();var i=e.displayOptions;if(i.wheelEnabled&&!t.ctrlKey){if((t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==i.wheelScrollHorz){var r=e.leftPos,o=Math.abs(i.wheelScrollHorz||16)*((t.deltaX||t.deltaY)>0?1:-1);return e.leftPos=r+o,!0}var n=e.topIndex,s=Date.now(),a=Math.abs(i.wheelScrollLines);a=a||3;var l=e.displayOptions.wheelDeltaY;if(l>0){if(!(this._wheelDeltaY+Math.abs(t.deltaY)>=l))return void(this._wheelDeltaY+=Math.abs(t.deltaY));this._wheelDeltaY=0}if(i.wheelAccelDelay>0)if(s>this._prevScroll+300)this._checkScroll=s;else if(this._checkScroll+i.wheelAccelDelay<s){var u=i.wheelAccelScroll;if(u&&!isNaN(u))a=parseInt(u);else if("string"==typeof u){var h=u.trim();if(h.indexOf("%")>0){var c=e.itemCount;a=parseInt(h.substr(0,h.length-1))/100*c}}}return this._prevScroll=s,e.topIndex=e.topIndex+(t.deltaY>0?a:-a),!i.wheelEventPropagate||n!=e.topIndex}return!1},i.prototype._doMouseEnter=function(t){},i.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,i),this.$_setHoveredCell(null,e,i)},i.prototype._doMouseOver=function(t){},i.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},i.prototype.$_doHome=function(t,e,i){var r=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,r))return t.assign(e),!0},i.prototype.$_doEnd=function(t,e,i){var r=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,r))return t.assign(e),!0},i.prototype._doKeyDown=function(i){var r,o=i.keyCode,n=i.ctrlKey,s=ft.isMac,a=s&&i.metaKey||!s&&i.ctrlKey,l=i.shiftKey,u=i.altKey,h=this.grid,c=h.editOptions,d=h.layoutManager,p=h.popupMenuManager,f=c.skipReadOnly,_=c.skipReadOnlyCell,g=h.focusedIndex,y=g.clone(),m=c.verticalMoveStep;if(!h._fireKeyDown(i))return!0;if(!h.isEditing()&&h.accessibility&&ft.included(o,40,34,38,33,32,37,39)&&ft.stopEvent(i),p.isShow()&&ft.included(o,37,39,38,40,13,32)){var b=h.getBodyCellAt(g);return p.keyDown(i,b&&b.cell),!0}if(g&&!h.isEditing()&&(b=h.getBodyCellAt(g))&&this.$_performRendererKey(b,i))return!0;if(h.setEventFrom("keydown"),!h.isEditing()&&h.accessibility&&(67===o||86===o)&&a)return h.editController.setFocus(!0),!1;if(27==o)h.closePopups(),this._doCancel(h);else{if(13==o)return this._doEnter(h,c,y,i);if(9==o)return this._doTab(h,c,y,n,l,i);if(113==o)!h.isEditing()&&y.dataColumn&&(h.accessibility&&h.$_setEditFocused(!0,null),h.showEditor(y,l));else{if(ft.isMac&&i.metaKey&&i.shiftKey&&90===i.keyCode)return h.redo();if(90==o&&a)return h.undo();if(89==o&&a)return h.redo();if(45==o)c.appendWhenInsertKey||0==h.itemCount?h.append():h.insert(y.item,i.shiftKey,n);else{if(46==o)return n&&l?(h.revertSelection(),!0):n?(h.deleteSelection(),!0):!!l&&(h.eraseSelection(),!0);if(u&&l&&40==o)h.moveSelection(1,"keydown");else if(u&&l&&38==o)h.moveSelection(-1,"keydown");else if(32==o&&l&&a&&h.rowBarContainer.rowIndicator.visible){var v=h.selections.getItem(0),w=v&&(v.style===t.SelectionStyle.BLOCK||Us(v))&&v.getItems(h.checkBar.merged||h.checkBar.fieldIndex>=0);w||h.checkBar.merged?(w=w||[y.item],h.toggleChecks(w,y.item)):h.toggleCheck(y.itemIndex)}else if(h.editOptions.useArrowKeys&&ft.included(o,36,35,39,37,40,38,34,33)){ft.isMobile()&&i&&i.preventDefault&&i.preventDefault();var C=h.itemCount;if(40==o&&0==C)return h.append(),!0;if(!h.isValid(y))return y.normalize(h),this.setFocused(y,!0,!0),!0;if((ft.included(o,40,34)||35==o&&n)&&y.isBottom&&this.$_checkAppending(y))return!0;if((ft.included(o,38,33)||36==o&&n)&&y.isTop&&this.$_checkAppending(y,!0))return!0;var x=h.getBodyViewAt(y);if(!x)return!0;switch(o){case 36:if(n){if(this.$_doHome(y,g,f))break}else y.home(),this._skipReadOnly(y,1);break;case 35:if(n){if(this.$_doEnd(y,g,f))break}else y.end(),this._skipReadOnly(y,-1);break;case 39:if(x.spanRight(d,y),y.right(),f&&this._checkReadOnly(y)&&!this._skipReadOnly(y,1)){y.assign(g);break}break;case 37:if(y.left(),f&&this._checkReadOnly(y)&&!this._skipReadOnly(y,-1)){y.assign(g);break}break;case 38:if(s&&a){this.$_doHome(y,g,f);break}try{if(0==y.itemIndex&&y.isTop){if(this.$_commitCancel(y.item,c))return!0;n&&s?y.first():h.filterPanel.visible?h.inlineFilterFocus(y.layout):y.up(m)}else if(n&&s)y.first();else{if(n)return void h.topIndex--;y.up(m,h.isItemEditing(y.item))}}finally{_&&this._checkReadOnly(y)&&(this._skipReadOnlyCell(y,-1)||y.assign(g))}break;case 33:if(n&&!s)return h.topIndex=h.topIndex-d.fullItemCount,!0;if(r=y.clone(),y.incRow(-d.fullItemCount),f&&this._checkReadOnly(y)&&!this._skipReadOnlyCell(y,1,r)){y.assign(g);break}break;case 40:if(s&&a){this.$_doEnd(y,g,f);break}try{if(y.itemIndex!=C-1||!y.isBottom&&m!=t.VerticalMoveStep.ROW)if(n&&s)y.last();else{if(n)return h.topIndex++,!0;y.down(m,h.isItemEditing(y.item))}else{if(y.isBottom&&this._commitCancel(y.item,c))return!0;h.append(),n&&s?y.last():y.down(m,h.isItemEditing(y.item))}}finally{_&&this._checkReadOnly(y)&&(this._skipReadOnlyCell(y,1)||y.assign(g))}break;case 34:if(y.itemIndex==h.itemCount-1&&y.isBottom&&fr(y.item.itemState))return h.commit(c.forceAppend),!0;if(n&&!s)return h.topIndex=h.topIndex+d.fullItemCount,!0;if(r=y.clone(),y.incRow(d.fullItemCount),f&&this._checkReadOnly(y)&&!this._skipReadOnlyCell(y,-1,r)){y.assign(g);break}}return x.spanHead(d,y),l&&h.selections.count>0&&!Gs(h.displayOptions.selectionStyle)?(this.setFocused(y,!1,!1),h.selections.lastItem().resizeTo(y)):this.setFocused(y,!0,!0),!0}}}}return e.prototype._doKeyDown.call(this,i)},i.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},i.prototype._doKeyUp=function(t){if(ft.isIE){var e=t.ctrlKey,i=t.keyCode,r=this.grid;90===i&&e&&r.undo()}this.grid._fireKeyUp(t)},i.prototype._editButtonClicked=function(t,i){this.grid.makeCellVisible(t),this.grid.showEditor(t)&&this.grid.editorButtonClicked(t,i),e.prototype._editButtonClicked.call(this,t,i)},i.prototype._getSelectRequest=function(e,i,r,o,n,s){var a=this.grid,l=a.displayOptions,u=l.selectionMode,h=l.selectionStyle,c=this._findTableCell(e);if(!c)return null;var d=a.getCellType(c);if("indicator"==d){if(a.rowIndicator.selectable&&u!=t.SelectionMode.NONE&&h!=t.SelectionStyle.NONE&&!Gs(h))return new bu(a.getIndex(a.rowBarContainer.getCellIndex(c)),t.SelectionStyle.ROWS)}else if("header"==d){if(o){var p=a.headerView.columnByCell(c);if(a.rowIndicator.selectable&&u!=t.SelectionMode.NONE&&h!=t.SelectionStyle.NONE&&!Gs(h))return new bu(a.getIndex(-1,p),t.SelectionStyle.COLUMNS)}}else if("data"==d){var f=a.getDataCellIndex(c,this._tempIndex);if(o&&a.selections.containsCell(f))return null;if(u!=t.SelectionMode.NONE&&h!=t.SelectionStyle.NONE&&!Gs(h)&&!ft.isMobile())return new bu(f.clone(),h)}return null},i.prototype._getEditRequest=function(t,e,i,r,o,n,s){var a=dt(this.grid.doc),l=this.grid,u=l.layoutManager,h=l.displayOptions,c=this._findTableCell(t);if(!c)return null;var d=l.getTableView(c),p=this.$_getRowResizeRequest(d,c,i,r,o,n,s);if(p)return p;if(d instanceof Wu&&d.isRowIndicator(c)){if(s&&(ft.isIE||ft.isEdge)&&(s=o),s&&l.canMoveRow(!1,!1)){var f=l.getSelection(),_=l.rowBarContainer.rowOf(c),g=!1;if(f?g=f.containsItem(_):_==e.itemIndex&&(g=!0),g)return this._rowMoveReq.init(f,_)}}else if(d instanceof Za){if(t instanceof a.HTMLInputElement)return null;if(o);else{var y=d.layoutByCell(c);if(y){var m=l.cellToContainer(c,this._reqPoint.setEmpty());if(h.columnResizable&&y._isResizable()&&(l.fixedOptions.resizable||y.root.vindex>=u.fixedLayoutCount&&y.root.vindex<u.rightFirstLayout)){var b=l.headerView.tableCellByLayout2(u,y);if(m.x+=b?b.width:y.domWidth,i>=m.x-3&&i<=m.x+3)return this._colResizeReq.init(y,i,r,i-m.x)}if(h.columnMovable&&y._isMovable()&&(!y.isRoot||l.canMoveLayout(y)))return this._colMoveReq.init(y,i,r,i-m.x)}}}else if(d instanceof Ka){var v=l.getDataCellIndex(c,this._tempIndex);if(_=v&&v.itemIndex,l.canMoveRow(!1,!1)&&_>=0){var w=!1;if(f=l.getSelection(),(b=l.getBodyCellAt(v,!0)).expander===t)return null;if(s&&(ft.isIE||ft.isEdge)&&(s=o),f?(w=f.containsItem(_))&&!s&&(w=f.containsLayout(v.layout)&&this._canMoveRowAt(d,v,i)):e&&_==e.itemIndex&&(w=!!s||rs.areEquals(v,e)&&this._canMoveRowAt(d,v,i)),w)return this._rowMoveReq.init(f,_)}}else if(d instanceof Bl){var C=d.boundsByContainer();if(l.header.resizable&&r<=C.bottom+1&&r>=C.bottom-2)return this._headerResizeReq.init(C.top,r-C.bottom-1)}},i.prototype.$_resizeSelection=function(e,i,r){var o=this.grid.selections,n=e?e.runStyle:r;if(!Gs(n)&&ft.included(r,t.SelectionStyle.ROWS,t.SelectionStyle.COLUMNS,t.SelectionStyle.SINGLE_COLUMN)&&(n=r),e){if(e.runStyle!=n){this.grid.selections.clear();var s=e.getBounds();e=o.add(s.firstCell,s.lastCell,n)}o.canResize(e)&&e.resizeTo(i)}else e=o.add(i,i,n)},i.prototype._canMoveRowAt=function(t,e,i){return i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},i.prototype.$_getRowResizeRequest=function(t,e,i,r,o,n,s){var a=-1,l=this.grid;if(t instanceof Wu?a=e.parentElement.$_row:t instanceof Ka&&(l.rowBarContainer.isVisible()||t.rightFixed||(l.fixedOptions.colCount>0&&t.fixed||0===l.fixedOptions.colCount)&&0===e.cellIndex&&(a=e.parentElement.$_row)),a<0)return null;var u=l.layoutManager,h=l.displayOptions,c=h.eachRowResizable&&!o,d=u.fixedItemCount,p=u.contentBounds.y,f=t.boundsByContainer(this._tempRect.setWidth(t.width));if(f.width<=0||i<f.x||i>=f.right)return null;if(a<d){if(l.fixedOptions.rowResizable&&(!h.dataHeights||h.dataHeights.length<=0)&&((f=u.getItemRect(a)).y+=p,r<=f.bottom+2&&r>=f.bottom-3))return this._rowResizeReq.init(a,c,f.y,r-f.bottom-1)}else if(h.rowResizable&&(!h.dataHeights||h.dataHeights.length<=0))for(var _=u.itemCount,g=l.topIndex,y=0;y<_;y++){var m=y+g+d;if(m==a&&((f=u.getItemRect(y+d)).y+=p,r<=f.bottom+2&&r>=f.bottom-3))return this._rowResizeReq.init(m,c,f.y,r-f.bottom-1)}return null},i.prototype._getDragTracker=function(e,i,r){if(e instanceof bu)switch(e.style){case t.SelectionStyle.ROWS:return new ml(e,i,r);case t.SelectionStyle.COLUMNS:return new bl(e,i,r);case t.SelectionStyle.BLOCK:return new yl(e,i,r)}else{if(e instanceof vu)return new cl(e,this._cellResizer);if(e instanceof wu)return new dl(e,this._cellFeedback,this._cellMover);if(e instanceof Cu)return new pl(e,this._cellResizer);if(e instanceof Iu)return new _l(e,this._rowMoverProxy,this._rowMoverLine);if(e instanceof xu)return new fl(e,this._cellResizer)}return null},i.prototype.$_checkCellClicked2=function(e,i){if(e!==i.target&&e.firstElementChild!==i.target){var r=ht(e),o=this.grid,n=o.rowBarContainer.getCheckBox(e);if(o.editOptions.checkable){var s=o.getEditItem(),a=o.getItem(e.parentElement[f]);if(s&&s.dataRow!==a.dataRow){var l=o.editOptions;switch(s.itemState){case t.ItemState.APPENDING:o.commit(l.forceAppend);break;case t.ItemState.INSERTING:o.commit(l.forceInsert);break;case t.ItemState.UPDATING:o.commit(l.commitWhenNoEdit)}}i.target instanceof r.HTMLSpanElement&&(n.checked=o.checkBar.exclusive||!n.checked),this._doCheck(n,a,i.shiftKey)}else i.preventDefault()}},i.prototype._doCheck=function(t,e,i){var r=this.grid,o=r.checkBar,n=r.rowBarContainer.checkBar;if(r.editOptions.checkable){var s=r.checkBar;if(e.checkable&&(s.showGroup||e.dataRow>=0)&&t){var a=n._prevChecked,l=void 0,u=void 0,h=[],c=-1,d=-1,p=void 0;if(i&&a>=0&&!o.exclusive||s.merged){i&&a>=0?(l=rs.temp(r,a,null),u=r.getItem(a).checked,s.merged?(c=(p=s.merges.getRoom(l))?p.head:a,d=p?p.tail:a):(c=a,d=e.index)):(u=t.checked,c=d=e.index,n.$_setPrevChecked(e.index),o.exclusive&&r.itemSource._clearChecked()),s.merged?(l=rs.temp(r,e.index,null),p=s.merges.getRoom(l),c=Math.min(p?p.head:e.index,c),d=Math.max(p?p.tail:e.index,d)):(c=Math.min(c,e.index),d=Math.max(c,d));for(var f=c;f<=d;f++){var _=r.getItem(f);_.checkable&&_.dataRow>=0&&h.push(_)}h.length>0&&r.itemSource.checkItems(h,u,!0)}else r.itemSource.checkItem(e,t.checked,s.exclusive,!0),n.$_setPrevChecked(e.index)}}},i.prototype._checkAllClicked=function(){var t=this.grid;if(!t.empty&&t.editOptions.checkable){var e=t.checkBar,i=t.headView;e.showAll&&!e.exclusive&&(i.allChecked=!i.allChecked,t.itemSource.checkAll(i.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup&&!e.merged&&e.fieldIndex<0))}},i.prototype._doColumnHeaderClicked=function(t,i){if(e.prototype._doColumnHeaderClicked.call(this,t,i),2!=t.button){var r=i instanceof Vn?i.getDataColumn():null,o=this.grid,n=o.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(r)if(t.target===n.check)n.check.checked=r.checked=!r.checked,o._columnCheckedChanged(r);else if(t.target===n.filter&&r.hasFilters)o.selectColumnFilters(n);else if(t.target===n.popup){var s=r.header.popupMenuName,a=o.getCellViewOf(n.cell);s&&a&&o.popupMenuManager.show(s,a,null)}else ft.isClickableTemplate(n.cell,t.target)||!r.sortable||!o.sortingOptions.enabled||this.dragTracker instanceof bl||o.sortColumn(r,t);else i instanceof jn&&t.target===n.expander&&i.expandable&&(i.expanded=!i.expanded)}},i.prototype.$_columnHeaderClicked=function(t,e){t.button,this._doColumnHeaderClicked(t,e),t.preventDefault()},i.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},i.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},i.prototype.$_setHoveredCell=function(t,e,i){var r=this.grid,o=this._findTableCell();if(t&&o){var n=r.getTableView(o),s=this.$_getIndexAt(r,r.layoutManager,n,o,i);if(t!==this._tooltipCell||!rs.areEquals(this._tooltipIndex,s)){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var a=r.displayOptions.hintDelay;if(t)if(a>0){var l=this;this._tooltipShowTimer=setTimeout(function(){l.$_showTooltip2(t,s)}.bind(l),a)}else this.$_showTooltip2(t,s)}}},i.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e),this._tooltipCell=null,this._tooltipIndex.reset()},i.prototype.$_showTooltip2=function(t,e){ft.trace("TOOLTIP...");var i=this.grid,r=i.validationManager.getError(e),o=this._tooltipOptions;if(i.editOptions.hintOnError&&r)o.message=r&&r.message,this.$_showTooltip(t,e,o);else{var n=t.renderer2;if((t.item.isDataRow||t.item instanceof ln)&&(!ft.isMobile()||i.mobileOptions.showTooltip)&&n&&n.showTooltip&&!rs.areEquals(e,this._tooltipIndex)){var s=n.getTooltip(t,e);if(s||i.displayOptions.showEmptyTooltip){var a=i._fireShowTooltip(e,s);a&&(this._tooltipOptions.assignFrom(a),this.$_showTooltip(t,e,this._tooltipOptions))}}}},i.prototype.$_showTooltip=function(t,e,i){var r=this.grid,o=r.tooltipManager,n=r.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var s=r.getBodyView(t.cell),a=s.getCellRectAt(n,e,!1);a=s.boundsByContainer(a);var l=t.layout.isFixed?a.x:Math.max(a.x,n.nonFixedBounds.x),u=a.y+a.height;o.show(i,l,u,a.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e)}},i.prototype.$_showStateError=function(t,e){var i=this.grid,r=i.tooltipManager,o=i.layoutManager,n=this._tooltipOptions;if(t!==this._tooltipCell){this._hideTooltip(),n.message=e;var s=i.focusedIndex.itemIndex,a=i.rowBarContainer.boundsByContainer(),l=o.getItemBounds(s<o.fixedItemCount?s:s-o.topIndex);r.show(n,a.x,a.y+l.bottom,l.height,!0),this._tooltipCell=t,this._tooltipIndex.assign(null)}},i.prototype.$_setHoveredHeaderCell=function(t,e,i){if(t!=this._tooltipCell){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var r=this.grid.displayOptions.hintDelay;if(r>0){var o=this;this._tooltipShowTimer=setTimeout(function(){o.$_showHeaderTooltip2(t)}.bind(o),r)}else this.$_showHeaderTooltip2(t)}},i.prototype.$_showHeaderTooltip2=function(t){var e=this.grid,i=e.header.showTooltip;if(!1!==i&&this._tooltipCell!=t){var r=t&&t.showTooltip;if(void 0===i?r:!1!==r){var o=t.tooltip||t.text;if(o){var n=e._fireShowHeaderTooltip(t.layout.firstColumn,o);n&&(this._tooltipOptions.assignFrom(n),this.$_showHeaderTooltip(t,this._tooltipOptions))}}}},i.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,r=i.tooltipManager,o=i.layoutManager;if(!r.visible||this._tooltipCell!=t){this._hideTooltip();var n=o.getHeaderCellRect(t.layout,!1),s=t.layout.isFixed?n.x:Math.max(n.x,o.nonFixedBounds.x),a=n.y+n.height;r.show(e,s,a,0,!0),this._tooltipCell=t}},i.prototype.$_cellButtonClicked=function(e){var i=this.grid,r=e.layout.firstColumn;if(r){var o=i.layoutManager,n=e.getEditIndex(this._tempIndex);switch(o.getMergeRoom(n),r.button){case t.CellButton.POPUP:var s=r.popupMenuName,a=i.getCellViewOf(e.cell);s&&a&&i.popupMenuManager.show(s,a,n);break;case t.CellButton.ACTION:i._doCellButtonClicked(n)}}},i.prototype.$_commitCancel=function(e,i){var r=this.grid;try{switch(e.itemState){case t.ItemState.INSERTING:return r.commit(i.forceInsert)||r.cancel(!0),!0;case t.ItemState.APPENDING:return r.commit(i.forceAppend)||r.cancel(!0),!0;case t.ItemState.UPDATING:return r.commit(i.commitWhenNoEdit)||r.cancel(!0),!0}}catch(t){if(t instanceof Jo)return(t=r._fireValidationFail(e.index,t.column,t))&&alert(i.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!1;if(t instanceof Qo)return!1;throw t}return!1},i.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var r=this.grid;if(t.itemIndex==r.itemCount-1&&fr(t.item.itemState)){var o=t.itemIndex;if(!i||i.itemIndex!=o){try{r.commit(r.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=o,r.isValid(t)||(t.itemIndex=r.getItemIndexOfRow(r.dataSource.rowCount-1)),this.setFocused(t,!0,!0)):e&&(r.cancel(!0),i&&this.setFocused(i,!0,!0))}catch(t){if(t instanceof Jo)return(t=r._fireValidationFail(o,t.column,t))&&alert(r.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof Qo)return!0;throw t}return!0}}return!1},i.prototype._stopTapTracker=function(t){if(this.dragTracker)try{this.dragTracker=null}catch(t){throw t}},i.prototype._getTouchRequest=function(t){var e=this.grid,i=e.selectionLayer;if(i instanceof Uu){var r=i.getSelectHandle(t.target);if(r)return this._touchSelectRequest.handle=r,this._touchSelectRequest}var o=e.getCellViewOf(t.target);if("data"===e.getCellType(o)){var n=e.getBodyCellbyCell(t.target);if(n&&n.isEditButton(t.target))return;return this._touchScrollRequest}},i.prototype._getTouchTracker=function(t,e,i){if(!ft.isMobile())return null;var r=ht(t.target);if(t.target instanceof r.HTMLInputElement)return null;var o=this._getTouchRequest(t);if(o instanceof Pu)return this._touchScrollTracker.request=o,this.dragTracker=this._touchScrollTracker,void(this.touchManager.swipeHandler=this.onSwipeHandler.bind(this));if(o instanceof Du)return this._touchSelectTracker.request=o,void(this.dragTracker=this._touchSelectTracker);var n=this.mouseEventTarget;o=this._getEditRequest(n,null,e,i,!1,!1,!1)||this._getSelectRequest(n,e,i,!1,!1,!1);var s=this._getDragTracker(o,e,i);return s?(this.dragTracker=s,this.dragTracker):void 0},i.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this.touchManager.swipeHandler=null,this._stopTapTracker(!1);var r=this.grid,o=this._clickCell=r.getCellViewOf(t.target);return o&&r.getCellType(o)&&r.container._containerDom.focus({preventScroll:!0}),r.closePopups(),this._getTouchTracker(t,e,i),this.dragTracker?this.dragTracker:null},i.prototype.onTouchEnd=function(t,e,i){var r=this.grid.cellToIndex(t.target);this.grid.editController.buttonUp(r,t)},i.prototype.onTap=function(t,e,i){if(ft.isiOS&&this.touchManager){var r=ft.getTimer();if(this.touchManager.touchEndt+50>r)return}var o=this.grid;this._clickCell=o.getCellViewOf(t.target),this._hideTooltip(),o.closeFilterSelector()},i.prototype.onDoubleTapHandler=function(t,e,i){var r=this.grid,o=this._clickCell;"data"===r.getCellType(o)&&(t.mouseX=e,t.mouseY=i,this.dblclick(t),t.preventDefault())},i.prototype.onLongTapHandler=function(t,e,i){var r=this.grid,o=r.cellToIndex(t.target),n=this.grid.getBodyCellbyCell(t.target);if(n&&n.isEditButton(t.target))return this.setFocused(o,!0,!0),n.editable&&!n.readonly&&r.editController.buttonDown(o,t),!0},i.prototype.onDragStartHandler=function(t,e,i,r){var o=this.dragTracker;return o&&o.start(null,i,r)?o:null},i.prototype.onDragHandler=function(t,e,i,r){var o=this.dragTracker,n=!1;if(o&&o.dragging&&!((n=o.drag(this.mouseEventTarget,i,r))||o instanceof Lu)){var s=o.getNextRequest(i,r);if(s)return this._stopDragTracker(i,r,!0),this.dragTracker=this._getDragTracker(s,i,r),this._startDragTracker(i,r,null),!!this.dragTracker;this._stopDragTracker(i,r,!0),o.cancel()}return n},i.prototype.onDragEndHandler=function(t,e,i){this._stopDragTracker(t,e,i)},i.prototype.onSwipeHandler=function(t,e,i,r){var o=this.grid;if(o.getTableView(this._clickCell)instanceof Ka){var n=1;switch(i){case"right":o.leftPos=o.leftPos-e/20;break;case"left":o.leftPos=o.leftPos+e/20;break;case"bottom":n=-1;case"top":this._swipeDistance=n*e/20,this._swipeDuration=t,this._swipePrev=this._swipeStarted=ft.getTimer(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},i.prototype.$_scrollRow=function(){var t=ft.getTimer();if(Math.abs(this.touchManager._scrollY-window.scrollY)>10)clearInterval(this._swipeTimer);else if(t-this._swipeStarted<this._swipeDuration){var e=t-this._swipePrev,i=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration);this._swipeAmount-=i,this._swipePrev=t,this.grid.topIndex+=i}else clearInterval(this._swipeTimer)},i.prototype.$_createTouchManager=function(t,e){if(!ft.isMobile())return null;var i=new Fu(t,e);return i.touchEndHandler=this.onTouchEnd.bind(this),i.touchHandler=this.onTouch.bind(this),i.tapHandler=this.onTap.bind(this),i.doubleTapHandler=this.onDoubleTapHandler.bind(this),i.longTapHandler=this.onLongTapHandler.bind(this),i.dragStartHandler=this.onDragStartHandler.bind(this),i.dragHandler=this.onDragHandler.bind(this),i.dragEndHandler=this.onDragEndHandler.bind(this),i},i}(ih),sh=function(t){function e(e){var i=t.call(this)||this;return i._cellEditors={},i._customRenderers={},i._grid=e,i}return r(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new na(this._grid,t),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},e.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"list":case"dropdown":i=new fa(this._grid,e);break;case"nlist":i=new ma(this._grid,e);break;case"multiline":i=new aa(this._grid,e);break;case"number":i=new ua(this._grid,e);break;case"date":i=new lu(this._grid,e);break;case"btdate":i=new hu(this._grid,e);break;case"search":i=new ya(this._grid,e);break;case"checklist":i=new ga(this._grid,e);break;case"password":i=new sa(this._grid,e);break;case"ndate":i=new cu(this._grid,e);break;default:i=this.getDefaultCellEditor()}this._cellEditors[t]=i,i&&i.setController(this._grid.editController)}return i},e.prototype.$_checkFlexible=function(t,e){if(!ft.ieOld&&!ft.ieTen)return t&&t.flexible||e&&e.flexible},e.prototype.createRenderer=function(t,e,i){var r=null;if(t){switch(t){case mo.TYPE:r=new mo;break;case vo.TYPE:r=new vo;break;case wo.TYPE:r=new wo;break;case xo.TYPE:r=this.$_checkFlexible(e,i)?new Io:new xo;break;case So.TYPE:r=this.$_checkFlexible(e,i)?new Eo:new So;break;case ko.TYPE:r=new ko;break;case Ro.TYPE:r=this.$_checkFlexible(e,i)?new Po:new Ro;break;case Oo.TYPE:r=new Oo;break;case Do.TYPE:r=new Do;break;case To.TYPE:r=new To;break;case Lo.TYPE:r=new Lo;break;case Ba.SERIES_TYPE:r=new Ba;break;case $a.TYPE:r=new $a;break;case ja.TYPE:r=new ja;break;case Ha.TYPE:r=new Ha;break;case No.TYPE:r=new No}if(!r){var o=this._customRenderers[t];r="function"==typeof o?new o(t):new Nu(o,t)}r||(ft.log("Renderer type is invalid: "+t),r=new mo),e&&r.assignFrom(e),i&&r.assignFrom(i)}return r},e.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},e.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},e.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},e.prototype.clearCustomRenderers=function(){this._customRenderers={}},e}(Ct),ah=function(t){function e(e,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var o=t.call(this,e)||this;if(i<1)throw new Error("LookupTable levels must be equals or greater than 1");return o._levels=i,o._tree={},o._listMap=r?{}:null,o}return r(e,t),e.prototype._doDispose=function(){this._tree=this._listMap=null,t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._tree=this._listMap={},this._changed()},e.prototype.exists=function(t){var e;if((t=ft.makeArray(t))&&(e=t.length)>0&&e<=this._levels){if((e=Math.min(e,this._levels)-1)>0){for(var i=this._tree,r=0;r<e&&(i=i[t[r]]);r++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},e.prototype.fill=function(t,e){if(t&&t.length>0&&e&&e.length>0){for(var i=Math.min(t.length,e.length),r=0;r<i;r++){var o=ft.makeArray(t[r]);this.$_add(o,e[r])}this._changed()}},e.prototype.fillRows=function(t){if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},e.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},e.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},e.prototype.lookup=function(t,e){var i;if(this._levels>1){var r=void 0,o=this._levels-1;for(i=this._tree,r=0;r<o&&(i=i[t[r]]);r++);}else i=this._tree;var n=t[t.length-1];if(i&&n&&e){for(var s=n.split(e),a=[],l=(r=0,s.length);r<l;r++)a.push(i[s[r]]?i[s[r]]:s[r]);return a.join(e)}return i?i[n]:void 0},e.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw new Error("Keys length must be "+(this._levels-1));var e,i,r=this._tree,o=[],n=[];if(this._levels>1)for(e=0,i=t.length;e<i;e++)if(!(r=r[t[e]]))return{keys:o,values:n};if(this._listMap){var s=this._listMap[t.slice(0,t.length).join("~!~")];for(i=s?s.length:0,e=0;e<i;e++)o.push(s[e]),n.push(r[s[e]])}else for(var a in r)o.push(a),n.push(r[a]);return{keys:o,values:n}},e.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,r=e.values,o=0,n=e.keys.length;o<n;o++)i[o]=i[o]?String(i[o]):null,r[o]=r[o]?String(r[o]):null;return e},e.prototype.$_add=function(t,e){if(t){t=ft.makeArray(t);var i,r,o,n,s=this._levels;if(t.length<s)throw Error("Keys length must be equals or greater than "+s);var a=this._tree;for(r=0;r<s-1;r++)(n=a[o=t[r]])||(n={},a[o]=n),a=n;if(a[i=t[s-1]]=e,this._listMap){var l=t.slice(0,t.length-1).join("~!~"),u=this._listMap[l];ft.isArray(u)||(u=[],this._listMap[l]=u),u.push(i)}}},e.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}},e}(function(t){function e(e){var i=t.call(this)||this;return i._id=e,i}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.exists=function(t){return!1},e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceChanged",e}(fe)),lh=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._sources={},e&&i.load(e),i}return r(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this)},e.prototype.load=function(t){if(t=ft.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},e.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},e.prototype.remove=function(t){this.$_remove(t)&&this._changed()},e.prototype.getSource=function(t){return this._sources[t]},e.prototype.$_createSource=function(t){if(t){var e=new ah(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values),e}return null},e.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),this._sources[t.id]=e,e.addListener(this),e}},e.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},e.prototype.onLookupSourceChanged=function(t){this._changed()},e.CHANGED="onLookupSourceProviderChanged",e}(function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceProviderChanged",e}(fe)),uh=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._enabled=!0,e&&i.assignFrom(e),i}return r(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled&&!this.isSeparator()},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.click=function(){},e.prototype.isSeparator=function(){return!1},e}(fe),hh=function(e){function i(t,i){var r=e.call(this,i)||this;return r._parent=t,r}return r(i,e),i.prototype._doDispose=function(){this._parent=null,this._callback=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),i.prototype.isSeparator=function(){return"-"===this._label||this._type===t.MenuItemType.SEPARATOR},i.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},i.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},Object.defineProperty(i.prototype,"manager",{get:function(){return this._parent.manager},enumerable:!0,configurable:!0}),i.prototype._itemClicked=function(t){},i}(uh),ch=function(e){function i(t,i){var r=e.call(this,i)||this;return r._name=i.name,r._parent=t,r._items=r._load(i.children),r}return r(i,e),i.prototype._doDispose=function(){this._items&&this._items.forEach((function(t,e){t.dispose()})),this._items=null,this._parent=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof ph)return t.popupMenuManager;if(t instanceof ph)return t;t=t._parent}return null},enumerable:!0,configurable:!0}),i.prototype.count=function(){return this._items?this._items.length:0},i.prototype.itemClicked=function(e){if(e.parent==this&&e.type===t.MenuItemType.RADIO){var i=e.group,r=void 0;if(i){for(var o=0;o<this._items.length;o++)(r=this._items[o])instanceof hh&&r.type===t.MenuItemType.RADIO&&r.group===i&&(r.checked=!1);e.checked=!0}}var n=this.manager.grid;"function"==typeof e.callback?e.callback.call(this,n.handler,e.toProxy(),this.manager.clickData):this._parent instanceof ph?this._parent.doMenuItemClick(e,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(e,this.manager.clickData):this._parent.itemClicked(e)},i.prototype._load=function(t){var e=[];if(t)for(var r=0,o=t.length;r<o;r++){var n=t[r];if(ft.isArray(n.children)&&n.children.length>0){var s=new i(this,n);e.push(s)}else s=new hh(this,n),e.push(s)}return e},i.CLICKED="onPopupMenuClicked",i}(uh),dh=function(e){function i(t){var i=e.call(this)||this;return i._showing=!1,i._viewGridInside=!1,i._container=t,i._element=i._createElement(),i._element.addEventListener("contextmenu",(function(t){t.preventDefault()})),i}return r(i,e),i._borrowView=function(t){var e=i.$_views[t.$_hash]||[];return i.$_views[t.$_hash]=e,e.pop()||new i(t)},i._returnView=function(t){i.$_views[t._container.$_hash].push(t)},i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"childView",{get:function(){return this._childView},set:function(t){this._childView=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currDiv",{get:function(){return this._currDiv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"manager",{get:function(){return this._menu.manager},enumerable:!0,configurable:!0}),i.prototype.getElementId=function(){return"rg-popup-"+this._menu.name},i.prototype.show=function(t,e,i,r,o,n,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof Zh);)l=l.parent;l&&(this._viewGridInside=l instanceof Zh?l.editorOptions.viewGridInside:l instanceof ph&&l.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,r,o,n,s)}finally{this._showing=!1}}},i.prototype.boundsByContainer=function(){return null},i.prototype.hide=function(t){void 0===t&&(t=!0),t&&this._parentView?this._parentView.hide(!0):(this.$_hideChildView(),ft.detach(this._element))},i.prototype.hideChild=function(){this.$_hideChildView()},i.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,r=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(r&&!(i>=r.length)){for(;(e=r[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},i.prototype.getActiveElementId=function(){var t=this._menu._items[this._itemIndex];return t?t._elementId:""},i.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},i.prototype.$_show=function(t,e,i,r,o,n){if(this._element){var s=t.doc,a=dt(s),l=this._element,u=l.style,h=this.manager,c=t.gridView.displayOptions.baseZindex;this._element.style.zIndex=String(c+4);var d=h.dropdownCount,p=this._viewGridInside?t._container:s.documentElement;l.id="rg-popup-"+this._menu.name,this._menu=e,this._itemIndex=-1,ft.clearElements(this._element),this.$_buildItems(e),ft.disableSelection(l),p.appendChild(l);var f=0;if(d&&e.items.length>d)for(var _=0,g=0;_<e.items.length&&g<d;_++){var y=this._element.children[_];y.menuItem.isSeparator()||(f+=y.offsetHeight,g++)}f>0&&f<l.offsetHeight?(u.height=f+2+"px",u.overflow="auto"):(u.removeProperty("height"),u.overflow="hidden");var m=ft.getBrowserSize(),b=ft.ieTen||ft.ieOld?ft.getClientRect(s.body):ft.getClientRect(s.documentElement),v=ft.getClientRect(t._container),w=m.width,C=m.height,x=ft.getClientRect(l),I=a.pageXOffset||s.documentElement.scrollLeft,S=a.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(C-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(w-=18),this._viewGridInside?(x.height>=v.height&&(u.height=v.height-4+"px",u.overflow="auto",x=ft.getClientRect(this._element)),r+v.top+x.height>v.bottom&&(r=this._parentView?v.bottom-x.height-v.top-3:r-x.height-n),i+v.left+x.width>v.right&&(i=this._parentView?v.right-x.width-v.left-3:i-x.width-o)):(this._parentView||(i+=v.left-b.left,r+=v.top-b.top),x.height>=C&&(u.height=C-4+"px",u.overflow="auto",x=ft.getClientRect(this._element)),r+x.height>=C+S-3&&(r=r-x.height-3)<0&&(r=Math.max(0,C-x.height-3)),i+x.width>=w+I-3?i=Math.max(0,w-x.width-3):void 0!==o&&x.width<o&&(i+=o-x.width)),ft.move(this._element,Math.max(0,i),Math.max(0,r))}},i.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",e.setAttribute("role","listbox"),this._container.$_addListener(e,"keydown",t,!1),e},i.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var e=t.menuItem,r=this._element.getBoundingClientRect(),o=this._element.offsetLeft+r.width-4,n=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=i._borrowView(this._container),this._childView.show(this._container,this,e,o,n)}},i.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),ft.detach(this._childView._element),i._returnView(this._childView)),this._childView=null},i.prototype._menuItemActived=function(t){ht(t),this._currDiv=t;var e=t.menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof hh?i.childView&&i.$_hideChildView():e instanceof ch&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){i._showChild(t)}),200))},i.prototype._menuItemDeactived=function(t){},i.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof ch?e.enabled&&this._showChild(t):e?e.enabled&&(this.hide(!0),e.enabled&&e.click(),this.manager.close()):this.$_hideChildView()},i.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,r=e.childElementCount;i<r;i++){var o=e.childNodes[i];if(i===t?ft.addClassName(o,"rg-popup-item-focused"):ft.removeClassName(o,"rg-popup-item-focused"),i==t){var n=o.offsetTop,s=o.offsetHeight+4,a=e.offsetHeight,l=e.scrollTop;l>n?e.scrollTop=Math.max(0,e.scrollTop+(n-l)):l+a<n+s&&(e.scrollTop=e.scrollTop+n+s-(l+a)),this._menuItemActived(o)}}},i.prototype.$_buildItems=function(e){for(var r=e.items,o=[],n=this._container.doc,s=0,a=r.length;s<a;s++){var l=i.$_menuId++,u=r[s];if(u.visible){var h=n.createElement("div");if(h.menuView=this,h.menuItem=u,h.setAttribute("role","option"),h.id=u._elementId="rg-popup-item"+l,u instanceof hh&&u.isSeparator()){h.className="rg-popup-separator";var c=n.createElement("hr");c.className="rg-popup-separator-hr",h.appendChild(c),h.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{!this._firstItem&&(this._firstItem=h),o.length=0,o.push("rg-popup-item"),u.group&&o.push("rg-popup-"+u.group),!u.enabled&&o.push("rg-popup-item-disable"),h.className=o.join(" "),h.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),h.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),h.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this),o=["rg-popup-content"],ft.included(u.type,t.MenuItemType.CHECK,t.MenuItemType.RADIO)&&(u.checked?o.push(u.group?"rg-popup-radio-checked":"rg-popup-check-checked"):o.push(u.group?"rg-popup-radio":"rg-popup-check")),u.styleName&&o.push(u.styleName),u instanceof ch&&o.push("rg-popup-expander");var d=n.createElement("span");d.id="$popupMenu_item_"+l,d.innerHTML=u.label,d.className=o.join(" "),ft.disableSelection(d),h.appendChild(d)}ft.disableSelection(h),this._element.appendChild(h)}}},i.$_menuId=0,i.$_views={},i}(fe),ph=function(t){function e(e){var i=t.call(this)||this;return i._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(i),i._container=e,i._containerDom=e._containerDom,i._menus=[],i}return r(e,t),e.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._container.gridView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t},enumerable:!0,configurable:!0}),e.prototype.popupManager=function(){return this},e.prototype.isShow=function(){return!!this._mainView},e.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(ft.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},e.prototype.getMenu=function(t){for(var e=this._menus.length;e--;)if(ft.compareTextValue(this._menus[e].name,t,!0,!1))return this._menus[e];return null},e.prototype.addMenu=function(t,e,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=null),ft.isWhiteSpace(t))throw"Menu name is empty.";var o;if((o=this.indexOf(t))>=0&&!i)return this._menus[o];var n=new ch(r||this,{name:t,children:e});return i&&o>-1?(this._menus[o].dispose(),this._menus[o]=n):this._menus.push(n),n},e.prototype.removeMenu=function(t){var e=this.indexOf(t);if(e>-1){var i=this._menus.splice(e,1);for(e=i.length;e>0;e--)i[e-1].dispose()}},e.prototype.clearMenus=function(){this._menus.length=0},e.prototype.show=function(t,e,i){var r=this.grid,o=ht(this._containerDom),n=i&&r.getBodyCellAt(i);if("string"==typeof t?t=this.getMenu(t):t instanceof ch||(t=new ch(this,{children:t})),t){var s=this.grid.container.getBound(),a=void 0,l=(a=n?(n.cellButton||n.merged&&n.head.cellButton||n.cell).getBoundingClientRect():e.getBoundingClientRect()).bottom,u=a.left-s.x,h=l-s.y,c=a.width,d=a.height;if(this._mainView=this._activeView=dh._borrowView(this._container),e instanceof o.HTMLTableCellElement){var p=r.getCellType(e),f=r.getTableView(e),_=void 0;if("data"===p)_=(n=n||f.bodyCellByCell(e)).grouped?Yu.getItem("groupHeader",n.item.index,null):Yu.getCell(p,n,i);else if("header"===p){var g=f.layoutByCell(e);_=Yu.getLayout(p,g)}this.clickData=_}else if(e instanceof o.HTMLElement){var y=r.getCellViewOf(e),m=(f=r.getTableView(y)).tableCellByCell&&f.tableCellByCell(y);"inlineFilter"===(p=r.getCellType(y))&&(this.clickData=Yu.getLayout(p,m.layout))}this._mainView.show(this._container,null,t,u,h,c,d),e&&e.setAttribute("aria-activedescendant",this._mainView.getElementId()),o.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},e.prototype.showContext=function(t,e,i,r,o){if(t&&!this._mainView){var n=ht(this._containerDom);this.clickData=o,this._mainView=this._activeView=dh._borrowView(this._container),this._mainView.show(this._container,null,t,i,r,0,0,e),n.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},e.prototype.close=function(){if(this._mainView){var t=ht(this._containerDom);this._mainView.hide(),dh._returnView(this._mainView),this._mainView=null,t.removeEventListener("mousedown",this._grolbalMouseHandler,!1)}},e.prototype.keyDown=function(t,e){this._doKeydown(t,e)},e.prototype.doMenuItemClick=function(t,i){this.fireEvent(e.MENU_ITEM_CLICKED,t,i)},e.prototype._doKeydown=function(t,e){var i=this._activeView,r=null==i?void 0:i.currDiv;switch(t.keyCode){case 40:i.changeItemIndex(1);break;case 38:i.changeItemIndex(-1);break;case 37:i.parentView&&(i.changeItemIndex(0),i.hideChild(),this._showingView=this._activeView=i.parentView||this._mainView);break;case 39:i&&i.childView&&(i=this._showingView=this._activeView=i.childView).changeItemIndex(1);break;case 13:case 32:i.menuItemClicked(r)}e&&e.setAttribute("aria-activedescendant",i.getActiveElementId())},e.prototype.$_buildItems=function(t){},e.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",e}(fe),fh=function(t){function e(){return t.call(this,"summaryCell")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t},enumerable:!0,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)},e}(_s),_h=function(t){function e(e){return t.call(this,e)||this}return r(e,t),Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},enumerable:!0,configurable:!0}),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new fh},e.CELL_CSS="rg-header-summary-cell",e}(ys),gh=function(t){function e(e){var i=t.call(this,e)||this;return i.visible=!1,i}return r(e,t),e.prototype._createSummary=function(t){return new _h(t||this._grid)},e}(bs),yh=function(t){function e(e,i){return t.call(this,e,i,"headerSummaryView")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-header-summary"},e.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},e.prototype._getSummaryRows=function(t){return t.dataRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.summaryHeight},e.prototype._getSummaryCount=function(t){return t.headerSummaryCount},e.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getSummaryUserSpan(e)},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},e.prototype._getTableRowCount=function(t){return t.dataRows*t.headerSummaryCount},e}(ol),mh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(yh),bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(yh),vh=function(t){function e(e){var i=t.call(this,e,"gridSumCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ft.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(Na),wh=function(t){function e(e){var i=t.call(this,e,null,"gridSumView")||this;i._cells=[],i._count=0;for(var r=0;r<3;r++)i.addChild(i._cells[r]=new vh(e));return i}return r(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getSumModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getSumModel(t);return e instanceof ws?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-sum"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,r=t.sectionObjects;this._count=0;for(var o=0,n=r;o<n.length;o++){var s=n[o];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof Es?e.width=i.rowIndicator.width:s instanceof Os?e.width=i.stateBar.width:s instanceof Ps&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,r=this._getTableRowCount(t),o=this._thead,n=o&&o.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var s=0;s<i;s++){var a=this.getChild(s),l=a.model,u=l.getSumCell(),h=this._getTableCell(0,s),c=h.firstElementChild,d=this.$_getCellSelector()+" "+l.getSumStyleName();if(this._chromium){h.rowSpan=r;for(var p=1;p<r;p++)this._getTableCell(p,s).style.display="none"}if(n){var f=n.children[s];f&&(f[ft.TextProp]=l.getCellType()+" sum")}a.setStyleName(h,d),a.text=l.sumText,a.updateCell(e,u,c)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return this._chromium?Math.max(1,t.dataRows)*t.headerSummaryCount:1},e.prototype._getTableRowHeight=function(t,e){if(this._chromium){var i=t.grid.headerSummaryView._rowPoints;return i[e+1]-i[e]}return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return"rg-sum-cell"},e.CELL_CSS="rg-sum-cell",e}(Ma),Ch=function(e){function i(i){var r=e.call(this,i)||this;return r._enabled=!0,r._handleVisibility=t.HandleVisibility.VISIBLE,r._commitBeforeFiltering=!0,r._toast=new Hl({visible:!1,message:"Filtering..."}),r._includeParentItem=!0,r._selector=new xh(i),r._automating=new Ih(i),r}return r(i,e),i.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(t){t!=this._commitBeforeFiltering&&(this._commitBeforeFiltering=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){t!=this._includeParentItem&&(this._includeParentItem=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selector",{get:function(){return this._selector},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"automating",{get:function(){return this._automating},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"toast",{get:function(){return this._toast},enumerable:!0,configurable:!0}),i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t),t.selector&&this._selector.assignFrom(t.selector),t.automating&&this._automating.assignFrom(t.automating),t.toast&&this._toast.assignFrom(t.toast)},i}(Ea),xh=function(t){function e(e){var i=t.call(this,e)||this;return i._listHeight=170,i._showButtons=!1,i._partialSearch=!0,i._excludeCheck=!1,i._filterReset=!0,i._filtersResetText="\uc804\uccb4 \ucd08\uae30\ud654",i._acceptText="\ud655\uc778",i._cancelText="\ucde8\uc18c",i._allCheckText="(\uc804\uccb4 \uc120\ud0dd)",i._searchedCheckText="(\uc870\ud68c \uc804\uccb4 \uc120\ud0dd)",i._filterResetText="\ucd08\uae30\ud654",i._showEmptyFilter=!0,i._emptyFilterText="(\uac12 \uc5c6\uc74c)",i._searchPlaceholder="\uac80\uc0c9...",i._closeWhenClick=!1,i._maxWidth=0,i._width=0,i._minWidth=0,i._style="rg-filter-selector",i}return r(e,t),Object.defineProperty(e.prototype,"listHeight",{get:function(){return this._listHeight},set:function(t){t!=this._listHeight&&(this._listHeight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._showButtons=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(t){t!==this._showEmptyFilter&&(this._showEmptyFilter=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeCheck",{get:function(){return this._excludeCheck},set:function(t){t!=this._excludeCheck&&(this._excludeCheck=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userFilterAddCallback",{get:function(){return this._userFilterAddCallback},set:function(t){t!=this._userFilterAddCallback&&(this._userFilterAddCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeWhenClick",{get:function(){return this._closeWhenClick},set:function(t){t!=this._closeWhenClick&&(this._closeWhenClick=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterReset",{get:function(){return this._filterReset},set:function(t){t!=this._filterReset&&(this._filterReset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtersResetText",{get:function(){return this._filtersResetText},set:function(t){t!=this._filtersResetText&&(this._filtersResetText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterResetText",{get:function(){return this._filterResetText},set:function(t){t!=this._filterResetText&&(this._filterResetText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!==this._minWidth&&(this._minWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textToTitle",{get:function(){return!!this._textToTitle},set:function(t){this._textToTitle=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(t){this._searchIgnoreCase=t},enumerable:!0,configurable:!0}),e}(Ea),Ih=function(t){function e(e){var i=t.call(this,e)||this;return i._dateCategorize=!0,i._numberCategorize=!0,i._textCategorize=!1,i._dateYearFormat="YYYY\ub144\ub3c4",i._dateQuarterFormat="Q\uc0ac\ubd84\uae30",i._dateMonthFormat="M\uc6d4",i._dateDayFormat="YYYY-MM-DD",i._lookupDisplay=!1,i}return r(e,t),Object.defineProperty(e.prototype,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){t!=this._dateCategorize&&(this._dateCategorize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){t!=this._numberCategorize&&(this._numberCategorize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCategorize",{get:function(){return this._textCategorize},set:function(t){t!=this._textCategorize&&(this._textCategorize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._dateCategoryCallback&&(this._dateCategoryCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCategoryCallback",{get:function(){return this._numberCategoryCallback},set:function(t){t!=this._numberCategoryCallback&&(this._numberCategoryCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){t!=this._textCategoryCallback&&(this._textCategoryCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(t){this._dateYearFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(t){this._dateQuarterFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(t){this._dateMonthFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(t){this._dateDayFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredDataOnly",{get:function(){return this._filteredDataOnly},set:function(t){this._filteredDataOnly=t},enumerable:!0,configurable:!0}),e}(Ea);!function(t){t[t.ALL=0]="ALL",t[t.YQ=1]="YQ",t[t.YM=2]="YM",t[t.Y=3]="Y",t[t.QM=4]="QM",t[t.Q=5]="Q",t[t.M=6]="M",t[t.NONE=7]="NONE"}(Cl||(Cl={}));var Sh,Eh=function(){function e(t){this._options=t}return e.HasPartial=function(t,e,i){if(i&&(t=t&&t.toLowerCase(),e=e&&e.toLowerCase()),t.indexOf(e)>=0)return!0;for(var r=ft.hangulToChosungAll(t),o=ft.hangulToChosungAll(e),n=-1,s=!1;(n=r.indexOf(o,n+1))>=0;){for(var a=0;a<o.length&&a+n<r.length;a++){var l=ft.hangulToChosung(t[a+n]),u=ft.hangulToChosung(e[a]);if(u.org&&u.org!==l.org||!u.cho||u.cho!==l.cho){s=!1;break}s=!0}if(s)return!0}return!1},e.prototype.dispose=function(){return this._filters=null,this._options=null,null},Object.defineProperty(e.prototype,"searched",{get:function(){return this._searched},enumerable:!0,configurable:!0}),e.prototype.buildItems=function(e,i,r,o){void 0===o&&(o=!0);var n=this._options.selector,s=this._options.automating,a=n.emptyFilterText;this._autoFilter=r;var l=this._filters=r?e.autoFilters:e.filters,u=[];if(r){e.autoFilters.activeCount>0&&(u=this._getActivatedFilters(e.autoFilters)),e.autoFilters.clear(!1);var h=!1,c=void 0;this._valueType=e.valueType;var d=s.filteredDataOnly?e.grid.getDistinctItemValues(e.dataIndex):i.getDistinctValues(e.dataIndex);switch(this._valueType){case t.ValueType.DATETIME:c=(h=s.dateCategorize)&&s.dateCategoryCallback?s.dateCategoryCallback(e,d):this._categorizeDateValues(d,h,a);break;case t.ValueType.NUMBER:c=(h=s.numberCategorize)&&s.numberCategoryCallback?s.numberCategoryCallback(e,d):this._categorizeNumberValues(d,h,a);break;case t.ValueType.BOOLEAN:c=[];for(var p=!1,f=0;f<d.length;f++){var _=d[f];null!=_?c.push({text:_.toString().toUpperCase(),value:_}):p=!0}p&&n.showEmptyFilter&&c.push({text:a,empty:!0});break;case t.ValueType.TEXT:h=s.textCategorize,c=e.lookupSource&&this._options.automating.lookupDisplay&&!s.textCategoryCallback?this._categorizeLookupTree(i,e,a):h&&s.textCategoryCallback?s.textCategoryCallback(e,d):this._categorizeTextValues(d,h,a)}c&&this._createCategories(c,null,e.valueType,l),this._filters.activateItems(u,!0,o)}},e.prototype.search=function(t){var i=[];function r(t,e){if(i.indexOf(t)<0){for(var r=[],o=t;o;)i.indexOf(o)<0&&r.push(o),o=o.category;Array.prototype.push.apply(i,r.reverse())}}for(var o=0,n=this._filters.count;o<n;o++){var s=this._filters.getItem(o);if(!(s instanceof Mr)){var a=this._autoFilter?s.tag:s.toString(),l=this._autoFilter&&this._options.automating.lookupDisplay&&this._filters.getOwner()&&this._filters.getOwner().lookupDisplay,u=this._options.selector.searchIgnoreCase,h=e.HasPartial;(h(a,t,u)||l&&h(s.toString(),t,u))&&r(s)}}return i},e.prototype._getActivatedFilters=function(t){for(var e=[],i=t.count;i--;){var r=t.getItem(i);r instanceof Mr||!r.active||e.push(r.name)}return e},e.prototype._createCategories=function(i,r,o,n){var s=n.getOwner(),a=this._options.automating.lookupDisplay&&s.lookupDisplay,l=a&&s.lookupSource;function u(e,i,r){if(l&&r.fieldIds){for(var o=r,n=[],s=0;s<o.fieldIds.length;s++)null==o.keys[s]||""==o.keys[s]?n.push("(values["+o.fieldIds[s]+"] is empty)"):n.push("(values["+o.fieldIds[s]+"] = '"+o.keys[s]+"')");return n.join(" and ")}if(null==e||r.empty)return"value is empty";if(i==t.ValueType.DATETIME){var a=r;return"(year(value) = "+a.year+") and (month(value) = "+(a.month+1)+") and (day(value) = "+a.day+")"}return i==t.ValueType.BOOLEAN?r.value?"value":"not(value)":i==t.ValueType.NUMBER?"value = "+e:"value = '"+e+"'"}function h(e,i,r){return o===t.ValueType.TEXT&&e&&!i.empty?s.getLookupLabel(e):r}for(var c=ft.pad,d=0,p=i.length;d<p;d++){var f=i[d],_=f.hasOwnProperty("childs"),g=f.hasOwnProperty("values"),y=void 0;(y=_||g?new Mr:new Lr(u(f.value,o,f))).text=l?f.text:a?h(f.value,f,f.text):f.text;var m="";if(m=f.name?f.name:f.empty?e.EMPTY_FILTER:o==t.ValueType.DATETIME&&_&&r?r.name+" "+f.text:f.text,y.name=m,this._filters.add(y,!1),r&&r.addChild(y),y instanceof Mr){if(_)this._createCategories(f.childs,y,o,n);else if(ft.isArray(f.values))for(var b=f.values,v=0,w=b.length;v<w;v++){var C=b[v],x=C+"",I=new Lr(u(C,o,f));I.name=x,I.text=a?h(C,f,x):x,I.tag=x,y.addChild(I),this._filters.add(I,!1)}}else if(o!=t.ValueType.DATETIME||f.empty)y.tag=f.text;else{var S=f;y.tag=S.year+"-"+c(S.month+1,2)+"-"+c(S.day,2)}}},e.prototype._categorizeDateValues=function(t,e,i){if(!t)return null;for(var r=!1,o=!1,n=!1,s=Je.getDateProperty,a=0,l=0,u=0,h={year:null,quarter:null,month:null,day:null},c=t.length,d=0;d<c;d++){var p=t[d];if(p){var f=s(p,de.YEAR),_=s(p,de.QUARTER),g=s(p,de.MONTH),y=s(p,de.DAY);h?f!=h.year?(a++,l++,u++):_!=h.quarter||g!=h.month?(l++,u++):y!=h.day&&u++:(a++,l++,u++),h.year=f,h.quarter=_,h.month=g,h.day=y}}function m(t,e){var i=e+"";return t?t.replace("YYYY",i).replace("YY",i.slice(-2)):i}function b(t,e){var i=e+1+"";if(!t)return i;var r=("0"+i).slice(-2);return t.replace("QQ",r).replace("Q",i)}function v(t,e){var i=e+1+"";if(!t)return i;var r=("0"+i).slice(-2);return t.replace("MM",r).replace("M",i)}var w=this._options.automating,C=[],x=[];e&&((r=a>1&&l>6)&&(C.push(de.YEAR),x.push((function(t,e,i){return m(w.dateYearFormat,i)}))),(o=l/a>6)&&(C.push(de.QUARTER),x.push(r?function(t,e,i){return b(w.dateQuarterFormat,i)}:function(t,e,i){return m(w.dateYearFormat,t)+" "+b(w.dateQuarterFormat,i)})),(n=u>9&&l>3)&&(C.push(de.MONTH),x.push(r||o?function(t,e,i){return v(w.dateMonthFormat,i)}:function(t,e,i){return m(w.dateYearFormat,t)+" "+v(w.dateMonthFormat,i)}))),C.push(de.DAY),x.push((function(t,e,i){var r=m(w.dateDayFormat,t);return function(t,e){var i=e+"";if(!t)return i;var r=("0"+i).slice(-2);return t.replace("DD",r).replace("D",i)}(r=v(r,e),i)}));var I=[];return function t(e,s,a,l,u){void 0===l&&(l=0),void 0===u&&(u=-1),u=-1==u?e.length-1:u;for(var h,c,d=null,p=l,f=!1,_=function(i){var u=e[i],_=function(t,e,i){for(var r=[],o=0;o<=i;o++)r.push(Je.getDateProperty(t,e[o]));return r}(u,C,s),y=function(t,e,i){if(!t)return null;switch(e[i]){case de.YEAR:return t.getFullYear().toString();case de.HALF:return t.getFullYear().toString()+Math.floor(t.getMonth()/6).toString();case de.QUARTER:return t.getFullYear().toString()+Math.floor(t.getMonth()/3).toString();case de.MONTH:return t.getFullYear().toString()+t.getMonth().toString();case de.DAY:return t.getFullYear().toString()+t.getMonth()+t.getDate()}}(u,C,s);if(i>l&&y!=d){var m=h[s];if(c)if(s===C.length-1){var b={text:"",year:c.getFullYear(),month:c.getMonth(),day:c.getDate(),value:c};b.text=x[s](b.year,b.month,b.day),a.push(b)}else{var v={text:"",childs:[]},w=function(){v.year=c.getFullYear()},I=function(){v.quarter=Math.floor(c.getMonth()/3)},S=function(){v.month=c.getMonth()},E=r&&o&&n?Cl.ALL:r&&o?Cl.YQ:r&&n?Cl.YM:r?Cl.Y:o&&n?Cl.QM:o?Cl.Q:n?Cl.M:Cl.NONE;E===Cl.ALL?0===s?w():1===s?(w(),I()):2===s&&(w(),I(),S()):E===Cl.YQ?0===s?w():1===s&&(w(),I()):E===Cl.YM?0===s?w():1===s&&(w(),S()):E===Cl.Y?w():E===Cl.QM?0===s?I():1===s&&(I(),S()):E===Cl.Q?I():E===Cl.M&&S(),v.text=x[s](c.getFullYear(),c.getMonth(),m),a.push(v),t.call(g,e,s+1,v.childs,p,i-1)}p=i}i>l&&null==c&&(f=!0),d=y,h=_,c=u},g=this,y=l;y<=u+1;y++)_(y);0==s&&f&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0})}.call(this,t,0,I),I},e.prototype._categorizeNumberValues=function(t,e,i){if(!t||!t.length)return null;var r=t.filter((function(t){return null!=t&&null!=t&&!isNaN(t)})).sort((function(t,e){return t-e})),o=r.length,n=r.length!==t.length,s=1,a=[];if(e&&o>15)for(s=Math.round(o/Math.min(Math.max(4,Math.round(o/5)),8));r.length>0;){var l=r.splice(0,s);a.push({text:l[0]+" ~ "+l[l.length-1],values:l})}else for(var u=0;u<o;u++)a.push({text:r[u]+"",value:r[u]});return n&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0}),a},e.prototype._categorizeLookupTree=function(t,e,i){var r=e.grid,o=[];if(this._options.automating.filteredDataOnly)r._items._rs.getAllItems().forEach((function(t){o.push(t.dataRow)}));else if(r.isTree())t.getDescendants(null,-1).forEach((function(t){o.push(t.rowId)}));else for(var n=t.rowCount,s=0;s<n;s++)o.push(s);var a=[],l=e.lookupKeyFieldIds,u={},h={};function c(o,n,s,a,l){var u=s.shift(),d=t.getValue(n,u);l.push(u),a.push(d);var p=o[d];p||(p=o[d]={value:d,name:a.join("-"),keys:a.slice(),fieldIds:l.slice()}),s.length?(!p.text&&(p.text=function(t,e,i){var o=h[t];if(!o)for(var n=r.columnsByField(t),s=0;s<n.length;s++)if(n[s].lookupSource||n[s].lookupDisplay){o=h[t]=n[s];break}return o?o.lookupSource?o.lookupSource.lookup(e,o.valueSeparator):o.lookupDisplay?o.getLookupLabel(i):i:i}(u,a,d)||d||i),p.childs=p.childs||{},c(p.childs,n,s,a,l)):!p.text&&(p.text=d?e.lookupSource.lookup(a,e.valueSeparator)||d:i)}for(s=0;s<o.length;s++)c(u,o[s],l.slice(),[],[]);return function t(e,i){Object.keys(e).sort().forEach((function(r){var o=e[r],n={value:o.value,text:o.text,name:o.name,fieldIds:o.fieldIds,keys:o.keys};i.push(n),o.hasOwnProperty("childs")&&(n.childs=[],t(o.childs,n.childs))}))}(u,a),a},e.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var r=t.length,o=[],n=!1;if(e&&r>15){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],u=0;u<r;u++)if(I=t[u]){var h=(w=I[0]).charCodeAt(0),c=!1,d=void 0;s[d=h>=48&&h<=57?0:h>=65&&h<=90||h>=97&&h<=122?1:h>=1e4?2:3][w]?s[d][w].push(I):(s[d][w]=[I],c=!0),a[d]++,c&&l[d]++}else n=!0;for(var p=Math.min(Math.max(4,Math.round(r/5)),8),f=0;f<4;f++){var _=0==a[f]?0:Math.max(1,Math.min(l[f],Math.round(a[f]/r*p))),g=Math.round(l[f]/_),y=g,m=s[f],b="",v=[];for(var w in m)y===g&&(b=w),Array.prototype.push.apply(v,s[f][w]),0==--y&&(o.push({text:1==g?w:b+" ~ "+w,values:v}),v=[],y=g)}}else{u=0;for(var C=t.length;u<C;u++){var x=t[u];if(x){var I=x.replace(/\\/g,"\\\\").replace(/\'/g,"\\'");o.push({text:x,value:I})}else n=!0}}return n&&this._options.selector.showEmptyFilter&&o.push({text:i,empty:!0}),o},e.EMPTY_FILTER="$$empty",e}(),kh=function(t){function e(e,i,r){var o=t.call(this)||this;o._opened=!1,o._grid=r,o._gridContainer=r.container._containerDom;var n=ct(o._gridContainer),s=o._element=n.createElement("div");return s.style.position="absolute",s.style.display="none",s.className=i.selector.style,s.setAttribute("aria-hidden","true"),o._options=i,o._soptions=i.selector,o._manager=new Eh(o._options),o._globalMouseDownHandler=o._globalMouseDownHandler.bind(o),o._globalKeyDownHandler=o._globalKeyDownHandler.bind(o),o._scrollHandler=o._scrollHandler.bind(o),o._wheelHandler=o._wheelHandler.bind(o),o._resetClickHandler=o._resetClickHandler.bind(o),o._searchInputHandler=o._searchInputHandler.bind(o),o._searchKeyDownHandler=o._searchKeyDownHandler.bind(o),o._checkAllClickHandler=o._checkAllClickHandler.bind(o),o._confirmClickHandler=o._confirmClickHandler.bind(o),o._cancelClickHandler=o._cancelClickHandler.bind(o),o._itemClickHandler=o._itemClickHandler.bind(o),o}return r(e,t),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._targetColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return ct(this._element)},enumerable:!0,configurable:!0}),e.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,ft.detach(this._element),t.prototype._doDispose.call(this)},e.prototype.show=function(t,e,i){this._opened&&this.hide();var r,o=this._element,n=this._soptions,s=this._grid.container._containerDiv,a=s.parentElement;(r=s.nextSibling)?a.insertBefore(o,r):a.appendChild(o),this._targetColumn=t,o.className=n.style,o.style.display="block",this._autoFiltering=t.autoFilter,this._build(t,i,this._autoFiltering);var l=e.getBoundingClientRect(),u=this._gridContainer.parentElement.clientWidth,h=n.width,c=o.style,d=0;-1===h?d=n.maxWidth<=0?this._viewWidth:Math.min(n.maxWidth,h,u):h>0&&(d=Math.min(h,u)),d>0&&(c.width=Math.max(d,n.minWidth)+"px");var p=ht(this._gridContainer),f=o.getBoundingClientRect(),_=o.offsetParent instanceof p.HTMLBodyElement,g=_?{left:0,top:0}:o.offsetParent.getBoundingClientRect(),y=f.left-g.left+(l.right-f.right)+(_?p.scrollX||p.pageXOffset:o.offsetParent.scrollLeft),m=l.bottom-g.top+(_?p.scrollY||p.pageYOffset:o.offsetParent.scrollTop);c.left=Math.max(0,y)+"px",c.top=m+"px",p.addEventListener("mousedown",this._globalMouseDownHandler,!1),p.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},e.prototype.hide=function(){if(this._opened){ft.detach(this._element);var t=ht(this._gridContainer);t.removeEventListener("mousedown",this._globalMouseDownHandler,!1),t.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1}},e.prototype._createItemInfo=function(t){this._items=[],this._roots=[],this._visbleItemMap={};for(var e=t instanceof Nr?t.count:t.length,i=[],r=0;r<e;r++){var o=t instanceof Nr?t.getItem(r):t[r],n=o instanceof Mr,s=o.level,a=void 0;if(a=o instanceof Mr?o.activeState:o.active?dr.ACTIVE:dr.UNACTIVE,this._autoFiltering||o.visible){var l={text:o.toString(),state:a,index:r,level:s,filter:o};if(n&&(l.expanded=!1),i[s]=l,s>0){var u=i[s-1];l.parent=u,u.childs||(u.childs=[]),u.childs.push(l)}this._items.push(l),0==s&&this._roots.push(l),this._visbleItemMap[r]=l}}this._visibleCount=this._calcVisibleItems(),this._dirties=[]},e.prototype._build=function(t,e,i){var r=this._soptions,o=this._applyBatch=r.showButtons,n=this.doc;this._manager.buildItems(t,e,i,!1),this._filters=i?t.autoFilters:t.filters,this._createItemInfo(this._filters),this._headerDiv=n.createElement("div"),this._headerDiv.className="rg-filter-header",r.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var s=this._viewportDiv=n.createElement("div");s.className="rg-filter-list-viewport",s.style.height=r.listHeight+"px",s.addEventListener("scroll",this._scrollHandler),s.addEventListener("wheel",this._wheelHandler),this._listDiv=n.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",s.appendChild(this._listDiv),this._element.appendChild(s),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),o&&this._buildFooter(this._element),this._searched=!1},e.prototype._finalize=function(){var t;this._roots=[],this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;for(this._items=[],(t=this._resetDiv)&&(t.removeEventListener("click",this._resetClickHandler),this._resetDiv=ft.detach(this._resetDiv)),(t=this._searchDiv)&&(t.removeEventListener("input",this._searchInputHandler),t.removeEventListener("keydown",this._searchKeyDownHandler),this._searchInput=ft.detach(this._searchInput),this._searchDiv=ft.detach(this._searchDiv)),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._selectAllDiv=ft.detach(this._selectAllDiv),this._headerDiv=ft.detach(this._headerDiv),this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._confirmButton=ft.detach(this._confirmButton),this._cancelButton=ft.detach(this._cancelButton),this._footerDiv=ft.detach(this._footerDiv)),e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var i=this._viewportDiv;i.removeEventListener("scroll",this._scrollHandler),i.removeEventListener("wheel",this._wheelHandler),this._listDiv=ft.detach(this._listDiv),this._viewportDiv=ft.detach(this._viewportDiv)},e.prototype._buildSelectAllBox=function(){var t=this.doc,e=this._soptions.allCheckText,i=this._selectAllDiv=t.createElement("div");i.className="rg-filter-select-all",this._soptions.textToTitle&&e&&(i.title=e);var r=this._selectAllCheck=t.createElement("input");r.type="checkbox",r.className="rg-filter-checkbox",this._setCheckState(r,this._allCheck),i.appendChild(r);var o=this._selectAllText=t.createElement("div");o.className="rg-filter-text",o.innerHTML=ft.htmlEncode(e),i.appendChild(o);var n=this._columnReset=t.createElement("div");n.className="rg-filter-column-reset",n.innerHTML=ft.htmlEncode(this._soptions.filterResetText),i.appendChild(n),this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},e.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler),t.appendChild(i)},e.prototype._buildItems=function(){for(var t="temp\uc784\uc2dc",e=ft.getTextLength(t),i=0,r=this._filters.count;i<r;i++){var o=this._filters.getItem(i).toString();e<ft.getTextLength(o)&&(e=ft.getTextLength(o),t=o)}var n=this._buildItemElement(t,0,void 0,"rg-filter-item");this._element.style.width="unset",this._listDiv.appendChild(n),this._itemHeight=Math.floor(n.getBoundingClientRect().height),this._viewWidth=Math.floor(n.getBoundingClientRect().width)+10,this._listDiv.removeChild(n),this._element.style.width="";var s=this._visibleCount,a=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(a/this._itemHeight));var l=this._pageCount;this._listDiv.style.height=s*this._itemHeight+"px";var u=s<l?s:l;for(this._itemElements=[],i=0;i<u;i++){var h=this._visibleItems[i];this._itemElements.push(this._buildItem(h,i))}},e.prototype._buildSearchbox=function(t){var e=this.doc,i=this._searchDiv=e.createElement("div");i.className="rg-filter-searchbox";var r=this._searchInput=this.doc.createElement("input");r.type="text",r.placeholder=this._soptions.searchPlaceholder,r.className="rg-filter-search-input",r.addEventListener("input",this._searchInputHandler),r.addEventListener("keydown",this._searchKeyDownHandler),i.appendChild(r),t.appendChild(i)},e.prototype._buildFooter=function(t){var e=this.doc;this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button";var i=this._confirmButton=e.createElement("input");i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(i);var r=this._cancelButton=e.createElement("input");r.type="button",r.className="rg-filter-cancel",r.value=this._soptions.cancelText,r.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(r),t.appendChild(this._footerDiv)},e.prototype._buildItem=function(t,e){var i=this._items,r=this._listDiv,o=i[t],n=o.expanded,s=this._buildItemElement(o.text,o.level,o.state,"rg-filter-item",n);return s.filter_id=t+"",s.style.position="absolute",s.style.height=this._itemHeight+"px",s.style.top=e*this._itemHeight+"px",s.addEventListener("click",this._itemClickHandler),r.appendChild(s),s},e.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler),ft.detach(e),this._itemElements.splice(t,1)},e.prototype._buildItemElement=function(t,e,i,r,o){var n,s=this.doc,a=s.createElement("div");r&&(a.className=r),this._soptions.textToTitle&&t&&(a.title=t);var l=s.createElement("div");l.className="rg-filter-item-indent-"+e,a.appendChild(l);var u=s.createElement("div"),h="rg-filter-expander";void 0!==o&&(h+=" "+(o?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),u.className=h,a.appendChild(u);var c=s.createElement("input");c.type="checkbox",c.className="rg-filter-checkbox",this._setCheckState(c,i),a.appendChild(c);var d=s.createElement("div");return n=d.style,d.className="rg-filter-text",n.position="relative",n.display="inline",n.pointerEvents="none",d.innerHTML=ft.htmlEncode(t),a.appendChild(d),a},e.prototype._calculateState=function(t){for(var e=void 0,i=0,r=t.length;i<r;i++){var o=t[i];if(e&&o.state!=e)return dr.INDETERMINATE;e=o.state}return e||dr.UNACTIVE},e.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},e.prototype._calcVisibleItems=function(){function t(t){for(var e=t.parent;e;){if(!e.expanded)return!1;e=e.parent}return!0}var e=0;this._visibleItems=[];for(var i=0,r=this._items.length;i<r;i++){var o=this._items[i];o.parent&&!t(o)||(e++,this._visibleItems.push(i))}return e},e.prototype._setCheckState=function(t,e){t.checked=e==dr.ACTIVE,t.indeterminate=e==dr.INDETERMINATE},e.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},e.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var i=this._itemElements[t],r=parseInt(i.filter_id),o=this._visbleItemMap[r],n=i.childNodes[e.INDEX_CHECKBOX];this._setCheckState(n,o.state)}},e.prototype._doRedraw=function(t){void 0===t&&(t=0);var e=this._itemElements,i=this._pageCount,r=Math.min(i,this._visibleCount),o=Math.max(0,this._visibleItems.indexOf(t));o+i>this._visibleCount&&(o=Math.max(0,this._visibleCount-i));for(var n=0,s=0;s<r;s++){var a=this._visibleItems[s+o];!e[s]&&s<r&&e.push(this._buildItem(a,s)),this._changeItemModel(e[s],a),n++}for(s=e.length-1;s>n-1;s--)this._removeItem(s);var l=this._visibleCount*this._itemHeight;this._listDiv.style.height=l+"px";var u=this._viewportDiv;u.scrollTop+u.offsetHeight>l&&(u.scrollTop=l-u.offsetHeight)},e.prototype._changeItemModel=function(t,e){var i=ht(t),r=this._items[e];t.filter_id=e+"",this._soptions.textToTitle&&r.text&&(t.title=r.text);for(var o=t.childNodes.length;o--;){var n=t.childNodes.item(o);if(n instanceof i.HTMLElement){var s=n.className;if(s)if(s.indexOf("rg-filter-item-indent-")>-1)n.className="rg-filter-item-indent-"+r.level;else if(s.indexOf("rg-filter-expander")>-1){var a="rg-filter-expander";void 0!==r.expanded&&(a+=" "+(r.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),n.className=a}else if(n instanceof i.HTMLInputElement&&"rg-filter-checkbox"==s)this._setCheckState(n,r.state);else if(s.indexOf("rg-filter-text")>=0){var l=ft.htmlEncode(r.text),u=this._searchInput?this._searchInput.value:"",h="g"+(this._soptions.searchIgnoreCase?"i":"");l=u?l.replace(new RegExp(u,h),(function(t,e,i){return'<span class="rg-filter-search-text">'+t+"</span>"})):l,n.innerHTML="<span>"+l+"</span>"}}}},e.prototype._doScroll=function(){for(var t=this._itemElements,e=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),i=0,r=t.length;i<r;i++){var o=this._visibleItems[e+i];this._changeItemModel(t[i],o),t[i].style.top=(e+i)*this._itemHeight+"px"}},e.prototype._doSearch=function(t){t?this._createItemInfo(this._manager.search(t)):this._createItemInfo(this._filters),this._selectAllText.textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,this._doRedraw(),this._searched=!!t},e.prototype._resetActive=function(){for(var t=this._items.length;t--;)this._items[t].state=dr.UNACTIVE;this._filters.activateAll(!1),this._redrawCheck()},e.prototype._activateAll=function(t){var e=!this._applyBatch;if(e&&!this._searched){this._filters.activateAll(t);for(var i=this._items.length;i--;)(r=this._items[i]).childs||(r.state=t?dr.ACTIVE:dr.UNACTIVE)}else for(i=this._items.length;i--;){var r;(r=this._items[i]).childs||(r.state=t?dr.ACTIVE:dr.UNACTIVE,e?r.filter.active=t:this._dirties.push(r))}e&&this._searched&&this._doFilterApply(),this._calcluateStates();var o=this._itemElements[0].filter_id,n=Math.max(0,this._visibleItems.indexOf(parseInt(o)));this._doRedraw(n)},e.prototype._doCheck=function(t,e){var i=e?dr.ACTIVE:dr.UNACTIVE,r=this._applyBatch||void 0!==t.childs,o=this._applyBatch?this._dirties:[];if(function t(i,r,o,n){if(i.state!=r)if(i.state=r,i.childs)for(var s=i.childs.length;s--;)t(i.childs[s],r,o,n);else o?n.push(i):i.filter.active=e}(t,i,r,o),r&&!this._applyBatch){for(var n=[],s=0,a=o.length;s<a;s++)n.push(o[s].filter.name);n.length>0&&this._filters.activateItems(n,e)}for(var l=t.parent;l;)l.state=this._calculateState(l.childs),l=l.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},e.prototype._doFilterApply=function(){for(var t=this._dirties.length;t--;){var e=this._dirties[t];e.filter.active=e.state==dr.ACTIVE}this._dirties=[]},e.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems();var i=parseInt(this._itemElements[0].filter_id);this._doRedraw(i)},e.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},e.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},e.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(e=(e>0?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault()},e.prototype._scrollHandler=function(t){this._doScroll()},e.prototype._searchInputHandler=function(t){var e=t.target;e instanceof ht(e).HTMLInputElement&&this._doSearch(e.value)},e.prototype._searchKeyDownHandler=function(t){13==t.keyCode&&this._doSearch(this._searchInput.value)},e.prototype.$_refreshItem=function(t){for(var e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[],this._manager.buildItems(t,t.grid.dataSource,t.autoFilter,!1),this._createItemInfo(t.autoFilters),this._buildItems()},e.prototype._resetClickHandler=function(){var t=this._grid.getFilteredColumns(),e=t.length,i=this._targetColumn,r=this._selectAllCheck;this._setCheckState(r,dr.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(null);for(var o=0;o<e;o++)t[o].activateAllFilters(!1);this._soptions.closeWhenClick?this.hide():i.autoFilter&&this._options.automating.filteredDataOnly&&this.$_refreshItem(i)},e.prototype._checkAllClickHandler=function(t){var e=this._selectAllCheck,i=t.target;if(i===this._columnReset){e.checked=e.indeterminate=!1,this._doSearch(this._searchInput.value="");var r=this._targetColumn;r.autoFilter&&this._options.automating.filteredDataOnly&&(r.activateAllFilters(!1),this.$_refreshItem(r))}else i!==e&&(e.checked=!e.checked,e.indeterminate=!1);var o=e.checked;this._activateAll(o),this._allCheck=o?dr.ACTIVE:dr.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},e.prototype._itemClickHandler=function(t){var i=t.target,r=i.className.indexOf("rg-filter-expander")>-1,o="rg-filter-checkbox"==i.className,n=i;"rg-filter-item"!==i.className&&(n=n.parentElement);var s=parseInt(n.filter_id),a=this._visbleItemMap[s];if(r)void 0!==a.expanded&&this._doExpand(a,!a.expanded);else{var l=void 0;o?l=i:(l=n.children.item(e.INDEX_CHECKBOX)).checked=!l.checked,this._doCheck(a,l.checked),!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()}},e.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},e.prototype._cancelClickHandler=function(){this.hide()},e.INDEX_CHECKBOX=2,e}(fe),Oh=function(){function t(){}return t.decode=function(e){for(var i=t.CHARACTERS,r=t.SUFFIX,o=e.split(""),n=[],s=o.length;o[--s]==r;);for(var a=0;a<s;){var l=i.indexOf(o[a++])<<18;a<=s&&(l|=i.indexOf(o[a++])<<12),a<=s&&(l|=i.indexOf(o[a++])<<6),a<=s&&(l|=i.indexOf(o[a++])),n.push(l>>>16&255),n.push(l>>>8&255),n.push(255&l)}for(;0==n[n.length-1];)n.pop();return n},t.SUFFIX="=",t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}(),Rh=function(){function t(){}return t.union=function(t,e){var i=e.s3[255&t];t>>=8;var r=e.s2[255&t];t>>=8;var o=e.s1[255&t];t>>=8;var n=e.s0[255&t],s=(n>>16)+(o>>16)+((65535&n)+(65535&o)>>16)<<16|(65535&n)+(65535&o)&65535;return((s=(s>>16^r>>16)<<16|65535&(65535&s^65535&r))>>16)+(i>>16)+((65535&s)+(65535&i)>>16)<<16|(65535&s)+(65535&i)&65535},t.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},t._encryptBlock=function(e,i){var r=e.left,o=e.right,n=t.xor,s=t.union;r=n(r,i.p[0]),o=n(o,n(s(r,i),i.p[1])),r=n(r,n(s(o,i),i.p[2])),o=n(o,n(s(r,i),i.p[3])),r=n(r,n(s(o,i),i.p[4])),o=n(o,n(s(r,i),i.p[5])),r=n(r,n(s(o,i),i.p[6])),o=n(o,n(s(r,i),i.p[7])),r=n(r,n(s(o,i),i.p[8])),o=n(o,n(s(r,i),i.p[9])),r=n(r,n(s(o,i),i.p[10])),o=n(o,n(s(r,i),i.p[11])),r=n(r,n(s(o,i),i.p[12])),o=n(o,n(s(r,i),i.p[13])),r=n(r,n(s(o,i),i.p[14])),o=n(o,n(s(r,i),i.p[15])),r=n(r,n(s(o,i),i.p[16])),e.right=r,e.left=n(o,i.p[17])},t._decryptBlock=function(e,i){var r=e.left,o=e.right,n=t.xor,s=t.union;r=n(r,i.p[17]),o=n(o,n(s(r,i),i.p[16])),r=n(r,n(s(o,i),i.p[15])),o=n(o,n(s(r,i),i.p[14])),r=n(r,n(s(o,i),i.p[13])),o=n(o,n(s(r,i),i.p[12])),r=n(r,n(s(o,i),i.p[11])),o=n(o,n(s(r,i),i.p[10])),r=n(r,n(s(o,i),i.p[9])),o=n(o,n(s(r,i),i.p[8])),r=n(r,n(s(o,i),i.p[7])),o=n(o,n(s(r,i),i.p[6])),r=n(r,n(s(o,i),i.p[5])),o=n(o,n(s(r,i),i.p[4])),r=n(r,n(s(o,i),i.p[3])),o=n(o,n(s(r,i),i.p[2])),r=n(r,n(s(o,i),i.p[1])),e.right=r,e.left=n(o,i.p[0])},t._init=function(e){var i,r,o,n=e.split("").map((function(t){return 255&t.charCodeAt(0)})),s=t.kb,a=t._encryptBlock,l=0,u=0,h={left:0,right:0},c={p:s.p.slice(0).map((function(e){var i,r=n.length;for(i=0;i<4;i++)u=u*t.POW8|n[l++%r];return(e>>16^u>>16)<<16|65535&(65535&e^65535&u)})),s0:s.s0.slice(0),s1:s.s1.slice(0),s2:s.s2.slice(0),s3:s.s3.slice(0)};for(i=0,o=c.p.length;i<o;)a(h,c),c.p[i++]=h.left,c.p[i++]=h.right;for(i=0;i<4;i++)for(r=0,o=c["s"+i].length;r<o;)a(h,c),c["s"+i][r++]=h.left,c["s"+i][r++]=h.right;return c},t.decrypt=function(e,i){for(var r=t._decryptBlock,o=t._init(i),n=[],s=Oh.decode(e),a=s.length>>3,l=0,u={left:null,right:null},h=0;h<a;h++){u.left=s[l]*t.POW24|s[l+1]*t.POW16|s[l+2]*t.POW8|s[l+3],u.right=s[l+4]*t.POW24|s[l+5]*t.POW16|s[l+6]*t.POW8|s[l+7],r(u,o);var c=u.left,d=u.right;n.push(c>>24&255),n.push(c>>16&255),n.push(c>>8&255),n.push(255&c),n.push(d>>24&255),n.push(d>>16&255),n.push(d>>8&255),n.push(255&d),l+=8}if(n[n.length-1]==n[n.length-2]||1==n[n.length-1]){var p=n[n.length-1];n.splice(n.length-p,p)}return n.map((function(t){return String.fromCharCode(t)})).join("")},t.POW2=Math.pow(2,2),t.POW3=Math.pow(2,3),t.POW4=Math.pow(2,4),t.POW8=Math.pow(2,8),t.POW16=Math.pow(2,16),t.POW24=Math.pow(2,24),t.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},t}(),Ph=function(){function t(){}return t.eqaulsUpperDomain=function(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)},t._getLDKey=function(t){for(var e="",i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]>>1);return e},t.includedDomains=function(t,e,i){for(var r=t.split(","),o=0,n=r.length;o<n;o++){var s=r[o];if(this.eqaulsUpperDomain(s,e))return!0;if(i&&s&&"*"===s[0]&&"*."!==s.substr(0,1)){var a=new RegExp("^/"+s.substr(1)+"/");if(i&&a.exec(i))return!0}}return!1},t.decrypt=function(t){for(var e={},i=Rh.decrypt(t,"dkdl"+this._getLDKey(Rh.kb.k)).split(";"),r=0,o=i.length;r<o;r++){var n=i[r].split("="),s=n[0],a=n[1];a&&a.length>0&&(e[s]=a)}return e},t}(),Dh=function(t){function e(e){var i=t.call(this,"rowGroupHeaderCell")||this;return i._rowGroup=e,i}return r(e,t),e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this.item instanceof br?this._rowGroup.getHeaderText(this.item):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),e}(Gr),Th=function(t){function e(e){var i=t.call(this,"rowGroupFooterCell")||this;return i._footerIndex=0,i._value=NaN,i._rowGroup=e,i}return r(e,t),e.$_getValue=function(t,e){if(e&&e.dataIndex>=0){var i=e.grid,r=t.parent,o=r.getFooterIndex(t),n=e.groupFooters.get(o);if(n&&n.expression){var s=i.rowGroupSummaryRuntime;return s.setColumn(e,e.grid.summarizer),s.setItem(r),n.evaluate(s)}if(n&&n.valueCallback)return(0,n.valueCallback)(i.handler,e,o,r,null);if(r&&i.isGroupedColumn(e)){var a=i.rowGroup.getFooterText(r);return null==a?void 0:a}}},e.getValue=function(t,i){try{return e.$_getValue(t,i)}catch(t){return Gr.ERROR}},e.$_displayText=function(t,e,i,r){var o="";if(void 0!==i&&e){if(i instanceof Date){var n=r.datetimeWriter;o=n?n.getText(i):String(i)}else if("number"==typeof i){var s=r.numberFormatter;o=s?s.getText(i):isNaN(i)?"":String(i)}else"string"==typeof i?o=i+"":"boolean"==typeof i&&(o=String(i));if(o){var a=r.prefix;a&&(o=a+o),(a=r.suffix)&&(o+=a)}}if(!o){var l=ft.cast(t.parent,br);if(e){var u=e.groupFooters.get(l.getFooterIndex(t));u&&(o=u.text)}}return o||""},e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._footerIndex},enumerable:!0,configurable:!0}),e.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=e.$_getValue(this.index.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,ft.log("FOOTER ERROR: "+t)}},e.prototype.getDisplayText=function(t){return this._error?Gr.ERROR:e.$_displayText(this.index.item,this.index.dataColumn,this._value,t)},e.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},e.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.index.item.level},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(e){t.prototype.setIndex.call(this,e),this._footerIndex=e.item.$_footerIndex},e.prototype._getSummary=function(t,e){return t.groupFooters.get(e)},e}(Gr),Lh=function(t){function e(){var e=t.call(this,"rowGroupBarCell")||this;return e._level=0,e}return r(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this.item.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getText",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),e}(Gr),Mh=function(t){function e(e){var i=t.call(this)||this;return i._index=0,i.$_owner=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},e}(Ct),Fh=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._owner=e,i._items.push(new Mh(i)),i}return r(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++)i[e].dispose();this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},set:function(t){t=Math.max(t,1);var e=this._items;if(t!==e.length){for(var i=void 0;e.length<t;)(i=new Mh(this))._index=e.length,e.push(i);for(;e.length>t;)(i=e.pop()).dispose();this.$_itemChanged(null)}},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.assignFrom=function(t){var e=this._items;if(ft.isArray(t)){for(var i=t.length;e.length<i;)e.push(null);i>0&&e.length>i&&(e.length=i),i>0&&(e[0].assignFrom(t[0]),e[0]._index=0);for(var r=1;r<i;r++)t[r]?(e[r]||(e[r]=new Mh(this)),e[r].assignFrom(t[r]),e[r]._index=r):e[r]=null}else e[0].assignFrom(t),e[0]._index=0;this.$_itemChanged(null)},e.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)},e}(Ct),Nh=function(e){function i(i){var r=e.call(this,i)||this;return r._mergeMode=!1,r._sorting=!0,r._expandedAdornments=t.RowGroupAdornments.BOTH,r._collapsedAdornments=t.RowGroupAdornments.HEADER,r._indentVisible=!0,r._levelIndent=20,r._mergeHeaderIndenting=!0,r._mergeFooterIndenting=!0,r._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",r._expanderVisibility=t.ExpanderVisibility.DEFAULT,r._headerCell=new Dh(r),r._footerCell=new Th(r),r._barCell=new Lh,r._headerStatementExpr=new Dr(r._headerStatement),r._footerStatementExpr=new Dr,r._statementRuntime=new Wr,r._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},r._footers=new Fh(r),r}return r(i,e),i.prototype._doDispose=function(){this._footers=this._footers.dispose(),e.prototype._doDispose.call(this)},i.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},i.prototype.getGroupFooterCount=function(t){return this._footers.count},i.prototype.setCounterAware=function(t){this._counterAware=t},Object.defineProperty(i.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(e){e!==t.RowGroupAdornments.NONE&&e!=this._collapsedAdornments&&(this._collapsedAdornments=e,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),i.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(i.prototype,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"headerCallback",{get:function(){return this._headerCallback},set:function(t){this._headerCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergeExpanderVisibility",{get:function(){return this.expanderVisibility},set:function(t){this.expanderVisibility=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibility",{get:function(){return this._expanderVisibility},set:function(t){t!==this.expanderVisibility&&(this._expanderVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(t){this._expanderVisibleCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"valueForGroupCallback",{get:function(){return this._valueForGroupCallback},set:function(t){this._valueForGroupCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this,!0),this._changed()},enumerable:!0,configurable:!0}),i.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(rs.temp(this.owner,t.index)),this._headerCell},i.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},i.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),r=e.styleName,o=e.styleCallback;return r&&(i+=" "+r),o&&(r=o(this._grid.handler,t.index,e.index))&&(i+=" "+r),i},i.prototype.getFooterCellStyle=function(t,e,r){void 0===r&&(r=!0);var o=t.footerIndex,n=this._footers.get(o).cellStyleCallback,s=t.index.column.groupFooters.get(t.footerIndex);if(n){var a=n(this._grid.handler,t);e.assign(a)}if(s){var l=s.styleCallback;if(l){var u=l(this._grid.handler,t);e.assign(u)}}return!e.styleName&&s&&(e.styleName=s.styleName),r&&(e.styleName?e.styleName=i.FOOTER_CELL_STYLE+" "+e.styleName:e.styleName=i.FOOTER_CELL_STYLE),e},i.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},i.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},i.prototype.getHeaderText=function(t){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,t):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime))},i.prototype.getFooterText=function(t){if(this._footerStatement&&this._footerStatementExpr)return this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)},i.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},i.prototype.$_isMultiLine=function(t){var e=t.visible?1:0,i=t.footerCount;if((e+=Math.max(t.descendantCount,t.count)-i)>1)return!0;for(var r=0;r<i;r++)if(t.getFooter(r).visible&&++e>1)return!0;return!1},i.prototype.$_isExpanderVisible=function(e){if(!e.expanded)return!0;if(this._expanderVisibleCallback){var i=this._expanderVisibleCallback.call(this._grid,this._grid.handler,e);return null==i||i}switch(this._expanderVisibility){case t.ExpanderVisibility.NONE:return!1;case t.ExpanderVisibility.ALWAYS:return!0;default:return this.$_isMultiLine(e)}},i.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",i.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",i}(Ar);(Sh=t.DataDropMode||(t.DataDropMode={})).COPY="copy",Sh.MOVE="move";var Vh,Bh=function(e){function i(i){var r=e.call(this,i)||this;return r._dropMode=t.DataDropMode.COPY,r._proxyLabel="${rows}\ud589 ${mode}",r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"proxyLabel",{get:function(){return this._proxyLabel},set:function(t){this._proxyLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t},enumerable:!0,configurable:!0}),i.prototype.getEnabled=function(t,e,i){var r=this._dragCallback;return!r||!1!==r(t.handler,e,this.grid.handler,i)},i.prototype.getLabel=function(e,i,r){var o=this._labelCallback,n=void 0;return o&&(n=o(e.handler,i,this.grid.handler,r)),void 0===n&&this._proxyLabel&&(n=(n=(n=(n=this._proxyLabel.replace("${rows}",i.length+"")).replace("${mode}",e==this.grid||this.dropMode==t.DataDropMode.MOVE?"\uc774\ub3d9":"\ubcf5\uc0ac")).replace("${from}",i[0]+"")).replace("${to}",r+"")),n},i}(Ea),Ah=function(t){function e(e){var i=t.call(this,e.doc,"gridDebugLayer")||this;return i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layout=function(){var t=this._owner.layoutManager;this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1));var e=t.dataBounds.clone();e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},e.prototype._getCssSelector=function(){return"rg-debug-layer"},e.prototype._initDom=function(t){var e=t.style,i=ct(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(i,"Client")),t.appendChild(this._topContent=this.$_createElement(i,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(i,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(i,"Fixed Content")),t.appendChild(this._content=this.$_createElement(i,"Content")),t.appendChild(this._rightContent=this.$_createElement(i,"Right Content")),t.appendChild(this._grid=this.$_createElement(i,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(i,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(i,"Non Fixed","g"))},e.prototype.$_createElement=function(t,e,i){void 0===i&&(i="r");var r=t.createElement("span"),o=r.style;return o.display="inline-block",o.position="absolute",o.boxSizing="border-box",o.pointerEvents="none","b"==i?(o.border="2px dashed rgba(0, 0, 255, 0.5)",o.color="blue"):"g"==i?(o.paddingTop="20px",o.border="2px solid rgba(0, 128, 0, 0.5)",o.color="rgb(0, 128, 0)"):(o.border="1px solid rgba(255, 0, 0, 0.7)",o.color="red"),o.fontWeight="bold",o.textAlign="center",o.verticalAlign="middle",o.whiteSpace="normal",r[ft.TextProp]=e,r},e.prototype.$_setBounds=function(t,e){var i=t.style;e.isEmpty?i.display="none":(i.display="inline-block",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px",i.lineHeight=e.height+"px")},e}(As),$h=(function(t){function e(){var e=t.call(this)||this;return e._min=0,e._max=100,e._step=1,e._next=0,e._completed=!1,e._timer=void 0,e}r(e,t),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=t},enumerable:!0,configurable:!0}),e.prototype.execute=function(t){if(t){this._runner=t,this._next=this._min;var e=ht(t.container);t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext()}},e.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this._completed&&this.$_complete()},e.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}}}(fe),function(t){function e(e){var i=t.call(this)||this;i._message="Load data...",i._min=0,i._max=0,i._pos=0;var r=ct(e);return i._dom=i.$_createElement(r),i}return r(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},enumerable:!0,configurable:!0}),e.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},e.prototype.setProperties=function(t,e,i,r,o){void 0===r&&(r=null),void 0===o&&(o=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=r,o&&this.$_refreshView()},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);var i=t.getBoundingClientRect(),r=ft.getSize(this._dom);ft.move(this._dom,(i.width-r.width)/2,(i.height-r.height)/3)},e.prototype.close=function(){ft.detach(this._dom)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.className="rg-progress";var i=e.style;return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},e.prototype.$_createBar=function(t){var e=t.createElement("div");e.className="rg-progress-bar";var i=e.style;i.width="100%",i.height="13px",i.marginBottom="4px";var r=t.createElement("div");return r.className="rg-progress-progress",(i=r.style).height="100%",i.width="0px",e.appendChild(e.$_led=r),e},e.prototype.$_createMsg=function(t){var e=t.createElement("div"),i=t.createElement("span");i.className="rg-progress-message";var r=e.style;return r.width="100%",r.textAlign="center",e.appendChild(e.$_span=i),e},e.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,i=e.$_led;t.$_msg.$_span.innerHTML=ft.htmlEncode(this._message);var r=ft.getSize(e);i.style.width=Math.min(r.width-1,Math.floor(r.width*(this._pos-this._min)/(this._max-this._min)))+"px"},e.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=ft.htmlEncode(this._message)},e}(fe)),jh=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i}return r(e,t),e.prototype.show=function(t,e,i){this._view||(this._view=new $h(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},e.prototype.close=function(){this._view&&this._view.close()},e.prototype.setProperties=function(t,e,i,r){this._view&&(r||(r=this._title||"Load data... ",e>t&&(r+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,r,!0))},e.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new Hh(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},e.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},e.prototype.loaderShowing=function(){return this._loaderView&&this._loaderView.isShowing()},e}(fe),Hh=function(t){function e(e){var i=t.call(this)||this,r=ct(e);return i._dom=i.$_createElement(r),i}return r(e,t),e.prototype.show=function(t){t.appendChild(this._dom)},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.close=function(){ft.detach(this._dom)},e.prototype.isShowing=function(){return!!this._dom.parentElement},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.className="rg-load-indicator",e.style.position="absolute",e},e}(fe),Wh=function(t){function e(e){var i=t.call(this,e)||this;return i._title="\ub9ac\uc5bc\uadf8\ub9ac\ub4dc \ud14c\uc774\ube14 (\ud14c\uc774\ube14\uc5d0\uc11c \uc5d4\ud130\ud0a4\ub85c \ubc84\ud2bc \ub9c1\ud06c\ub4f1\uc758 \uae30\ub2a5\uc774 \uc2e4\ud589\ub429\ub2c8\ub2e4)",i._description="${columns} \uc5f4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \ub370\uc774\ud130 \ud14c\uc774\ube14\uc785\ub2c8\ub2e4.",i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title!==t&&(this._title=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)},enumerable:!0,configurable:!0}),e.prototype.getDescription=function(){var t,e=this.title?"<strong>"+this.title+"</strong>":"",i="";if(t=this.grid){var r=t.layoutManager.cellLayouts._dataCells,o=r&&r[0];o&&o.forEach((function(t){t.isProxy||(i+=t.displayText+", ")}))}return e+(i=this.description?"<span>"+this.description.replace("${columns}",i.substr(0,i.length-2))+"</span>":"")},e}(Ea),Gh=function(t){function e(e){var i=t.call(this,e.doc,"watermark")||this;return i._grid=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=32===this._grid.container._lkCheck;if(t){this._active=!0;var e=this._dom;e&&!e.parentElement&&this._grid._dom.appendChild(e),this.$_setDiv(e,t),this.$_setSpan(this._span,t,this.message||_t.decode("6riw6rCE7J20IOunjOujjOuQmOyXiOyKteuLiOuLpA==")),this.resetSize(),this._grid.container.disabled=!0}},e.prototype._getCssSelector=function(){return"rg-watermark-layer"},e.prototype._initDom=function(t){var e=ct(t);t.appendChild(this._span=this.$_createElement(e,""))},e.prototype._setSizeStyle=function(t){var e=this._active;t.width=e?"100%":"0px",t.height=e?"100%":"0px"},e.prototype.$_setDiv=function(t,e){var i=t.style;i.position="absolute",i.zIndex="1",e?(this.setImportantStyle("background-color","rgba(80, 80, 80, 0.5)"),this.setImportantStyle("display","block"),i.removeProperty("pointer-events")):i.pointerEvents="none"},e.prototype.$_setSpan=function(t,e,i){var r=t.style;e&&(r.display="inline-block",r.position="absolute",r.boxSizing="border-box",r.pointerEvents="none",r.fontWeight="bold",r.textAlign="center",r.verticalAlign="middle",r.whiteSpace="normal",r.top="50%",r.left="50%",r.transform="translate(-50%, -50%)",r.fontSize="50px",t[ft.TextProp]=i)},e.prototype.$_createElement=function(t,e){return t.createElement("span")},e}(As),Uh=function(t){function e(){return t.call(this,"filterPanelCell")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(Gr),zh=function(e){function i(i){var r=e.call(this,i)||this;return r._showInput=!0,r._height=23,r._minRowHeight=23,r._filterDelay=500,r._ignoreCase=!0,r._trimData=!1,r._beforeCommit=!0,r._defaultNumberOperator=t.InlineFilterOperator.GREATER_EQUAL,r._defaultTextOperator=t.InlineFilterOperator.CONTAINS,r._defaultDateOperator=t.InlineFilterOperator.GREATER_EQUAL,r.visible=!1,r._cell=new Uh,r}return r(i,e),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){t!==this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!==this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showInput",{get:function(){return this._showInput},set:function(t){t!=this._showInput&&(this._showInput=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ignoreCase",{get:function(){return this._ignoreCase},set:function(t){t!==this._ignoreCase&&(this._ignoreCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterDelay",{get:function(){return this._filterDelay},set:function(t){this._filterDelay=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"beforeCommit",{get:function(){return this._beforeCommit},set:function(t){t!=this._beforeCommit&&(this._beforeCommit=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textOperators",{get:function(){return this._textOperators||i.$_DefaultTextOperators},set:function(t){this._grid.closePopups(!1),this._textOperators=this.$_setOperators(t),this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numberOperators",{get:function(){return this._numberOperators||i.$_DefaultNumberOperators},set:function(t){this._grid.closePopups(!1),this._numberOperators=this.$_setOperators(t),this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dateOperators",{get:function(){return this._dateOperators||i.$_DefaultDateOperators},set:function(t){this._grid.closePopups(!1),this._dateOperators=this.$_setOperators(t),this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"trimData",{get:function(){return this._trimData},set:function(t){t!==this._trimData&&(this._trimData=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.getPopup=function(e){switch(e.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:return this.$_getPopup(i.$_DATE_POPUP,this.dateOperators,!1);case t.ValueType.NUMBER:case t.ValueType.UINT:case t.ValueType.INT:case t.ValueType.UNUM:return this.$_getPopup(i.$_NUMBER_POPUP,this.numberOperators,!1);case t.ValueType.TEXT:case t.ValueType.CHAR:return this.$_getPopup(i.$_TEXT_POPUP,this.textOperators,!1)}},i.prototype.clearInput=function(t){("string"!=typeof t||(t=this._grid.columnByName(t)))&&this._grid.clearInlineFilter(t)},i.prototype.getCell=function(t){var e=this._cell,i=t.getDataColumn();return e.index.set(-1,i),e.showInput=!!i&&i.filterable&&(this.showInput?!1!==i.showInlineFilter:i.showInlineFilter),e.filterOperator=i._inlineFilterOp||this.$_getDefaultOperator(i),e.filterText=i._inlineFilterText||"",e},i.prototype.assignFrom=function(t){e.prototype.assignFrom.call(this,t)},i.prototype.$_getPopup=function(t,e,i){var r=this._grid,o=r.popupMenuManager,n=o.getMenu(t);if(!n||i){for(var s=[],a=Object.keys(e),l=r.filterOperatorCallback.bind(r),u=0,h=a;u<h.length;u++){var c=h[u],d=new hh(null,{label:e[c],tag:c,styleName:"rg-inline-filter-icon rg-inline-filter-"+ft.camelToHyphen(c),callback:l});s.push(d)}n=o.addMenu(t,s,!0,null)}return n.name},i.prototype.$_getDefaultOperator=function(e){switch(e.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:return this._defaultDateOperator;case t.ValueType.NUMBER:case t.ValueType.UNUM:case t.ValueType.UINT:case t.ValueType.INT:return this._defaultNumberOperator;case t.ValueType.CHAR:case t.ValueType.TEXT:return this._defaultTextOperator}},i.prototype._createCell=function(){return new Uh},i.prototype.$_setOperators=function(e){var i,r=Object.keys(e);if(r.length<=0){var o=Object.keys(t.InlineFilterOperator);i={};for(var n=0;n<r.length;n++)for(var s=r[n],a=0;a<o.length;a++)t.InlineFilterOperator[o[a]].toLowerCase()==s.toLowerCase()&&(i[t.InlineFilterOperator[o[a]]]=e[s])}return i},i.$_TEXT_POPUP="$$_textOperators_$$",i.$_NUMBER_POPUP="$$_numberOperators_$$",i.$_DATE_POPUP="$$_dateOperators_$$",i.$_DefaultTextOperators={contains:"\ud3ec\ud568",notContains:"\ud3ec\ud568\ud558\uc9c0 \uc54a\uc74c",startsWith:"\uc2dc\uc791 \ubb38\uc790",endsWith:"\ub05d \ubb38\uc790",equal:"\uac19\uc74c",notEqual:"\uac19\uc9c0 \uc54a\uc74c",empty:"\uac12 \uc5c6\uc74c",reset:"\ucd08\uae30\ud654"},i.$_DefaultNumberOperators={equal:"\uac19\uc74c",notEqual:"\uac19\uc9c0 \uc54a\uc74c",greater:"\ubcf4\ub2e4 \ud07c",greaterEqual:"\ud06c\uac70\ub098 \uac19\uc74c",lower:"\ubcf4\ub2e4 \uc791\uc74c",lowerEqual:"\uc791\uac70\ub098 \uac19\uc74c",between:"\ubc94\uc704",empty:"\uac12 \uc5c6\uc74c",reset:"\ucd08\uae30\ud654"},i.$_DefaultDateOperators={contains:"\ud3ec\ud568",notContains:"\ud3ec\ud568\ud558\uc9c0 \uc54a\uc74c",startsWith:"\uc2dc\uc791 \ubb38\uc790",endsWith:"\ub05d \ubb38\uc790",equal:"\uac19\uc74c",notEqual:"\uac19\uc9c0 \uc54a\uc74c",greater:"\ubcf4\ub2e4 \ud07c",greaterEqual:"\ud06c\uac70\ub098 \uac19\uc74c",lower:"\ubcf4\ub2e4 \uc791\uc74c",lowerEqual:"\uc791\uac70\ub098 \uac19\uc74c",empty:"\uac12 \uc5c6\uc74c",reset:"\ucd08\uae30\ud654"},i}(Ar),Yh=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.input=null,t.operatorButton=null,t.popupMenu=null,t}return r(i,e),i.prototype.span=function(){this.spanned=!0,this.clear(!1)},i.prototype.clear=function(t){return e.prototype.clear.call(this,t),this.className&&(this.cell.className=this.className=""),this},i.prototype.setOperator=function(t){this.setClass(t),this.setPlaceHolder(t)},i.prototype.setClass=function(t){this.operatorButton&&(this.operatorButton.className="rg-filter-panel-operator "+(t?" rg-inline-filter-"+ft.camelToHyphen(t):""))},i.prototype.setPlaceHolder=function(e){this.input&&(this.input.placeholder=e===t.InlineFilterOperator.BETWEEN?"value1 ~ value2":"")},i.prototype.setFocus=function(){this.input.focus()},i}(Ya),qh=function(e){function i(t,i){var r=e.call(this,t,i,"filterPanelView")||this;return r._rowPoints=[],r._cells=[],r}return r(i,e),i.prototype._doDispose=function(){for(var t=0;t<this._cells.length;t++)for(var i=this._cells[t],r=0;r<i.length;r++)i[r].dispose(),i[r]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++){var o=i[r];if(o&&o.cell===t)return o}},i.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++)if(i[r].layout===t)return i[r]},i.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},i.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},i.prototype.operatorChange=function(e,i,r,o){var n=i.tag,s=r.getDataColumn(),a=this.model.getCell(r);n===t.InlineFilterOperator.RESET&&(e.input.value="",n=a.filterOperator),e.setOperator(n),this._filterRun(this.model,e.input.value,n,s)},i.prototype.clearInput=function(t,e){if(t)t.input.value="",this._filterRun(this.model,"",void 0,e);else for(var i=0,r=this._cells.length;i<r;i++)for(var o=0,n=this._cells[i].length;o<n;o++){(t=this._cells[i][o]).input.value="";var s=t.layout.getDataColumn();s._inlineFilterText="",s&&s.setInlineFilter(void 0,!1)}},i.prototype.setFocus=function(t){t.setFocus()},i.prototype._getCssSelector=function(){return"rg-filter-panel"},i.prototype._getRendererStyle=function(){return"rg-filter-panel-renderer"},i.prototype._getTableRowCount=function(t){return t.dataRows},i.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},i.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},i.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},i.prototype._doPrepareTableRow=function(t,i,r,o){e.prototype._doPrepareTableRow.call(this,t,i,r,o)},i.prototype._prepareCellContent=function(t,e){var i=ct(t).createElement("div");return i.className=this._getRendererStyle(),i},i.prototype._doMeasure=function(t,e,i){for(var r=t.layoutManager.dataRows,o=Math.max(t.filterPanel.height,t.filterPanel.minRowHeight*r),n=0,s=this._rowPoints=[n],a=0;a<r-1;a++)s.push(n+=Math.round(o/r));return s.push(n=o),Ra.create(e,n)},i.prototype._doPrepareTableExtents=function(t){},i.prototype._doLayoutContent=function(t){var e=t.grid,i=t.cellLayouts._dataCells,r=i.length,o=this._getFirstCell(t),n=this._getStartCell(t)-o,s=this._getEndCell(t)-o,a=this.model;this.$_refreshCells(t,i,this._tbody),this.$_refreshSpans(t,r),this.$_refreshHeadTitle(t,this._thead);for(var l=0;l<r;l++){var u=this._cells[l],h=this._getTableRow(t,l);ft.setClassName(h,"rg-filter-panel-row");for(var c=n;c<=s;c++){var d=u[c];if(d.visible){var p=d.layout;if(p.isProxy||p instanceof jn)d.clear(!1);else{var f=a.getCell(p);this._updateCell(e,a,f,d)}}}}},i.prototype._updateCell=function(t,e,i,r){var o=t.doc,n=t.container,s=r.input,a=r.operatorButton,l=r.cell.firstElementChild;a||(a=r.operatorButton=o.createElement("span"),l.appendChild(a)),s||((s=r.input=o.createElement("input")).type="text",n.$_addListener(s,"keyup",this._keyupHandler.bind(this),!1),n.$_addListener(s,"input",this._inputHandler.bind(this),!1),l.appendChild(s)),s.value=i.filterText;var u=this._rowPoints[1]-this._rowPoints[0];l.style.display=i.showInput?"":"none";var h=a.style;h.width="20px",h.height=u-6+"px",(h=s.style).width=r.width-30+"px",h.height=u-6+"px",r.setOperator(i.filterOperator),r.popupMenu=e.getPopup(r.layout.getDataColumn())},i.prototype._keyupHandler=function(e){var i=this.grid,r=e.keyCode||e.charCode;if(ft.included(r,38,40)){var o=i.getTableCell(e.target),n=this.tableCellByCell(o),s=rs.temp(i,-1,n.layout),a=void 0;if(38!==r||s.isTop){if(40===r){if(s.isBottom)return s.itemIndex=i.topIndex,i.setFocusedIndex(s,!0,!0,!0),void i.setFocus();s.down(t.VerticalMoveStep.CELL),a=s.layout}}else s.up(t.VerticalMoveStep.CELL),a=s.layout;a&&(n=this.tableCellByLayout(s.layout)).setFocus()}else 13===r&&this.$_search(e,!0)},i.prototype._inputHandler=function(t){this.$_search(t,!1)},i.prototype.$_search=function(t,e){var i,r=t.target,o=this.grid,n=this.model;i=r.value;var s=o.getTableCell(r),a=(this.tableCellByCell(s),this.columnByCell(s));if(a){var l=n.getCell(a.layout);e?(clearTimeout(this._timer),this._filterRun(n,i,l.filterOperator,a)):this._startTimer(i,l.filterOperator,a)}},i.prototype._startTimer=function(t,e,i){var r=this.model;clearTimeout(this._timer),this._timer=setTimeout(function(){this._filterRun(r,t,e,i)}.bind(this),r.filterDelay)},i.prototype._filterRun=function(e,i,r,o){var n,s,a=i;if(null!=i&&""!=i||r===t.InlineFilterOperator.EMPTY)switch(o.valueType){case t.ValueType.DATE:case t.ValueType.DATETIME:case t.ValueType.NUMBER:var l=i=i.replace(/[^0-9\-.~]/g,"");switch(ft.included(o.valueType,t.ValueType.DATE,t.ValueType.DATETIME)?(s="datestr(value)",l='"'+(i=i.replace(/-/g,""))+'"'):s="value",r){case t.InlineFilterOperator.EQUAL:n=s+" = "+l;break;case t.InlineFilterOperator.NOT_EQUAL:n=s+" <> "+l;break;case t.InlineFilterOperator.GREATER:n=s+" > "+l;break;case t.InlineFilterOperator.GREATER_EQUAL:n=s+" >= "+l;break;case t.InlineFilterOperator.LOWER:n=s+" < "+l;break;case t.InlineFilterOperator.LOWER_EQUAL:n=s+" <= "+l;break;case t.InlineFilterOperator.CONTAINS:n=s+" like '%"+i+"%'";break;case t.InlineFilterOperator.NOT_CONTAINS:n=s+" not like '%"+i+"%'";break;case t.InlineFilterOperator.STARTS_WITH:n=s+" like '"+i+"%'";break;case t.InlineFilterOperator.ENDS_WITH:n=s+" like '%"+i+"'";break;case t.InlineFilterOperator.EMPTY:n="value is empty";break;case t.InlineFilterOperator.BETWEEN:var u=l.split("~").sort((function(t,e){return parseFloat(t)-parseFloat(e)}));n=2===u.length&&u[1]?"(value >= "+u[0]+") and (value <= "+u[1]+")":"value >= "+u[0]}break;case t.ValueType.TEXT:default:s=o.lookupDisplay?"text":"value",s=e.trimData?"trim("+s+")":s;var h=e.ignoreCase?"i":"";switch(i=e.trimData&&i?i.trim():i,i=e.ignoreCase&&i?i.toLowerCase():i,r){case t.InlineFilterOperator.CONTAINS:n=s+" "+h+"likehan '%"+i+"%'";break;case t.InlineFilterOperator.NOT_CONTAINS:n=s+" not "+h+"likehan '%"+i+"%'";break;case t.InlineFilterOperator.STARTS_WITH:n=s+" "+h+"likehan '"+i+"%'";break;case t.InlineFilterOperator.ENDS_WITH:n=s+" "+h+"likehan '%"+i+"'";break;case t.InlineFilterOperator.EQUAL:n=s+" "+h+"like '"+i+"'";break;case t.InlineFilterOperator.NOT_EQUAL:n=s+" not "+h+"like '"+i+"'";break;case t.InlineFilterOperator.EMPTY:n="value is empty"}}else n=void 0;var c=this.tableCellByLayout(o.layout);n!=c.criteria&&(c.criteria=n,o.setInlineFilter(n,!0)),r&&(o._inlineFilterOp=r),o._inlineFilterText=a},i.prototype._getFirstCell=function(t){return t._firstCell},i.prototype._getLastCell=function(t){return t._lastCell},i.prototype._getStartCell=function(t){return t.getStartCell()},i.prototype._getEndCell=function(t){return t.getEndCell()},i.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},i.prototype.$_refreshCells=function(t,e,i){for(var r=this._cells,o=i.children,n=o.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=r.length;l<n;l++)r.push([]);for(var u=0;u<n;u++){for(var h=r[u],c=o[u].children,d=e[u],p=0;p<a;p++){var f=c[p],_=d[p+s],g=h[p];g?g.cell!==f||g.layout!=_&&(g.layout=_,g.clear(!0)):(g=h[p]=new Yh(c[p])).layout=_,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,p),g.spanned=!1}for(p=a;p<h.length;p++)h[p].dispose();h.length=a}for(u=n;u<r.length;u++){var y=r[u];for(p=0;p<y.length;p++)y[p].dispose(),y[p]=null}r.length=n},i.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),r=this._getFirstCell(t)-i,o=this._getLastCell(t)-i,n=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,u=r;u<=o;u++){var h=a[u],c=h.layout,d=c.parent,p=d&&d.vertical;if(h.spanned);else if(c.isProxy)h.clear(!1);else{var f=0,_=0,g=c.getDataSpan()-1;if(g>0){var y=0,m=c.vindex+1;if(p)for(;y++<g&&y<n&&(b=d.getVisible(m++));)_+=b._dspan,this._cells[s+y][u].span();else for(;y++<g&&u-r+y<l&&m<d.visibleCount;){var b;if(!(b=d.getVisible(m++)))break;f+=b._cspan,a[u+y].span()}}c.isNull&&h.clear(!0),h.set(c._cspan+f,c._dspan+_,!0)}}},i.prototype.$_refreshHeadTitle=function(t,e){for(var i=this._cells[0],r=e.children[0],o=0;r&&o<i.length;o++){var n=i[o].layout.source,s=r.children[o];s&&n&&(s[ft.TextProp]=n.header.getDisplayText()||n.firstColumn.header.displayText)}},i.RENDERER_STYLE="rg-filter-renderer",i}(Ma),Kh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(qh),Xh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-filter-panel"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(qh),Qh=function(t){function e(e){var i=t.call(this,e,"gridFilterCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return r(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[ft.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(Na),Jh=function(t){function e(e){var i=t.call(this,e,null,"gridFilterView")||this;i._cells=[],i._count=0;for(var r=0;r<3;r++)i.addChild(i._cells[r]=new Qh(e));return i}return r(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getFilterModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getFilterModel(t);return e instanceof ws?e.getCellType():void 0},e.prototype._getCssSelector=function(){return"rg-filter"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,r=t.sectionObjects;this._count=0;for(var o=0,n=r;o<n.length;o++){var s=n[o];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof Es?e.width=i.rowIndicator.width:s instanceof Os?e.width=i.stateBar.width:s instanceof Ps&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,r=this._thead,o=r&&r.children[0];this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var n=0;n<i;n++){var s=this.getChild(n),a=s.model,l=a.getFilterCell(),u=this._getTableCell(0,n),h=u.firstElementChild,c=this.$_getCellSelector()+" "+a.getFilterStyleName();if(o){var d=o.children[n];d&&(d[ft.TextProp]=a.getCellType()+" filter")}s.setStyleName(u,c),s.updateCell(e,l,h)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-filter-cell",e}(Ma),Zh=function(i){function o(t,r,o){var n=i.call(this,t.doc,!0)||this;n._debugging=!1,n._scrollBarWidth=16,n._scrollBarHeight=16,n._keepNullFocus=!0,n._loading=!0,n._dataLoad=!1,n._userMode=!1,n._userModeError=null,n._gridObjects=[],n._tableViews={},n._columnMap={},n._columnLayouts=new Mn,n._columnLock=0,n._columnsDirty=!1,n._columnSummaryRuntime=new us,n._columnValidationRuntime=new rn,n._rowValidationRuntime=new en,n._layouted=!1,n._resetting=!1,n._needMerge=!1,n._leftPos=0,n._horzScrolled=!1,n._topIndex=0,n._prevTop=0,n._prevLast=-1,n._updateLock=!1,n._hoveredY=-1,n._focusing=!1,n._dataChanged=!1,n._validations=new tn(!1),n.$_editFocused=!1,n.$_showFocusCell=!1,n._needSyncHeadCheck=!1,n._cellUpdateEventLock=!1,n._currentRowId=-1,n._currentRow=-1,n._scrolledTime=0,n._cellLayoutDirty=!1;var s=t.doc,a=t._lkCheck=function(){var t,i=location.hostname;try{t=realGrid2Lic}catch(t){return 1}if(!t)return 1;var r=Ph.decrypt(t);if("RealGrid2"!=r.name)return 2;var o=r.server.toLowerCase(),n=location.pathname.toLowerCase();if("developer"!=e.license&&!Ph.includedDomains(o,i.toLowerCase(),n))return 8;var s=r.lic.toLowerCase();if(e.code=r.code,e.license=r.lic,"evaluation"==s||"limited"==s){var a=r.expire.split(".").map((function(t){return parseInt(t)})),l=new Date(a[0],a[1],a[2],23,59,59,999);if(new Date>l)return Ph.includedDomains(o,"*",null)?32:16}return 0}();switch(a){case 0:case 32:break;default:return}n._container=t,n._addGridObject(n._header=new ps(n)),n._addGridObject(n._footers=new vs(n)),n._addGridObject(n._headerSummaries=new gh(n)),n._addGridObject(n._rowIndicator=new Es(n)),n._addGridObject(n._stateBar=new Os(n)),n._addGridObject(n._checkBar=new Ps(n)),n._addGridObject(n._body=new Sa(n)),n._addGridObject(n._filterPanel=new zh(n)),n._rootElement=new As(s,"grid root view"),n.addChild(n._rootElement),n._debugView=new Ah(n),32===a&&n.addChild(n._watermarkLayer=new Gh(n)),n._emptyView=new Ta(s),n.addChild(n._emptyView),n._contentPane=new ql(s,"contentPane"),n.addElement(n._contentPane),n._rightContentPane=new Jl(s,"rightContentPane"),n.addElement(n._rightContentPane),n._fixedContentPane=new Xl(s,"fixedContentPane"),n.addElement(n._fixedContentPane),n._doContentPanesCreated(),n._leftContentPane=new Yl(s,"leftContentPane"),n.addElement(n._leftContentPane),n._sideContentPane=n._createSidePane(),n._sideContentPane&&n.addElement(n._sideContentPane),n._topContentPane=new zl(s,"topContentPane"),n.addElement(n._topContentPane),n._filterPanelView=new qh(s,n._filterPanel),n._fixedFilterView=new Kh(s,n._filterPanel),n._rightFilterView=new Xh(s,n._filterPanel),n._bodyView=n._createBodyView(n._body),n._fixedBodyView=n._createFixedBodyView(n._body),n._rightBodyView=n._createRightBodyView(n._body),n._headerView=new Za(s,n._header),n._fixedHeaderView=new tl(s,n._header),n._rightHeaderView=new el(s,n._header),n._headerSummaryView=new yh(s,n._headerSummaries),n._fixedHeaderSummaryView=new mh(s,n._headerSummaries),n._rightHeaderSummaryView=new bh(s,n._headerSummaries),n._footerView=new nl(s,n.footers),n._fixedFooterView=new sl(s,n.footers),n._rightFooterView=new al(s,n.footers),n._rowBarContainer=new Wu(n),n._headView=new Bl(n),n._sumView=new wh(s),n._footView=new $l(s),n._filterView=new Jh(s);for(var l=[n._rowBarContainer,n._bodyView,n._fixedBodyView,n._rightBodyView,n._headerView,n._fixedHeaderView,n._rightHeaderView,n._headerSummaryView,n._fixedHeaderSummaryView,n._rightHeaderSummaryView,n._footerView,n._fixedFooterView,n._rightFooterView,n._headView,n._sumView,n._footView,n._filterView,n._filterPanelView,n._fixedFilterView,n._rightFilterView],u=l.length-1;u>=0;u--){var h=l[u];n._tableViews[h.$_hash]=h}return n._contentPane.addChild(n._headerView),n._contentPane.addChild(n._headerSummaryView),n._contentPane.addChild(n._filterPanelView),n._contentPane.addChild(n._bodyView),n._contentPane.addChild(n._footerView),n._fixedContentPane.addChild(n._fixedBodyView),n._fixedContentPane.addChild(n._fixedFooterView),n._fixedContentPane.addChild(n._fixedHeaderSummaryView),n._fixedContentPane.addChild(n._fixedHeaderView),n._fixedContentPane.addChild(n._fixedFilterView),n._rightContentPane.addChild(n._rightBodyView),n._rightContentPane.addChild(n._rightFooterView),n._rightContentPane.addChild(n._rightHeaderSummaryView),n._rightContentPane.addChild(n._rightHeaderView),n._rightContentPane.addChild(n._rightFilterView),n._leftContentPane.addChild(n._rowBarContainer),n._leftContentPane.addChild(n._footView),n._leftContentPane.addChild(n._sumView),n._leftContentPane.addChild(n._headView),n._leftContentPane.addChild(n._filterView),n._doCreateOtherElements(),n._selectionLayer=n._createSelectionLayer(),n.addElement(n._selectionLayer),n._feedbackLayer=new As(s,"feedbackLayer"),n.addElement(n._feedbackLayer),n._rowHoverView=new rh(s),n.addFeedbackElement(n._rowHoverView),n._hscrollBar=new Ol(t,!1),n._vscrollBar=new Ol(t,!0),n._scrollEdge=new Il(s),n.addElement(n._hscrollBar),n.addElement(n._vscrollBar),n.addElement(n._scrollEdge),n._hscrollBar.addListener(n),n._vscrollBar.addListener(n),n._selections=new Ys(n),n._selections.addListener(n),n._fixedOptions=new ka(n),n._displayOptions=new Oa(n),n._formatOptions=new jl(n),n._editOptions=new du(n),n._editorOptions=new fu(n),n._copyOptions=new _u(n),n._pasteOptions=new gu(n),n._dataDropOptions=new Bh(n),n._sortingOptions=new Ul(n),n._filteringOptions=new Ch(n),n._waiOptions=new Wh(n),n._mobileOptions=new yu(n),n._initStyles(),n._columns=new cs(n),n._activeCellLayout=n._defaultCellLayout=new ts(n),n._delegate=n._createDelegate(),n._layoutManager=n._createLayoutManager(),n._editController=n._createEditController(),n._validationManager=new on(n),n._lookupProvider=new lh,n._lookupProvider.addListener(n),n._clipboardManager=new Ia(n),n._progressManager=new jh(n._container._containerDom),n._popupMenuManager=new ph(n._container),n._popupMenuManager.addListener(n),n._tooltipManager=new ku(n),n._filterSelector=new kh(n._container,n._filteringOptions,n),n._toastManager=new Gl(n),n._currentIndex=new rs(n),n._editorIndex=new rs(n),n._focusedIndex=new rs(n),(n._accessibility=r)&&n._waiOptions.assignFrom(o),n}return r(o,i),o.createColumn=function(t){return t?"series"==t.type?new Ln(t):new Tn(t):null},o.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._filterPanel=this._filterPanel.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._filterPanelView=this._filterPanelView.dispose(),this._fixedFilterView=this._fixedFilterView.dispose(),this._rightFilterView=this._rightFilterView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._waiOptions=this._waiOptions&&this._waiOptions.dispose(),this._watermarkLayer=this._watermarkLayer&&this._watermarkLayer.dispose(),rs.clearTemp(),i.prototype._doDispose.call(this)},Object.defineProperty(o.prototype,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&(this._debugging=t,t?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"activeTool",{get:function(){return this.container.activeTool},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"editorLender",{get:function(){return this._editorLender},set:function(t){this._editorLender=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!0,configurable:!0}),o.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(o.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!0,configurable:!0}),o.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},Object.defineProperty(o.prototype,"rowIndicator",{get:function(){return this._rowIndicator},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"checkBar",{get:function(){return this._checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stateBar",{get:function(){return this._stateBar},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filterPanel",{get:function(){return this._filterPanel},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"activeCellLayout",{get:function(){return this._activeCellLayout},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cellLayout",{set:function(t){this._beforeChangeLayout();var e=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn;this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var i=t&&new Zn(this).load(t),r=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=i||this._defaultCellLayout,this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.invalidate(),this.refreshView(),r&&e&&setTimeout(function(){r.layout=this._activeCellLayout.layoutByColumn(e),this.setFocusedIndex(r)}.bind(this),10),this._cellLayoutDirty=!0,this.clearRowHeights(),this._populateMerges()},enumerable:!0,configurable:!0}),o.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0},Object.defineProperty(o.prototype,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnCount",{get:function(){return this._columns.count},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource,this._items&&(this._items.dataSource=t),this.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&this._items.addListener(this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._items?this._items.itemCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusedIndex",{get:function(){return this._focusedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rowBarContainer",{get:function(){return this._rowBarContainer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topContentPane",{get:function(){return this._topContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sideContentPane",{get:function(){return this._sideContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"leftContentPane",{get:function(){return this._leftContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedContentPane",{get:function(){return this._fixedContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightContentPane",{get:function(){return this._rightContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedBodyView",{get:function(){return this._fixedBodyView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightBodyView",{get:function(){return this._rightBodyView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"headerView",{get:function(){return this._headerView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedHeaderView",{get:function(){return this._fixedHeaderView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightHeaderView",{get:function(){return this._rightHeaderView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"headerSummaryView",{get:function(){return this._headerSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"footerView",{get:function(){return this._footerView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedFooterView",{get:function(){return this._fixedFooterView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightFooterView",{get:function(){return this._rightFooterView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filterPanelView",{get:function(){return this._filterPanelView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedFilterView",{get:function(){return this._fixedFilterView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rightFilterView",{get:function(){return this._rightFilterView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"headView",{get:function(){return this._headView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sumView",{get:function(){return this._sumView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"footView",{get:function(){return this._footView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filterView",{get:function(){return this._filterView},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fixedOptions",{get:function(){return this._fixedOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"displayOptions",{get:function(){return this._displayOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"editOptions",{get:function(){return this._editOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"editorOptions",{get:function(){return this._editorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"copyOptions",{get:function(){return this._copyOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pasteOptions",{get:function(){return this._pasteOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"dataDropOptions",{get:function(){return this._dataDropOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sortingOptions",{get:function(){return this._sortingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filteringOptions",{get:function(){return this._filteringOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"mobileOptions",{get:function(){return this._mobileOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"WaiOptions",{get:function(){return this._waiOptions},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"accessibility",{get:function(){return this._accessibility},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"delegate",{get:function(){return this._delegate},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"heightMeasurer",{get:function(){return this.container.heightMeasurer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selections",{get:function(){return this._selections},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectionLayer",{get:function(){return this._selectionLayer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"editController",{get:function(){return this._editController},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"validationManager",{get:function(){return this._validationManager},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"popupMenuManager",{get:function(){return this._popupMenuManager},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tooltipManager",{get:function(){return this._tooltipManager},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"toastManager",{get:function(){return this._toastManager},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topIndex",{get:function(){return this._topIndex},set:function(t){if((t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex){var e=this.topIndexChanging(this._topIndex,t-this._topIndex,!1,!1);null==e||isNaN(e)||(t=this._topIndex+e,t=Math.min(this.itemCount-1,Math.max(0,t))),this._topIndex=t,this.refreshView(),ft.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups()}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"leftPos",{get:function(){return this._leftPos},set:function(e){(e=Math.max(0,Math.min(e,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=e,this._displayOptions.refreshMode==t.RefreshMode.VISIBLE_ONLY?this.refreshView():(this._horzScrolled=!0,this.invalidate()),this.closePopups()),this._displayOptions.refreshMode!=t.RefreshMode.VISIBLE_ONLY&&this._debugging&&this._debugView.layout()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lookupProvider",{get:function(){return this._lookupProvider},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canHovering",{get:function(){return!this.isEditing()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hoveredCell",{get:function(){return this._hoveredCell},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"sorted",{get:function(){return this.itemSource.sorted},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned},enumerable:!0,configurable:!0}),o.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},o.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},o.prototype.setEventFrom=function(t){this._eventFrom=t},o.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},o.prototype.getColumn=function(t){return this._columns.getColumn(t)},o.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;e>=0;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset(),this.dataSource&&this.applyFilters()},o.prototype._checkEditing=function(){if(this.itemSource instanceof Er&&this.itemSource.isEditing())throw new Error("Item is editing")},o.prototype.addColumn=function(t,e){this._checkEditing();var i=this._columns.add(t,e);return i&&(this._columnMap[i.$_hash]=i,this._columnsReset(),this.dataSource&&this.applyFilters()),i},o.prototype.removeColumn=function(t){return"string"==typeof t&&(t=this.columnByName(t)),!!t&&(this._checkEditing(),!!this._columns.remove(t)&&(delete this._columnMap[t.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},o.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},o.prototype.linearizeColumns=function(t){var e=this._activeCellLayout.collectColumns(!0,!0,!0);if(t=ft.makeArray(t),e&&e.length>0){if(t&&t.length>0)for(var i=function(i){e.sort((function(e,r){var o=e[t[i]],n=r[t[i]];return o<n?1:o>n?-1:0}))},r=0;r<t.length;r++)i(r);var o=[];e.forEach((function(t){o.push(t.name)})),this.cellLayout=o}},o.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},o.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},o.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},o.prototype.invalidateColumns=function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},o.prototype.beginUpdate=function(){this._updateLock=!0},o.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},o.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},o.prototype.invalidateLayout=function(){this._updateLock||this._loading||(i.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},o.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),i.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},o.prototype.refreshView=function(t){if(!this._loading){if(t){var e=this._container;e._layoutNeeded=!0,e._render(Date.now())}else this.invalidateLayout();this.topIndex=this._topIndex,this.leftPos=this._leftPos}},o.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},o.prototype.getFirstCell=function(){if(this.itemCount>0){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof yr){t=e;break}return new rs(this,t>=0?t:0,this.getFirstColumn())}return null},o.prototype.$_setEditFocused=function(t,e){if(t!=this.$_editFocused){if(this.$_editFocused=t,t&&this.$_showFocusCell){var i=this.focusedIndex;!i||this.isValid(i)}this.$_showFocusCell=!1}t&&e&&"focusin"==e.type&&ft.isAncestorOf(this._container._container,e.target)&&Fl.setActiveGrid(this.container.$_hash)},o.prototype.getItem=function(t){return this._items.getItem(t)},o.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t,!1)},o.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},o.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t,!1)},o.prototype.getRowOfItem=function(t){var e=this.getItem(t);return e?e.dataRow:-1},o.prototype.getItemOfModel=function(t){return null},o.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],r=0,o=t;r<o.length;r++){var n=o[r],s=this.getItem(n),a=s?s.dataRow:-1;(e||a>=0)&&i.push(a)}return i},o.prototype.getIndicatorIndex=function(t){return t.index},o.prototype.getAllItems=function(){return this._items.getAllItems()},o.prototype.getImage=function(t){return null},o.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new rs(this,t,e)},o.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,r=this._tableViews[i.$_view],o=i.$_row,n=r.layoutByCell(t);return null!=e?e.set(o,n):rs.temp(this,o,n)},Object.defineProperty(o.prototype,"handler",{get:function(){return this.$_handler},enumerable:!0,configurable:!0}),o.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},o.prototype.optionsChanged=function(t){this.refreshView()},o.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t},o.prototype.selectColumnFilters=function(t){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{this.commit(!1)}catch(t){var e=this.focusedItem;if(e&&t instanceof Jo)return void((t=this._fireValidationFail(e.index,t.column,t))&&alert(this.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()));throw t}}this._fireFiltering()&&(this.hideEditor(!1),this._filterSelector.show(t.layout.firstColumn,t.cell,this.dataSource))},o.prototype.closeFilterSelector=function(){this._filterSelector.hide()},o.prototype.closePopups=function(t){void 0===t&&(t=!0),this._filterRunning||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),t&&this._editController.closeList(!1)},o.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},o.prototype.columnByHash=function(t){return this._columnMap[t]},o.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},o.prototype.columnByName=function(t){return this._columns.columnByName(t)},o.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},o.prototype.columnsByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnsByField(t)},o.prototype.columnByTag=function(t){return this._columns.columnByTag(t)},o.prototype.columnsByTag=function(t){return this._columns.columnsByTag(t)},o.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},o.prototype.getGroupLevel=function(t){return-1},o.prototype.isGroupedColumn=function(t){return!1},o.prototype.layoutByColumn=function(t){return t instanceof Pn||(t=this.columnByName(t)),t?this._activeCellLayout.layoutByColumn(t):null},o.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},o.prototype.setFocus=function(t){function e(t){this.$_showFocusCell=!0;var e=this.focusedIndex.clone();if(e&&!this.isValid(e)&&(e.set(Math.max(0===this.topIndex?0:this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(e,!0,!0)),this._accessibility&&!this.isEditing()&&this.isValid(e))if(this.layoutManager.cellIsVisible(e)&&!this._resetTdFocus){var i=this.getBodyCellAt(e,!0);i&&t!==i.cell&&this.getBodyViewAt(e).refreshTdFocused(e,!1)}else this._resetTdFocus=!0;else ft.isMobile()?this.container.setFocus():this._editController.setFocus(!0,t);Fl.getActiveGrid()!==this&&Fl.setActiveGrid(this.container.$_hash)}this.activeCellLayout.visibleCount>0?e.call(this,t):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,e.call(this,t)}.bind(this),10))},o.prototype.getFirstLayout=function(){return this._activeCellLayout.first},o.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},o.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},o.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},o.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},o.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},o.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},o.prototype.isValid=function(t){return t&&t.grid===this&&t.itemIndex>=0&&t.itemIndex<this.itemCount&&t.layout&&t.layout.grid===this},o.prototype.getSelection=function(t){return void 0===t&&(t=0),t>=0&&t<this._selections.count?this._selections.getItem(t):null},o.prototype.getSelections=function(){return this._selections.getItems()},o.prototype.clearAddSelection=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=this.focusedIndex;t&&this._selections.clear(),e&&this.isValid(i)&&this.itemCount>0&&this.visibleLayoutCount>0&&this._selections.add(i,i,this._displayOptions.selectionStyle)},o.prototype.deleteSelection=function(t){void 0===t&&(t=!1),this.$_deleteSelection(null,t)},o.prototype.$_deleteSelection=function(e,i){function r(t,e){try{if(e&&e.length>0){for(var i=[],r=0,o=e.length;r<o;r++){var n=t.getItem(e[r]);n&&n.dataRow>=0&&i.push(n.dataRow)}if(i.length>0&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function o(t,e){return!!e&&((i||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&function(t,e){var i=[];return i.push(e),r(t,i)}(t,e.dataRow))&&(t.cancel(),fr(e.itemState)||t.itemSource.remove(e)),!0)}function n(t,e){for(var i=null,r=e.length;r--;){var o=t.getItem(e[r]),n=o.itemState;if(pr(n)){i=o,fr(n)&&e.splice(r,1);break}}var s=null;e.length>0&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s)}void 0===i&&(i=!1);var s=this.editOptions,a=this.selections,l=this.itemSource;if((i||s.deletable)&&l instanceof Er)if(!this.isItemEditing(null)||s.deletableWhenEdit){if(this.commitEditor(!0),o(this,e))return!0;if(!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i,r=-1;return(r=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0&&t.canDelete(i=t.getItem(r))&&o(t,i),!0}return!1}(this,a)){for(var u=a.count,h=[],c=0;c<u;c++){var d=a.getItem(c);if(Us(d)||d.style==t.SelectionStyle.BLOCK)for(var p=d.getBounds(),f=Math.min(p.r1,p.r2),_=Math.max(p.r1,p.r2),g=f;g<=_;g++){var y=this.getItem(g);(y.dataRow>=0||y.editable)&&h.push(g)}}h.sort((function(t,e){return t-e}));var m=-1;for(c=h.length;c--;)h[c]==m?h.splice(c,1):m=h[c];h.length>0&&this.canDelete(this.getItem(h[0]))&&(i||!s.confirmWhenDelete?r(this,h)&&(n(this,h),this.clearAddSelection(!0)):confirm(s.deleteRowsMessage)&&r(this,h)&&(n(this,h),this.clearAddSelection(!0)))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"\uba3c\uc800 \ud3b8\uc9d1\uc744 \uc644\ub8cc \ud558\uc2ed\uc2dc\uc624.")},o.prototype.revertSelection=function(e){void 0===e&&(e=!1);var i=this.editOptions,r=this.selections,o=this.itemSource;if((e||i.revertable)&&o instanceof Er&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if((i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0)return t.itemSource.revert(i),!0}return!1}(this,r))){for(var n=r.count,s=[],a=0;a<n;a++){var l=r.getItem(a);if(Us(l)||l.style==t.SelectionStyle.BLOCK)for(var u=l.getBounds(),h=Math.min(u.r1,u.r2),c=Math.max(u.r1,u.r2),d=h;d<=c;d++){var p=this.getItem(d);(p.dataRow>=0||p.editable)&&s.push(d)}}s.sort((function(t,e){return t-e}));var f=-1;for(a=s.length;a--;)s[a]==f?s.splice(a,1):f=s[a];s.length>0&&o.revertAll(s)}},o.prototype.eraseSelection=function(){var e=this.editOptions,i=this.selections,r=this.itemSource;if(e.readOnly||!e.erasable||!e.updatable)return!1;if(!(r instanceof Er))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=t.focusedIndex;return t.setCellValue(i,void 0),!0}return!1}(this,i))return!0;var o=i.count;if(o<1)return!1;for(var n=[],s=0;s<o;s++){var a=i.getItem(s);(Us(a)||a.style==t.SelectionStyle.BLOCK)&&(n=n.concat(a.getItems()))}if(n.length>0){for(s=0;s<o;s++)i.getItem(s).setValues(void 0);return!0}},o.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},o.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);for(var e=this._selections,i=[],r=0;r<e.count;r++)e.getItem(r).getItemIndices(t).forEach((function(t){i.indexOf(t)<0&&i.push(t)}));return i},o.prototype.getSelectedRows=function(){for(var t=this._selections,e=[],i=0;i<t.count;i++)t.getItem(i).getRows().forEach((function(t){e.indexOf(t)<0&&e.push(t)}));return e},o.prototype.getSelectedLayouts=function(){for(var t=this.activeCellLayout.collectLayouts(!0),e=this._selections,i=[],r=0;r<t.length;r++)e.containsLayout(t[r])&&i.indexOf(t[r])<0&&i.push(t[r]);return i},o.prototype.setFocusedIndex=function(t,e,i,r){if(void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(t,e,i,!0,r)}finally{this._focusing=!1}}},o.prototype.setFocusedItem=function(t){t instanceof gr&&(t=t.index),this.setFocusedIndex(this.getIndex(t))},o.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},o.prototype.clearFocusedIndex=function(t){if(void 0===t&&(t=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var e=void 0;t&&this.focusedRow>=this.itemCount&&((e=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this.$_doSetFocusedIndex(e,!0,!1,!1,!1)}finally{this._focusing=!1}}},o.prototype.getTableCell=function(t){if(!t)return null;for(var e=t,i=ht(e);e&&!(e instanceof i.HTMLTableCellElement);)e=e.parentElement;if(e instanceof i.HTMLTableCellElement&&e.parentElement){var r=e.parentElement.$_view;if(r)return e;for(e=e.parentElement;e;){if(e instanceof i.HTMLTableCellElement&&(r=e.parentElement.$_view))return e;e=e.parentElement}}return null},o.prototype.getTableView=function(t){return this._tableViews[t.parentElement.$_view]},o.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},o.prototype.getBodyView=function(t){return this.getTableView(t)},o.prototype.getRowView=function(t,e){return t.getRowView(e)},o.prototype.getHeaderView=function(t){return this.getTableView(t)},o.prototype.getFooterView=function(t){return this.getTableView(t)},o.prototype.getSummaryView=function(t){return this.getTableView(t)},o.prototype.getFilterView=function(t){return this.getTableView(t)},o.prototype.getCellType=function(t){if(t){var e=t.parentElement;if(-99===e[f])return"fixedbar";var i=this._tableViews[e.$_view];if(!(i instanceof Ka))return i instanceof Wu?i.getCellType(t):i instanceof Za?"header":i instanceof nl?"footer":i instanceof yh?"summary":i instanceof qh?"inlineFilter":i instanceof Bl?"head":i instanceof $l?"foot":i instanceof wh?"sum":i instanceof Jh?"filter":this._getCellTypeOf(i);var r=i.bodyCellByCell(t);if(r)return r.item instanceof vr?"groupFooter":"data"}},o.prototype._getCellTypeOf=function(t){},o.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,r=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return r&&e&&r.merged&&r.head?r.head:r},o.prototype.getHeaderCellAt=function(t){return this._headerView.visible&&this._headerView.tableCellByLayout(t)||this._fixedHeaderView.visible&&this._fixedHeaderView.tableCellByLayout(t)||this._rightHeaderView.visible&&this._rightHeaderView.tableCellByLayout(t)},o.prototype.getBodyCellbyCell=function(t){return this.getBodyCellAt(this.cellToIndex(t),!1)},o.prototype.cellToIndex=function(t){var e=rs.temp(this,-1,null);if((t=this.getCellViewOf(t))instanceof ht(t).HTMLTableCellElement){var i=this.getBodyView(t);i&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement[f])}return e},o.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=e||new Vs,r=this.getTableView(t);r.getCellPoint(t,e);var o=r.boundsByContainer($.Temp.set(e.x,e.y,0,0));return i.set(o.x,o.y),i},o.prototype.pointToIndex=function(t,e,i,r){var o=rs.temp(this,-1,null);return r?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,o):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,o),o},o.prototype.getEditCellBounds=function(t,e){if(this._editorLender)return this._editorLender.getEditBounds(t,e);var i=this.layoutManager,r=i.getBodyView(e),o=r.getCellAt(i,e);if(o){var n=this.canMergeEditing(o),s=r.getCellRectAt(i,e,n);return s=r.boundsByContainer(s),!e.colFixed&&s.width>i.nonFixedBounds.width&&(s.width=i.nonFixedBounds.width),s}return ft.$_INVISIBLE_EDIT_BOUNDS.clone()},o.prototype.getEditBounds=function(t,e){if(this._editorLender)return this._editorLender.getEditBounds(t,e);var i=e.item;if(!i)return null;var r=this.layoutManager,o=r.fixedItemCount;if(o>0&&i.index>=o&&i.index-o<r.topIndex)return ft.$_INVISIBLE_EDIT_BOUNDS.clone();var n=r.getBodyView(e),s=n.getCellAt(r,e);if(s){s=s.merged?s.head:s;var a=n.getCellRectAt(r,e,!1);return(a=n.boundsByContainer(a)).width-=(t.native?0:s.editWidth)+s.buttonWidth+s.errorWidth,a}return ft.$_INVISIBLE_EDIT_BOUNDS.clone()},o.prototype.getCellViewOf=function(t){for(var e=ht(t);t;){if(t instanceof e.HTMLTableCellElement)return t;t=t.parentElement}return null},o.prototype.getFocusedCellView=function(t){var e=t.item;if(!e)return null;var i=this.layoutManager,r=i.fixedItemCount;if(r>0&&e.index>=r&&e.index-r<i.topIndex)return null;var o=e.merged,n=t.colFixed,s=t.rightFixed;return e.isData||o?(s?this._rightBodyView:n?this._fixedBodyView:this._bodyView).getCellView(i,t):null},o.prototype.isFocusedCell=function(t){return rs.areEquals(t,this._focusedIndex)},o.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},o.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},o.prototype.fitSyncHeight=function(){return this._layoutManager.fitSyncHeight()},o.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone(),r=this.pasteOptions;if(i.normalize(this),this.isValid(i)&&i.dataColumn&&r.enabled&&this._firePaste(i,e))try{r.singleMode?this._clipboardManager.pasteCellFromClipboard(i,t):(this._clipboardManager.pasteFromClipboard(i,t),i.item&&pr(i.item.itemState)&&this.refreshView()),this._firePasted()}catch(t){throw t instanceof Jo&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},o.prototype.copyToClipboard=function(e,i,r){void 0===r&&(r=!1);var o,n=!1,s=this.focusedIndex,a=this.selections;if(r||this.copyOptions.enabled){if(r||(o=(n=this.copyOptions.singleMode||0==a.count||a.single)?new qs(a,t.SelectionStyle.BLOCK,s,s):a.getItems(),r=this._fireCopy(o,e)),r){var l=void 0,u=void 0;if(!i&&Array.isArray(o)){var h=o.length>1,c=o.length>1,d=!0;if(o.length>1&&o.forEach((function(t){d=d&&(t instanceof Ks||t instanceof Xs),h=h&&t instanceof Ks,c=c&&t instanceof Xs})),!d)return alert("multi selection copy not supported"),null;l=h?this.getSelectedItemIndices(!1):null,u=c?this.getSelectedLayouts():null}return i=i||(Array.isArray(o)?o[0].getBounds():o.getBounds()),n?this._clipboardManager.copyCellToClipboard(s):this._clipboardManager.copyToClipboard(i,l,u)}return null}return this._clipboardManager.copyEmtpyToClipboard()},o.prototype.toClipboard=function(t,e){void 0===e&&(e=!0);var i=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof Pn&&(e=t),e&&e.layout}.bind(this);if(!this.empty){var r;if(!(t&&t instanceof as)){var o=void 0,n=void 0;if(t?(o=i(t.startColumn),n=i(t.endColumn)):(o=this._activeCellLayout.first,n=this._activeCellLayout.last),!o||!n)return;var s=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),a=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);r=as.createRange(s,o,a,n)}var l=this.copyToClipboard(null,r,!0);if(l=null==l?"":l,!e)return l;if(ft.isIE&&window.clipboardData)window.clipboardData.setData("text",l);else{var u=this.doc,h=u.createElement("textarea"),c=h.style;c.position="absolute",c.top="-10000px",u.body.appendChild(h),h.value=l,h.select(),u.execCommand("copy"),setTimeout((function(){u.body.removeChild(h)}),100)}}},o.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},o.prototype.hideToast=function(t){this._toastManager.close(),t&&setTimeout(t,0)},o.prototype.isEditing=function(t){return this._editorLender?this._editController.editing&&this._editorLender.isEditing():this._editController.editing&&(!t||rs.areEquals(t,this._editController.editIndex))},o.prototype.getEditItem=function(){return this._editorLender?this._editorLender.getEditItem(this):this.itemSource instanceof Er&&this.itemSource.editingItem},o.prototype.isItemEditing=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof Er&&this.itemSource.isEditing(t)},o.prototype.isItemEdited=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof Er&&this.itemSource.isEdited(t)},o.prototype.getEditValue=function(t,e,i){this._doGetEditValue(e,i)},o.prototype._doGetEditValue=function(t,e){this._fireGetEditValue(t,e)},o.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},o.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},o.prototype.scrollOnEditing=function(){if(this.isEditing())switch(this.editOptions.scrollOnEditing){case t.ScrollOnEditing.CANCEL:this.cancelEditor(!0);break;case t.ScrollOnEditing.COMMIT:this.commitEditor(!0);case t.ScrollOnEditing.DEFAULT:}},o.prototype._doCellCommit=function(t,e,i){return this._editorLender?this._editorLender.editCellCommit(t,e,i):this._fireEditCommit(t,e,i)},o.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0,t)},o.prototype._doEditorActivated=function(t,e,i){var r=this.getBodyCellAt(t,!1),o=r&&this.getBodyView(r.cell);o&&o.$_buttonZIndexChanged(this,r,e,i)},o.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},o.prototype.$_validateCellValue=function(t,e){try{var i=fr(t.item.itemState);return this._validationManager.validateCell(t,i,!1),!0}catch(e){if(!(e instanceof Jo))throw e;this._validationManager.addInvalidateCell(t,e)}return!1},o.prototype.$_refreshInvalidList=function(t){this.itemCount<=0||t?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},o.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},o.prototype.validateCells=function(t,e,i){return this._validationManager.validateCells(t,e,i)},o.prototype.getInvalidCells=function(){return this._validationManager.getInvalidCells()},o.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},o.prototype.getEditableAt=function(t,e){if(!this._editorLender){var i=t.dataColumn;if(!i)return!1;if(e&&null!=e.editable)return e.editable;if(t.item.isDataRow){var r=t.item;if(null!=r.editable)return r.editable}var o=this.editOptions;if(o.columnEditableFirst){if(!(null!=i.editable?i.editable:o.editable))return!1}else{if(!o.editable)return!1;if(!1===i.editable)return!1}var n=this.fixedOptions;return!(t.colFixed&&!n.editable)&&!(t.rowFixed&&!n.rowEditable)}},o.prototype.getReadOnlyAt=function(e,i){if(!this._editorLender){var r=e.dataColumn;if(!r)return!0;var o,n,s=this._items.getItem(e.itemIndex);return!s||(i&&null!=i.readOnly?i.readOnly:(s=s.merged&&s instanceof mr?s.firstDataItem:s,!this.editOptions.updatable&&(o=s.itemState,n=s.rowState,o!=t.ItemState.INSERTING&&o!=t.ItemState.APPENDING&&n!=t.RowState.CREATED)||!this._items.canUpdate(s,r.dataIndex)||!!this._editOptions.readOnly||!!r.readOnly))}},o.prototype.getWritableAt=function(t){if(!this._editorLender){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t),r=i.merged&&i.head||i;if(i)return(null==i.editable||i.editable||r.renderer2&&r.renderer2.canEdit())&&!i.readonly;var o=t.dataColumn,n=this.body.getCell(t,!1),s=n&&o.getCellStyle(n),a=void 0,l=void 0;return s&&"string"!=typeof s&&(a=null!==s.readOnly?s.readOnly:o.readOnly,l=null!==s.editable?s.editable:o.isWritable()),l&&!a}}},o.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.editable?i.editable:this.getEditableAt(t,null)}},o.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.readonly?!i.readonly:!this.getReadOnlyAt(t,null)}},o.prototype.canUpdate=function(e,i){return this.editOptions.canUpdate(e.rowState===t.RowState.CREATED)&&(this._editorLender||this.visibleLayoutCount>0)&&this.itemSource&&this.itemSource.canUpdate(e,i)},o.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&this.visibleLayoutCount>0&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},o.prototype.canInsert=function(t,e,i){var r=this.itemSource,o=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&this.visibleLayoutCount>0&&r&&r.canInsert(t);if(o)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return o},o.prototype._doCanInsert=function(t,e,i){return!0},o.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&this.visibleLayoutCount>0&&e&&(this.isItemEditing(t)||e.canDelete(t))},o.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},o.prototype.canCancel=function(t){return this.isItemEditing(t)},o.prototype.canMergeEditing=function(t){return!this.isTree()&&t&&t.merged&&this.editOptions.commitByCell&&t.dataColumn&&t.dataColumn.mergeEdit},o.prototype.edit=function(t){return t||(t=this.focusedIndex),!!(this.isValid(t)&&this.itemSource instanceof Er)&&!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&(!pr(t.item.itemState)&&this.validationManager.cloneError(t.dataId,-1),this.itemSource.edit(t.item))},o.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},o.prototype.insert=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===i&&(i=!1),t||(t=this.focusedIndex?this.focusedIndex.item:null),!t)return!1;var r=this.itemSource;if(r instanceof Er&&this.canInsert(t,e,i)){var o=this.$_getInsertDefaults(null);return this._cancelDummy(),r.insert(t,o,e,i)}return!1},o.prototype.append=function(){var t=this.itemSource;if(t instanceof Er&&t.dataSource&&this.canAppend()){var e=this.$_getInsertDefaults(null);return this._cancelDummy(),t.append(e)}return!1},o.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},o.prototype._cancelDummy=function(){this._items.cancelDummy()},o.prototype.setValueAt=function(t,e,i){var r=this.getItem(t);if(r&&e>=0)if(r instanceof Sr||r instanceof Ko)r.setValue(e,i);else{var o=r.dataRow;o>=0&&this.dataSource.setValue(o,e,i)}},o.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},o.prototype.recallHeight=function(){this._container.recallHeight()},o.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},o.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},o.prototype.reprepareEditor=function(){this._editController.reprepareEditor(this.focusedIndex)},o.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},o.prototype.fillEditSearchItems=function(t,e,i,r){this._editController.fillSearchItems(t,e,i,r)},o.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},o.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},o.prototype.editorButtonClicked=function(t,e){this._editController.buttonClicked(t,e),this._fireEditButtonClicked(t)},Object.defineProperty(o.prototype,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()},enumerable:!0,configurable:!0}),o.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},Object.defineProperty(o.prototype,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()},enumerable:!0,configurable:!0}),o.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},o.prototype.execute=function(t){},o.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},o.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new lh,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},o.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new lh)).add(t)},o.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},o.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);return i.exists(ft.makeArray(e))}},o.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw new Error("Invalid lookup source id: "+t);e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},o.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw new Error("Invalid lookup source id: "+t);e.clear()}},o.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=ft.makeArray(e);var r=this._lookupProvider&&this._lookupProvider.getSource(t);if(!r)throw new Error("Invalid lookup source id: "+t);i?r.add(e,i):r.addRow(e)}},o.prototype.setOptions=function(t){},o.prototype.doContextMenu=function(t){var e,i,r,o,n,s,a,l=t.mouseX,u=t.mouseY,h=this.activeTool,c=h._findTableCell(),d=h.findElementAt(l,u,!1);if(c){var p=this.getTableView(c),_=this.getCellType(c),g=void 0,y=void 0;switch(_){case"head":e=Yu.getSub(_,this.headView.getCellType(c)),s=(i=this.headView.getHeadModel(c))&&i.popupMenuName;break;case"foot":e=Yu.getSub(_,this.footView.getCellType(c)),s=(i=this.footView.getFootModel(c))&&i.popupMenuName;break;case"indicator":g=this.rowBarContainer.rowOf(c),y=this.getRowOfItem(g),e=Yu.getItem(_,g,y),s=this.rowIndicator.popupMenuName;break;case"state":g=this.rowBarContainer.rowOf(c),y=this.getRowOfItem(g),e=Yu.getItem(_,g,y),s=this.stateBar.popupMenuName;break;case"check":g=this.rowBarContainer.rowOf(c),y=this.getRowOfItem(g),e=Yu.getItem(_,g,y),s=this.checkBar.popupMenuName;break;case"header":a=p.layoutByCell(c),e=Yu.getLayout(_,a),s=a.firstColumn.header.popupMenuName;break;case"data":if((o=p.bodyCellByCell(c)).grouped)e=Yu.getItem("groupHeader",o.item.index,null);else{var m=rs.temp(this,d instanceof Ga?d.itemIndex:o.item.index,o.layout);e=Yu.getCell(_,o,m),s=o.dataColumn.popupMenuName}break;case"groupFooter":o=p.bodyCellByCell(c),n=d&&d._item&&d._item.$_footerIndex,e=Yu.getGroupFooter(_,o.item.index,o.layout,n);var b=o.dataColumn.groupFooters.get(n);s=b&&b.popupMenuName;break;case"footer":case"summary":var v=p.tableCellByCell(c);n=v.summaryIndex;var w="footer"===_?v.layout.firstColumn.footers.get(n):v.layout.firstColumn.headerSummaries.get(n);e=Yu.getSummary(_,v.summaryIndex,v.layout),s=w&&w.popupMenuName;break;case"groupHead":case"groupFoot":var C=c.$_lev;e=Yu.getGroupElt(_,C);break;case"groupBar":var x=c[f];y=this.getRowOfItem(x),e=Yu.getItem(_,x,y)}}else d&&d===h._clickElement&&(e=h._getClickData(d));if(!1!==(r=this._fireContextMenuPopup(l,u,e))){var I=this._popupMenuManager;if("string"==typeof r?s=r:null!=r&&"object"==typeof r||(s=s||this._contextMenu),s){t.preventDefault();var S=I.getMenu(s);S&&I.showContext(S,t,l,u,e)}}return null},o.prototype.setContextMenu=function(t){return(t=ft.makeArray(t))?(this._contextMenu="gridContextMenu",this.popupMenuManager.addMenu(this._contextMenu,t,!0,this)):this._contextMenu=null,this.popupMenuManager.getMenu(this._contextMenu)},o.prototype.addPopupMenu=function(t,e,i){void 0===i&&(i=!0),e=ft.makeArray(e),t&&e&&this.popupMenuManager.addMenu(t,e,i)},o.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},o.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t),r=i?this.getTableView(i):this._tableViews[t.$_view];if(r instanceof Da)return void r.setCursor(e)}this._container.setCursor(e)},o.prototype.canMoveLayout=function(t){var e=t.root.vindex,i=this.layoutManager;return!(i.mergedRowGrouped&&e<i.rowGroupLevels)&&(this.fixedOptions.movable||e>=i.fixedLayoutCount&&e<i.rightFirstLayout)},o.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},o.prototype.getEditCellValue=function(){return this._editController.editValue},o.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},o.prototype.searchItem=function(t){t instanceof Ze||(t=new Ze(t));var e=t.fields,i=t.values,r=this.itemSource,o=t.startIndex,n=-1;if(e&&e.length>0&&i&&i.length>0&&r){var s=void 0,a=void 0,l=void 0,u=void 0,h=e.length,c=[];for(s=0;s<h;s++)a=parseFloat(e[s]),!isNaN(a)&&a>=0?c.push(a):(l=this.dataSource.getFieldIndex(e[s]))>=0&&c.push(l);c.length>0&&(h=r.itemCount,(n=(o=Math.max(0,o))<h?r.findItem(c,i,t,o,h-1):-1)<0&&t.wrap&&o>0&&(n=r.findItem(c,i,t,0,o-1))),n>=0&&t.select&&(u=this.getIndex(n,ft.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(u,!0,!0))}return n},o.prototype.searchCell=function(t){var e,i,r,o=t instanceof ti?t:new ti(t),n=o.wrap,s=o.select,a=ft.makeArray(o.fields),l=this.itemSource,u=null,h=l&&l.dataSource,c=ft.makeArray(o.columns),d=[],p=o.value;if(h){if(!a&&c)for(e=0,i=c.length;e<i;e++){var f=this.columnByName(c[e]);if(f instanceof Tn){if(f.dataIndex<0)throw new Error("invalid search Column "+c[e]);d.push(f.dataIndex)}}else if(a&&a.length>0)for(e=0,i=a.length;e<i;e++)r=parseFloat(a[e]),!isNaN(r)&&r>=0?d.push(r):d.push(h.getFieldIndex(a[e]));if(d&&d.length>0&&null!=p){if(d.length>0){i=l.itemCount;var _=Math.max(0,o.startIndex),g=Math.max(0,o.startFieldIndex);!(u=_<i?l.findCell(d,p,o,_,i-1,g):null)&&n&&(_>0||g>0)&&(u=l.findCell(d,p,o,0,_,0)),u&&(u.fieldName=h.getOrgFieldName(u.fieldIndex))}if(u&&s){var y=void 0;(y=c?this.getIndex(u.itemIndex,ft.pick(this.columnByName(c[u.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(u.itemIndex,ft.pick(this.columnByField(u.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(y,!0,!0)}}}return u},o.prototype.isCheckable=function(t){var e=this.getItem(t);return e&&e.checkable},o.prototype.isCheckableOfRow=function(t){var e=this.getItemOfRow(t,!0);return e&&e.checkable},o.prototype.setCheckable=function(t,e){var i=this.getItem(t);i&&i.setCheckable(e)},o.prototype.setCheckableOfRow=function(t,e){var i=this.getItemOfRow(t,!0);i&&i.setCheckable(e)},o.prototype.isCheckedItem=function(t){var e=this.getItem(t);return e&&e.checked},o.prototype.isCheckedRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.checked},o.prototype.checkAll=function(t,e,i,r){var o=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(t,e,i,r,o)},o.prototype.toggleCheck=function(t){var e=this.getItem(t);e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},o.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){if(this.checkBar.merged){var r=t[0],o=t[t.length-1],n=r.index,s=o.index,a=this.checkBar.merges,l=a.getRoom(rs.temp(this,n,null));n=Math.min(n,l?l.head:n),l=a.getRoom(rs.temp(this,s,null)),s=Math.max(s,l?l.tail:s),t=[];for(var u=n;u<=s;u++){var h=this.getItem(u);h.checkable&&h.isDataRow&&t.push(h)}}for(u=0;u<t.length;u++)t[u].checkable&&t[u].dataRow>=0&&i.push(t[u]);var c=!e.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),i.length>0&&this._items.checkItems(i,c,!0)}},o.prototype.checkItem=function(t,e,i,r){var o=this.getItem(t);o&&this._items.checkItem(o,e,i,r)},o.prototype.checkRow=function(t,e,i,r){var o,n=this.getItemIndexOfRow(t);n>-1&&(o=this.getItem(n))&&(o=o instanceof Sr?o:null),(o=o||this.getItemOfRow(t,!0))&&this._items.checkItem(o,e,i,r)},o.prototype.checkItems=function(t,e,i){var r=this._items.getItemsByIndices(t);this._items.checkItems(r,e,i)},o.prototype.checkRows=function(t,e,i){var r=this._items.getItemsByRows(t,!0);this._items.checkItems(r,e,i)},o.prototype.setAllCheck=function(t,e){var i=this.checkBar.exclusive;if(this._headView.allChecked=t,e&&(!i||!t)){var r=this.checkBar;this.checkAll(t,r.visibleOnly,r.checkableOnly,!1)}},Object.defineProperty(o.prototype,"allChecked",{get:function(){return this._headView.allChecked},enumerable:!0,configurable:!0}),o.prototype.resetCheckables=function(){},o.prototype.applyCheckables=function(){},o.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},o.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},o.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},o.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},o.prototype.getValueAt=function(t,e){var i=this.getItem(e),r=t.firstColumn;if(r instanceof Tn)return i&&i.getData(r.dataIndex)},o.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),i=t.dataColumn;if(e&&i)return e.getData(i.dataIndex)}},o.prototype.getDistinctItemValues=function(e,i,r){void 0===i&&(i=-1),void 0===r&&(r=t.SortDirection.ASCENDING);var o=this.columnByField(e);if(!o)return null;if(0!=i){var n=o.getField().dataType,s=[],a=[];return this._items._rs.getAllItems().forEach((function(i){if(i instanceof yr||i instanceof Go){var r=i.getData(e);switch(n){case t.ValueType.NUMBER:null!=r&&isNaN(r)||s.indexOf(r)<0&&s.push(r);break;case t.ValueType.DATE:case t.ValueType.DATETIME:r?a.indexOf(r.getTime())<0&&(a.push(r.getTime()),s.push(r)):s.indexOf(r)<0&&s.push(r);break;default:s.indexOf(r)<0&&s.push(r)}}})),r!==t.SortDirection.NONE&&(ft.included(n,t.ValueType.DATETIME,t.ValueType.DATE,t.ValueType.NUMBER)?s.sort((function(t,e){return t-e})):s.sort(),r===t.SortDirection.DESCENDING&&s.reverse()),i<0?s:s.slice(0,i)}return null},o.prototype.getDisplayText=function(t){var e=t.dataColumn;if(e){var i=e.dataIndex;if(i>=0){var r=t.item;if(r instanceof yr||r instanceof Go){var o=r.getData(i);if(e instanceof Ln)return Xr.getText(o);var n=new Rn,s=this._body.getCellFormatters(e,null,t,n);return Yr._getDisplayText(this,r,e,o,s)}if(r instanceof vr){var a=e.groupFooters.get(r.$_footerIndex);return o=Th.getValue(r,e),s=this._rowGroup.getFooterCellFormatters(a,null),Th.$_displayText(r,e,o,s)}}}return""},o.prototype._fitLayoutWidth=function(e,i){var r,o;if(!e.visible)return 0;var n,s,a=this.itemSource,l=this.getIndex(this.topIndex,e.firstColumn),u=e.firstColumn.header,h="",c="",d=0;n=i?u.displayText:"";var p,f=ft.getTextLength(h),_=this.getBodyCellAt(l,!1),g=_&&_.renderer2&&_.renderer2._dom,y=null===(o=null===(r=this.getHeaderCellAt(e))||void 0===r?void 0:r.cell)||void 0===o?void 0:o.firstElementChild;if(g=g||y){var m=ht(g).getComputedStyle(g);if(m){c=m.paddingLeft;var b=parseInt(c.substr(0,c.indexOf("px")));d+=b>0?b:0,c=m.paddingRight,d+=(b=parseInt(c.substr(0,c.indexOf("px"))))>0?b:0,p={fontSize:m.fontSize,fontFamily:m.fontFamily,fontWeight:m.fontWeight,fontStyle:m.fontStyle}}}s=d+this.container.measureText("rg-header-cell",n,null)+2;for(var v=0,w=a.itemCount;v<w;v++)l.itemIndex=v,c=this.getDisplayText(l),ft.getTextLength(c)>f&&(f=ft.getTextLength(c),h=c);if(f>0){d+=this.container.measureText("rg-data-cell",h,p)+2;var C=e.getDataColumn(),x=C.editor,I=this.delegate.getCellEditor(ea.getEditorType(x));I.hasButton(this.displayOptions.showNativeEditButton,x)&&(d+=this.body.editButtonWidth*I.buttonCount),C.button!==t.CellButton.NONE&&(d+=this.body.cellButtonWidth)}return Math.max(d,s)},o.prototype.fitLayoutWidth=function(e,i,r,o){var n=0;function s(t,e){var i=this.getHeaderCellAt(t);if(o&&i){var r=i.textSpan,n=r.style.whiteSpace;r.style.whiteSpace="nowrap";var s=r.getBoundingClientRect().width;return r.style.whiteSpace=n,s+=i.expander?i.expander.getBoundingClientRect().width:0,Math.max(s+6,e)}return e}return o=null==o||o,e instanceof Vn?n=this._fitLayoutWidth(e,o):e instanceof jn&&(n=function e(i){for(var r=i.direction===t.ColumnLayoutDirection.HORIZONTAL,n=0,a=0,l=i.visibles;a<l.length;a++){var u=l[a],h=0;u instanceof Vn?(h=this._fitLayoutWidth(u,o),1===u._defColSpan&&(u.cellWidth=h)):u instanceof jn&&(h=e.call(this,u),h=s.call(this,u,h)),n=r?n+h:Math.max(n,h)}return n}.call(this,e),n=s.call(this,e,n)),r&&r>this.displayOptions.minCellWidth&&(n=Math.max(n,r)),i&&i>this.displayOptions.minCellWidth&&(n=Math.min(n,i)),e.cellWidth=n},o.prototype.canMoveRow=function(t,e){return void 0===e&&(e=!0),!this.isEditing()&&!this.isItemEditing()&&(e||this._editOptions.movable)&&(!t||this.itemSource.movable)},o.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0,e))return this._doMoveRows(t,e)},o.prototype.moveSelection=function(t,e){var i=this.getSelectedItems(!1);if(i&&i.length>0){var r=i[0],o=r.index,n=this.itemSource;if(t>0&&o+t<=n.itemCount||t<0&&o>0){var s=this._getMoveTarget(e,i,o,t);if(this.moveRows(i,s)){t=this.isTree()?r.index-o:t;var a=this.getSelection();a.moveRow(t),this._selections.clear(),this._selections.$_addItem(a);var l=this._focusedIndex.clone();l.itemIndex=this.isTree()?r.index:o+t,this.setFocusedIndex(l,!1,!0,!1)}}}},o.prototype.isSelectedItem=function(t){return this.selections.containsItem(t,null)},o.prototype.isSelectedLayout=function(t){return this.selections.containsLayout(t)},o.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var r=this.getColumn(i);r.isFiltered()&&e.push(r)}return e},o.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},o.prototype.setProgress=function(t,e,i,r){this._progressManager.setProperties(t,e,i,r)},o.prototype.closeProgress=function(){this._progressManager.close()},o.prototype.showLoading=function(t){this._progressManager.loaderShowing()||(t?(this._progressManager._gridDisabled=this.container.disabled,this.container.disabled=!0):this._progressManager._gridDisabled=void 0,this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex))},o.prototype.hideLoading=function(){this._progressManager.closeLoader(),void 0!==this._progressManager._gridDisabled&&(this.container.disabled=this._progressManager._gridDisabled)},o.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},o.prototype.endExportProgress=function(){this._progressManager.close()},o.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},o.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},o.prototype.setWatchTimer=function(t){this._container.setWatchTimer(t)},o.prototype.layoutExpandAll=function(t,e){this._activeCellLayout.expandAll(t,e)},o.prototype._getCssSelector=function(){return""},Object.defineProperty(o.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),o.prototype._createDelegate=function(){return new sh(this)},o.prototype._createLayoutManager=function(){return new il(this)},o.prototype._createEditController=function(){return new Bu(this)},o.prototype._createSelectionLayer=function(){return ft.isMobile()?new Uu(this,"mobileSelectionLayer"):new Zs(this,"selectionLayer")},o.prototype._initDom=function(t){i.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},o.prototype._doActivateView=function(){this._container.activeTool=this._container.defaultTool,this._editController.prepareEditor(this._focusedIndex),this.visible=!0,this._fireViewActivated(!0)},o.prototype._dodDeactivateView=function(){this._fireViewActivated(!1)},o.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;i.prototype.setRect.call(this,t),e&&(this._dirty=!0)},o.prototype._doDraw=function(t){},o.prototype.$_containerResized=function(){ft.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10)},o.prototype._doCreateOtherElements=function(){},o.prototype._doContentPanesCreated=function(){},o.prototype._createSidePane=function(){return null},o.prototype.isSidePaneVisible=function(){return!1},o.prototype._createBodyView=function(t){return new Ka(this.doc,t)},o.prototype._createFixedBodyView=function(t){return new Xa(this.doc,t)},o.prototype._createRightBodyView=function(t){return new Qa(this.doc,t)},o.prototype._initStyles=function(){},o.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0},o.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},o.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),!t&&!this._cellLayoutDirty&&this.clearAddSelection(!0)},o.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},o.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},o.prototype._visualObjectChanged=function(t){this.invalidateLayout()},o.prototype._addGridObject=function(t){this._gridObjects.push(t)},o.prototype.addElement=function(t){this._rootElement.addChild(t)},o.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},o.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},o.prototype.$_layout=function(t){this._doLayout(t)},o.prototype.$_afterRender=function(){if(this._layoutManager.needRelayout())this.invalidateLayout();else{if(this._topIndexChanged&&(this._topIndexChanged=!1,this._resetTdFocus=this.accessibility,this._fireTopIndexChanged(this.topIndex)),this._resetTdFocus&&this._container._focused){var t=this.focusedIndex,e=this.doc;ft.isAncestorOf(this.container._containerDom,e.activeElement)&&this.accessibility&&this.isValid(t)&&this.layoutManager.cellIsVisible(t)&&(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,this.getBodyViewAt(t).refreshTdFocused(t,!0)}.bind(this),20)),delete this._resetTdFocus}this._fireDataLoadComplated(),this._watermarkLayer&&this._watermarkLayer.refresh()}},o.prototype._fireDataLoadComplated=function(){this._dataLoad&&(this._dataLoad=!1,this.fireEvent("onGridBaseDataLoadComplated"))},o.prototype._doLayout=function(e){var i=this._layoutManager;this._resetting=!1;try{this.$_doLayout(i,e)}finally{this._loading=!1,this._eventFrom=null}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var r=i.contentBounds.clone();r.topBy(i.headerBounds.bottom),this._emptyView.setBounds(0,r.y,this.width,r.height)}if(this._debugging&&this._debugView.layout(),this._horzScrolled=!1,this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),i.itemCount>0){var o=i.topIndex,n=o+i.itemCount;this._topIndexChanged=o!==this._prevTop,this._prevTop=o,n==this._prevLast||n!=this.itemCount||ft.included(this.displayOptions.syncGridHeight,[t.SyncGridHeight.ALWAYS,t.SyncGridHeight.OVER])||setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=n}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged(),!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex)},o.prototype.$_doLayout=function(t,e){var i=this._displayOptions,r=this._fixedOptions,o=e.clone(),n=i.vscrollBar?this._scrollBarWidth:0,s=i.hscrollBar?this._scrollBarHeight:0;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,i.minCellWidth),this._activeCellLayout.$_prepareLayout(this,r.colCount,r.rightCount),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate(),t.measure(o,this._leftPos,this._topIndex,n,s),t.layout(o),this._leftPos=t.leftPos,this._topIndex=t.topIndex;var a=this.container._containerDom;o=new $(0,0,a.clientWidth,a.clientHeight),this.$_updateScrollBars(t,o),this._layoutSelectionViews(),this._layouted=!0},o.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},o.prototype.$_updateScrollBars=function(t,e){if(t.hscrollBar){var i=t.bodyBounds.width,r=Math.min(t.scrollWidth);this._hscrollBar.setProperties(0,i,r),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(t.vscrollBar){var o=this.itemCount,n=o-t.fixedItemCount,s=Math.min(t.fullItemCount,o-t.topIndex);this._vscrollBar.setProperties(0,n,s),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);e&&this.$_layoutScrollBars(t,e)},o.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,r=t.scrollBarHeight,o=this._hscrollBar,n=this._vscrollBar;t.hscrollBar&&(o.setBounds(e.x,e.bottom-r,e.width-i,r),o.layoutContent()),t.vscrollBar&&(n.setBounds(e.right-i,e.y,i,e.height-r),n.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-r,i,r)},o.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},o.prototype._canMerge=function(){return!1},o.prototype._populateMerges=function(){this._needMerge=!0},o.prototype.$_populateMerges=function(){if(this._canMerge()){for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var r,o=t[e],n=o&&o.layout;n&&n.canMerge()&&((r=n.merges)||(r=new bn(n)),r.clear(),o instanceof Tn&&o.mergeGrouped?this.getGroupLevel(o.dataIndex)>0&&r.initialize(dn.INIT_COUNT):r.initialize(dn.INIT_COUNT))}this._checkBar.canMerge()&&((r=this._checkBar.merges||new Ns(this._checkBar)).clear(),r.initialize(dn.INIT_COUNT))}},o.prototype._doRowGroupMergeModeChanged=function(){},o.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},o.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},o.prototype._removeSelectionView=function(t){this._selectionLayer.removeView(t)},o.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},o.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow;if(t||e!=this._currentRowId){clearTimeout(this._rowChangeTimer);var r=this.container.defaultTool,o=this._currentRow,n=this._displayOptions.rowChangeDelay,s=t||n<=0;return this._currentRowId=e,this._currentRow=i,s?(this._fireCurrentRowChanged(o,i),r.currentRowChanged(o,i)):n>0&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(o,i),r.currentRowChanged(o,i)}.bind(this),n)),!0}}return!1},o.prototype.$_doSetFocusedIndex=function(e,i,r,o,n){if(void 0===o&&(o=!0),void 0===n&&(n=!0),!e){if(o)return!1;e=this.getIndex(-1,null)}var s,a,l;if(!this.isValid(e)&&o&&(e=e.clone()).normalize(this),!this.isValid(e)){var u=this.dataSource;if(!u||0==u.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearAddSelection(!0),!1}var h=1===this.selections.count?this.getSelection(0):null;if(rs.areEquals(e,this._focusedIndex))return!(h&&h.single&&this.selections.containsCell(e))&&this.clearAddSelection(i,n),!0;var c=this._editOptions,d=this._focusedIndex.clone(),p=this.itemSource,f=this.container.defaultTool,_=this.layoutManager;if(!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(d,e)){var g=this.activeTool.dragTracker;return g instanceof gl&&(g.dragging?g.cancel():this.activeTool.dragTracker=null),!1}var y=d.item;if(!this.isItemEditing(y)||this.isItemEdited(y)||e.itemIndex==d.itemIndex||y.itemState!==t.ItemState.UPDATING||c.commitWhenNoEdit)if(p&&e.itemIndex!=d.itemIndex)try{if(y)switch(y.itemState){case t.ItemState.INSERTING:if(!this.commit(c.forceInsert,!0))return this.cancel(!0),!1;break;case t.ItemState.APPENDING:if(!this.commit(c.forceAppend,!0))return this.cancel(!0),!1;break;case t.ItemState.UPDATING:if(!this.commit(c.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof Jo)return(t=this._fireValidationFail(y.index,t.column,t))&&alert(c.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),this.invalidateLayout(),!1;if(t instanceof Qo)return!1;throw t}else y&&this.isItemEditing(y)&&c.validateOnExit&&this.invalidateLayout();else this.cancel(!0);f.focusedIndexChanging(e),this._focusedIndex.assign(e),this.$_checkFocusedLayout(),l=this.getBodyCellAt(d,!1),a=this.getBodyCellAt(e,!1);var m=l&&a&&l.merged&&l.head===a.head;this.isValid(d)&&(s=_.getBodyView(d)).$_focusChanged(this,l,!1,m),this.isValid(e)&&(s=_.getBodyView(e)).$_focusChanged(this,a,!0,m),p instanceof Er&&p.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(d,e,!1),f.focusedIndexChanged(d,e);var b=this._focusedIndex,v=this.isValid(b);h&&Gs(h.style)&&this.selections.containsCell(b)||this.clearAddSelection(i,n),this._layouted&&this._refreshSideViews();var w=!rs.areEquals(b,_._prevFocused);if(r||w)if(this.$_makeFocusedIndexVisible())this._resetTdFocus=!1,this.accessibility&&!this.isEditing()&&this.isValid(b)&&this.isValid(d)&&(s=this.getBodyViewAt(d),"mousedown"!==this._eventFrom&&d.itemIndex!==b.itemIndex&&s&&s.tdClone(d),this._resetTdFocus=!0);else{var C,x;this._editController.resetEditor(!1),this.isValid(b)&&this.getItem(b.itemIndex).canEdit()&&this._editController.prepareEditor(b),this.isValid(d)&&(C=this.getBodyViewAt(d))&&(x=C.getRowView(d.item))instanceof Ga&&x.resetButtons(this,l,a),!this.container.isLayoutNeeded()&&v&&(C=this.getBodyViewAt(b))&&(x=C.getRowView(b.item))instanceof Ga&&x.resetButtons(this,l,a),this.accessibility&&!this.isEditing()&&this.isValid(b)&&this.layoutManager.cellIsVisible(b)&&(s=this.getBodyViewAt(b))&&s.refreshTdFocused(b,!0)}return this._fireCurrentChanged(this._currentIndex.assign(b)),this.$_checkCurrentRow(),!0},o.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},o.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},o.prototype.makeCellVisible=function(t){if(this._editorLender)return this._editorLender.makeCellVisible(t);if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return"mousedown"!==this._eventFrom&&this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},o.prototype.makeColumnVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},o.prototype.makeItemVisible=function(t){if(t>=0){var e=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(e)}},o.prototype.cancelEditor=function(t){this.isEditing()&&(t=!(arguments.length>0)||t,this._editController.cancelEditor(t))},o.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},o.prototype.$_cancelItem=function(t,e){void 0===e&&(e=!1);var i=ft.cast(this.itemSource,Er);return!!(i&&t&&i.isEditing(t))&&(this._validationManager.clearInvalidCells(-1),i.cancel(),e&&this.resetFocusedIndex(),!0)},o.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex;return!(!this.isValid(i)||!this.$_cancelItem(i.item))&&(i=i.clone(),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),i.item instanceof Ir&&i.up(),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),!0)},o.prototype.commitEditor=function(t){void 0===t&&(t=!0),this.isEditing()&&this.editController.commitEditor(t,!1)},o.prototype.$_commitItem=function(e,i,r){var o=ft.cast(this.itemSource,Er),n=this.validationManager;if(o&&e&&o.isEditing(e)&&(i||o.isEdited(e))){var s=fr(e.itemState);try{n.validateRow(e,s,!1,!1),this._rowBarContainer.stateError=void 0}catch(e){throw e instanceof Jo&&(e.level=e.level||t.ValidationLevel.ERROR,!e.column&&(this._rowBarContainer.stateError=e)),e}if(!o.commit()){if(r)throw new Qo("Commit failed.");return!1}return e.dataId>-1&&n.cloneError(-1,e.dataId),n.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&e.dataId>-1&&n.clearInvalidCells(e.dataId),!0}},o.prototype.commit=function(t,e,i){void 0===i&&(i=!0);var r=this.focusedIndex;return!!this.isValid(r)&&(this.isEditing()&&(this.editController.commitEditor(!0,!1,i),this.editController.invalidateEditor()),this.$_commitItem(r.item,t,e))},o.prototype.editorCancel=function(t,e){this._doCellCancel(e)},o.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},o.prototype.editorCanceled=function(){this.activeTool.resetFocused()},o.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},o.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},o.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},o.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},o.prototype.$_getFieldDefaults=function(t){function e(t,e){for(var i=0;i<t.columnCount;i++){var r=t.getColumn(i);if(r instanceof Tn&&r.dataIndex==e){var o=r.getField();return o&&o.defaultValue}}}for(var i=this.dataSource.fieldCount,r=[],o=0;o<i;o++)r.push(void 0);for(o=0;o<i;o++){var n=e(this,o);n&&(r[o]=n)}return r},o.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var r=this.getColumn(e);r instanceof Tn&&null!=r.defaultValue&&(t[r.dataIndex]=r.defaultValue)}},o.prototype.$_getItemDefaults=function(t,e){},o.prototype.$_readDefaultValues=function(t){},o.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},o.prototype.sortColumn=function(e,i){e&&(this.sortingOptions.style==t.SortStyle.EXCLUSIVE?i&&i.shiftKey?this.sortColumnWithStyle(t.SortStyle.INCLUSIVE,e):this.sortColumnWithStyle(t.SortStyle.EXCLUSIVE,e):this.sortColumnWithStyle(this.sortingOptions.style,e))},o.prototype.sortColumnWithStyle=function(e,i){if(!i)throw new Error("column is null");if(!(this.isItemEditing(null)||i.dataIndex<0)){var r=this._sortingOptions.textCase;e==t.SortStyle.EXCLUSIVE?i.sortOrder<0?this.orderBy([i],[t.SortDirection.ASCENDING],[r]):i.sortDirection==t.SortDirection.ASCENDING?this.orderBy([i],[t.SortDirection.DESCENDING],[r]):this.isGroupedColumn(i)&&this.itemSource._groupSorting?this.orderBy([i],[t.SortDirection.ASCENDING],[r]):this.unsortColumnWithStyle(e,i):e!=t.SortStyle.INCLUSIVE&&e!=t.SortStyle.REVERSE||(i.sortOrder<0?this.$$_addSort(i,t.SortDirection.ASCENDING,r,e==t.SortStyle.REVERSE):i.sortDirection==t.SortDirection.ASCENDING?this.$$_addSort(i,t.SortDirection.DESCENDING,r,e==t.SortStyle.REVERSE):this.isGroupedColumn(i)&&this.itemSource._groupSorting?this.$$_addSort(i,t.SortDirection.ASCENDING,r,e==t.SortStyle.REVERSE):this.unsortColumnWithStyle(e,i))}},o.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var r=[],o=t.length,n=0;n<o;n++){var s=t[n];r.push(s.dataIndex)}this._sortItems(r,e,i)}},o.prototype.unsortColumnWithStyle=function(e,i){if(!this.isItemEditing()&&i){var r=this.getSortFields(),o=this.getSortDirections(),n=this.getSortCases(),s=r.indexOf(i.dataIndex);s<0||(e==t.SortStyle.EXCLUSIVE?this.orderBy([],[],[]):e!=t.SortStyle.INCLUSIVE&&e!=t.SortStyle.REVERSE||(r.splice(s,1),o.splice(s,1),n.splice(s,1),this._sortItems(r,o,n)))}},o.prototype.$$_addSort=function(t,e,i,r){var o=this.getSortFields(),n=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=o.indexOf(a);l>=0?(n[l]=e,s[l]=i):r?(o.splice(0,0,a),n.splice(0,0,e),s.splice(0,0,i)):(o.push(a),n.push(e),s.push(i)),this._sortItems(o,n,s)},o.prototype._sortItems=function(t,e,i){var r=t.concat(),o=e?e.concat():[],n=i?i.concat():[];this._fireSorting(r,o)&&this._toastManager.show(this.sortingOptions.toast,!0,function(){var e=this.sortingOptions.keepFocusedRow&&this.focusedIndex?this.focusedIndex.dataRow:-1;if(this._doSortItems(t,o,n),e>=0){var i=rs.temp(this,this.getItemIndexOfRow(e),this.focusedIndex.column);this.setFocusedIndex(i,!0,!0)}}.bind(this))},o.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var r=this.columnByField(t[i]);r.sortByLabel&&(e[t[i]]=o(r))}return e;function o(t){var e=t.grid;return function(i,r,o){var n=e.getItemOfRow(r,!0),s=e.getItemOfRow(o,!0),a=Yr.getText(n,t),l=Yr.getText(s,t);return a==l?0:null==a?null==l?0:-1:null==l||a>l?1:a<l?-1:0}}},o.prototype._doSortItems=function(t,e,i){},o.prototype.getSortFields=function(){return null},o.prototype.getSortDirections=function(){return null},o.prototype.getSortCases=function(){return null},o.prototype.canFiltering=function(){return this._fireFiltering()},Object.defineProperty(o.prototype,"filterSelecting",{get:function(){return this._filterSelector.opened},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filterSelector",{get:function(){return this._filterSelector},enumerable:!0,configurable:!0}),o.prototype.applyFilters=function(t,e){return!this.isItemEditing(null)&&!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,function(){this.$_doApplyFilters(t,e)}.bind(this)),!0)},o.prototype.$_findFilterView=function(t){if(!t)return{};for(var e,i=[this._fixedFilterView,this._filterPanelView,this._rightFilterView],r=0;r<i.length;r++)if(i[r].visible&&(e=i[r].tableCellByLayout(t)))return{view:i[r],cell:e};return{}},o.prototype.filterOperatorCallback=function(t,e,i){var r=this.layoutByName(i.column),o=this.$_findFilterView(r),n=o.view,s=o.cell;s&&n.operatorChange(s,e,r,i)},o.prototype.clearInlineFilter=function(t){var e=t&&t.layout;if(e){var i=this.$_findFilterView(e),r=i.view,o=i.cell;r.clearInput(o,t)}else[this._fixedFilterView,this._filterPanelView,this._rightFilterView].forEach((function(t){return t.clearInput()})),this.$_doApplyFilters(null,null)},o.prototype.inlineFilterFocus=function(t){var e=this.$_findFilterView(t),i=e.view,r=e.cell;i.setFocus(r)},o.prototype.$_doApplyFilters=function(t,e){var i=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(t,e),i!==this._items.itemCount&&(this.topIndex=0),this._filterRunning=!1}},o.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),r=i.autoFilter?i.autoFilters:i.filters;if(r&&r.activeCount>0)for(var o=0,n=r.count;o<n;o++){var s;(s=r.getItem(o)).active&&this._items.addFilter(i.dataIndex,s)}(r=i._inlineFilters)&&r.activeCount>0&&(s=r.getItem(0)).active&&this._items.addFilter(i.dataIndex,s)}},o.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},o.prototype.canGrouping=function(){return!1},o.prototype.$_layoutRowHover=function(e,i,r){var o=this._layoutManager,n=o.footerBounds.y+o.contentBounds.y,s=this.getBodyView(e.cell);if(s){var a=o.getTableRowIndex(i);if(!(a<0)){a=s.getViewIndex(a);var l=o.getTableItemBounds(a);switch(l.y+=o.contentBounds.y+o.bodyBounds.y,l.bottom>n&&(l.bottom=n),r){case t.RowMaskType.DATA:l.x=this._fixedContentPane.x,l.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case t.RowMaskType.FILL:l.x=0,l.width=this.width;break;case t.RowMaskType.CELL:var u=s.pointByContainer(0,0),h=s.getCellRect(o,e,!0);l.x=h.x+u.x,l.width=h.width;break;case t.RowMaskType.ROW:l.x=0,l.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(l)}}},o.prototype.$_resetHovering=function(t,e,i){void 0===i&&(i=!1);var r=this.activeTool;if(r instanceof nh&&this.canHovering){var o=this.container.getTableCell(r.mouseEventTarget),n=this.getCellType(o),s=!1,a=!1,l=!1;if("data"===n){var u=this.getBodyView(o).bodyCellByCell(o);this.$_setHoveredCell(u,e,i),r.$_setHoveredCell(u,t,e),s=!0}else if("header"===n)u=this.getHeaderView(o).tableCellByCell(o),r.$_setHoveredHeaderCell(u,t,e),a=!0;else if("state"===n&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var h=this._rowBarContainer.rowOf(o);this.isItemEditing(this.getItem(h))&&(l=!0,r.$_showStateError(o,this._rowBarContainer.stateError.message))}return!(s||a||l)&&r._hideTooltip(),s||this.$_setHoveredCell(null,e,!1),!0}},o.prototype.$_getCellAt=function(t,e){var i=this.getBodyView(t),r=this.layoutManager,o=this.getDataCellIndex(t,this._currentIndex),n=i.getCellAt(r,o);if(n&&n.merged){var s=r.getTableRowIndex(e);if(s<0)return n;var a=i.getRowIndex(s);return o.itemIndex=Math.min(Math.max(n.item.index,a),n.item.index+n.rowSpan-1),i.getCellAt(r,o)}return n},o.prototype.$_setHoveredCell=function(t,e,i){void 0===i&&(i=!1);var r=t?this.$_getCellAt(t.cell,e):t,o=r&&this._hoveredCell&&r.merged&&r.head===this._hoveredCell.head;(i||r!==this._hoveredCell)&&(this._hoveredCell&&this._hoveredCell.cell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1,o),this._hoveredCell=r,this._hoveredCell&&this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!0,o),this._doHoveredCellChanged(r)),(i||e!=this._hoveredY)&&(this._hoveredY=e,this.$_resetRowHover())},o.prototype.$_resetRowHover=function(){var e=this._displayOptions.rowHoverType;this._hoveredCell&&e&&e!=t.RowMaskType.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,e)):this._rowHoverView.visible=!1},o.prototype.$_resetFocusRender=function(t,e){var i=this.getBodyCellAt(this.focusedIndex,!0),r=i&&i.merged&&(i.renderer2||i.head.renderer2),o=this.canMergeEditing(i);if(r&&r.refreshFocusChanged){var n=this.layoutManager,s=this.getBodyViewAt(this.focusedIndex),a=s.getCellRectAt(n,this.focusedIndex,!1),l=s.getCellRectAt(n,this.focusedIndex,!0),u=a.top-l.top+a.height/2-l.height/2;r.moveClickElement(u,o)}},o.prototype._doHoveredCellChanged=function(t){},o.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},o.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){this._needSyncHeadCheck=!1;var r=i.showGroup&&!i.merged;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{for(var o=0,n=void 0,s=i.visibleOnly,a=s?this._items.itemCount:(n=this.getAllItems()).length,l=0;l<a;l++){var u=s?this._items.getItem(l):n[l];if((u.isDataRow||r)&&u.checkable){if(!u.checked){o=-1;break}o++}}this._headView.allChecked=o>0}}},o.prototype.getRowHeight=function(t){var e=this.getItem(t);return e?e.height:NaN},o.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);var r=this.getItem(t);r&&(this._items.setRowHeight(r,e,!0),i&&this.refreshView())},o.prototype.clearRowHeights=function(t){void 0===t&&(t=!1),this._items.clearRowHeights(t)&&this.refreshView()},o.prototype.setFocusedClass=function(t,e){if(this.displayOptions.useFocusClass){var i=this.getBodyCellAt(t,!0);i&&i.cell&&(e?ft.addClassName(i.cell,"rg-focused-cell"):ft.removeClassName(i.cell,"rg-focused-cell"))}},o.prototype.setFocusedRowClass=function(t,e){function i(t,i){var r=t.getRowView(i);if(r)for(var o=0,n=r._getTableRows(this.layoutManager);o<n.length;o++){var s=n[o];e?ft.addClassName(s,"rg-focused-row"):ft.removeClassName(s,"rg-focused-row")}}if(this.displayOptions.useFocusClass){var r=t.item;i.call(this,this.bodyView,r),i.call(this,this.fixedBodyView,r),i.call(this,this.rightBodyView,r)}},o.prototype.getSummaryCount=function(t){switch(t){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},o.prototype.topIndexChanging=function(t,e,i,r){return this._fireTopIndexChanging(t,e,i,r)},o.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},o.prototype.$_clearDropData=function(t){var e=this.getRowsOfItems(t,!1);e.length>0&&this.dataSource.removeRows(e)},o.prototype.$_dropData=function(e,i,r){var o=this.dataDropOptions,n=o.callback;if(n)n(e.handler,i,this.handler,r);else if(r>=0){var s=e.getRowsOfItems(i),a=void 0,l=o.fieldMapCallback;if(l&&(a=l(e.handler,i,this.handler,r)),a=a||o.fieldMap,r<this.itemCount){var u=this.getRowOfItem(r);u>=0&&this.dataSource.insertRowsFrom(e.dataSource,a,s,u)}else this.dataSource.appendRowsFrom(e.dataSource,a,s)}o.dropMode==t.DataDropMode.MOVE&&e.$_clearDropData(i)},o.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var t=this.getBodyCellAt(this._focusedIndex);t&&t.spanned&&(t=this.getBodyView(t.cell).getCheckedLayout(t),this._focusedIndex.layout=t&&t.layout)}},o.prototype.$_isBottomCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isBottomCell(e)},o.prototype.$_getLowerOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},o.prototype.$_isTopCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isTopCell(e)},o.prototype.$_getUpperOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},o.prototype._checkFieldIndex=function(t){this._items.setCheckFieldIndex(t)},o.prototype._fireViewActivated=function(t){this.fireEvent("onGridBaseViewActivated",t)},o.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent("onGridBaseCurrentChanging",t,e)},o.prototype._fireCurrentChanged=function(t){this.fireEvent("onGridBaseCurrentChanged",t)},o.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent("onGridBaseCurrentRowChanged",t,e)},o.prototype._fireValidateCell=function(t,e,i){this.fireEvent("onGridBaseValidateCell",t,e,i)},o.prototype._fireValidateRow=function(t,e,i){this.fireEvent("onGridBaseValidateRow",t,e,i)},o.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent("onGridBaseValidationFail",t,e,i)},o.prototype._fireCellClicked=function(t){this.fireEvent("onGridBaseCellClicked",t)},o.prototype._fireCellDblClicked=function(t){this.fireEvent("onGridBaseCellDblClicked",t)},o.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent("onGridBaseCellItemClicked",t,e)},o.prototype._fireColumnCheckedChanged=function(t){this.fireEvent("onGridBaseColumnCheckedChanged",t,t.checked)},o.prototype._fireMenuItemClicked=function(t,e){this.fireEvent("onGridBaseMenuItemClicked",t,e)},o.prototype._fireContextMenuPopup=function(t,e,i){return this.fireObjectEvent("onGridBaseContextMenuPopup",t,e,i)},o.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent("onGridBaseContextMenuItemClicked",t,e)},o.prototype._fireCellButtonClicked=function(t){this.fireEvent("onGridBaseCellButtonClicked",t)},o.prototype._fireEditButtonClicked=function(t){this.fireEvent("onGridBaseEditButtonClicked",t)},o.prototype._fireScrollToBottom=function(){this.fireEvent("onGridBaseScrollToBottom")},o.prototype._fireTopIndexChanging=function(t,e,i,r){return this.fireObjectEvent("onGridBaseTopIndexChanging",t,e,i,r)},o.prototype._fireTopIndexChanged=function(t){this.fireEvent("onGridBaseTopIndexChanged",t)},o.prototype._fireDataCellClicked=function(t){this.fireEvent("onGridBaseDataCellClicked",t)},o.prototype._fireDataCellDblClicked=function(t){this.fireEvent("onGridBaseDataCellDblClicked",t)},o.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent("onGridBaseRowsDeleting",t)},o.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent("onGridBaseRowInserting",t,e)},o.prototype._fireItemCommit=function(t,e){this.fireEvent("onGridBaseItemCommit")},o.prototype._fireSelectionChanged=function(t){return this.fireEvent("onGridBaseSelectionChanged",t)},o.prototype._fireSelectionAdded=function(t){return this.fireEvent("onGridBaseSelectionAdded",t)},o.prototype._fireSelectionRemoved=function(){return this.fireEvent("onGridBaseSelectionRemoved")},o.prototype._fireSelectionCleared=function(){return this.fireEvent("onGridBaseSelectionCleared")},o.prototype._fireSelectionResized=function(t){return this.fireEvent("onGridBaseSelectionResized")},o.prototype._fireSelectionEnded=function(t){return this.fireEvent("onGridBaseSelectionEnded",t)},o.prototype._fireUpdateStarted=function(t,e){this.fireEvent("onGridBaseUpdateStarted",t)},o.prototype._fireInsertStarted=function(t,e){this.fireEvent("onGridBaseInsertStarted",t,e)},o.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent("onGridBaseShowEditor",t,e,i)},o.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1,null),this.fireEvent("onGridBaseHideEditor",t)},o.prototype._fireEditChange=function(t,e){this.fireEvent("onGridBaseEditChange",t,e)},o.prototype._fireGetEditValue=function(t,e){this.fireEvent("onGridBaseGetEditValue",t,e)},o.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent("onGridBaseEditCommit",t,e,i)},o.prototype._fireEditCanceled=function(t){this.fireEvent("onGridBaseEditCanceled",t)},o.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent("onGridBaseItemEditCancel",t)},o.prototype._fireItemEditCanceled=function(t){this.fireEvent("onGridBaseItemEditCanceled",t)},o.prototype._fireEditSearch=function(t,e){this.fireEvent("onGridBaseEditSearch",t,e)},o.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent("onGridBaseSearchCellButtonClick",t,e)},o.prototype._fireCellEdited=function(t,e){this.fireEvent("onGridBaseCellEdited",t,e)},o.prototype._fireEditRowChanged=function(t,e,i,r){this.fireEvent("onGridBaseEditRowChanged",t,e,i,r)},o.prototype._fireEditItemPasted=function(t,e,i,r){this.fireEvent("onGridBaseEditRowPasted",t,e,i,r)},o.prototype._fireItemsPasted=function(t){this.fireEvent("onGridBaseRowsPasted",t)},o.prototype._fireCellPasting=function(t,e){return this.fireObjectEvent("onGridBaseCellPasting",t,e)},o.prototype._fireItemChecked=function(t){this.fireEvent("onGridBaseItemChecked",t,t.checked)},o.prototype._fireItemsChecked=function(t,e){this.fireEvent("onGridBaseItemsChecked",t,e)},o.prototype._fireItemAllChecked=function(t){this.fireEvent("onGridBaseItemAllChecked",t)},o.prototype._fireErrorClicked=function(t,e){this.fireEvent("onGridBaseErrorClicked",e)},o.prototype._fireSorting=function(t,e){return this.fireConfirmEvent("onGridBaseSorting",t,e)},o.prototype._fireFiltering=function(){return this.fireConfirmEvent("onGridBaseFiltering")},o.prototype._fireKeyDown=function(t){return this.fireConfirmEvent("onGridBaseKeyDown",t)},o.prototype._fireKeyPress=function(t){this.fireEvent("onGridBaseKeyPress",t)},o.prototype._fireKeyUp=function(t){this.fireEvent("onGridBaseKeyUp",t)},o.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent("onGridBaseShowTooltip",t,e)},o.prototype._fireShowHeaderTooltip=function(t,e){return this.fireObjectEvent("onGridBaseShowHeaderTooltip",t,e)},o.prototype._fireColumnPropertyChanged=function(t,e,i,r){this.fireEvent("onGridBaseColumnPropertyChanged",t,e,i,r)},o.prototype._fireLayoutPropertyChanged=function(t,e,i,r){this.fireEvent("onGridBaseLayoutPropertyChanged",t,e,i,r)},o.prototype._fireGridActivated=function(){return this.fireEvent("onGridBaseGridActivated",this)},o.prototype._fireCopy=function(t,e){return this.fireConfirmEvent("onGridBaseCopy",t,e)},o.prototype._firePaste=function(t,e){return this.fireConfirmEvent("onGridBasePaste",t,e)},o.prototype._firePasted=function(){this.fireEvent("onGridBasePasted")},o.prototype._fireCommandStackChanged=function(t,e){this.fireEvent("onGridBaseCommandStackChanged",t,e)},o.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},o.prototype.onScrollBarScrolled=function(t,e,i,r){var o,n,s,a=this.displayOptions,l=this.fixedOptions,u=a.scrollMessageCallback,h=e===da.SCROLL_END;if(!h&&this.scrollOnEditing(),t.vertical){var c=-1;switch(e){case da.LINE:return void this.scrollRow(i);case da.PAGE:c=this.topIndex+i*t._page;break;case da.THUMB_TRACK:var d=a.scrollDuration;a.liveScroll||this._scrolledTime>0&&ft.getTimer()-this._scrolledTime>d?(c=r,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Ll(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(r,!0),n=this._vscrollBar.pos+l.rowCount,o=u?u(this.handler,t.vertical,n):String(n+1),this._vscrollBar.setText(o),d>0&&0==this._scrolledTime&&(this._scrolledTime=ft.getTimer()));break;case da.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar.tipView=null,c=r,h=!0;break;default:c=r}c>=0&&(this.topIndex=c)}else{var p=-1;switch(e){case da.LINE:p=this.leftPos+8*i;break;case da.PAGE:p=i>0?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case da.THUMB_TRACK:d=a.hscrollDuration,a.liveScroll||this._scrolledTime>0&&ft.getTimer()-this._scrolledTime>d?(p=r,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Ll(this.container)),this._hscrollBar.tipView=this._scrollTipView,(s=this._layoutManager.getPositionToVIndex(r))>-1&&(o=u?u(this.handler,t.vertical,s):this.getVisibleLayout(s).getDataColumn().header.displayText,this._hscrollBar.setText(o)),this._hscrollBar.setPosition(r,!0),d>0&&0==this._scrolledTime&&(this._scrolledTime=ft.getTimer()));break;case da.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar.tipView=null,p=r,h=!0;break;default:p=r}p>=0&&(this.leftPos=p)}h&&!ft.isMobile()&&this.setFocus()},o.prototype.$_checkFocusedRow=function(t){void 0===t&&(t=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(t)},o.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this.resetGrid(),this._syncHeadCheck([]),this.$_refreshInvalidList(!0),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),!this._keepNullFocus&&this.setFocusedIndex(this.focusedIndex,!0),this._needSyncHeadCheck&&this._syncHeadCheck([]),this.$_refreshInvalidList(!1),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._needSyncHeadCheck&&this._syncHeadCheck([])},o.prototype.onItemProviderItemInserted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&(this._editorLender.itemInserted(this,e),this._editorLender.itemsChanged(this))},o.prototype.onItemProviderItemDeleted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderItemUpdated=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(e.dataId):this._updateRows=[e.dataId],this.clearRowHeights(),this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderCheckableChanged=function(t,e){this.refreshView(),this._syncHeadCheck([])},o.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},o.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},o.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},o.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._syncHeadCheck(e,i),this.checkBar.canMerge()&&this._populateMerges(),this._editorLender&&this._editorLender.itemsChanged(this)},o.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},o.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},o.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},o.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},o.prototype.onItemProviderSorted=function(t){this.refreshView(),this.fireEvent("onGridBaseSortingChanged")},o.prototype.onItemProviderFilterAdded=function(t){},o.prototype.onItemProviderFilterRemoved=function(t){},o.prototype.onItemProviderFilterCleared=function(t){},o.prototype.onItemProviderFilterAllCleared=function(t){},o.prototype.onItemProviderFiltered=function(t,e,i){this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),!this._loading&&this._syncHeadCheck([]),this.fireEvent("onGridBaseFilteringChanged",e,i)},o.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},o.prototype.onItemProviderDataLoadComplated=function(t){this._dataLoad=!0},o.prototype.$_focusEditItem=function(t){if(null==this._editorLender){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&this.visibleLayoutCount>0&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)}},o.prototype.$_beforeEditing=function(t,e){},o.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this.refreshView(),this._fireUpdateStarted(e,!1),this._editorLender&&this._editorLender.itemUpdateStarted(this,e)},o.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0),this._editorLender&&this._editorLender.itemAppendStarted(this,e)},o.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1),this._editorLender&&this._editorLender.itemInsertStarted(this,e)},o.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),!this._cellUpdateEventLock&&this._fireCellEdited(e,i)},o.prototype.onItemEditCellUpdated=function(t,e,i,r,o){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(e,i,r,o)},o.prototype.onItemEditCommitting=function(t,e){},o.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView(),this._editorLender&&this._editorLender.itemCommited(this,e)},o.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem),this._editorLender&&this._editorLender.itemCanceled(this)},o.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},o.prototype.onItemEditCancelReuqest=function(t){this.cancel()},o.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},o.prototype.onSelectionChanged=function(t,e){this._refreshSideViews(),this._fireSelectionChanged(e)},o.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e)},o.prototype.onSelectionRemoved=function(t,e){this._removeSelectionView(e),this._fireSelectionRemoved()},o.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._refreshSideViews(),this._fireSelectionCleared()},o.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},o.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},o.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},o}($s),tc=function(t){function e(){var e=t.call(this)||this;return e.prepareProgress=10,e.indicatorNo=1,e}return r(e,t),e.prototype.dispose=function(){return null},e.prototype.export=function(t,e){this.grid=t},e}(tr),ec=function(e){function i(){return e.call(this)||this}return r(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),null},i.prototype.export=function(t,i){e.prototype.export.call(this,t,i);var r=this._exportOptions=i;this._cols=[];var o=t.collectColumns(!0,!0,!0);this._cols=o.filter((function(t){return t instanceof Dn})),this.indicator=r.indicatorVisible(t)?t.rowIndicator:null,this.header=r.headerVisible(t)?t.header:null,this.headerSummary=r.headerSummaryVisible(t)?t.headerSummary:null,this.footer=r.footerVisible(t)?t.footer:null,this.indicatorHead=t.rowIndicator.headText||"No",this.indicatorFoot=t.rowIndicator.footText||"",this.indicatorSummary=t.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.buildBook=function(){this.buildSheet(this.grid)},i.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildItems(t),this.footer&&this.buildSummaryItem(t,!0),this.done()},i.prototype.addQuatation=function(e,i){return ft.addQuatation(e,i===t.ValueType.TEXT,this._exportOptions.replaceLfText,this._exportOptions.replaceCrText)},i.prototype.buildHeader=function(t){var e=[],i=this._cols;this.indicator&&e.push(this.indicatorHead);for(var r=i.length,o=0;o<r;o++){var n=i[o];e.push(this.addQuatation(n.header.displayText))}this._rows.push(e.join(","))},i.prototype.buildSummaryItem=function(t,e){var i,r=this._exportOptions,o=e?t.footers:t.headerSummaries;if(o.visible)for(var n=o.visibleCount,s=0;s<n;s++){var a=[];this.indicator&&a.push(0==s?this.indicatorFoot:"");for(var l=o.getVisible(s),u=0,h=this._cols.length;u<h;u++){var c=this._cols[u],d=l.getCell(c.layout),p=d.getSummary(),f=d.value;i="number"==typeof f?isNaN(f)?d.text:String(f):f instanceof Date?r.datetimeCallback?(f=r.datetimeCallback(-1,c.name,f))instanceof Date?Je.Default.getText(f):f:Je.Default.getText(f):null==f?d.text||p.text:String(f),a.push(this.addQuatation(i))}this._rows.push(a.join(","))}},i.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,r=0;r<e;r++){var o=i?i[r]:t.getItem(r);this.buildRow(t,o)}},i.prototype.buildRow=function(t,e){var i,r=this._exportOptions,o=[];if(this.indicator){var n=r.showIndicatorRow(t)?e.dataRow:this.indicatorNo++;o.push(n.toString())}for(var s=0,a=this._cols.length;s<a;s++){var l=this._cols[s],u=void 0;if(i=void 0,l instanceof Tn)if(u=l.getField()){var h=os.tempItem(t,e,l);i=t.getDisplayText(h)}else i="";o.push(this.addQuatation(i,u&&u.dataType))}this._rows.push(o.join(","))},i.prototype.buildGroupHeader=function(t,e){},i.prototype.buildGroupFooter=function(t,e){},i.prototype.buildMergedGroupHeader=function(t,e){},i.prototype.buildMergedGroupFooter=function(t,e){},i.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildTreeItems(t),this.footer&&this.buildSummaryItem(t,!0),this.done()},i.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,r=0;r<e;r++){var o=i?i[r]:t.getItem(r);if(!(o instanceof Go))throw"Unkonw tree item type";this.buildTreeRow(t,o)}},i.prototype.buildTreeRow=function(t,e){this.buildRow(t,e)},i.prototype.save=function(){var e=this._exportOptions,i=e.fileName,r="\ufeff"+this._rows.join("\n"),o=this.grid.doc;e.done&&"function"==typeof e.done&&(e.target===t.ExportTarget.STREAM?e.done(r):e.done()),e.target==t.ExportTarget.LOCAL?this.saveLocal(i,r,o):e.target==t.ExportTarget.REMOTE&&this.saveServer(i,_t.encode(r),e.url,o,e.params)},i}(tc),ic=function(t){function e(e){var i=t.call(this)||this;return i._styles=null,i.message="",i.visible=!0,i.spaceTop=0,i.spaceBottom=0,i.height=-1,i.styleName="",e&&i.extend(e),i._styles=e&&e.styles?e.styles:null,i}return r(e,t),e.prototype._doDispose=function(){this._styles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cssStyle",{get:function(){return this._styles},enumerable:!0,configurable:!0}),e}(Ct);(Vh=t.ExportLayoutExpand||(t.ExportLayoutExpand={})).IGNORE="ignore",Vh.CURRENT="current",Vh.EXPAND="expand",Vh.COLLAPSE="collapse";var rc=function(e){function i(t){var i=e.call(this,t)||this;return i.nullDateText="",i.linear=!1,i.allColumns=!1,i.allItems=!0,i.onlyCheckedItems=!1,i.pagingAllItems=!1,i.indicator="default",i.checkBar="hidden",i.header="default",i.footer="default",i.headerSummary="default",i.indicatorValue="default",i.checkMark="v",i.indenting=!0,i.separateRows=!1,i.lookupDisplay=!1,i.showLevelOutline=!1,i.applyFitStyle=!0,i.applyDynamicStyles=!1,i.applyDefaultColumnFormat=!1,i.applyFixed=!1,i.sheetName=null,i.exportSeriesColumn=!1,i.showColumns=[],i.hideColumns=[],i.hiddenColumns=[],i.exportLink=!1,i.exportTemplate=!1,i.sheetAttrs=null,i.stylePrefix="",i.layoutExpand=null,i.exportImage=void 0,i.exportLayout=void 0,i.userCells=void 0,i.userCellsCallback=void 0,i.sheetProtect=!1,i.protectPassword=void 0,i.extend(t),i}return r(i,e),i.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"documentTitle",{get:function(){return this._documentTitle},set:function(t){this._documentTitle=new ic(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"documentSubtitle",{get:function(){return this._documentSubtitle},set:function(t){this._documentSubtitle=new ic(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"documentTail",{get:function(){return this._documentTail},set:function(t){this._documentTail=new ic(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"protectProperties",{get:function(){return this.sheetProtect&&(this._protectProperties=this._protectProperties||{},ft.extendObj({objects:"1",scenarios:"1"},this._protectProperties)),this._protectProperties},set:function(t){this._protectProperties=t?ft.deepCopy(t):void 0},enumerable:!0,configurable:!0}),i.prototype.indicatorVisible=function(t){if(t)switch(this.indicator){case"visible":return!0;case"hidden":return!1;default:return t.rowIndicator.visible}return!1},i.prototype.checkBarVisible=function(t){if(t)switch(this.checkBar){case"visible":return!0;case"hidden":return!1;default:return t.checkBar.visible}return!1},i.prototype.headerVisible=function(t){if(t)switch(this.header){case"visible":return!0;case"hidden":return!1;default:return t.header.visible}return!1},i.prototype.headerSummaryVisible=function(t){if(t)switch(this.headerSummary){case"visible":return!0;case"hidden":return!1;default:return t.headerSummaries.visibleCount>0}return!1},i.prototype.footerVisible=function(t){if(t)switch(this.footer){case"visible":return!0;case"hidden":return!1;default:return t.footers.visibleCount>0}return!1},i.prototype.showIndicatorRow=function(e){if(e)switch(this.indicatorValue){case"item":return!1;case"row":return!0;default:return e.rowIndicator.displayValue==t.IndicatorValue.ROW}return!1},Object.defineProperty(i.prototype,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(t){this._yOffset=Math.floor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(t){this._xOffset=Math.floor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(t){this._xOffsetWidth=Math.floor(t)},enumerable:!0,configurable:!0}),i}(Zi),oc=function(t){function e(e,i){var r=t.call(this,i)||this;return r._grids=[],r._parseGrids(e,i),r}return r(e,t),Object.defineProperty(e.prototype,"exportGrids",{get:function(){return this._grids},enumerable:!0,configurable:!0}),e.prototype._doDispose=function(){this._grids=null,t.prototype._doDispose.call(this)},e.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var r=0,o=i.length;r<o;r++){var n,s=i[r].grid;s=s.$_handler?s:s._view,(n=new rc(e)).assignFrom(i[r]),n.extend(i[r]),n.grid=s;var a={grid:s,sheetName:i[r].sheetName,options:n};this._grids.push(a)}else(n=new rc(e)).extend(e),n.grid=t,this._grids.push({grid:t,sheetName:e.sheetName?String(e.sheetName):"sheet1",options:n})},e}(rc),nc=ft.hex,sc=function(){function t(e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof e?t._parse(e,this,i,!1):e instanceof t?(this._r=e._r,this._g=e._g,this._b=e._b,this._a=e._a):isNaN(e)?(this._r=this._g=this._b=0,this._a=i?NaN:1):(this._a=(e>>>24)/255,this._r=(16711680&e)>>16,this._g=(65280&e)>>8,this._b=255&e)}return t._parse=function(t,e,i,r){if(t){var o=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),--o>=6&&o<=8)e._b=ft.toInt(t.substr(o-2,2),16),e._g=ft.toInt(t.substr(o-4,2),16),e._r=ft.toInt(t.substr(o-6,2),16),e._a=6==o?i?NaN:1:ft.toInt(t.substr(0,o-6),16)/255;else{if(3!=o){if(r)throw"Invalid color value text: "+t;return!1}e._r=ft.toInt(t.charAt(0)+t.charAt(0),16),e._g=ft.toInt(t.charAt(1)+t.charAt(1),16),e._b=ft.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(o-1)){var n=(t=t.substring(5,o-1)).split(",");e._r=ft.toInt(n[0]),e._g=ft.toInt(n[1]),e._b=ft.toInt(n[2]),e._a=ft.toFloat(n[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(o-1)){if(ac.hasOwnProperty(t))return n=ac[t],e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n;if(r)throw new Error("Invalid color text: "+t);return!1}n=(t=t.substring(4,o-1)).split(","),e._r=ft.toInt(n[0]),e._g=ft.toInt(n[1]),e._b=ft.toInt(n[2]),e._a=i?NaN:1}return!0}return!1},t.prototype.toHex=function(){return""+nc(Math.floor(255*this._a))+nc(this._r)+nc(this._g)+nc(this._b)},t.prototype.toColorHex=function(){return""+nc(this._r)+nc(this._g)+nc(this._b)},t.prototype.toString=function(){return"#"+nc(Math.floor(255*this._a))+nc(this._r)+nc(this._g)+nc(this._b)},t}(),ac={transparent:new sc("#00000000"),ltGray:new sc("#d3d3d3"),ltgray:new sc("#d3d3d3"),aliceblue:new sc("#f0f8ff"),antiquewhite:new sc("#faebd7"),aqua:new sc("#00ffff"),aquamarine:new sc("#7fffd4"),azure:new sc("#f0ffff"),beige:new sc("#f5f5dc"),bisque:new sc("#ffe4c4"),black:new sc("#000000"),blanchedalmond:new sc("#ffebcd"),blue:new sc("#0000ff"),blueviolet:new sc("#8a2be2"),brown:new sc("#a52a2a"),burlywood:new sc("#deb887"),cadetblue:new sc("#5f9ea0"),chartreuse:new sc("#7fff00"),chocolate:new sc("#d2691e"),coral:new sc("#ff7f50"),cornflowerblue:new sc("#6495ed"),cornsilk:new sc("#fff8dc"),crimson:new sc("#dc143c"),cyan:new sc("#00ffff"),darkblue:new sc("#00008b"),darkcyan:new sc("#008b8b"),darkgoldenrod:new sc("#b8860b"),darkgray:new sc("#a9a9a9"),darkgreen:new sc("#006400"),darkgrey:new sc("#a9a9a9"),darkkhaki:new sc("#bdb76b"),darkmagenta:new sc("#8b008b"),darkolivegreen:new sc("#556b2f"),darkorange:new sc("#ff8c00"),darkorchid:new sc("#9932cc"),darkred:new sc("#8b0000"),darksalmon:new sc("#e9967a"),darkseagreen:new sc("#8fbc8f"),darkslateblue:new sc("#483d8b"),darkslategray:new sc("#2f4f4f"),darkslategrey:new sc("#2f4f4f"),darkturquoise:new sc("#00ced1"),darkviolet:new sc("#9400d3"),deeppink:new sc("#ff1493"),deepskyblue:new sc("#00bfff"),dimgray:new sc("#696969"),dimGray:new sc("#696969"),dimgrey:new sc("#696969"),dodgerblue:new sc("#1e90ff"),firebrick:new sc("#b22222"),floralwhite:new sc("#fffaf0"),forestgreen:new sc("#228b22"),fuchsia:new sc("#ff00ff"),gainsboro:new sc("#dcdcdc"),ghostwhite:new sc("#f8f8ff"),goldenrod:new sc("#daa520"),gold:new sc("#ffd700"),gray:new sc("#808080"),green:new sc("#008000"),greenyellow:new sc("#adff2f"),grey:new sc("#808080"),honeydew:new sc("#f0fff0"),hotpink:new sc("#ff69b4"),indianred:new sc("#cd5c5c"),indigo:new sc("#4b0082"),ivory:new sc("#fffff0"),khaki:new sc("#f0e68c"),lavenderblush:new sc("#fff0f5"),lavender:new sc("#e6e6fa"),lawngreen:new sc("#7cfc00"),lemonchiffon:new sc("#fffacd"),lightblue:new sc("#add8e6"),lightcoral:new sc("#f08080"),lightcyan:new sc("#e0ffff"),lightgoldenrodyellow:new sc("#fafad2"),lightgray:new sc("#d3d3d3"),lightgreen:new sc("#90ee90"),lightgrey:new sc("#d3d3d3"),lightpink:new sc("#ffb6c1"),lightsalmon:new sc("#ffa07a"),lightseagreen:new sc("#20b2aa"),lightskyblue:new sc("#87cefa"),lightslategray:new sc("#778899"),lightslategrey:new sc("#778899"),lightsteelblue:new sc("#b0c4de"),lightyellow:new sc("#ffffe0"),lime:new sc("#00ff00"),limegreen:new sc("#32cd32"),linen:new sc("#faf0e6"),magenta:new sc("#ff00ff"),maroon:new sc("#800000"),mediumaquamarine:new sc("#66cdaa"),mediumblue:new sc("#0000cd"),mediumorchid:new sc("#ba55d3"),mediumpurple:new sc("#9370db"),mediumseagreen:new sc("#3cb371"),mediumslateblue:new sc("#7b68ee"),mediumspringgreen:new sc("#00fa9a"),mediumturquoise:new sc("#48d1cc"),mediumvioletred:new sc("#c71585"),midnightblue:new sc("#191970"),mintcream:new sc("#f5fffa"),mistyrose:new sc("#ffe4e1"),moccasin:new sc("#ffe4b5"),navajowhite:new sc("#ffdead"),navy:new sc("#000080"),oldlace:new sc("#fdf5e6"),olive:new sc("#808000"),olivedrab:new sc("#6b8e23"),orange:new sc("#ffa500"),orangered:new sc("#ff4500"),orchid:new sc("#da70d6"),palegoldenrod:new sc("#eee8aa"),palegreen:new sc("#98fb98"),paleturquoise:new sc("#afeeee"),palevioletred:new sc("#db7093"),papayawhip:new sc("#ffefd5"),peachpuff:new sc("#ffdab9"),peru:new sc("#cd853f"),pink:new sc("#ffc0cb"),plum:new sc("#dda0dd"),powderblue:new sc("#b0e0e6"),purple:new sc("#800080"),rebeccapurple:new sc("#663399"),red:new sc("#ff0000"),rosybrown:new sc("#bc8f8f"),royalblue:new sc("#4169e1"),saddlebrown:new sc("#8b4513"),salmon:new sc("#fa8072"),sandybrown:new sc("#f4a460"),seagreen:new sc("#2e8b57"),seashell:new sc("#fff5ee"),sienna:new sc("#a0522d"),silver:new sc("#c0c0c0"),skyblue:new sc("#87ceeb"),slateblue:new sc("#6a5acd"),slategray:new sc("#708090"),slategrey:new sc("#708090"),snow:new sc("#fffafa"),springgreen:new sc("#00ff7f"),steelblue:new sc("#4682b4"),tan:new sc("#d2b48c"),teal:new sc("#008080"),thistle:new sc("#d8bfd8"),tomato:new sc("#ff6347"),turquoise:new sc("#40e0d0"),violet:new sc("#ee82ee"),wheat:new sc("#f5deb3"),white:new sc("#ffffff"),whitesmoke:new sc("#f5f5f5"),yellow:new sc("#ffff00"),yellowgreen:new sc("#9acd32")},lc=function(){function t(){}return t.parseDocumentStyles=function(t){for(var e,i,r,o={},n=t.styleSheets,s=0,a=n.length;s<a;s++){e=n[s];try{e.rules?i=e.rules:e.cssRules&&(i=e.cssRules)}catch(t){continue}if(i)for(var l=i.length;l--;){var u=(r=i[l]).selectorText;if(u)if(u.indexOf(",")>-1)for(var h=u.split(","),c=h.length;c--;){var d=h[c].trim();d&&(o[d]=r.style)}else o[r.selectorText]=r.style}}return o},t.extendCssStyle=function(t,e){for(var i=0,r=t.length;i<r;i++){var o=t[i];"inherit"==t[o]||ft.included(o,"background-color")&&ft.included(t[o],"none","initial","unset")||(e[o]||(e[e.length]=o,e.length++),e[o]=t[o])}},t.$_getSelectorStyle=function(t,e){return t[e]},t.getSelectorStyle=function(e,i){if(t.prefix){var r=[],o={length:0};r.push(t.$_getSelectorStyle(e,i)),r.push(t.$_getSelectorStyle(e,t.prefix+i));for(var n=0,s=r.length;n<s;n++)r[n]&&t.extendCssStyle(r[n],o);return o}return t.$_getSelectorStyle(e,i)},t}(),uc=function(){function e(t,e){this._grid=t,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse()}return e.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){var t=this._layout&&this._layout._dataCells;return t&&t.length?t[0].length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sparkColumns",{get:function(){return this._sparkColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentCssStyles",{get:function(){return this._documentCssStyles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupModel",{get:function(){return this._groupModel},enumerable:!0,configurable:!0}),e.prototype.getHeader=function(t,e){return this._headerCells[t][e]},e.prototype.getItem=function(t,e){return this._dataCells[t][e]},e.prototype.getFooterItem=function(t,e){return this._footerCells[t][e]},e.prototype.getSummaryItem=function(t,e){return this._summaryCells[t][e]},e.prototype.clearDataSpanned=function(){for(var t=this._dataCells,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i].spanned=!1},e.prototype.prepareLayout=function(){var t,e=this.grid,i=this._exportOptions,r=e.activeCellLayout;if(i.linear){for(var o=r.getDataColumns(!1),n=[],s=0;s<=o.length-1;s++){var a=o[s],l=a.visible&&a.layout.visible||i.allColumns;(l=l&&i.hideColumns.indexOf(a.name)<0||i.showColumns.indexOf(a.name)>=0)&&n.push({column:a.name,width:a.layout.domWidth})}t=new Zn(e).load(n)}else t=i.exportLayout?new Zn(e).load(i.exportLayout):new Zn(e).load(e.activeCellLayout.getLayout(!0,i.applyFitStyle,i.allColumns,i.showColumns,i.hideColumns,i.layoutExpand));return t},e.prototype.parse=function(){var t=this._grid,e=this._layout=this.prepareLayout(),i=this._exportOptions.stylePrefix;lc.prefix=i?i.trim()+" ":void 0,e.$_refresh2(t._columns,t.displayOptions.minCellWidth),e.$_prepareLayout(t,t.fixedOptions.colCount,t.fixedOptions.rightCount),e.$_prepareMerges(t),this._setCellInfo(e._headerCells,this._headerCells=[]),this._setCellInfo(e._dataCells,this._dataCells=[]),this._setFooterInfo(e._dataCells,t.footers.visibleCount,this._footerCells=[]),this._setFooterInfo(e._dataCells,t.headerSummaries.visibleCount,this._summaryCells=[]),this._documentCssStyles=lc.parseDocumentStyles(t.doc),this._setDataColumns(e._dataCells),this._setSparkInfo(this._dataCells)},e.prototype._setCellInfo=function(t,e){for(var i=0;i<t.length;i++){for(var r=[],o=0;o<t[i].length;o++)r.push({layout:t[i][o],spanned:!1});e.push(r)}},e.prototype._setFooterInfo=function(t,e,i){for(var r=0;r<e;r++)for(var o=0;o<t.length;o++){for(var n=[],s=0;s<t[o].length;s++)n.push({footerIndex:r,layout:t[o][s],spanned:!1});i.push(n)}},e.prototype.setGroupFooterItms=function(e,i,r){this._groupModel=e;var o=this._groupFooterCells=[],n=this._dataCells,s=!1;if(!(e.footerCount>0)){var a=e.provider._expandedAdornments,l=e.provider._collapsedAdornments;s=r?i&&!e.expanded&&ft.included(l,t.RowGroupAdornments.SUMMARY,t.RowGroupAdornments.FOOTER):(s=e.expanded&&a===t.RowGroupAdornments.SUMMARY)||!i&&!e.expanded&&ft.included(l,t.RowGroupAdornments.SUMMARY,t.RowGroupAdornments.FOOTER)}for(var u=s?e.allFooterCount:e.footerCount,h=0;h<u;h++)for(var c=s?e._allFooters[h]:e.getFooter(h),d=0;d<n.length;d++){for(var p=[],f=0;f<n[d].length;f++)p.push({footerIndex:c.footerIndex,layout:n[d][f].layout,spanned:!1});o.push(p)}},e.prototype.getGroupFooterCells=function(){return this._groupFooterCells},e.prototype._setDataColumns=function(t){var e,i;this._dataColumns=[];for(var r=0,o=t.length;r<o;r++){e=[];for(var n=0,s=t[r].length;n<s;n++)(i=t[r][n]).isProxy&&(i=i.source),e.push(i.firstColumn);this._dataColumns.push(e)}},e.prototype._setSparkInfo=function(t){function e(t,e){var i={start:void 0,end:void 0,row:void 0},r=s[0],o=s[s.length-1],n=a.columnByField(r),l=a.columnByField(o);if(!n||!l)return null;for(var u=0,h=e.length;u<h;u++)for(var c=0,d=e[u].length;c<d;c++)n==e[u][c]&&(i.start=c,i.row=u-t),l==e[u][c]&&(i.end=c);return i}var i,r,o,n,s,a,l=this.documentCssStyles;this._sparkColumns=[];for(var u=0,h=t.length;u<h;u++)for(var c=0,d=t[u].length;c<d;c++)if((o=(r=(i=t[u][c]).layout)instanceof Vn?r.firstColumn:null)instanceof Ln&&(n=o.renderer)&&Aa.interfaced(n)){s=o.fields,a=o.grid;var p=s.length>0&&e(u,this._dataColumns);if(p){var f=n.firstStyle,_=n.lastStyle,g=n.highStyle,y=n.lowStyle,m=void 0,b=void 0,v=void 0;if($a.interfaced(n)){m="line",!_&&(_=$a.LAST_STYLE),!g&&(g=$a.HIGH_STYLE),!y&&(y=$a.LOW_STYLE);var w=n.pointStyle?lc.getSelectorStyle(l,"."+n.pointStyle):void 0;b=w?new sc(w.fill).toHex():void 0,v=(x=lc.getSelectorStyle(l,"."+$a.CHART_STYLE))?new sc(x.stroke).toHex():void 0}else{var C=void 0;ja.interfaced(n)?(m="column",C=ja.CHART_STYLE,!_&&(_=ja.LAST_STYLE),!g&&(g=ja.HIGH_STYLE),!y&&(y=ja.LOW_STYLE)):(m="stacked",C=Ha.CHART_STYLE);var x=lc.getSelectorStyle(l,"."+C);v=new sc(x.fill).toHex()}var I=g?lc.getSelectorStyle(l,"."+g):void 0,S=y?lc.getSelectorStyle(l,"."+y):void 0,E=f?lc.getSelectorStyle(l,"."+f):void 0,k=_?lc.getSelectorStyle(l,"."+_):void 0,O={type:m,colors:{colorHigh:I&&I.fill?new sc(I.fill).toHex():void 0,colorLow:S&&S.fill?new sc(S.fill).toHex():void 0,colorFirst:E&&E.fill?new sc(E.fill).toHex():void 0,colorLast:k&&k.fill?new sc(k.fill).toHex():void 0,colorMarkers:b,colorSeries:v},sparkLines:{},range:p};i.sparkLineGroup=O,this._sparkColumns[o.$_hash]=i}}},e}(),hc=function(){function t(){}return t.convertNumberFormat=function(t){return t.indexOf(";")>0&&(t=t.split(";")[0]),t.indexOf(".#")>0?t.replace(".#",".0"):t},t.convertDateFormat=function(t){for(var e="",i=t.length,r=0;r<i;r++){var o=t.charAt(r);switch(o){case"y":case"d":case"m":case"s":case":":e+=o;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(r>=i-1||"H"!=t.charAt(r+1))&&(e+="h");break;case"h":0!=r&&"h"==t.charAt(r-1)||(e+="h");break;case"S":break;case".":case"/":case"-":case" ":(r>=i-1||"S"!=t.charAt(r+1))&&(e=e+"\\"+o);break;default:e=e+'"'+o+'"'}}return e},t}(),cc=function(){function t(){this._contentTypes={}}return t.prototype.executeDownLoad=function(t,e,i){for(var r=[],o=Object.keys(e),n=0;n<o.length;n++){var s=o[n],a=e[s];r.push(this.download(a).then((function(t){return new Promise((function(e,i){var r=new Uint8Array(t.buffer);try{for(var o=r.byteLength,n="",s=0;s<o;s++)n+=String.fromCharCode(r[s]);var a="data:"+t.type+";base64,"+_t.btoa(n),l=document.createElement("img");l.style.position="fixed",l.style.top="-10000px",l.style.left="-10000px",l.src=a,l.onload=function(){t.width=l.width,t.height=l.height,l.src="",e(t)},l.onerror=function(){i()}}finally{}}))})).catch((function(){})))}Promise.all(r).catch((function(){})).finally((function(){i&&i.call(t,e)}))},t.prototype.getContentTypes=function(){return this._contentTypes},t.prototype.getExtension=function(t){if(t){var e=void 0,i=t.toLowerCase();return"image"===i.substring(0,5)&&(e=i.indexOf("svg")>=0?"svg":i.substring(6)),e&&!this._contentTypes.hasOwnProperty(e)&&(this._contentTypes[e]=t),e}},t.prototype.download=function(t){var e=this;return new Promise((function(i,r){var o=new XMLHttpRequest;o.open("GET",t.url),o.onload=function(){if(200===o.status){var r=t.type=o.getResponseHeader("content-type"),n=e.getExtension(r);t.fileName=t.id+"."+n,t.buffer=o.response,i(t)}else i(null)},o.onerror=function(){r()},o.responseType="arraybuffer",o.send()}))},t}(),dc=/\<|\>|\&|\"/;function pc(t){return dc.test(t)?t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):t}var fc=function(){function t(){}return t.createDocument=function(t,e){var i={name:t,attrs:{}};for(var r in e)i.attrs[r]=e[r];return i},t.removeItem=function(e){if(e.texts=null,e.attrs=null,e.childs)for(var i=e.childs.length;i--;)t.removeItem(e.childs[i]),delete e.childs[i];e.childs=null},t.addChild=function(e,i,r,o){var n={name:i,attrs:r};return o&&t.addText(n,pc(o)),t.addChildElement(e,n),n},t.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},t.addProperty=function(t,e,i){t.attrs||(t.attrs={}),t.attrs[e]=pc(i)},t.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},t.toString=function(e){var i="<"+e.name;for(var r in e.attrs)i+=" "+r+'="'+e.attrs[r]+'"';if(e.childs||e.texts){if(i+=">",e.texts)for(var o=0,n=e.texts.length;o<n;o++)i+=e.texts[o];if(e.childs)for(o=0,n=e.childs.length;o<n;o++)i+=t.toString(e.childs[o]);i+="</"+e.name+">"}else i+="/>";return i},t}(),_c=function(){function t(){}return t.toColCaption=function(t){for(var e="";t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},t.toRange=function(e,i,r,o,n){void 0===r&&(r=!1),void 0===o&&(o=1),void 0===n&&(n=1);var s=i+1;return r?t.toColCaption(e)+s+":"+t.toColCaption(e+o-1)+(s+n-1):t.toColCaption(e)+s},t.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',t}(),gc=function(){function t(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}return t.prototype.dispose=function(){for(var t in this._strings=null,this._stringMap)delete this._stringMap[t];this._stringMap=null},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.uniqueCount=function(){return this._nextId},t.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},t.prototype.getIndex=function(t){return this._stringMap[t]},t.prototype.createPart=function(){var t=fc.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});fc.addProperty(t,"count",this._count.toString()),fc.addProperty(t,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,i=0,r=this._strings.length;i<r;i++){var o=fc.addChild(t,"si"),n=fc.addChild(o,"t",null,this._strings[i]);e.test(this._strings[i])&&fc.addProperty(n,"xml:space","preserve")}var s=fc.toString(t);return _c.XML_HEAD_STRING+s},t}(),yc=function(){function t(t,e){this._id=t,this._url=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),t}(),mc=function(){function t(){this._images=[],this._imageMap={}}return t.prototype.add=function(t){if(this._images.indexOf(t)<0){var e=this._images.push(t);this._imageMap[t]=new yc(e,t)}return t},t.prototype.getImageMap=function(){return this._imageMap},t.prototype.getImage=function(t){return this._imageMap&&this._imageMap[t]},t.prototype.getImageId=function(t){return this._imageMap&&this._imageMap[t]&&this._imageMap[t].id},t}(),bc=function(){function e(e,i,r,o,n,s){switch(this._cols=1,this._cHeights=[],this._col=e,this._row=i,this._cWidth=7*r,this._cHeight=o>0?o/.75:-1,this._imageUrl=s,n){case t.IconLocation.CENTER:this._location=t.IconLocation.CENTER;break;case t.IconLocation.RIGHT:case t.IconLocation.RIGHT_EDGE:this._location=t.IconLocation.RIGHT;break;default:this._location=t.IconLocation.LEFT}}return Object.defineProperty(e.prototype,"col",{get:function(){return this._col.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._row.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toCol",{get:function(){return(this._col+this._cols-1).toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toRow",{get:function(){return this._toRow.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromX",{get:function(){return Math.round((null!=this._fromX?this._fromX:2)*e.emu).toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fromY",{get:function(){return Math.round((null!=this._fromY?this._fromY:2)*e.emu).toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colOff",{get:function(){return Math.round(this._xOffset*e.emu).toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowOff",{get:function(){return Math.round(this._yOffset*e.emu).toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this._imageUrl},enumerable:!0,configurable:!0}),e.prototype.calcPosition=function(e,i){var r,o=this._rHeight,n=this._rWidth;null!=o&&o>0&&null!=n&&n>0?(e=n,i=o):null!=o&&o>0?(r=o/i,i=o,e*=r):null!=n&&n>0&&(r=n/e,e=n,i*=r),this._cWidth=this._cWidth<0?e:this._cWidth,this._cHeight=this._cHeight<0?i:this._cHeight,r=1,(this._cWidth<e||this._cHeight<i)&&(i*=r=Math.min((this._cWidth-2)/e,(this._cHeight-2)/i),e*=r);var s=1;this._location===t.IconLocation.CENTER?s=Math.max(1,this._cWidth/2-e/2):this._location===t.IconLocation.RIGHT&&(s=this._cWidth-e-1);for(var a=this._cHeight/2-i/2,l=this._row,u=l,h=a,c=a+i,d=1;d<this._cHeights.length;d++)a>=this._cHeights[d]&&(l++,h-=this._cHeights[d]-this._cHeights[d-1]),a+i>this._cHeights[d]&&(u++,c-=this._cHeights[d]-this._cHeights[d-1]);this._row=l,this._toRow=u,this._fromX=s,this._fromY=Math.max(1,h),this._xOffset=this._fromX+e,this._yOffset=Math.min(c,this._cHeight-1)},e.emu=9525,e}(),vc=function(){function t(t,e,i){this._infos=[],this._book=t,this._sheet=e,this._index=i}return t.prototype.dispose=function(){return null},Object.defineProperty(t.prototype,"fileName",{get:function(){return"drawing"+this._index+".xml"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relationId",{get:function(){return"rId"+this._rId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rId",{set:function(t){this._rId=t},enumerable:!0,configurable:!0}),t.prototype.createPart=function(){for(var t=fc,e=t.createDocument("xdr:wsDr",{"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"}),i=this._infos,r=0;r<i.length;r++){var o=i[r],n=this._book.getExcelImage(o.imageUrl);if(n&&n.fileName){var s=this._sheet.getMergeInfo(o.row,o.col);s&&(o._cols=s.cols,o._cHeight=s.height,o._cHeights=s.heights.slice()),o.calcPosition(n.width,n.height);var a=t.addChild(e,"xdr:twoCellAnchor",{editAs:"oneCell"}),l=t.addChild(a,"xdr:from");t.addChild(l,"xdr:col",null,o.col),t.addChild(l,"xdr:colOff",null,o.fromX),t.addChild(l,"xdr:row",null,o.row),t.addChild(l,"xdr:rowOff",null,o.fromY),l=t.addChild(a,"xdr:to"),t.addChild(l,"xdr:col",null,o.toCol),t.addChild(l,"xdr:colOff",null,o.colOff),t.addChild(l,"xdr:row",null,o.toRow),t.addChild(l,"xdr:rowOff",null,o.rowOff);var u=t.addChild(a,"xdr:pic"),h=t.addChild(u,"xdr:nvPicPr");t.addChild(h,"xdr:cNvPr",{id:r+2,name:"picture "+r});var c=t.addChild(h,"xdr:cNvPicPr");t.addChild(c,"a:picLocks",{noChangeAspect:"1"});var d=t.addChild(u,"xdr:blipFill"),p=t.addChild(d,"a:blip",{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":"rId"+this._book.getImageIndex(o.imageUrl)}),f=t.addChild(p,"a:extLst"),_=t.addChild(f,"a:ext",{uri:"{28A0092B-C50C-407E-A947-70E740481C1C}"});t.addChild(_,"a14:useLocalDpi",{"xmlns:a14":"http://schemas.microsoft.com/office/drawing/2010/main",val:"0"}),t.addChild(t.addChild(d,"a:stretch"),"a:fillRect");var g=t.addChild(u,"xdr:spPr"),y=t.addChild(g,"a:xfrm");t.addChild(y,"a:off",{x:"1",y:"1"}),t.addChild(y,"a:ext",{cx:"1181100",cy:"1189663"}),t.addChild(t.addChild(g,"a:prstGeom",{prst:"rect"}),"a:avLst"),t.addChild(a,"xdr:clientData")}}var m=fc.toString(e);return _c.XML_HEAD_STRING+m},t.prototype.add=function(t,e,i,r,o,n,s,a){var l=new bc(t,e,i,r,o,n);return l._rWidth=s,l._rHeight=a,this._infos.push(l),l},t.prototype.createSheetRel=function(){var t=fc.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),e=fc.addChild(t,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing"});fc.addProperty(e,"Id",this.relationId),fc.addProperty(e,"Target","../drawings/"+this.fileName);var i=fc.toString(t);return _c.XML_HEAD_STRING+i},t.prototype.createRel=function(){var t=[];this._infos.forEach((function(e){t.indexOf(e.imageUrl)<0&&t.push(e.imageUrl)}));for(var e=fc.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}),i=0;i<t.length;i++){var r=t[i],o=this._book.getExcelImage(r);if(o&&o.fileName){var n=fc.addChild(e,"Relationship",{Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image"});fc.addProperty(n,"Id","rId"+this._book.getImageIndex(r).toString()),fc.addProperty(n,"Target","../media/"+o.fileName)}}var s=fc.toString(e);return _c.XML_HEAD_STRING+s},t}(),wc=function(){function t(t){this._id=t}return t.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){},t}(),Cc=function(){function t(){this._items=[],this._indexer=0}return t.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose();this._items=null},t.prototype.getIndexer=function(){return this._indexer++},t.prototype.create=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var r=this._items.length;r--;)if((t=this._items[r]).equals.apply(t,e))return t;return t=this.createInstance.apply(this,e),this._items.push(t),t},t.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i},t}(),xc=function(t){function e(e,i,r,o,n,s,a){void 0===i&&(i="Tahoma");var l=t.call(this,e)||this;return l._bold=void 0,l._italic=void 0,l._underline=void 0,l._name=i,l._size=r,l._color=o,l._bold=n,l._italic=s,l._underline=a,l}return r(e,t),e.prototype.assignFrom=function(t){this._name=this._name||t._name,this._size=this._size||t._size,this._color=this._color||t._color,this._bold=null==this._bold?t._bold:this._bold,this._italic=null==this._italic?t._italic:this._italic,this._underline=null==this._underline?t._underline:this._underline},e.prototype.equalsObj=function(t){return this._name==t._name&&this._size==t._size&&this._color==t._color&&this._bold==t._bold&&this._italic==t._italic&&this._underline==t._underline},e.prototype.equals=function(t,e,i,r,o,n){return void 0===t&&(t="Tahoma"),void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),this._name==t&&this._size==e&&this._color==i&&this._bold==r&&this._italic==o&&this._underline==n},e.prototype.toXml=function(t,e){Ei.addChildWithAttr(t,e,"sz","val",this._size||10),Ei.addChildWithAttr(t,e,"name","val",this._name||"Calibri"),Ei.addChildWithAttr(t,e,"color","rgb",this._color||"ff000000"),Ei.addChildWithAttr(t,e,"b","val",this._bold?"true":"false"),Ei.addChildWithAttr(t,e,"i","val",this._italic?"true":"false"),this._underline&&Ei.addChild(t,e,"u")},e}(wc),Ic=function(t){function e(e){var i=t.call(this)||this,r=ht(e).getComputedStyle(e);return i._defFontSize=i.$_convertUnit(r.fontSize||"16px"),i}return r(e,t),e.prototype.createInstance=function(t,e,i,r,o,n){return new xc(this.getIndexer(),t,e,i,r,o,n)},e.prototype.createFromCss=function(t){var e=t["font-family"];e?(e.indexOf(",")>-1&&(e=e.split(",")[0]),e=e.replace(/\"/g,"")):e=void 0;var i=this.$_convertUnit(t["font-size"]);i=isNaN(i)?void 0:72*i/96;var r=t.color;r&&(r="#"==r.charAt(0)?t.color:new sc(r).toColorHex());var o="bold"==t["font-weight"],n="italic"==t["font-style"],s="underline"==t["font-decoration"];return this.create(e,i,r,o,n,s)},e.prototype.toXml=function(t,e){for(var i=this._items.length,r=0;r<i;r++){var o=Ei.addChild(t,e,"font");this._items[r].toXml(t,o)}Ei.setAttr(e,"count",i)},e.prototype.$_convertUnit=function(t){return null==t?void 0:"string"==typeof t?t.indexOf("px")>0?parseFloat(t):t.indexOf("pt")>0?Math.round(1.3333*parseFloat(t)):t.indexOf("em")>0?parseFloat(t)*this._defFontSize:12:parseInt(t)},e}(Cc),Sc=function(t){function e(e,i,r,o,n,s,a){void 0===i&&(i="solid"),void 0===o&&(o=0),void 0===n&&(n=!1),void 0===a&&(a=90);var l=t.call(this,e)||this;return l._pattern=i,l._color=r,l._linear=n,l._color2=s,l._degree=a,l._tint=o,l}return r(e,t),e.prototype.assignFrom=function(t){this._pattern=t._pattern||this._pattern,this._color=t._color||this._color,this._tint=t._tint||this._tint,this._linear=null==t._linear?this._linear:t._linear,this._color2=t._color2||this._color2,this._degree=t._degree||this._degree},e.prototype.equalsObj=function(t){return this._pattern==t._pattern&&this._color==t._color&&this._color2==t._color2&&this._linear==t._linear&&this._degree==t._degree&&this._tint==t._tint},e.prototype.equals=function(t,e,i,r,o,n){return void 0===t&&(t="solid"),void 0===i&&(i=0),void 0===r&&(r=!1),void 0===n&&(n=90),this._pattern==t&&this._color==e&&this._color2==o&&this._linear==r&&this._degree==n&&this._tint==i},e.prototype.toXml=function(t,e){var i,r=this._tint||0;if(this._linear){var o=Ei.addChildWithAttr(t,e,"gradientFill","degree",this._degree||90),n=Ei.addChildWithAttr(t,o,"stop","position","0");i=Ei.addChild(t,n,"color"),Ei.setAttr(i,"rgb",this._color),Ei.setAttr(i,"tint",this._tint||0),n=Ei.addChildWithAttr(t,o,"stop","position","1"),i=Ei.addChild(t,n,"color"),Ei.setAttr(i,"rgb",this._color2),Ei.setAttr(i,"tint",r)}else{var s=Ei.addChildWithAttr(t,e,"patternFill","patternType",this._pattern.toString());"none"!=this._pattern&&null!=this._color&&(i=Ei.addChild(t,s,"fgColor"),Ei.setAttr(i,"rgb",this._color),Ei.setAttr(i,"tint",r))}},e}(wc),Ec=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.createInstance=function(t,e,i,r,o,n){return new Sc(this.getIndexer(),t,e,i,r,o,n)},e.prototype.createFromCss=function(t){var e=t["background-image"],i="linear-gradient(",r=e?e.indexOf(i):-1;if(r>-1){var o=this._splitEscape(e.slice(r+i.length,e.length-1)),n=void 0,s=void 0,a=void 0;o.length>2?(n=new sc(o[1]),s=new sc(o[2]),a=parseInt(o[0])):(n=new sc(o[0]),s=new sc(o[1]),a=180),a=(a+270)%360;var l=1-n._a;return this.create("none",n.toHex(),l,!0,s.toHex(),a)}if(t["background-color"]){var u=new sc(t["background-color"]);return l=1-u._a,u?this.create("solid",u.toHex(),l):this._items[0]}},e.prototype.toXml=function(t,e){for(var i=this._items.length,r=0;r<i;r++){var o=Ei.addChild(t,e,"fill");this._items[r].toXml(t,o)}Ei.setAttr(e,"count",i)},e.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],r=!1,o="",n=0;n<t.length;n++){var s=t[n];s!=e||r?(" "!=s||r)&&(o+=s):(i.push(o),o=""),"("==s&&(r=!0),")"==s&&(r=!1)}return o&&i.push(o),i}return null},e}(Cc),kc=function(t){function e(e,i,r,o){void 0===r&&(r=1),void 0===o&&(o="none");var n=t.call(this,e)||this;return n._color=i,n._width=r,n._type=o,n}return r(e,t),e.equalsObj=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._color==e._color&&t._type==e._type&&t._width==e._width},e.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i="none"),this._color==t&&this._width==e&&this._type==i},e.prototype.toXml=function(t,e){var i=this._width<=1?"thin":this._width<=2?"medium":"thick";Ei.setAttr(e,"style",i),Ei.addChildWithAttr(t,e,"color","rgb",this._color)},e}(wc),Oc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.createInstance=function(t,e,i){return new kc(this.getIndexer(),t,e,i)},e.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var r=new sc(t[e+"-color"]),o=i,n=parseInt(t[e+"-width"]);if(!r&&isNaN(n))return this._items[0];if(isNaN(n))n=0;else if(0===n)return;return this.create(r.toColorHex(),n,o)}},e}(Cc),Rc=function(t){function e(e,i,r,o,n){var s=t.call(this,e)||this;return s._left=i,s._top=r,s._right=o,s._bottom=n,s}return r(e,t),e.equalsObj=function(t,e){return kc.equalsObj(t._left,e._left)&&kc.equalsObj(t._top,e._top)&&kc.equalsObj(t._right,e._right)&&kc.equalsObj(t._bottom,e._bottom)},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,r){return kc.EqualsById(this._left,t)&&kc.EqualsById(this._top,e)&&kc.EqualsById(this._right,i)&&kc.EqualsById(this._bottom,r)},e.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},e.prototype.extend=function(t){return new e(null,t.left||this.left,t.top||this.top,t.right||this.right,t.bottom||this.bottom)},e.prototype.borderToXml=function(t,e,i){var r=Ei.addChild(t,e,i),o=this[i];o&&o.toXml(t,r)},e}(wc),Pc=function(t){function e(e){var i=t.call(this)||this;return i._lines=e,i}return r(e,t),e.prototype.dispose=function(){this._lines=null,t.prototype.dispose.call(this)},e.prototype.createInstance=function(t,e,i,r){return new Rc(this.getIndexer(),t,e,i,r)},e.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),r=e.createFromCss(t,"border-right"),o=e.createFromCss(t,"border-top"),n=e.createFromCss(t,"border-bottom");return i||r||o||n?this.create(i,o,r,n):void 0},e.prototype.extend=function(t,e){t=t||{};for(var i=new Rc(null,e.left||t.left,e.top||t.top,e.right||t.right,e.bottom||t.bottom),r=this._items.length;r--;){var o=this._items[r];if(Rc.equalsObj(this._items[r],i))return o}return i._id=this.getIndexer(),this._items.push(i),i},e.prototype.toXml=function(t,e){for(var i=this._items.length,r=0;r<i;r++){var o=Ei.addChild(t,e,"border");this._items[r].toXml(t,o)}Ei.setAttr(e,"count",i)},e}(Cc),Dc=function(t){function e(e,i,r,o,n,s,a,l,u){void 0===n&&(n=!1),void 0===s&&(s=0);var h=t.call(this,i)||this;return h._collection=e,h._horzAlign=r,h._vertAlign=o,h._wrapText=n,h._formatId=s,h._font=a,h._fill=l,h._border=u,h}return r(e,t),Object.defineProperty(e.prototype,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,r,o,n,s,a){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==r&&xc.EqualsById(this._font,o)&&Sc.EqualsById(this._fill,n)&&Rc.EqualsById(this._border,s)&&ft.equalObjects(this._cellProptectProps,a)},e.prototype.toXml=function(t,e){var i=this;Ei.setAttr(e,"borderId",(this._border?this._border.id:0)+""),Ei.setAttr(e,"fillId",(this._fill?this._fill.id:0)+""),Ei.setAttr(e,"fontId",(this._font?this._font.id:0)+""),Ei.setAttr(e,"numFmtId",this._formatId+""),Ei.setAttr(e,"xfId","0");var r=Ei.addChild(t,e,"alignment");if(Ei.setAttr(r,"horizontal",this._horzAlign||"left"),Ei.setAttr(r,"vertical",this._vertAlign||"center"),this._wrapText&&Ei.setAttr(r,"wrapText","1"),this._cellProptectProps){var o=Ei.addChild(t,e,"protection");Object.keys(this._cellProptectProps).forEach((function(t){Ei.setAttr(o,t,i._cellProptectProps[t])}))}},e.prototype.cloneAsNew=function(t,i,r,o,n,s,a,l,u){return new e(this._collection,t,i||this._horzAlign,r||this._vertAlign,null!=o?o:this._wrapText,null!=n?n:this._formatId,s||this._font,a||this._fill,l||this._border)},e}(wc),Tc=function(t){function e(e,i,r){var o=t.call(this)||this;return o._fonts=e,o._fills=i,o._borders=r,o}return r(e,t),e.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,t.prototype.dispose.call(this)},e.prototype.addStyle=function(t){for(var e=this._items.length;e--;){var i=this._items[e];if(i.equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,t._border,t._cellProptectProps))return i}return t._id=this.getIndexer(),t._collection=this,t},e.prototype.changeFormatId=function(t,e){for(var i,r=this._items.length;r--;)if((i=this._items[r]).equals(t.horzAlign,t.vertAlign,t._wrapText,e,t._font,t._fill,t._border,t._cellProptectProps))return i;return i=t.cloneAsNew(this.getIndexer(),null,null,null,e,null,null,null),this._items.push(i),i},e.prototype.changeBorder=function(t,e){for(var i,r=this._borders.extend(t._border,e),o=this._items.length;o--;)if((i=this._items[o]).equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,r,t._cellProptectProps))return i;var n=t.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,r);return this._items.push(n),n},e.prototype.cloneAsNew=function(t,e,i,r,o,n,s,a,l){void 0===l&&(l=!1);var u=t.cloneAsNew(this.getIndexer(),e,i,r,o,n,s,a,l);return this._items.push(u),u},e.prototype.createInstance=function(t,e,i,r,o,n,s){return void 0===i&&(i=!1),void 0===r&&(r=0),void 0===o&&(o=null),void 0===n&&(n=null),void 0===s&&(s=null),new Dc(this,this.getIndexer(),t,e,i,r,o,n,s)},e.prototype.createFromCss=function(t,e,i,r,o,n){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===n&&(n=0);var s,a,l=e?this._borders.createFromCss(t):null,u=i?this._fonts.createFromCss(t):null,h=r?this._fills.createFromCss(t):null,c=t["text-align"];c&&("center"==c?s="center":"right"==c?s="right":"left"==c&&(s="left"));var d=t["vertical-align"];return d&&("top"==d?a="top":"bottom"==d&&(a="bottom")),this.create(s,a,o,n,u,h,l)},e.prototype.toXml=function(t,e){for(var i=this._items.length,r=0;r<i;r++){var o=Ei.addChild(t,e,"xf");this._items[r].toXml(t,o)}Ei.setAttr(e,"count",i)},e}(Cc),Lc=function(){function t(t){this._numberFmts=[],this._fonts=new Ic(t),this._fills=new Ec,this._lines=new Oc,this._borders=new Pc(this._lines),this._styles=new Tc(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}return t.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},t.prototype.addFont=function(t){return t?this._fonts.createFromCss(t):null},t.prototype.addFill=function(t){return t?this._fills.createFromCss(t):null},t.prototype.addBorder=function(t){return t?this._borders.createFromCss(t):null},t.prototype.addNumberFormat=function(e){var i=this._numberFmts.indexOf(e);return i<0&&(this._numberFmts.push(e),i=this._numberFmts.length-1),t.EXCEL_NUMFMT_START+i},t.prototype.addStyle=function(t,e,i,r,o,n){return t?this._styles.createFromCss(t,e,i,r,o,n):null},t.prototype.extendStyle=function(t,e,i,r,o){var n=this._styles.createFromCss(e,!0,!0,!0,i,r);return n._border=n._border||t._border,n._fill=n._fill||t._fill,n._font=n._font||t._font,n._horzAlign=n._horzAlign||t._horzAlign,n._vertAlign=n._vertAlign||t._vertAlign,n._wrapText=null!=n._wrapText?n._wrapText:t._wrapText,n._formatId=null!=r&&null!=n._formatId?n._formatId:t._formatId,n._cellProptectProps=ft.deepCopy(o),this._styles.addStyle(n)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorder=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.createPart=function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=Ei.parse(t),i=e.documentElement;if(this._numberFmts.length>0){var r=Ei.addChild(e,i,"numFmts");this._createNumberFormats(e,r)}var o=Ei.addChild(e,i,"fonts");this._createFonts(e,o);var n=Ei.addChild(e,i,"fills");this._createFills(e,n);var s=Ei.addChild(e,i,"borders");this._createBorders(e,s);var a=Ei.addChild(e,i,"cellStyleXfs");this._createDefXfs(e,a);var l=Ei.addChild(e,i,"cellXfs");return this._createStyles(e,l),t=Ei.toString(e),_c.XML_HEAD_STRING+t},t.prototype._createNumberFormats=function(e,i){for(var r=0,o=this._numberFmts.length;r<o;r++){var n=Ei.addChild(e,i,"numFmt");Ei.setAttr(n,"formatCode",this._numberFmts[r]),Ei.setAttr(n,"numFmtId",t.EXCEL_NUMFMT_START+r)}},t.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},t.prototype._createFills=function(t,e){this._fills.toXml(t,e)},t.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},t.prototype._createDefXfs=function(t,e){var i=Ei.addChildWithAttr(t,e,"xf","count",1);Ei.setAttr(i,"borderId",0),Ei.setAttr(i,"fillId",0),Ei.setAttr(i,"fontId",0),Ei.setAttr(i,"numFmtId",0)},t.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},t.EXCEL_NUMFMT_START=200,t}(),Mc=function(t){function e(e,i,r,o,n){var s=t.call(this,e)||this;return s._hash=i,s._width=r,s._style=o,s._hidden=n,s}return r(e,t),e.prototype.dispose=function(){this._style=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t){return this.id==t},e.prototype.toXml=function(t,e){Ei.setAttr(e,"min",this.id),Ei.setAttr(e,"max",this.id),Ei.setAttr(e,"width",this._width),this._style&&Ei.setAttr(e,"style",this._style.id),this._hidden&&Ei.setAttr(e,"hidden","1")},e.prototype.toTextXml=function(t){var e=this.id+1,i={min:e,max:e,width:this._width};this._style&&(i.style=this._style.id),this._hidden&&(i.hidden="1"),fc.addChild(t,"col",i)},e}(wc),Fc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.createInstance=function(t,e,i,r){return new Mc(this.getIndexer(),t,e,i,r)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),e.prototype.toTextXml=function(t){for(var e=fc.addChild(t,"cols"),i=0,r=this.count;i<r;i++)this._items[i].toTextXml(e)},e.prototype.getWidth=function(t){for(var e=0;e<this._items.length;e++){var i=this._items[e];if(i._hash===t)return i._width}return-1},e}(Cc),Nc=function(){function t(t,e,i,r,o,n){void 0===o&&(o=""),this._range=_c.toRange(e,t),this._style=i,this._type=o,this._fomula=n,this._value=r}return t.prototype.dispose=function(){this._style=null},Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),t.prototype.toXmlText=function(){var e=[];return e.push("<"+t.ELEMENT_NAME),e.push(' r="'+this._range+'"'),""!=this._type&&e.push(' t="'+this._type+'"'),this._style&&e.push(' s="'+this._style.id+'"'),e.push(">"),this._fomula&&e.push("<f>"+this._fomula+"</f>"),null!=this._value&&e.push("<v>"+this._value+"</v>"),e.push("</"+t.ELEMENT_NAME+">"),e.join("")},t.ELEMENT_NAME="c",t}(),Vc=function(){function e(t,e,i){this._row=0,this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}return Object.defineProperty(e.prototype,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null;this._cells=null},e.prototype.toXmlText=function(){var t=[];t.push("<"+e.ELEMENT_NAME),t.push(' r="'+(this._index+1)+'"'),this._height&&this._height>-1&&(t.push(' ht="'+this._height+'"'),t.push(' customHeight="1"')),null!=this._outlineLevel&&t.push(' outlineLevel="'+this._outlineLevel+'"'),t.push(">");for(var i=0,r=this._cells.length;i<r;i++){var o=this._cells[i];o&&t.push(o.toXmlText())}return t.push("</"+e.ELEMENT_NAME+">"),t.join("")},e.prototype.borrowCell=function(t,e,i,r,o){void 0===r&&(r="");var n=this._cells[t];n&&n.dispose(),n=new Nc(this._index,t,e,i,r,o),this._cells[t]=n},e.prototype.addBlank=function(t,e){this.borrowCell(t,e)},e.prototype.addCell=function(t,e,i,r,o){this.borrowCell(t,r,i,e,o)},e.prototype.addText=function(t,e,i){var r=e||"",o=this._book.addSharedString(r);this.addCell(t,"s",o,i)},e.prototype.addNumber=function(t,e,i,r){var o=isNaN(e)||null==e?"":String(e);this.addCell(t,"n",o,i,r)},e.prototype.addBool=function(t,e,i){this.addCell(t,"b",null==e?"":e?1:0,i)},e.prototype.addDate=function(t,e,i){if(e){var r=Je.Default.toExcelDate(e);this.addNumber(t,r,i)}else this.addCell(t,"s","",i)},e.prototype.addLink=function(t,e,i,r){if(i&&""!=i){var o=document.createElement("div");o.innerText=o.textContent=i,i=o.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),o.innerText=o.textContent=e,i='HYPERLINK("'+i+((e=o.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"))?'","'+e+'")':'")'),this.addCell(t,"str",e,r,i)}else this.addText(t,e,r)},e.prototype.addImage=function(e,i,r,o,n,s,a,l){if(n)return i&&o!==t.IconLocation.CENTER?this.addText(e,i,s):this.addBlank(e,s),this._sheet.addImage(e,this._index,r,this._height,o,n,a,l);i?this.addText(e,i,s):this.addBlank(e,s)},e.prototype.addSparkLine=function(t,e,i,r){var o=i.layout.firstColumn,n=this._sheet,s=this._index,a=n.borrowSparkGroup(o.index,i.sparkLineGroup),l=a.range.start,u=a.range.end-l+1,h=a.range.row;h=null==h?0:h;var c=a.sparkLines,d=n.name+"!"+_c.toRange(e+l,s+h,!0,u);c[_c.toRange(t,this._index)]=d,this.addBlank(t,r)},e.ELEMENT_NAME="row",e.LINE_REGEX=/\r|\n|\r\n/,e.BR_REGEX=/<br>|<br\/>/,e}(),Bc=function(){function t(t,e,i,r){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._firstCol=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._relation_indexer=1,this._mergeInfos={},this._book=t,this._index=e,this._name=i,this._attrs=r.sheetAttrs,this._protectPassword=r.protectPassword,this._protectProperties=r.protectProperties,this._sheetProtect=r.sheetProtect,this._columns=new Fc,this._prepare()}return t.prototype.dispose=function(){this._txmerge=null,fc.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},Object.defineProperty(t.prototype,"id",{get:function(){return t.RELATION_ID+this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this._columns.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowCount",{get:function(){return this._dataRows.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workbook",{get:function(){return this._book},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"drawing",{get:function(){return this._drawing},enumerable:!0,configurable:!0}),t.prototype.setFirstRow=function(t){this._firstRow<0&&(this._firstRow=t)},t.prototype.setLastRow=function(t){this._lastRow=Math.max(this._lastRow,t)},t.prototype.setFirstCol=function(t){this._firstCol<0&&(this._firstCol=t)},t.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null;this._dataRows=[]},t.prototype.addColumn=function(t,e,i,r){return this._columns.createUnique(t,e,i,r)},t.prototype.getColumnWidth=function(t){return this._columns.getWidth(t)},t.prototype.getMergeInfo=function(t,e){return this._mergeInfos[t+":"+e]},t.prototype.addMergeDrawInfo=function(t,e,i,r){for(var o=-1,n=[0],s=t;s<t+i;s++){var a=this.getRow(s);if(!(a._height>0)){o=-1,n=[];break}n.push(o+=a._height/.75)}this._mergeInfos[t+":"+e]={cols:r,rows:i,height:-1===o?-1:o,heights:n}},t.prototype.addRow=function(t,e){return this._dataRows[t]=new Vc(this,t,e)},t.prototype.getRow=function(t){return this._dataRows[t]},t.prototype.borrowRow=function(t,e){var i=this._dataRows[t];return i||(i=this.addRow(t,e)),i},t.prototype.borrowSparkGroup=function(t,e){return this._sparkGroups[t]||(this._sparkGroups[t]=e),this._sparkGroups[t]},t.prototype.setRowLevel=function(t,e){if(e>=0){var i=this._dataRows[t];i&&(i.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},t.prototype.addMerge=function(t,e,i,r){if(i>1||r>1){var o=_c.toRange(e,t,!0,r,i);this.addMergeDrawInfo(t,e,i,r),fc.addChild(this._txmerge,"mergeCell",{ref:o}),this._mergeCount++}},t.prototype.createPart=function(){var t=this._txdoc,e="A1:"+_c.toRange(this._columns.count-1,this._dataRows.length-1);fc.addChild(t,"dimension",{ref:e}),this._outlineLevel>0&&fc.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var i=fc.addChild(t,"sheetViews"),r={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&ft.extendObj(this._attrs,r),0==this._book.count&&(r.tabSelected=1);var o=fc.addChild(i,"sheetView",r);(this._fixedCol>0||this._fixedRow>0)&&fc.addChild(o,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:_c.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(t);for(var n=fc.addChild(t,"sheetData"),s=this._dataRows,a=this._borderEdges,l=0,u=s.length;l<u;l++){if(l==this._firstRow){for(var h=0,c=Math.max(0,this._firstCol);c<s[l]._cells.length;c++)(d=s[l]._cells[c])&&a&&(d.style=this._book.changeBorderId(d.style,a[h++?"top":"leftTop"]));for(c=s[l]._cells.length;c--;)if((d=s[l]._cells[c])&&a){d.style=this._book.changeBorderId(d.style,a.rightTop);break}}else if(l===this._lastRow){for(h=0,c=Math.max(0,this._firstCol);c<s[l]._cells.length;c++)(d=s[l]._cells[c])&&a&&(d.style=this._book.changeBorderId(d.style,a[h++?"bottom":"leftBottom"]));for(c=s[l]._cells.length;c--;)if((d=s[l]._cells[c])&&a){d.style=this._book.changeBorderId(d.style,a.rightBottom);break}}else if(l>this._firstRow&&l<this._lastRow){for(c=Math.max(0,this._firstCol);c<s[l]._cells.length;c++)if((d=s[l]._cells[c])&&a){d.style=this._book.changeBorderId(d.style,a.left);break}for(c=s[l]._cells.length;c--;){var d;if((d=s[l]._cells[c])&&a){d.style=this._book.changeBorderId(d.style,a.right);break}}}s[l]&&fc.addText(n,s[l].toXmlText())}if(this._sheetProtect){var p=fc.addChild(t,"sheetProtection");if(fc.addProperty(p,"sheet","1"),this._protectPassword){var f=function(t){var e,i,r=0,o=function(t){for(var e=[],i=t.split(""),r=0;r<i.length;++r)e[r]=i[r].charCodeAt(0);return e}(t),n=o.length+1;i=n,(e="undefined"!=typeof Buffer?Buffer.alloc?Buffer.alloc(i):new Buffer(i):"undefined"!=typeof Uint8Array?new Uint8Array(i):new Array(i))[0]=o.length;for(var s=1;s<n;++s)e[s]=o[s-1];for(s=n-1;s>=0;--s)r=((0==(16384&r)?0:1)|r<<1&32767)^e[s];return(52811^r).toString(16).toUpperCase()}(this._protectPassword);fc.addProperty(p,"password",f)}if(this._protectProperties){var _=this._protectProperties;Object.keys(_).forEach((function(t){fc.addProperty(p,t,_[t])}))}}if(this._mergeCount>0&&(fc.addChildElement(this._txdoc,this._txmerge),fc.addProperty(this._txmerge,"count",this._mergeCount+"")),this._drawing&&fc.addChild(t,"drawing",{"r:id":this._drawing.relationId}),Object.keys(this._sparkGroups).length>0){var g=fc.addChild(t,"extLst"),y=fc.addChild(g,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),m=fc.addChild(y,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(var l in this._sparkGroups){var b=this._sparkGroups[l],v=b.colors,w=b.sparkLines,C=fc.addChild(m,"x14:sparklineGroup",{type:b.type||"line"});v.colorSeries&&fc.addChild(C,"x14:colorSeries",{rgb:v.colorSeries}),v.colorMarkers&&(fc.addProperty(C,"markers","1"),fc.addChild(C,"x14:colorMarkers",{rgb:v.colorMarkers})),v.colorFirst&&(fc.addProperty(C,"first","1"),fc.addChild(C,"x14:colorFirst",{rgb:v.colorFirst})),v.colorLast&&(fc.addProperty(C,"last","1"),fc.addChild(C,"x14:colorLast",{rgb:v.colorLast})),v.colorHigh&&(fc.addProperty(C,"high","1"),fc.addChild(C,"x14:colorHigh",{rgb:v.colorHigh})),v.colorLow&&(fc.addProperty(C,"low","1"),fc.addChild(C,"x14:colorLow",{rgb:v.colorLow}));var x=fc.addChild(C,"x14:sparklines");for(var I in w){var S=fc.addChild(x,"x14:sparkline");fc.addChild(S,"xm:f",void 0,w[I]),fc.addChild(S,"xm:sqref",void 0,I)}}}return _c.XML_HEAD_STRING+fc.toString(t)},t.prototype.createBorderEdges=function(t){function e(e){var i={};return e.forEach((function(e){i["border-"+e+"-style"]=t["border-"+e+"-style"],i["border-"+e+"-color"]=t["border-"+e+"-color"],i["border-"+e+"-width"]=t["border-"+e+"-width"]})),this._book._styles._borders.createFromCss(i)||{}}t&&(this._borderEdges={leftTop:e.call(this,["left","top"]),top:e.call(this,["top"]),rightTop:e.call(this,["right","top"]),left:e.call(this,["left"]),right:e.call(this,["right"]),leftBottom:e.call(this,["left","bottom"]),bottom:e.call(this,["bottom"]),rightBottom:e.call(this,["right","bottom"])})},t.prototype.setFixedInfo=function(t,e){this._fixedRow=null==t?this._fixedRow:Math.max(this._fixedRow,t),this._fixedCol=null==e?this._fixedCol:Math.max(this._fixedCol,e)},t.prototype.addImage=function(t,e,i,r,o,n,s,a){void 0===this._drawing&&(this._drawing=this._book.createDrawing(this),this._drawing.rId=this._relation_indexer++);var l=this._book.addImage(n);return this._drawing.add(t,e,i,r,o,l,s,a)},t.prototype._prepare=function(){this._txdoc=fc.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=fc.createDocument("mergeCells")},t.RELATION_ID="rId",t}(),Ac=function(){function t(t){this._sheet_indexer=3,this._drawing_indexer=1,this._parts={},this._parts={},this._strings=new gc,this._images=new mc,this._styles=new Lc(t),this._downloader=new cc,this._sheets=[],this._drawings=[],this._preapreTemplateParts()}return t.prototype.dispose=function(){this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._drawings.forEach((function(t){t.dispose()})),this._drawings=null,this._sheets.forEach((function(t){t.dispose()})),this._sheets=null},Object.defineProperty(t.prototype,"currentSheet",{get:function(){return this._currentSheet},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._sheets?this._sheets.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloader",{get:function(){return this._downloader},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasDrawing",{get:function(){return this._drawing_indexer>1},enumerable:!0,configurable:!0}),t.prototype.createSheet=function(t,e){var i=new Bc(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(i),this._currentSheet=i,i},t.prototype.createDrawing=function(t){var e=new vc(this,t,this._drawing_indexer++);return this._drawings.push(e),e},t.prototype.addSharedString=function(t){return this._strings.add(t)},t.prototype.addImage=function(t){return this._images.add(t)},t.prototype.getImageMap=function(){return this._images.getImageMap()},t.prototype.getExcelImage=function(t){return this._images.getImage(t)},t.prototype.getImageIndex=function(t){return this._images.getImageId(t)},t.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},t.prototype.addStyle=function(t,e,i,r,o,n){if(null==o){var s=t.whiteSpace||t["white-space"];o=null!=s&&"none"!==s&&"nowrap"!==s}return this._styles.addStyle(t,e,i,r,o,n)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorderId=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.extendStyle=function(t,e,i,r,o){return this._styles.extendStyle(t,e,i,r,o)},t.prototype.createParts=function(){var t=this._parts,e=fc.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});if(fc.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),fc.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),fc.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),fc.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),fc.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),fc.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),fc.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),this._drawings.length>0){for(var i=0;i<this._drawings.length;i++){var r="/xl/drawings/"+(p=this._drawings[i]).fileName;fc.addChild(e,"Override",{PartName:r,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}var o=this.downloader.getContentTypes();Object.keys(o).forEach((function(t){fc.addChild(e,"Default",{Extension:t,ContentType:o[t]})}))}var n=fc.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});fc.addChild(n,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),fc.addChild(n,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var s=fc.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});fc.addChild(s,"workbookPr",{date1904:"false"});var a=fc.addChild(s,"bookViews");fc.addChild(a,"workbookView",{activeTab:"0"});for(var l=fc.addChild(s,"sheets"),u=(i=0,this._sheets.length);i<u;i++){var h=this._sheets[i],c="worksheets/sheet"+(i+1).toString()+".xml",d="xl/"+c;if(t[d]=h.createPart(),e&&fc.addChild(e,"Override",{PartName:"/"+d,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),l&&fc.addChild(l,"sheet",{name:h.name||"Sheet"+(i+1).toString(),sheetId:(i+1).toString(),"r:id":h.id}),n&&fc.addChild(n,"Relationship",{Id:h.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:c}),h.drawing){var p=h.drawing;t[d="xl/worksheets/_rels/sheet"+(i+1).toString()+".xml.rels"]=p.createSheetRel(),t[d="xl/drawings/_rels/"+p.fileName+".rels"]=p.createRel(),t[d="xl/drawings/"+p.fileName]=p.createPart()}}var f=_c.XML_HEAD_STRING;return t["[Content_Types].xml"]=f+fc.toString(e),t["xl/workbook.xml"]=f+fc.toString(s),t["xl/_rels/workbook.xml.rels"]=f+fc.toString(n),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},t.prototype._preapreTemplateParts=function(){var t=this._parts,e=_c.XML_HEAD_STRING,i=(new Date).toISOString();t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',t["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+i+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},t}(),$c=function(e){function i(i,r){void 0===r&&(r=null);var o=e.call(this,null,i)||this;return o._groupSorting=!0,o._groupSortDirection=t.SortDirection.ASCENDING,o._groupSortCase=t.SortCase.SENSITIVE,o._rs=new $o(!1),o._rs.addListener(o),o._groupedProvider=new cn(o._rs,!1),o._groupedProvider.footerCounter=r,o.source=o._groupedProvider,o._summarizer=new qo(o._rs),o}return r(i,e),i.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"grouped",{get:function(){return this._groupedProvider.grouped},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupLevels",{get:function(){return this._groupedProvider.groupCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupByFields",{get:function(){return this._groupedProvider.groupedFields},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!0,configurable:!0}),i.prototype.canGrouping=function(t){return this._groupedProvider.canGrouping(t)},i.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},i.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},i.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},i.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},i.prototype.clearFilters=function(t){this._rs.clearFilters(t)},i.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},i.prototype.beginFiltering=function(){this._rs.beginFilter()},i.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},i.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},i.prototype.orderBy=function(e,i,r){if(this._groupedProvider.grouped&&this._groupSorting){for(var o=i?i.length:0,n=r?r.length:0,s=this._groupedProvider.groupedFields,a=this._rs.getSortDirections(),l=this._rs.getSortCases(),u=[],h=0,c=s.length;h<c;h++)u.push(s[h]);for(h=0,c=e.length;h<c;h++){var d=e[h],p=u.indexOf(d),f=void 0,_=void 0;f=o>h?i[h]:o>0?i[o-1]:t.SortDirection.ASCENDING,_=n>h?r[h]:n>0?r[n-1]:t.SortCase.SENSITIVE,p<0?(u.push(d),a[u.length-1]=f,l[u.length-1]=_):(a[p]=f,l[p]=_)}s=u,this._rs.orderBy(s,a,l)}else this._rs.orderBy(e,i,r)},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},i.prototype.groupBy=function(e,i,r,o){void 0===i&&(i=!0),void 0===r&&(r=t.SortDirection.ASCENDING),void 0===o&&(o=t.SortCase.SENSITIVE),(e&&!(e.length<1)||this._groupedProvider.grouped)&&this._groupedProvider.canGrouping(e)&&(this._groupSorting=i,this._groupSortDirection=r,i&&this._rs.orderBy(e,[r],[o],!1),this._groupedProvider.groupBy(e))},i.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},i.prototype.addGroupBy=function(t,e,i){var r;if(this._groupedProvider.groupCount<1?r=[e]:(r=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this._groupedProvider.canGrouping(r)){if(this._groupSorting){var o=[this._groupSortDirection];this._rs.orderBy(r,o,null,!1)}this._groupedProvider.groupBy(r)}},i.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,r=-1,o=0,n=i.length-1;n>=0;n--)if(o++,i[n]==t){r=n;break}if(r>=0){if(i.splice(r,e?o:1),!this._groupedProvider.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(i)}else{if(!this._groupedProvider.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},i.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},i.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},Object.defineProperty(i.prototype,"isGroupSorting",{set:function(t){this._groupSorting=t,this._groupedProvider._groupSorting=t},enumerable:!0,configurable:!0}),i.prototype.expand=function(t,e,i,r){this._groupedProvider.expand(t,e,i,r)},i.prototype.collapse=function(t,e,i,r){this._groupedProvider.collapse(t,e,i,r)},i.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},i.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},i.prototype.setPaging=function(t,e,i,r){this._rs.setPaging(t,e,i,r)},Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},enumerable:!0,configurable:!0}),i.prototype.setPage=function(t,e){this._rs.setPage(t,e)},Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t},enumerable:!0,configurable:!0}),i.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},i.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},i.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},Object.defineProperty(i.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!0,configurable:!0}),i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},i.prototype.getFirstRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},i.prototype.getLastRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},i.prototype.getPrevRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&t.index>0?this._rs.getItem(t.index-1):this._rs.getItem(0)},i.prototype.getNextRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},i.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movable",{get:function(){return!this.grouped&&this._rs.movable},enumerable:!0,configurable:!0}),i.prototype.getAllItems=function(){return this._groupedProvider.getAllItems()},i.prototype.getPagingAllItems=function(){var t=this._rs;return t.isSorted?t._sortedItems.slice():t._items.slice()},i.prototype.findItem=function(t,e,i,r,o){return this._groupedProvider.findItem(t,e,i,r,o)},i.prototype.findCell=function(t,e,i,r,o,n){return this._groupedProvider.findCell(t,e,i,r,o,n)},i.prototype.checkItems=function(t,e,i){this._groupedProvider.checkItems(t,e,i)},i.prototype.checkItem=function(t,e,i,r){this._groupedProvider.checkItem(t,e,i,r)},i.prototype.checkAll=function(t,e,i,r,o){this._groupedProvider.checkAll(t,e,i,r,o)},i.prototype.setItemChecked=function(t,e){var i=this._rs._checkFieldIndex;if(i>-1){var r=this.dataSource.getField(i),o=(r._boolParser||r._ownerBoolParser).toText(e);return this.isEditing(t)?t.setValue(i,o):t.setData(i,o),!0}return!1},i.prototype.getItemChecked=function(t,e){var i=this._rs._checkFieldIndex;return i>-1?this.dataSource.getField(i).readBooleanValue(t.getData(i)):e},i.prototype.setGroupCheckable=function(t){this.grouped&&this._groupedProvider.setGroupCheckable(t)},i.prototype.getItemOfRow=function(t,e){return this._rs.getItemOfRow(t,e)},i.prototype._doBeginUpdate=function(t){var i=e.prototype._doBeginUpdate.call(this,t);return this._groupedProvider.$_setEditItem(i),i},i.prototype._doBeginAppendDummy=function(){var t=e.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(t),t},i.prototype._doBeginAppend=function(t){var i=e.prototype._doBeginAppend.call(this,t);return this._groupedProvider.$_setEditItem(i),i},i.prototype._doBeginInsert=function(t,i,r,o){var n=e.prototype._doBeginInsert.call(this,t,i,r,o);return this._groupedProvider.$_setEditItem(n),n},i.prototype._doCancelDummyEdit=function(){e.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},i.prototype._doCancelEdit=function(t,i){e.prototype._doCancelEdit.call(this,t,i),this._groupedProvider.$_setEditItem(null)},i.prototype._doCommitEdit=function(t,i){return!!e.prototype._doCommitEdit.call(this,t,i)&&(this._groupedProvider.$_setEditItem(null),!0)},i.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(cn.GROUPING,e)},i.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(cn.GROUPED)},i.prototype.onGroupedItemProviderExpand=function(t,e){return this.fireConfirmEvent(cn.EXPAND,e)},i.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(cn.EXPANDED,e)},i.prototype.onGroupedItemProviderCollapse=function(t,e){return this.fireConfirmEvent(cn.COLLAPSE,e)},i.prototype.onGroupedItemProviderCollapsed=function(t,e,i){this.fireEvent(cn.COLLAPSED,e,i)},i.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},i.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},i.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},i.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},i.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},i.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},i.prototype.onItemProviderSorted=function(t){this._fireSorted()},i.prototype.onItemProviderDataLoadComplated=function(t){this._fireDataLoadComplated()},i}(kr),jc=function(t){function e(e,i,r){return void 0===r&&(r=null),t.call(this,e,i,r)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cellView",{get:function(){return this.owner},enumerable:!0,configurable:!0}),e}(function(t){function e(e,i,r){void 0===r&&(r=null);var o=t.call(this,e,r)||this;return o._clickable=!1,o._owner=i,o}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){},e.prototype._hoverChanged=function(){this.invalidate()},e.prototype._changed=function(){this.invalidate()},e}(Bs)),Hc=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype._doUpdateContent=function(t,e,i){i[ft.TextProp]=""},e.prototype._doRender=function(t){},e}(Na),Wc=function(t){function e(e,i){var r=t.call(this,e,null,i)||this;return r._cells=[],r._levels=0,r}return r(e,t),e.prototype._doDispose=function(){this._cells.forEach((function(t){t.dispose()})),this._cells=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=this.$_createCell();this._cells.push(e)}},e.prototype._doPrepareTableExtents=function(t){if(this._levels>0)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},e.prototype._doPrepareTableRow=function(e,i,r,o){t.prototype._doPrepareTableRow.call(this,e,i,r,o),o.className=this.$_getRowClassName(i)},e.prototype._prepareCellContent=function(t,e){var i=ct(t);return t.$_lev=e+1,i.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return this._levels},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e}(Ma),Gc=function(t){function e(e){return t.call(this,e,"rowGroupHeadView")||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-rowgroup-head"},e.prototype._getTableRowHeight=function(t,e){var i=this.grid,r=[];return i.header.visible&&r.push(t.headBounds.height),i.filterPanel.visible&&r.push(t.filterPanelBounds.height),i.headerSummaries.visible&&r.push(t.sumBounds.height),r[e]||0},e.prototype.$_createCell=function(){return new Hc(this.doc,"rowGroupHeadCellView")},e.prototype._getTableRowCount=function(t){var e=this.grid,i=0;return e.header.visible&&i++,e.filterPanel.visible&&i++,e.headerSummaries.isVisible()&&i++,i},e.prototype.$_getRowClassName=function(t){var e=this.grid,i=[];return e.header.visible&&i.push(""),e.filterPanel.visible&&i.push("rg-rowgroup-filter-panel"),e.headerSummaries.isVisible()&&i.push("rg-rowgroup-summary"),i[t]||""},e}(Wc),Uc=function(t){function e(e){return t.call(this,e,"rowGroupFootView")||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},e.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},e.prototype.$_createCell=function(){return new Hc(this.doc,"rowGroupFootCellView")},e.prototype._getTableRowCount=function(t){return 1},e.prototype.$_getRowClassName=function(t){return"rg-rowgroup-foot-row"},e}(Wc),zc="rg-rowgroup-expander",Yc=function(t){function e(e,i){var r=t.call(this,e,i,"rowGroupExpandHandle")||this;return r._expanded=!1,r.clickable=!0,r}return r(e,t),e.isExpander=function(t){var e=t.className;return e&&e.indexOf(zc)>=0},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("span")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.position="",e.style.display="inline-block"},e.prototype._getCssSelector=function(){return this._expanded?"rg-rowgroup-expander rg-rowgroup-expander-expanded":"rg-rowgroup-expander rg-rowgroup-expander-collapsed"},e.prototype._getCssDisplay=function(){return""},e.prototype._beforeDraw=function(t){this._setClassName(t)},e}(jc),qc=function(e){function i(t){var i=e.call(this,t,"rowGroupBarCell")||this;return i._level=0,i._expander=new Yc(t,i),i.addChild(i._expander),i}return r(i,e),Object.defineProperty(i.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),i.prototype.updateCell=function(i,r,o){e.prototype.updateCell.call(this,i,r,o);var n,s=r.item,a=s.getAncestor(this.bar.l);if(a){var l=i.rowGroup;n=(a.expanded?l.expandedAdornments:l.collapsedAdornments)===t.RowGroupAdornments.SUMMARY}if(a&&(s instanceof br&&s===a||a.getFirstVisibleItem(n)===s)&&a.level===this.bar.l){var u=this._expander._dom;o.appendChild(u),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=a.expanded;var h=i.rowGroup.$_isExpanderVisible(a);this._expander.visible=!a.expanded||null==h||h,u[f]=s.index}else this._expander.visible=!1;o.style.paddingTop="2px"},i.prototype.validate=function(){e.prototype.validate.call(this);var t=this._expander._dom;ft.detach(t)},i}(Na),Kc=function(e){function i(t){var i=e.call(this,t,null,"rowGroupBarContainer")||this;return i._cells=[],i._levels=0,i._bars=[],i}return r(i,e),i.prototype._doDispose=function(){this._cells=null,e.prototype._doDispose.call(this)},i.prototype.prepare=function(t,e){this._levels=e},i.prototype.getLevelIndent=function(t){return t*this.width/this._levels},i.prototype.getViewOf=function(t){for(var e=this.getChildren(),i=0,r=e.length;i<r;i++){var o=e[i];if(o._expander._dom===t)return o}},i.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},i.prototype._prepareCellContent=function(t,e){return ct(t).createElement("div")},i.prototype._doLayoutContent=function(t){for(var e,i=t.grid,r=i.rowGroup,o=this.width/this._levels,n=this._bars,s=n.length,a=t.topIndex,l=t.fixedItemCount,u=l>0;this.childCount<s;)e=this._cells.length>0?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var h=0;h<s;h++){var c=n[h];e=this.getChild(h);var d=c.tr1,p=u?d<l?d:d-1+a:d+a,f=rs.temp(i,p),_=r.getBarCell(f),g=t.getTableItemBounds(c.r);e.bar=c,e.level=c.c+1,e.updateCell(i,_,this.getCellContent(d,c.c)),g.x=o*c.c,g.width=o,e.setRect(g)}},i.prototype._doRender=function(t){},i.prototype._doPrepareTableRows=function(t,i){e.prototype._doPrepareTableRows.call(this,t,i),this.$_layoutBarCells(t,i)},i.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount>0&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},i.prototype._getCellCount=function(t){return this._levels},i.prototype._getCellWidth=function(t,e){return this.width/this._levels},i.prototype._createCell=function(){return new qc(this.doc)},i.prototype.$_calcLevels=function(t,e,i,r){for(var o,n=[],s=1,a=0,l=0;l<r-i;l++){var u=t[l+i].getAncestor(e);n.push(-1),u&&o===u||(n[a]=s,o=u,a=n.length-1,s=0),s++}return n[a]=s,n},i.prototype.$_layoutBarCells=function(e,i){var r=e.$_getItems(),o=r.length,n=e.fixedItemCount,s=i.children,a=this._bars=[];if(!(o<1)){for(var l=0,u=this._getCellCount(e);l<u;l++){var h=l+1,c=0,d=0;if(n>0){for(var p=void 0,_=void 0;c<n;c++,d++)(_=(p=s[d]).children[l]).style.display="",_.removeAttribute("rowspan"),ft.setClassName(_,""),0===l&&ft.setClassName(p,""),_[f]=c;p=s[d++],0===l&&ft.setClassName(p,ka.ROW_BAR_STYLE),(_=p.children[l]).style.display="",_.removeAttribute("rowspan"),ft.setClassName(_,ka.ROW_BAR_CELL_STYLE)}if(c<o)for(var g=this.$_calcLevels(r,h,c,o),y=0;c<o;c++,y++,d++){var m=g[y],b=(_=(p=s[d]).children[l],r[c]),v=b.getAncestor(h);if(0===l&&ft.setClassName(p,""),_.removeAttribute("rowspan"),m>0){var w=this.grid.rowGroup,C=v&&(v.expanded?w.expandedAdornments:w.collapsedAdornments)===t.RowGroupAdornments.SUMMARY,x=1===m&&v&&(b instanceof br||v.getFirstVisibleItem(C)===b);(m>1||x)&&(a.push({r:c,tr1:d,tr2:d+m-1,c:l,l:h}),_.rowSpan=m),_.style.display="",ft.setClassName(_,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(h)),_[f]=b.index}else _.style.display="none",ft.setClassName(_,"")}}a.sort((function(t,e){return t.r-e.r}))}},i}(Fa),Xc=function(t){function e(e){var i=t.call(this,e,"rowGroupBarPane")||this;return i._barContainer=new Kc(e),i.addChild(i._barContainer),i._footView=new Uc(e),i.addChild(i._footView),i._headView=new Gc(e),i.addChild(i._headView),i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels},enumerable:!0,configurable:!0}),e.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},e.prototype._doMeasure=function(t,e,i){var r=this.levelCount;return this._headView.prepare(r),this._footView.prepare(r),this._barContainer.prepare(t,r),new Ra(this.levelCount*t.rowGroup.levelIndent,i)},e.prototype._doLayoutContent=function(t){var e=this.grid,i=t.headBounds;if(this._headView.visible=e.header.visible||e.headerSummaries.isVisible()||e.filterPanel.visible){var r=0;e.header.visible&&(r+=i.height),e.headerSummaries.isVisible()&&(r+=t.summaryBounds.height),e.filterPanel.visible&&(r+=t.filterPanelBounds.height),this._headView.setBounds(0,i.y,this.width,r),this._headView.layoutContent(t)}i=t.footBounds,(this._footView.visible=e.footers.isVisible())&&(this._footView.setBounds(0,i.y,this.width,i.height),this._footView.layoutContent(t)),i=t.rowBarBounds,this._barContainer.setBounds(0,i.y,this.width,i.height),this._barContainer.layoutContent(t)},e.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},e}(ql),Qc=(function(t){function e(e){return t.call(this,e,"rowGroupPane")||this}r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)}}(ql),function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderCellView")||this;return i._indent=0,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)},enumerable:!0,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.top="50%",i.msTransform=i.transform="translate(0px, -50%)",i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._beforeDraw=function(t){},e.prototype._doUpdateContent=function(t,e,i){i[ft.TextProp]=e.text,i.style.left=this._indent>0?this._indent+"px":""},e}(Na)),Jc=function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderView")||this;return i._cellView=new Qc(e),i.addChild(i._cellView),i}return r(e,t),e.prototype._doDispose=function(){this._item=null,this._cellView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup;this._cellView.indent=i.indentVisible?0:e.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(e,i.getHeaderCell(this._item),this._cellView._dom)},e}(Pa),Zc=function(t){function e(e){return t.call(this,e,"rowGroupRightHeaderView")||this}return r(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e}(Pa),td=function(t){function e(e){return t.call(this,e,"rowGroupFooterView")||this}return r(e,t),e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,r=t.cellLayouts._dataCells.length,o=this._getFirstCell(t),n=this._getStartCell(t)-o,s=n,a=this._getEndCell(t)-o,l=this._item instanceof an;l&&(s=Math.max(n,this._item.parent.level-o)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,r,s,a),s=0;for(var u=0;u<r;u++){var h=this._getTableRow(t,this._domIndex+u),c=this._getBodyCells(this._domIndex+u),d=i.getFooterStyleName(this._item);h.className=d;for(var p=s;p<=a;p++){var f=c[p],_=f.layout;if(!(l&&f.merged&&f.head&&f===f.head)&&(f.clearExpander(),f.clearButtons(),f.renderer2&&f.renderer2.clearContent(),f.visible))if(_.isNull)_.isProxy||f.setClassName(Nh.FOOTER_CELL_STYLE);else{var g=rs.temp(e,this._item.index,_),y=i.getFooterCell(g);this._updateCell(e,i,y,f)}}}},e.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},e.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype._getBodyView=function(){return this.parent._bodyView},e.prototype._updateCell=function(t,e,i,r){var o=i.dataColumn.groupFooters.get(i.footerIndex),n=e.getFooterCellStyle(i,r.style.clear()),s=i.getSummary(),a=r.cell.firstElementChild;if(r.setClassName(n.styleName),ft.setClassName(a,Nh.FOOTER_CELL_RENDERER),r.refreshFormatters(n),e.getFooterCellFormatters(o,r),s){var l=i.getTemplate(r);void 0===l?a[ft.TextProp]=i.getDisplayText(r):a.innerHTML=l}else a[ft.TextProp]=""},e.prototype.$_refreshSpans=function(t,e,i,r,o){for(var n=0;n<i;n++)for(var s=this._getBodyCells(this._domIndex+n),a=r;a<=o;a++){var l=s[a],u=l.layout,h=u.parent,c=h&&h.vertical;if(l.spanned);else if(u.isProxy)l.clear(!1);else{var d=0,p=0,f=u.getGroupFooterUserSpan(this._item.parent,e),_=f?0:u.getGroupFooterSpan(t,e)-1;if(f){var g=this._item,y=(g.parent.footerCount-g.vindex)*i,m=f.footerCount||0,b=m>0?m*i:f.rowspan||1,v=f.colspan||1;b=Math.min(b,y),l.set(v,b,!0);for(var w=0;w<b;w++)for(var C=this._getBodyCells(this._domIndex+w+n),x=0;x<v;x++){var I=C&&C[x+a];I&&I!==l&&I.span(l)}}else if(_>0){var S=0,E=u.vindex+1;if(c)for(;S++<_&&S<i;)p+=(k=h.getVisible(E++))._dspan,this._getBodyCells(this._domIndex+n+1)[a].span(l);else for(;S++<_&&a-r+S<s.length&&E<h.visibleCount;){var k;if(!(k=h.getVisible(E++)))break;d+=k._cspan,s[a+S].span(l)}}u.isNull&&l.clear(!0),!f&&l.set(u._cspan+d,u._dspan+p,!0)}}},e}(Wa),ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._fixedView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(td),id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._rightView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(td),rd=function(t){function e(e,i){var r=t.call(this,e,i||"rowGroupLayer")||this;return r._headerPool=[],r._headerViews=[],r._rightHeaderPool=[],r._rightHeaderViews=[],r._footerPool=[],r._footerViews=[],r._fixedFooterPool=[],r._fixedFooterViews=[],r._rightFooterPool=[],r._rightFooterViews=[],r._indents=[],r}return r(e,t),e.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this.getAncestor(ad)},enumerable:!0,configurable:!0}),e.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},e.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var r=i[e];if(r.item===t)return r}},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},e.prototype._doDraw=function(t){},e.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},e.prototype.$_prepareIndents=function(t){for(var e=this._indents,i=t.rowGroupLevels+1,r=0;r<e.length;r++)e[r]=t.getLevelIndent(r);for(;e.length<i;)e.push(t.getLevelIndent(e.length));return e},e.prototype._doLayoutContent=function(t){var e,i=this.$_prepareIndents(t),r=t.$_getItems(),o=r.length,n=t.fixedItemCount,s=n>0,a=this._rightView,l=t.contentBounds.right-t.sideContentBounds.x,u=0,h=0,c=t.trs,d=n,p=s?d*c+1:d*c;for(a&&(e=t.rightContentBounds.clone(),l=Math.min(l,this.width-e.width),e.x-=this.x,e.leftBy(t.rightBarWidth));d<o;d++){var f=r[d];if(f instanceof br){var _=this._headerViews[u],g=t.getTableItemBounds(d),y=i[f.level];if(_.item=f,_.setBounds(y,g.y,l-y,g.height),_.layoutContent(t),a){var m=this._rightHeaderViews[u];m.item=f,m.setBounds(e.x,g.y,e.width,g.height),m.layoutContent(t)}u++,p++}else f instanceof vr?(this._fixedView&&((_=this._fixedFooterViews[h]).updateItem(f,p,c,!0),_.layoutContent(t)),this._rightView&&((_=this._rightFooterViews[h]).updateItem(f,p,c,!0),_.layoutContent(t)),this._bodyView&&(_=this._footerViews[h++],ft.isDebugging(),_.updateItem(f,p,c,!0),_.layoutContent(t)),p+=c):p+=c}},e.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,r=t.fixedItemCount,o=e.length;r<o;r++)e[r]instanceof br&&i++;for(var n=this._headerPool,s=this._headerViews;s.length<i;)(a=n.pop())||(a=new Jc(this.doc)),this.addChild(a),s.push(a);for(;s.length>i;){var a=s.pop();this.removeChild(a),n.push(a)}var l=this._rightHeaderPool,u=this._rightHeaderViews;if(this._rightView){for(;u.length<i;)(a=l.pop())||(a=new Zc(this.doc)),this.addChild(a),u.push(a);for(;u.length>i;)a=u.pop(),this.removeChild(a),l.push(a)}else for(;u.length>0;)a=u.pop(),this.removeChild(a),l.push(a)},e.prototype.$_prepareGroupItems=function(t,e,i,r){this._bodyView=e,this._fixedView=i,this._rightView=r},e.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,r=e.fixedItemCount,o=t.length;r<o;r++)t[r]instanceof vr&&i++;for(;this._footerViews.length<i;)(n=this._footerPool.pop())||(n=new td(this.doc)),this.addChild(n),this._footerViews.push(n);for(;this._footerViews.length>i;){var n=this._footerViews.pop();this.removeChild(n),this._footerPool.push(n)}if(this._fixedView){for(;this._fixedFooterViews.length<i;)(n=this._fixedFooterPool.pop())||(n=new ed(this.doc)),this.addChild(n),this._fixedFooterViews.push(n);for(;this._fixedFooterViews.length>i;)n=this._fixedFooterViews.pop(),this.removeChild(n),this._fixedFooterPool.push(n)}else for(;this._fixedFooterViews.length>0;)n=this._fixedFooterViews.pop(),this.removeChild(n),this._fixedFooterPool.push(n);if(this._rightView){for(;this._rightFooterViews.length<i;)(n=this._rightFooterPool.pop())||(n=new id(this.doc)),this.addChild(n),this._rightFooterViews.push(n);for(;this._rightFooterViews.length>i;)n=this._rightFooterViews.pop(),this.removeChild(n),this._rightFooterPool.push(n)}else for(;this._rightFooterViews.length>0;)n=this._rightFooterViews.pop(),this.removeChild(n),this._rightFooterPool.push(n)},e.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},e.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},e.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},e.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},e.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},e.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},e.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},e.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},e.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]},e}(As),od=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._prompt="\uceec\ub7fc \ud5e4\ub354\ub97c \uc774 \uacf3\uc73c\ub85c \ub04c\uc5b4\ub2e4 \ub193\uc73c\uba74 \uadf8 \uceec\ub7fc\uc73c\ub85c \uadf8\ub8f9\ud551\ud569\ub2c8\ub2e4.",i._expandWhenGrouping=!0,i._summarizing=!0,i._commitBeforeGrouping=!0,i._commitBeforeExpand=!0,i._commitBeforeCollapse=!0,i._fixMergedColumns=!0,i._toast=new Hl({visible:!1,message:"Grouping..."}),i._headerClickable=!1,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toast",{get:function(){return this._toast},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},e}(Ea),nd=function(t){function e(e){var i=t.call(this,e)||this;return i._field=-1,i._text="",i._textWidth=0,i._textHeight=0,i._closeHeight=0,i._padHorz=5,i._padVert=4,i._itemGap=8,i}return r(e,t),e.prototype._doDispose=function(){ft.detach(this._textView),ft.detach(this._closeView),this._textView=this._closeView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[ft.TextProp]=this._text=t.displayText},e.prototype.isCloseButton=function(t){return t===this._closeView},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=ct(e);this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._closeView=i.createElement("span"),this._closeView.className="rg-group-panel-item-close",e.appendChild(this._closeView)},e.prototype._doMeasure=function(t,e,i){var r=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,o=this._textHeight=this._textView.offsetHeight;return o=Math.max(o,this._closeHeight=this._closeView.offsetHeight),o+=2*this._padVert,new Ra(r,o)},e.prototype._doLayoutContent=function(t){},e.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},e}(Pa),sd=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r._minHeight=0,r._itemViews=[],r._count=0,r._padHorz=16,r._padVert=10,r._itemGap=20,r.visible=!1,r}return r(e,t),e.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach((function(t,e){t.dispose()})),this._itemViews=null,ft.detach(this._messageView),this._messageView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-group-panel"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=ct(e);e.style.overflow="hidden";var r=this._messageView=i.createElement("span");r.className="rg-group-panel-message",e.appendChild(r)},e.prototype._doMeasure=function(t,e,i){var r=t.groupingOptions;this._count=t.rowGroupLevels;var o=this.minHeight,n=0,s=this._messageView.style;if(this._count>0?s.display="none":(s.display="",this._messageView[ft.TextProp]=r.prompt,n=this._messageView.offsetHeight,o=Math.max(o,n+2*this._padVert),s.left=this._padHorz+"px",s.top=(o-n)/2+"px"),this.$_prepareItemViews(t,this._count),this._count>0){for(var a=0;a<this._count;a++){var l=(u=this._itemViews[a]).measure(t,e,i);u.width=l.width,n=Math.max(n,l.height)}for(o=Math.max(o,n+2*this._padVert),a=0;a<this._count;a++){var u;(u=this._itemViews[a]).height=n,u.y=(o-n)/2}}return new Ra(e,o)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){if(this._count>0)for(var e=this._padHorz,i=(this._padVert,0);i<this._count;i++){var r=this._itemViews[i];r.x=e,e+=this._itemGap+r.width}},e.prototype._doDraw=function(t){},e.prototype._visibleChanged=function(){this.grid&&this.grid.invalidateLayout()},e.prototype._doSizeChanged=function(){this.grid&&this.grid.invalidateLayout()},e.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,r=t.rowGroupFields,o=i.length;o<e;o++)i.push(new nd(t.doc));for(o=0;o<e;o++){var n=i[o];n.setColumn(t.$_getVisibleRootByField(r[o],!0)),n.visible=!0,this.addChild(n)}for(o=e;o<i.length;o++)this.removeChild(i[o])},e}(Da),ad=function(e){function i(t,i,r){var o=e.call(this,t,i,r)||this;o._rowGroupSummaryRuntime=new hs,o._addGridObject(o._rowGroup=new Nh(o)),o._rs=o._createItemSource(),o.itemSource=o._rs,o._groupingOptions=new od(o),o._groupingOptionsChanged(o._groupingOptions),o._groupPanelView=new sd(o.doc,o.rowGroup),o.topContentPane.addChild(o._groupPanelView);for(var n=[o._groupBarPane._headView,o._groupBarPane._footView,o._groupBarPane._barContainer],s=n.length-1;s>=0;s--){var a=n[s];o._tableViews[a.$_hash]=a}return o}return r(i,e),i.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup&&this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),e.prototype._doDispose.call(this)},i.prototype._doCreateOtherElements=function(){this._groupView=new rd(this.doc),this.addElement(this._groupView)},Object.defineProperty(i.prototype,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGroup",{get:function(){return this._rowGroup},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupPanelView",{get:function(){return this._groupPanelView},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupBarPane",{get:function(){return this._groupBarPane},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupView",{get:function(){return this._groupView},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"groupingOptions",{get:function(){return this._groupingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paged",{get:function(){return this._rs.page>=0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pageSorting",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupLevels",{get:function(){return this._rs.groupLevels},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupFields",{get:function(){return this._rs.groupByFields},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGrouped",{get:function(){return this._rs.grouped},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime},enumerable:!0,configurable:!0}),i.prototype.isTree=function(){return!1},i.prototype._beforeChangeLayout=function(){this.ungroupBy()},i.prototype.isGrouped=function(t){return t&&t.groupLevel>0},i.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},i.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},i.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},i.prototype.groupByFieldNames=function(e,i,r){void 0===r&&(r=t.SortDirection.ASCENDING);var o=this.dataSource;if(o&&e&&e.length>0){for(var n=[],s=0;s<e.length;s++){var a=e[s],l=o.getFieldIndex(a),u=this.columnByField(a),h=u&&this.layoutByColumn(u);!h||this.rowGroup.mergeMode&&h.parent!=this.activeCellLayout._root||l>=0&&n.push(l)}n.length>0&&(i=void 0===i?this.rowGroup.sorting:i,this.groupBy(n,i,r))}else this.ungroupBy()},i.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},i.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,t.SortDirection.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},i.prototype.ungroupBy=function(){this.clearGroupBy()},i.prototype.addGroupBy=function(t,e){e&&(this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||e.dataIndex>=0&&this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doAddGroupBy(t,e)}.bind(this))))},i.prototype.removeGroupByField=function(t){t<0||this.isItemEditing(null)||!this.isGroupedField(t)||(this._rs.removeGroupBy(t,!1),this.$_doRowGroupFooterMergeChanged())},i.prototype.removeGroupBy=function(t){this.removeGroupByField(t.dataIndex)},i.prototype.expand=function(t,e,i,r){this.isItemEditing(null)||this._rs.expand(t,e,i,r)},i.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},i.prototype.collapse=function(t,e,i,r){this.isItemEditing(null)||this._rs.collapse(t,e,i,r)},i.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},i.prototype.isGroupedColumn=function(t){return t&&t.dataIndex>=0&&this._rs.isGroupedField(t.dataIndex)},i.prototype.getSortFields=function(){return this.itemSource.getSortFields()},i.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},i.prototype.getSortCases=function(){return this.itemSource.getSortCases()},i.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},i.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},i.prototype.getPageOfDataRow=function(t){return this._rs.getPageOfDataRow(t)},Object.defineProperty(i.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!0,configurable:!0}),i.prototype._createSidePane=function(){return this._groupBarPane=new Xc(this.doc)},i.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},i.prototype._createLayoutManager=function(){return new ld(this)},i.prototype.canGrouping=function(){return this._groupPanelView.visible},i.prototype._canMerge=function(){return!0},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!0,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getRowView=function(t,i){return i instanceof br?this._groupView.getHeaderView(i):e.prototype.getRowView.call(this,t,i)},i.prototype._doSortItems=function(t,e,i){var r=this.itemSource;r.setLabelComparer(this._doPrepareComparer(t)),r.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.inclusiveFiltering&&(i.inclusiveFiltering=t.inclusiveFiltering),void 0!==t.filterOr&&(i.inclusiveFiltering=t.filterOr),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.groupSummaryMode&&(i.groupSummaryMode=t.groupSummaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMdoe),void 0!==t.filterMode&&(i.filterMode=t.filterMode),e.prototype.setOptions.call(this,t)}},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t),t instanceof Ps&&(this._rs.checkableExpression=t.checkableExpression)},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getCheckedRows=function(t,e,i){var r,o;if(e){r=[];for(var n=0,s=this.itemCount;n<s;n++)(o=this.getItem(n)).checked&&o.dataRow>=0&&r.push(o.dataRow)}else r=this._rs.getCheckedRows(i);return t&&r.sort((function(t,e){return t-e})),r},i.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,r=this.itemCount;i<r;i++){var o=this.getItem(i);o.checked&&(t||o.dataRow>=0)&&e.push(o.index)}return e},i.prototype.getCheckedItems=function(t){for(var e=[],i=0,r=this.itemCount;i<r;i++){var o=this.getItem(i);o.checked&&(t||o.dataRow>=0)&&e.push(o)}return e},i.prototype.getMergedItems=function(t,e,i,r){var o=function(){return l.index<h?u.mergeRows?a.$_checkFixedMerge(this.itemSource,n,t,h):null:a.$_checkMerge(this.itemSource,n,t,!0,h)}.bind(this),n=e instanceof Tn?e:this.columnByName(e),s=n.layout,a=s.merges,l=this.getItem(t);if(!l)return null;if(!a)return r?i&&!l.isDataRow?null:[l.index]:null;var u=this.fixedOptions,h=u.rowCount,c=o();if(!c){var d=this.getGroupLevel(n.dataIndex);(d>0&&n.mergeGrouped&&!this.isTree()?pn.getDefault(d,this.rowGroup.mergeMode):s.$_mergeRuleObj()).parseBounds(this.itemSource,n.dataIndex,0,this.itemCount-1,a._flags),c=o()}if(!c&&r)return[t];if(c){for(var p=[],f=c.top;f<=c.bottom;f++)(this.getItem(f).isDataRow||!i)&&p.push(f);return p.length>0?p:null}return null},i.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(i>0)for(var r=t instanceof mr?t:t.parent;r;){if(r.level==i)return r;r=r.parent}return null},i.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.id>=0?this._rs.getGroupItem(t.id):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},i.prototype.getIndicatorIndex=function(t){return this._rs.getDisplayItemIndex(t)},i.prototype.getFirstRow=function(){return this._rs.getFirstRow()},i.prototype.getLastRow=function(){return this._rs.getLastRow()},i.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},i.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t){for(var r=!1,o=0;o<t.length;o++){var n=t[o];n&&n.isDataRow&&(r=!0)}return r}},i.prototype._getMoveTarget=function(t,e,i,r){return this.getItem(i+r)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataRow;if(i>=0){for(var r=[],o=0,n=t;o<n.length;o++){var s=n[o],a=s&&s.dataRow;a>=0&&r.push(a)}if(r.length>0)return this.dataSource.moveRowList(r,i)}},i.prototype._getCellTypeOf=function(t){return t instanceof Gc?"groupHead":t instanceof Uc?"groupFoot":t instanceof Kc?"groupBar":void 0},i.prototype.updatePastedRow=function(t,e,i){var r=t.dataRow;if(r>=0){var o=this.dataSource;o&&o.updateRow(r,e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;e&&e.appendRow(t)},i.prototype.getSummaryCount=function(t){return"groupFooter"===t?this.rowGroup.footers.count:e.prototype.getSummaryCount.call(this,t)},i.prototype._createItemSource=function(){return new $c(!0,this._rowGroup)},i.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},i.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping},i.prototype.$_rowGroupAdornmentsChanged=function(t,e){this._rs._groupedProvider.resetAdornments(this.handler,t,e)},i.prototype.$_getVisibleRootByField=function(t,e){for(var i=this.visibleLayoutCount,r=0;r<i;r++){var o=this.getVisibleLayout(r),n=o instanceof Vn&&ft.cast(o.firstColumn,Tn);if(n&&n.dataIndex==t)return n}return e?this.columnByField(t):null},i.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},i.prototype._doRowGroupMergeModeChanged=function(){e.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var t=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(t&&t.length>0)for(var i=t.length-1;i>=0;i--){var r=this.$_getVisibleRootByField(t[i],!1);r?r.$_setMergeGrouped(!0):t.splice(i,1)}this._rs.groupByMode(t,!0)}else this._rs.groupByMode(t,!1)},i.prototype.$_doRowGroupFooterMergeChanged=function(){},i.prototype.$_doGroupBy=function(e,i,r){var o,n=this.dataSource;if(this.$_clearColumnMergeGrouped(),n&&e&&(o=e.length)>0){for(var s=n.fieldCount,a=[],l=0;l<o;l++)e[l]>=0&&e[l]<s&&a.push(e[l]);if(a.length>0){if(this.rowGroup.mergeMode)for(l=a.length-1;l>=0;l--){var u=this.$_getVisibleRootByField(a[l],!1);u?u.$_setMergeGrouped(!0):a.splice(l,1)}a.length>0&&(this._rs.setLabelComparer(this._doPrepareComparer(a)),this._rs.groupBy(a,i,r))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,t.SortDirection.ASCENDING);this.$_doRowGroupFooterMergeChanged()},i.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var r=this.rowGroupFields?this.rowGroupFields.slice():[];r.push(i),this._rs.setLabelComparer(this._doPrepareComparer(r)),this._rs.addGroupBy(t,i,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},i.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=ft.cast(this.getColumn(t),Tn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},i.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=ft.cast(this.getColumn(t),Tn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},i.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(i.PAGE_CHANGING,t)},i.prototype.$_firePageChanged=function(t){this.fireEvent(i.PAGE_CHANGED,t)},i.prototype.$_firePageCountChanged=function(t){this.fireEvent(i.PAGE_COUNT_CHANGED,t)},i.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(i.GROUPING,t)},i.prototype.$_fireGrouped=function(){this.fireEvent(i.GROUPED)},i.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(i.EXPANDING,t)},i.prototype.$_fireExpanded=function(t){this.fireEvent(i.EXPANDED,t)},i.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(i.COLLAPSING,t)},i.prototype.$_fireCollapsed=function(t){this.fireEvent(i.COLLAPSED,t)},i.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},i.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(),this.$_clearGroupedIndices();var e,i=this._rs.groupByFields;if(i&&i.length>0&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var r=[],o=this.visibleLayoutCount,n=0;n<o;n++){var s=this.getVisibleLayout(n),a=ft.cast(s.firstColumn,Tn);e=s.merges,a&&(a.mergeGrouped&&a.groupLevel<=0?(e&&e.clear(),a.$_setMergeGrouped(!1)):a.mergeGrouped&&(e||(e=new bn(s)),r.push(a)))}if((o=r.length)>0)for(r=r.sort((function(t,e){return t.groupLevel-e.groupLevel})),n=0;n<o;n++)(e=r[n].layout.merges).clear(),e.initialize(dn.INIT_COUNT),r[n].layout.vindex=n;for(o=this.visibleLayoutCount,n=0;n<o;n++)(a=ft.cast(this.getVisibleLayout(n).firstColumn,Tn))&&!a.mergeGrouped&&(e=a.layout.merges)&&(e.clear(),e.initialize(dn.INIT_COUNT))}this.requestPrepareEditor(),this._syncHeadCheck([]),this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},i.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},i.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},i.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},i.prototype.onGroupedItemProviderCollapsed=function(t,e,i){if(i&&this.topIndex>e.getFirstVisibleItem(!1).index&&e instanceof ln){var r=e.getFirstVisibleItem(!1),o=this.layoutByColumn(this.columnByField(e.groupField)),n=os.tempItem(this,r,o);rs.areEquals(this.focusedIndex,n)?this.topIndex=n.itemIndex:this.setFocusedIndex(n)}this.$_fireCollapsed(e)},i.PAGE_CHANGING="onGridViewPageChanging",i.PAGE_CHANGED="onGridViewPageChanged",i.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",i.GROUPING="onGridViewGrouping",i.GROUPED="onGridViewGrouped",i.EXPANDING="onGridViewExpanding",i.EXPANDED="onGridViewExpanded",i.COLLAPSING="onGridViewCollapsing",i.COLLAPSED="onGridViewCollapsed",i}(Zh),ld=function(t){function e(e){return t.call(this,e)||this}return r(e,t),Object.defineProperty(e.prototype,"panelVisible",{get:function(){return this.grid.groupPanelView.visible},enumerable:!0,configurable:!0}),e.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,r=0,o=0;o<t&&o<i;o++)r+=this.getFixedLayoutWidth(o);for(o=i;o<t;o++)r+=this.getLayoutWidth(o-i);return i?t>i?r=Math.max(this.fixedWidth,r+this.fixedBarWidth-this.leftPos):r+=this.fixedBarWidth:r-=this.leftPos,r}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPanelVisible",{get:function(){return this.panelVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupFields",{get:function(){return this.grid.rowGroupFields},enumerable:!0,configurable:!0}),e.prototype.$_groupView=function(t){return this.grid.groupView},e.prototype.setLeftPos=function(e,i){t.prototype.setLeftPos.call(this,e,i);var r=this.grid,o=r.mergedRowGrouped,n=this.$_groupView(o);n.visible&&this.$_layoutRowGroupView(r,n)},e.prototype._prepareItems=function(e){t.prototype._prepareItems.call(this,e);var i=this.grid;if(i.rowGrouped){var r=i.mergedRowGrouped,o=this.$_groupView(r),n=this.contentBounds.isEmpty?null:i.bodyView,s=this.fixedContentBounds.isEmpty?null:i.fixedBodyView,a=this.rightContentBounds.isEmpty?null:i.rightBodyView;o.$_prepareGroupItems(this,n,s,a),o.$_prepareGroupFooters(this._items,this)}},e.prototype._doMeasureTopPane=function(t,e){var i=t.groupPanelView;if(this.panelVisible){var r=i.measure(t,e.width,e.height);e.height=r.height}else e.height=1,e.width=1},e.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this.panelVisible&&i.layoutContent(this)},e.prototype._doLayout=function(e,i){t.prototype._doLayout.call(this,e,i)},e.prototype._adjustLayout=function(e,i){t.prototype._adjustLayout.call(this,e,i);var r=e.rowGrouped,o=e.mergedRowGrouped,n=e._sideContentPane;n&&this._layoutSidePane(e,n);var s=this.$_groupView(o);this.$_groupView(!o).visible=!1,(s.visible=r)&&this.$_layoutRowGroupView(e,s)},e.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.layout;if(i&&i.isColumn&&t.layout.merged){var r=i.merges;if(r)return null!=r.getRoom(t)}return!1},e.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,r=this.sideContentBounds.clone();r.top=i.y+this.bodyBounds.y,r.right=this.rightContentBounds.right,r.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(r),e.layout(this)},e}(il),ud=function(t){function e(e){var i=t.call(this,e,"gridSelectionTool")||this;return i._panelCellReq=new hd,i._panelCellFeedback=new cd(e.doc),i._groupingReq=new pd,i}return r(e,t),e.prototype._doDispose=function(){this._panelCellReq=null,t.prototype._doDispose.call(this)},e.prototype._doMouseDown=function(e){var i=this.grid,r=this.mouseEventTarget;if(r instanceof ht(e.target).HTMLElement&&(Ga.isExpander(r)||Yc.isExpander(r))){var o=this._findTableCell(r),n=i.getTableView(o);if(Ga.isExpander(r)&&n instanceof Ka){var s=i.getDataCellIndex(o,this._tempIndex),a=n.getCellAt(i.layoutManager,s),l=i.findGroupItem(a.item,a.layout.firstColumn.dataIndex);this.$_toggleExpanded(i,l,e)}else if(Yc.isExpander(r)&&n instanceof Kc){var u=n.getViewOf(r);return void((l=(l=i.getItem(r[f])).getAncestor(u.level))instanceof br&&this.$_toggleExpanded(i,l,e))}}t.prototype._doMouseDown.call(this,e)},e.prototype._doClick=function(e){var i=e.mouseX,r=e.mouseY,o=this.grid,n=this.findElementAt(i,r,!1);n instanceof nd&&n.isCloseButton(e.target)&&o.removeGroupByField(n.field),t.prototype._doClick.call(this,e)},e.prototype._doDblClick=function(e){var i=e.mouseX,r=e.mouseY,o=this.grid,n=this.findElementAt(i,r,!1);n instanceof Jc&&o.groupingOptions.headerClickable?this.$_toggleExpanded(o,n.item,e):t.prototype._doDblClick.call(this,e)},e.prototype._getEditRequest=function(e,i,r,o,n,s,a){var l=t.prototype._getEditRequest.call(this,e,i,r,o,n,s,a);if(l)return l;var u=this.grid,h=this.findElementAt(r,o,!1),c=this._findTableCell(e),d=c&&u.getTableView(c);if(d instanceof Za){var p=d.layoutByCell(c),f=p.firstColumn;if(u.groupPanelView.visible&&f&&f.groupable&&u.groupingOptions.enabled){var _=u.layoutManager.getHeaderCellRect(p);return this._groupingReq.init(p,_,r,o)}}return h instanceof nd?this._panelCellReq.init(h,r,o):void 0},e.prototype._getDragTracker=function(e,i,r){var o=this.grid;return e instanceof hd?new dd(o,e,this._panelCellFeedback):e instanceof pd?new fd(o,e,this._panelCellFeedback):t.prototype._getDragTracker.call(this,e,i,r)},e.prototype.getNextRequest=function(t,e,i,r){if(t instanceof wu&&t.layout instanceof Vn){var o=this.grid,n=t.layout.firstColumn;if(o.groupingOptions.enabled&&o.layoutManager.topPanelVisible&&n instanceof Tn&&n.groupable&&r+3<o.groupPanelView.bottom)return this._groupingReq.init(t.layout,e,i,r)}},e.prototype._getClickData=function(e,i){if(e instanceof Jc)return Yu.getItem("groupHeader",e.itemIndex,null);if(e instanceof sd)return Yu.getData("groupPanel");if(e instanceof nd){if(e.isCloseButton(i.target))return;var r=this.grid.dataSource.getOrgFieldName(e.field);return Yu.getField("groupColumn",e.field,r)}return t.prototype._getClickData.call(this,e,i)},e.prototype.$_toggleExpanded=function(t,e,i){e.expanded?t.collapse(e,!1,!1,i):t.expand(e,!1,!1,0)},e}(nh),hd=function(t){function e(){var e=t.call(this)||this;return e._field=-1,e}return r(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!0,configurable:!0}),e}(wl),cd=function(t){function e(e){var i=t.call(this,e)||this;return i._no=!1,i}return r(e,t),e.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[ft.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=this.doc;this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._noMark=i.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",e.appendChild(this._noMark)},e.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,r=this._textView.style;r.left=Math.max(0,(this.width-e)/2)+"px",r.top=Math.max(0,(this.height-i)/2)+"px",this._no&&(e=this._noMark.offsetWidth,i=this._noMark.offsetHeight,(r=this._noMark.style).left=Math.max(0,(this.width-e)/2)+"px",r.top=Math.max(0,(this.height-i)/2)+"px")},e}(Bs),dd=function(t){function e(e,i,r){var o=t.call(this,e,"groupPanelCellTracker")||this;return o._request=i,o._feedback=r,o}return r(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,r){var o=this.grid,n=this._request.source.boundsByContainer();return this._feedback.setRect(n),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,o.addFeedbackElement(this._feedback),this._offsetX=e-n.x,this._offsetY=i-n.y,!0},e.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(hl),pd=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){this._layout=null,this._source=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,r){return this._layout=t,this._source=e,this._x=i,this._y=r,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!0,configurable:!0}),e}(wl),fd=function(t){function e(e,i,r){var o=t.call(this,e,"groupingCellTracker")||this;return o._request=i,o._feedback=r,o}return r(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,r){var o=this.grid,n=this._request.source,s=n instanceof Bs?n.boundsByContainer():n,a=o.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(s),this._feedback.setField(this._request.layout.firstColumn.displayText,a),this._feedback.visible=!0,o.addFeedbackElement(this._feedback),this._offsetX=e-s.x,this._offsetY=s.height/3,!0},e.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;if(this.currentY<e.contentBounds.y){var i=t.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0);t.addGroupBy(e.rowGroupLevels,i)}},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(hl),_d=function(t){function e(){var e=t.call(this)||this;return e._modal=!1,e._items=[],e._itemChanged=!1,e._visibleChanged=!1,e._visibleItems=[],e._header=new md(e),e._footer=new vd(e),e._body=new bd(e),e}return r(e,t),e.prototype._doDispose=function(){this._header=this._header.dispose(),this._footer=this._footer.dispose(),this._body=this._body.dispose(),t.prototype._doDispose.call(this)},e.prototype.itemVisibleChanged=function(t){},e.prototype.itemChanged=function(t){},Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleItemCount",{get:function(){return this._visibleItems.length},enumerable:!0,configurable:!0}),e.prototype.load=function(t){t&&(t.title&&this._header.assignFrom(t.title),t.footer&&this._footer.assignFrom(t.footer),t.body&&this._body.assignFrom(t.body),ft.isArray(t.items)&&this.$_loadItems(t.items,this._items=[]),this._itemChanged=!0,this._changed())},e.prototype.getItem=function(t){return this._items[t]},e.prototype.getVisibleItem=function(t){return this._visibleItems[t]},e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.prototype.$_loadItems=function(t,e,i){void 0===i&&(i=null);for(var r=0,o=t;r<o.length;r++){var n=o[r];if(n){var s=void 0;if(!i&&ft.isArray(n.items)){var a=s=new Id;this.$_loadItems(n.items,a._items,a)}else"string"==typeof n.template?s=new Ed:("string"==typeof n.column||"string"==typeof n)&&(s=new Sd);s.assignFrom(n),s&&(i?(i._items.push(s),s.$_attached(i)):(this._items.push(s),s.$_attached(this)))}}},e.prototype.$_refreshItems=function(){var t=this._items;if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i._index=e,i._vindex=-1,i.$_refresh(this)}},e.prototype.$_resetvisibles=function(){for(var t=this._visibleItems=[],e=0,i=this._items;e<i.length;e++){var r=i[e];if(r.visible&&(t.push(r),r._vindex=t.length-1,r instanceof Id&&r.expanded))for(var o=0,n=r._items;o<n.length;o++){var s=n[o];s.visible&&(t.push(s),s._vindex=t.length-1)}}},e.prototype.$_prepareLayout=function(){this._itemChanged?(this.$_refreshItems(),this._itemChanged=!1,this.$_resetvisibles(),this._visibleChanged=!1):this._visibleItems&&(this.$_resetvisibles(),this._visibleChanged=!1)},e.CHANGED="onFormChanged",e}(fe),gd=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._changed=function(){},e}(Ct),yd=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._styleName="",i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){var t=this._getDefaultStyle();return this._styleName&&(t+=" "+this._styleName),t},enumerable:!0,configurable:!0}),e.prototype._changed=function(){t.prototype._changed.call(this)},e}(gd),md=function(t){function e(e){var i=t.call(this,e)||this;return i._height=24,i._labelCell={displayText:"Field"},i._valueCell={displayText:"Value"},i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelCell",{get:function(){return this._labelCell},set:function(t){"string"==typeof t&&(t={displayText:t}),this._labelCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCell",{get:function(){return this._valueCell},set:function(t){"string"==typeof t&&(t={displayText:t}),this._valueCell=t},enumerable:!0,configurable:!0}),e.prototype._getDefaultStyle=function(){return e.STYLE_NAME},e.STYLE_NAME="rg-form-header",e}(yd),bd=function(t){function e(e){var i=t.call(this,e)||this;return i._minRowHeight=24,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._getDefaultStyle=function(){return e.STYLE_NAME},e.STYLE_NAME="rg-form-body",e}(yd),vd=function(t){function e(e){var i=t.call(this,e)||this;return i._height=26,i}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),e.prototype.getPopupMenuName=function(t){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="form_footer_menu",t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},e.prototype._getDefaultStyle=function(){return e.STYLE_NAME},e.STYLE_NAME="rg-form-footer",e}(yd),wd=function(t){function e(){var e=t.call(this)||this;return e._visible=!0,e._height=0,e._vindex=-1,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vindex",{get:function(){return this._vindex},enumerable:!0,configurable:!0}),e.prototype.canEdit=function(){return!1},e.prototype.$_attached=function(t){this._group=t},e.prototype._changed=function(){},e.prototype._headerChanged=function(){this._changed()},e.prototype.$_refresh=function(t){},e.prototype.$_prepareLayout=function(t,e,i){this._doPrepare(t,e,i)},e.prototype._doPrepare=function(t,e,i){},e}(Ct),Cd=function(t){function e(e){var i=t.call(this)||this;return i._text="",i._owner=e,i}return r(e,t),e.prototype._doDispose=function(){this._owner=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._text||this._owner.displayLabel},enumerable:!0,configurable:!0}),e.prototype.doAssignSimple=function(t){if("string"==typeof t)return this._text=t,!0},e.prototype._changed=function(){this._owner&&this._owner._headerChanged()},e}(gd),xd=function(t){function e(){var e=t.call(this)||this;return e._header=new Cd(e),e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanged",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),e.header&&this._header.assignFrom(e.header)},e}(wd),Id=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._expanded=!0,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.itemVisibleChanged=function(t){this._group&&this._group.itemVisibleChanged(this)},e.prototype.itemChanged=function(t){this._group&&this._group.itemChanged(this)},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},enumerable:!0,configurable:!0}),e.prototype.expand=function(){return!this._expanded&&(this._expanded=!0,!0)},e.prototype.collapse=function(){return!!this._expanded&&(this._expanded=!1,!0)},e.prototype._doPrepare=function(t,e,i){},e}(wd),Sd=function(e){function i(){var i=e.call(this)||this;return i._editButtonVisibility=t.ButtonVisibility.ALWAYS,i}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"column",{get:function(){return this._column},set:function(t){t!=this._column&&(this._column=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),i.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.column=t,!0},Object.defineProperty(i.prototype,"displayLabel",{get:function(){return this._columnObj&&this._columnObj.displayText},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return""},enumerable:!0,configurable:!0}),i.prototype._doPrepare=function(t,e,i){this._columnObj=e.getColumnObject(this._column)},i}(xd),Ed=function(t){function e(){var e=t.call(this)||this;return e._dirty=!1,e._valueIndex=-1,e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t!=this._template&&(this._template=t,this._dirty=!0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueField",{get:function(){return this._valueField},set:function(t){t!=this._valueField&&(this._valueField=t,this._valueIndex=-99,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLabel",{get:function(){return this._valueField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return"Template"},enumerable:!0,configurable:!0}),e.prototype._doPrepare=function(t,e,i){this._valueIndex<-1&&(this._valueIndex=e.getDataFieldIndex(this._valueField))},e}(xd),kd=function(t){function e(e){var i=t.call(this,e,"formSelectionTool")||this;i._focusMask=null,i._cellResizer=null,i._tapTracker=null,i._swipeTimer=null,i._swipeDistance=0,i._swipeDelta=0,i._swipeDuration=0,i._swipeStarted=null,i._swipePrev=void 0,i._swipeAmount=0,i._tapX=NaN,i._tapY=NaN;var r=i._form=e.formView;return i._focusMask=new Ku(e.doc),i._cellResizer=new Qu(e.doc),r.addBodyElement(i._focusMask),i._colResizeReq=new Od(r),i._touchManager=i.$_createTouchManager(e),i}return r(e,t),e.prototype._doDispose=function(){this._focusMask=this._focusMask.dispose(),this._colResizeReq=this._colResizeReq.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._form.container.gridView},enumerable:!0,configurable:!0}),e.prototype.focuseIndexChanging=function(t){},e.prototype.focusedChanged=function(t,e){this.$_resetFocusView()},e.prototype.resetFocused=function(){this.$_resetFocusView()},e.prototype._doSetFocus=function(t){!ft.isMobile()&&this.grid.editController.setFocus(!0,t)},e.prototype._doFocusLeave=function(){},e.prototype._doKeyDown=function(t){var e=t.keyCode,i=t.ctrlKey,r=(t.shiftKey,this._form),o=r.options,n=this.grid;if(27==e)n.closePopups();else if(13==e)n.isEditing()&&(r.$_commitEditor(),o.enterToNextCell&&r.focusedIndex++);else if(9==e);else if(113==e);else if(90==e&&i);else if(89==e&&i);else if(ft.included(e,36,35,39,37,40,38,34,33)){var s=r.model.itemCount;if(0==s)return!0;if(!r.focusedItem)return r.focusedIndex=0,!0;var a=r.focusedIndex;switch(e){case 36:a=0;break;case 35:a=s-1;break;case 37:case 38:case 33:a=Math.max(0,a-1);break;case 39:case 40:case 34:a=Math.min(s-1,a+1)}r.focusedIndex=a}},e.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,r=t.ctrlKey||t.metaKey,o=this.form,n=o.container.gridView;if(clearInterval(this._swipeTimer),this._stopTapTracker(!1),n.closePopups(),this.dragTracker&&(this.dragTracker.dispose(),this.dragTracker=null),0==t.button||t instanceof TouchEvent){var s=this._clickTarget=this.mouseEventTarget,a=this._getEditRequest(s,e,i,r,t.shiftKey),l=this._getDragTracker(a,e,i),u=this._findTableCell(s);if(u){o.container._containerDom.focus(),o.focusedIndex=u.parentElement.sectionRowIndex;var h=o.bodyView.bodyCellByCell(u);h&&h.isEditButton(s)&&o.showEditor(o.focusedIndex)&&n.editController.buttonDown(null,t)}else o.$_commitEditor();this.dragTracker=l}},e.prototype._doMouseUp=function(e){this.grid.editController.buttonUp(null,e),t.prototype._doMouseUp.call(this,e)},e.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY;if(this.form,this.dragTracker);else{this.mouseEventTarget.style.cursor="default";var r=this._getEditRequest(this.mouseEventTarget,e,i,!1,!1);r&&r.cursor&&(this.mouseEventTarget.style.cursor=r.cursor)}},e.prototype._doClick=function(t){var e=t.target,i=this.form;if(e instanceof ht(t.target).HTMLElement){if(i.$_elementClicked(e))return;i.footerView.isCheck(e)&&i.container.gridView.toggleCheck(i.currentRow),i.headerView.isClose(e)&&(i.visible=!1)}var r=this._findTableCell(t.target);if(r){var o=this.form.bodyView.bodyCellByCell(r);if(o&&o.isEditButton(t.target)){var n=i.focusedIndex=r.parentElement.$_row,s=o.editorType,a=this.grid.delegate.getCellEditor(s);ft.isMobile()&&a.hasList?i.showList(n):i.showEditor(n)&&i.editorButtonClicked(n)}}},e.prototype._doDblClick=function(t){var e=this.form,i=this._findTableCell(t.target);if(i){var r=i.parentElement.$_row;r>=0&&r==e.focusedIndex&&1==i.cellIndex&&(e.showEditor(r),t.preventDefault(),t.stopImmediatePropagation())}},e.prototype._getEditRequest=function(t,e,i,r,o){var n=this.form,s=n._headerView;if(s.visible){var a=n.labelWidth;if(i<s.height&&e>=a-1&&e<=a+1)return this._colResizeReq.init(e,i,e-a)}return null},e.prototype._getDragTracker=function(t,e,i){return t instanceof Od?new Rd(t,this._cellResizer):null},e.prototype.$_resetFocusView=function(){var t=this._form,e=t.container.gridView,i=t.options,r=t.focusedItem,o=!1;if(r&&i.focusVisible&&!t.isEditing()){var n=t._bodyView,s=n.getValueCellRect(r);if(s.y+=n.y,s.width>0&&s.height>0){var a=e.isEditing();s.width-=1+t.$_getScrollBarWidth(),a&&(s.y--,s.height+=1),this._focusMask.updateElement(0,0,s.width,s.height,a),this._focusMask.setRect(s),o=!0}}this._focusMask.visible=o},e.prototype._stopTapTracker=function(t){this._tapTracker},e.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this._stopTapTracker(!1);var r=this.form;return this._clickTarget=t.target,(this._clickCell=this._findTableCell(this._clickTarget))&&r.container._containerDom.focus(),null},e.prototype.onTap=function(t,e,i){if(ft.isiOS&&this.touchManager){var r=ft.getTimer();if(this.touchManager.touchEndt+50>r)return}this._doMouseDown(t),this._doMouseUp(t),this._doClick(t)},e.prototype.onDoubleTapHandler=function(t,e,i){t.mouseX=e,t.mouseY=i,this._doDblClick(t)},e.prototype.onLongTapHandler=function(t,e,i){},e.prototype.onDragStartHandler=function(t,e,i,r){var o=null;return(o=this.form.$_isScrollBar(this._clickTarget)?new Ld(this._form):new Td(this._form,this._focusMask))&&o.start(t,e,i,r)&&(this._tapTracker=o),this._tapTracker},e.prototype.onDragHandler=function(t,e,i,r){var o=this._tapTracker,n=!1;return o&&(this._tapTracker,(n=o.drag(t,e,i,r))?this.$_resetFocusView():(o.cancel(),this._tapTracker=null)),n},e.prototype.onDragEndHandler=function(t,e,i){if(this._tapTracker){var r=this._form;if(i||r.canSwipeCommit()||(i=!0),this._tapTracker instanceof Td){var o=this._form._bodyView2;if(o.visible){var n=r.width;this._swipePrev=this._swipeStarted=ft.getTimer(),this._swipeAmount=0,this._swipeDelta=i?0:r.canSwipe(o.x),this._swipeDelta>0||this._swipeDelta<0?(this._swipeDistance=o.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):o.x>0?(this._swipeDistance=-(n-o.x),this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):o.x<0&&(this._swipeDistance=n+o.x,this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50))}}this._tapTracker.end(i),this._tapTracker=null}},e.prototype.onSwipeHandler=function(t,e,i,r){var o=this.form,n=(this._form.width,this._form._bodyView2);this._swipePrev=this._swipeStarted=ft.getTimer(),this._swipeAmount=0;var s=this._touchManager._events,a=s[s.length-1],l=r.timeStamp-a.t;if(!o.canSwipeCommit()||!o.canSwipe(n.x)&&l>300)return!1;if("left"===i||"right"===i)for(var u=Math.sign(s[0].x-s[1].x),h=1,c=s.length;h<c-1;h++)if(u!==Math.sign(s[h].x-s[h+1].x))return!1;switch(this._startDragTracker&&(this._tapTracker.end(!0),this._tapTracker=null),this._swipeDelta=1,i){case"right":this._swipeDelta=-1;case"left":this._swipeDistance=n.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50);break;case"bottom":this._swipeDelta=-1;case"top":this._swipeDistance=this._swipeDelta*e,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},e.prototype.$_scrollBody=function(){var t=this.form,e=t.container.gridView,i=ft.getTimer();if(i-this._swipeStarted<this._swipeDuration){var r=i-this._swipePrev,o=Math.floor((this._swipeDistance-this._swipeAmount)*r/this._swipeDuration);this._swipeAmount-=Math.abs(o),this._swipePrev=i,t._bodyView2.x-=o}else if(clearInterval(this._swipeTimer),t._bodyView2.visible&&(t._bodyView2.visible=!1,t._bodyView._dom.style.opacity="",this._focusMask._dom.style.opacity="",0!=this._swipeDelta)){var n=e.getItem(t.currentRow),s=this._swipeDelta>0?e.getNextRow(n):e.getPrevRow(n);s.index!=t.currentRow&&(t.container.gridView.commit(!0,!0),t.currentRow=s?s.index:-1)}},e.prototype.$_scrollRow=function(){this.form;var t=ft.getTimer();if(t-this._swipeStarted<this._swipeDuration){var e=t-this._swipePrev,i=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration);this._swipeAmount-=i,this._swipePrev=t,this.form.topPos+=i}else clearInterval(this._swipeTimer)},e.prototype.$_createTouchManager=function(t){var e=new Fu(t,this.grid.mobileOptions);return e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e.swipeHandler=this.onSwipeHandler.bind(this),e},e}(vl),Od=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i){return this._x=t,this._y=e,this._offset=i,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!0,configurable:!0}),e}(function(t){function e(e){var i=t.call(this)||this;return i._form=e,i}return r(e,t),e.prototype._doDispose=function(){this._form=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),e}(wl)),Rd=function(t){function e(e,i){var r=t.call(this,e.form,"formColumnResizeTracker")||this;return r._request=e,r._feedback=i,r._start=e.x+e.offset-r.form.labelWidth,r._offset=e.offset,r}return r(e,t),e.prototype._doDispose=function(){try{this.form.removeFeedbackElement(this._feedback)}catch(t){}this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,r){var o=this._form._footerView.y;return this._feedback.resize(2,o-0),this._feedback.move(e-this._offset,0),this.form.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){var r=this._form.options.minLabelWidth;return this._form.labelWidth,(e-=this._offset)>=this._start+r&&e<this._start+1e6&&(this._feedback.x=e,!0)},e.prototype._doEnded=function(){var t=this._feedback.x-this._start;this.form.removeFeedbackElement(this._feedback),this.form.labelWidth=t,this.form.container.setCursor("default")},e}(function(t){function e(e,i){var r=t.call(this,e.container,i)||this;return r._form=e,r}return r(e,t),e.prototype._doDispose=function(){this._form=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(ul)),Pd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=0,e}return r(e,t),e.prototype._getCssSelector=function(){return this.delta>0?"rg-form-swipe-left":"rg-form-swipe-right"},e}(As),Dd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=0,e}return r(e,t),e.prototype._getCssSelector=function(){return this.delta>0?"rg-form-end-right":"rg-form-end-left"},e}(As),Td=function(t){function e(e,i){var r=t.call(this)||this;return r._tapX=NaN,r._tapY=NaN,r._vertical=!0,r._moving=!1,r._ending=-1,r._form=e,r._focusMask=i,r._body=e._bodyView,r._body2=e._bodyView2,r._swipeMarker=new Pd(i.doc,"swipeMarker"),r._endMakrer=new Dd(i.doc,"endMarker"),r}return r(e,t),e.prototype._doDispose=function(){try{this._form.removeFeedbackElement(this._swipeMarker),this._form.removeFeedbackElement(this._endMakrer)}catch(t){}this._form=null,this._focusMask=null,this._body=null,this._body2=null,this._swipeMarker=this._swipeMarker.dispose(),this._endMakrer=this._endMakrer.dispose(),t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,r){var o=this._form,n=o.container.gridView,s=i-t,a=r-e;if(o.$_commitEditor(),this._vertical=Math.abs(a)>=Math.abs(s),this._moving=!1,this._vertical);else if(0!=s&&o.canSwipeCommit()){var l=o.currentRow,u=n.rowCount;if(s>0&&(0==u||0==l))this._ending=-1;else if(s<0&&(0==u||n.getLastRow().index==l))this._ending=1;else{var h=this._body.x,c=this._body.width;s>0?h-=c-s:h+=c+s,this._body._dom.style.opacity="0.5",this._focusMask._dom.style.opacity="0.1";var d=this._form._layoutInfo,p=n.getItem(l);s>0?(p=n.getPrevRow(p),d.gridRow=p.index):(p=n.getNextRow(p),d.gridRow=p.index),this._body2.setBounds(h,this._body.y,c,this._body.height),this._body2.layoutContent(d),this._body2.visible=!0,d.gridRow=l,this._moving=!0}}return this._tapX=i,this._tapY=r,!0},e.prototype._doDrag=function(t,e,i,r){var o=this._form,n=i-t,s=r-e;if(this._vertical)o.topPos-=s;else if(this._moving){var a=this._swipeMarker,l=o.canSwipe(this._body2.x);if(0!=l){var u=o.width,h=o.height;a.delta=l,a.resetStyleName(),a.setBounds((u-80)/2,(h-80)/2,80,80),a.applyBounds(),o.addFeedbackElement(a)}else o.removeFeedbackElement(a);this._body2.x+=n}else if(0!=this._ending){a=this._endMakrer,u=.12*(h=o.height);var c=this._ending<0?0:o.width-u;a.delta=this._ending,a.resetStyleName(),a.setBounds(c,0,u,h),a.applyBounds(),o.addFeedbackElement(a)}return!0},e.prototype._doEnd=function(){this._moving?this._form.removeFeedbackElement(this._swipeMarker):this._form.removeFeedbackElement(this._endMakrer)},e}(Ou),Ld=function(t){function e(e){var i=t.call(this)||this;return i._form=e,i}return r(e,t),e.prototype._doDispose=function(){this._form=null,t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,r){var o=this._form;return o.container.gridView,o.$_commitEditor(),!0},e.prototype._doDrag=function(t,e,i,r){var o=r-e;return this._form.topPos+=o,!0},e.prototype._doEnd=function(){},e}(Ou),Md=function(t){function e(){var e=t.call(this)||this;return e._output=void 0,e._html="",e._parser=new Fo,e.template="<span>${value}</span>",e}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},set:function(t){this._output=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.renderFormCell=function(t,e){this.$_setHtml(this._parser.realizeForm(t,e,this._valueCallback))},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),e.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},e.TYPE="formHtml",e}(yo),Fd=function(t){function e(e){var i=t.call(this)||this;return i._modal=!1,i._modalPadding="10%",i._modalOpacity=.15,i._autoClose=!1,i._editable=!0,i._itemResizable=!0,i._minLabelWidth=60,i._focusVisible=!0,i._scrollBarWidth=9,i._commitWhenSwipe=!1,i._enterToNextCell=!0,i._editWhenFocused=!0,i._checkBarSync=!0,i._saveLabel="Save",i._cancelLabel="Cancel",i._fieldLabel="Field",i._valueLabel="Value",i._padTopP=10,i._padBottomP=10,i._padLeftP=10,i._padRightP=10,i._padTop=NaN,i._padBottom=NaN,i._padLeft=NaN,i._padRight=NaN,i._owner=e,i}return r(e,t),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal},set:function(t){t!=this._modal&&(this._modal=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modalPadding",{get:function(){return this._modalPadding},set:function(t){if(t!=this._modalPadding){if(this._modalPadding=t,this._padTop=this._padBottom=this._padLeft=this._padRight=0,this._padTopP=this._padBottomP=this._padLeftP=this._padRightP=NaN,t){var e,i=t.split(/\s+/),r=i.length;r>0&&("%"==(e=i[0]).charAt(e.length-1)?this._padTopP=parseFloat(e):this._padTop=ft.toFloat(e)),r>1&&("%"==(e=i[1]).charAt(e.length-1)?this._padRightP=parseFloat(e):this._padRight=ft.toFloat(e)),r>2&&("%"==(e=i[2]).charAt(e.length-1)?this._padBottomP=parseFloat(e):this._padBottom=ft.toFloat(e)),i.length>3&&("%"==(e=i[3]).charAt(e.length-1)?this._padLeftP=parseFloat(e):this._padLeft=ft.toFloat(e)),3==i.length&&(this._padLeftP=this._padRightP,this._padLeft=this._padRight),2==i.length&&(this._padBottomP=this._padTopP,this._padBottom=this._padTop,this._padLeftP=this._padRightP,this._padLeft=this._padRight),1==i.length&&(this._padRightP=this._padBottomP=this._padLeftP=this._padTopP,this._padRight=this._padBottom=this._padLeft=this._padTop)}this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modalOpacity",{get:function(){return this._modalOpacity},set:function(t){this._modalOpacity=Math.max(0,Math.min(1,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClose",{get:function(){return this._autoClose},set:function(t){this._autoClose=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemResizable",{get:function(){return this._itemResizable},set:function(t){t!=this._itemResizable&&(this._itemResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelWidth",{get:function(){return this._minLabelWidth},set:function(t){(t=Math.max(0,t))!=this._minLabelWidth&&(this._minLabelWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitWhenSwipe",{get:function(){return this._commitWhenSwipe},set:function(t){this._commitWhenSwipe=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterToNextCell",{get:function(){return this._enterToNextCell},set:function(t){this._enterToNextCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBarSync",{get:function(){return this._checkBarSync},set:function(t){t!=this._checkBarSync&&(this._checkBarSync=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldLabel",{get:function(){return this._fieldLabel},set:function(t){t!==this._fieldLabel&&(this._fieldLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueLabel",{get:function(){return this._valueLabel},set:function(t){t!==this._valueLabel&&(this._valueLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitCallback",{get:function(){return this._commitCallback},set:function(t){this._commitCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelCallback",{get:function(){return this._cancelCallback},set:function(t){this._cancelCallback=t},enumerable:!0,configurable:!0}),e.prototype.setModalPadding=function(t,e,i,r){this.modalPadding=t+" "+(e||"")+" "+(i||"")+" "+(r||"")},e.prototype.padRect=function(t){isNaN(this._padLeftP)?t.leftBy(this._padLeft):t.leftBy(Math.floor(this._padLeftP*t.width/100)),isNaN(this._padRightP)?t.rightBy(this._padRight):t.rightBy(-Math.floor(this._padRightP*t.width/100)),isNaN(this._padTopP)?t.topBy(this._padTop):t.topBy(Math.floor(this._padTopP*t.height/100)),isNaN(this._padBottomP)?t.bottomBy(this._padBottom):t.bottomBy(-Math.floor(this._padBottomP*t.height/100))},e.prototype._changed=function(){this._owner&&this._owner.invalidateLayout()},e}(Ct),Nd=function(){},Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return"rg-form-marquee"},e.prototype._doDraw=function(t){},e}(Bs),Bd=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doDraw=function(t){},e.prototype._changed=function(){},e}(Bs),Ad=function(t){function e(e){return t.call(this,e,"formScrollBar")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-form-scrollbar"},e}(Bd),$d=function(t){function e(e,i,r){var o=t.call(this,e,r)||this;return o._model=i,o}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formView",{get:function(){var t=this.parent;do{if(t instanceof Gd)return t;t=t.parent}while(t)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this.resetStyleName(),this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t){ft.isMobile()?this._doLayoutMobile(t,this.width,this.height):this._doLayoutContent(t,this.width,this.height)},e.prototype._getCssSelector=function(){return this._model.styleName},e.prototype._doLayoutMobile=function(t,e,i){this._doLayoutContent(t,e,i)},e.prototype._changed=function(){},e}(As),jd=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.updateContent=function(t,e){this._doUpdateContent(t,e)},e.prototype._getCssSelector=function(){return"rg-form-cell"},e.prototype._changed=function(){},e.prototype._doUpdateContent=function(t,e){},e.prototype._doDraw=function(t){},e}(Bs),Hd=(function(t){function e(e){return t.call(this,e)||this}r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._changed=function(){}}(Bs),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getValue=function(){var t,e=this._column.dataIndex;if(e>=0)return null===(t=this.$_getItem())||void 0===t?void 0:t.getData(e)},e.prototype.getBlankState=function(){return y.NONE},e.prototype.isValueChanged=function(){var t,e=this._column.dataIndex;return e>=0&&(null===(t=this.$_getItem())||void 0===t?void 0:t.isChanged(e))},e.prototype.getDisplayText=function(t,e){return Yr._getDisplayText(t,this.$_getItem(),this._column,this.getValue(),e)},e.prototype.$_getItem=function(){return this._column.grid.getItem(this.index.itemIndex)},e}(Yr)),Wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(rs),Gd=function(t){function e(e,i){var r=t.call(this,e.doc)||this;r._topPos=0,r._labelWidth=120,r._currentRow=-1,r._valueWidth=0,r._needEditor=!1,r._layout=new Xd(null),r._editIndex=-1,r._saveRow=-1,r._cellRect=new $;var o=e.doc;r._container=e;var n=r._model=new _d;return r._options=new Fd(r),i&&r._options.assignFrom(i),r.addChild(r._headerView=new Yd(o,n.header)),r.addChild(r._bodyContainer=new As(o)),r._bodyContainer._dom.style.overflow="hidden",r._bodyContainer.addChild(r._bodyView=r._bodyView1=new Qd(o,n.body)),r._bodyContainer.addChild(r._bodyView2=new Qd(o,n.body)),r._bodyView2.visible=!1,r._bodyView2._dom.style.background="white",r._bodyView2._dom.style.borderLeft="1px solid gray",r._bodyView2._dom.style.borderRight="1px solid gray",r.addChild(r._footerView=new qd(o,n.footer)),r.addChild(r._feedbackLayer=new As(o,"feedbackLayer")),r.addChild(r._scrollBar=new Ad(o)),r._layoutInfo=new Nd,r._dataCell=new Hd,r._literalCell=new Kr,r._seriesCell=new Xr,r._rowRuntime=new $r,r._cellRuntime=new jr,r.visible=!1,r}return r(e,t),e.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._options=this._options.dispose(),t.prototype._doDispose.call(this)},e.prototype.getColumnObject=function(t){var e=this.container.gridView;return e&&e.columnByName(t)},e.prototype.getDataFieldIndex=function(t){var e=this.container.gridView;return e&&e.dataSource?e.dataSource.getFieldIndex(t):-1},e.prototype.getEditItem=function(t){return t.getItem(this._currentRow)},e.prototype.canWrite=function(t){return!0},e.prototype.getEditor=function(t){if(t instanceof Wd)return t.formItem.editor},e.prototype.getEditBounds=function(t,e){var i=this._bodyView,r=this._model.getItem(this._editIndex),o=i.boundsByContainer(i.getValueCellRect(r)),n=i.bodyCellAt(r),s=(t.native?0:n.editWidth)+n.buttonWidth+n.errorWidth;return o.width-=this.$_getScrollBarWidth(),s>0&&o.width>s+10&&(o.width-=s+10,o.width<0&&(o.width+=s+10)),o.width=Math.max(0,o.width),o},e.prototype.isEditing=function(){return this._editIndex>=0},e.prototype.isItemEditing=function(){return this.container.gridView.isItemEditing()},e.prototype.validateCellCommit=function(t,e){},e.prototype.makeCellVisible=function(t){return!0},e.prototype.editCellCommit=function(t,e,i){return this.invalidateLayout(),!0},e.prototype.editorChange=function(t,e,i){},e.prototype.editorShow=function(t){this._selectionTool.resetFocused()},e.prototype.editorHide=function(t){this._editIndex=-1,this._selectionTool.resetFocused()},e.prototype.itemUpdateStarted=function(t,e){this._saveRow=this._currentRow,this.invalidateLayout()},e.prototype.itemAppendStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},e.prototype.itemInsertStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},e.prototype.itemCommited=function(t,e){this.invalidateLayout()},e.prototype.itemCanceled=function(t){this._currentRow=this._saveRow,this.invalidateLayout()},e.prototype.itemInserted=function(t,e){this._currentRow=e.index,this.invalidateLayout()},e.prototype.itemsChanged=function(t){this.invalidateLayout()},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){var t=this.container.gridView;return t&&t.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerView",{get:function(){return this._headerView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerView",{get:function(){return this._footerView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPos",{get:function(){return this._topPos},set:function(t){(t=Math.max(0,t))!=this._topPos&&(this._topPos=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelWidth",{get:function(){return this._labelWidth},set:function(t){(t=Math.max(0,t))!=this._labelWidth&&(this._labelWidth=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueWidth",{get:function(){return this._valueWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRow",{get:function(){return this._currentRow},set:function(t){t!==this._currentRow&&(this.$_commitEditor(),this._currentRow=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedItem",{get:function(){return this._focusedItem},set:function(t){if(t!=this._focusedItem){var e=this._focusedItem;this.$_commitEditor();var i=this._focusedItem=t;if(this._selectionTool.focusedChanged(e,t),this.$_focusedChanged(e,t),this.$_makeCellVisible(i),i instanceof Sd){var r=this.container.gridView,o=this.$_getIndex(i),n=i._columnObj.editable;n=null==n?this.options.editable:n,r._editController._needPrepare=!0,r._editController.prepareEditor(o),this._options.editWhenFocused&&n&&(this._editIndex=i.vindex,this._needEditor=!0,this.showEditor(this.focusedIndex))}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedIndex",{get:function(){return this._focusedItem?this._focusedItem.vindex:-1},set:function(t){var e=this.model;t>=0&&e.itemCount>0?(t=Math.min(t,e.itemCount-1),this.focusedItem=ft.cast(e.getItem(t),xd)):this.focusedItem=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!0,configurable:!0}),e.prototype.getHandler=function(){return this},e.prototype.invalidateLayout=function(){this.visible&&this._container.invalidateLayout()},e.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},e.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},e.prototype.canSwipeCommit=function(){return!(this.isItemEditing()&&!this._options.commitWhenSwipe)},e.prototype.canSwipe=function(t){var e=this.width;return t>0&&t<.6*e?1:t<0&&t+e>.4*e?-1:0},e.prototype.$_getIndex=function(t){var e=this.container.gridView,i=t._columnObj,r=new Wd;return r.assign(e.getIndex(this.currentRow,i)),r.layout=this._layout.setColumn(e,i),r.formItem=t,r},e.prototype.showEditor=function(t){var e,i=this.container.gridView,r=this._model.getItem(t);if(r instanceof Sd){var o=this.$_getIndex(r),n=null===(e=r._columnObj)||void 0===e?void 0:e.editable;if(n=null==n?this.options.editable:n)return this._editIndex=t,i.showEditor(o)}},e.prototype.showList=function(t){var e,i=this.container.gridView,r=this._model.getItem(t);if(r instanceof Sd){var o=this.$_getIndex(r),n=null===(e=r._columnObj)||void 0===e?void 0:e.editable;if(n=null==n?this.options.editable:n)return this._editIndex=t,i.showEditList(o)}},e.prototype.deleteRow=function(){var t=this;setTimeout((function(){t.$_deleteRow()}),0)},e.prototype.appendRow=function(){this.$_appendRow()},e.prototype.addBodyElement=function(t){return this._bodyContainer.addChild(t)},e.prototype.removeBodyElement=function(t){return this._bodyContainer.removeChild(t)},e.prototype.close=function(){this.visible&&(this.visible=!1)},e.prototype.editorButtonClicked=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof Sd){var r=this.$_getIndex(i);this._editIndex=i.vindex,e._editController.buttonClicked(r)}},e.prototype.setModel=function(t){this.model.load(t)},Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return this._options.modal?e.STYLE_MODAL:e.STYLE_NAME},e.prototype._doActivateView=function(){var t=this._container.gridView.focusedItem;t instanceof mr&&(t=t.firstDataItem),this.currentRow=t?t.index:-1,this._container.activeTool=this._selectionTool,this._container.gridView.editorLender=this},e.prototype._dodDeactivateView=function(){this._container.gridView.hideEditor(),this._container.gridView.editorLender=null},e.prototype._visibleChanged=function(){this.visible,this.container.invalidateLayout()},e.prototype.$_initialzie=function(){this._selectionTool=new kd(this._container)},e.prototype.$_prepareRender=function(t){},e.prototype.$_layout=function(t,e){var i,r,o=e.x,n=e.y,s=e.width,a=e.height,l=this._model,u=this._options,h=this._layoutInfo;if(this._delegate=t,this._model.$_prepareLayout(),h.form=l,h.formView=this,h.columnBinder=this,h.gridRow=this._currentRow,h.items=l._visibleItems,h.labelWidth=this.labelWidth,h.valueWidth=this._valueWidth=e.width-h.labelWidth,((i=this._headerView).visible=i.model.visible)&&(r=i.measure(h,s,a),i.setBounds(o,n,s,r.height),i.layoutContent(h),a-=r.height,n+=r.height),((i=this._footerView).visible=i.model.visible)&&(r=i.measure(h,s,a),i.setBounds(o,e.bottom-r.height,r.width,r.height),i.layoutContent(h),a-=r.height),this._bodyContainer.setBounds(o,n,s,a),this._bodyView2.visible=!1,(i=this._bodyView).visible=h.gridRow>=0){i._dom.style.opacity="",i.measure(h,s,a),i.layoutContent(h);var c=i._dom.offsetHeight,d=this._topPos=Math.max(0,Math.min(c-a,this._topPos));i.setBounds(0,-d,s,c);var p=this._scrollBar;if(p.visible=c>a){var f=u.scrollBarWidth,_=c,g=a,y=Math.max(0,_-g),m=Math.min(a,Math.max(20,a*g/_)),b=Math.min(a-m,Math.max(0,(a-m)*(this._topPos/y)));p.setBoundsI(o+s-f-2,n+b,f,m)}this._selectionTool.$_resetFocusView(),this._needEditor&&(this._needEditor=!1),this.container.gridView._editController.resetEditor(!1)}},e.prototype.$_getScrollBarWidth=function(){return this._scrollBar.visible?this._scrollBar.width:0},e.prototype._changed=function(){},e.prototype.$_getGridCell=function(t,e){var i,r=t._columnObj;return r instanceof Tn?(i=this._dataCell)._column=r:i=r instanceof Ln?this._seriesCell:r instanceof Kr?this._literalCell:this._dataCell,i.setIndex2(this.container.gridView,e,r),i},e.prototype.$_elementClicked=function(t){return!!this._footerView.$_elementClicked(t)},e.prototype.$_focusedChanged=function(t,e){this._bodyView.$_focusedChanged(t?t.vindex:-1,e?e.vindex:-1)},e.prototype.$_commitEditor=function(){this.container.gridView.isEditing()&&this.container.gridView.commitEditor(!0)},e.prototype.$_deleteRow=function(){var t=this.container.gridView,e=t.getItem(this._currentRow);e&&t.$_deleteSelection(e)},e.prototype.$_appendRow=function(){this.container.gridView.append()},e.prototype.$_isScrollBar=function(t){return this._scrollBar._dom===t},e.prototype.$_makeCellVisible=function(t){var e=this.topPos,i=this._bodyView.getValueCellRect(t,this._cellRect);i.y<e?this.topPos=i.y:i.bottom>=e+this._bodyContainer.height&&(this.topPos+=i.bottom-(e+this._bodyContainer.height))},e.STYLE_NAME="rg-form-root rg-form",e.STYLE_MODAL="rg-form-root rg-form rg-form-modal",e}($s),Ud=function(t){function e(e,i){void 0===i&&(i=!1);var r=t.call(this,e)||this;return r._right=i,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return this._right?t.prototype._getCssSelector.call(this)+" rg-form-cell-right":t.prototype._getCssSelector.call(this)},e.prototype._createDom=function(i){var r=t.prototype._createDom.call(this,i),o=this._div=i.createElement("div");return this._div.className=e.STYLE_NAME,r.appendChild(o),this._span=i.createElement("span"),o.appendChild(this._span),r},e.prototype._doAttached=function(t){},e.prototype._doUpdateContent=function(t,e){this._span.textContent=e||t.displayText},e.STYLE_NAME="rg-form-header-cell",e}(jd),zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getCssSelector=function(){return""},e.prototype._createDom=function(e){var i=t.prototype._createDom.call(this,e),r=e.createElement("span");return i.appendChild(r),r.className="rg-form-close",i},e.prototype.isDom=function(e){return e===this._dom.firstElementChild||t.prototype.isDom.call(this,e)},e.prototype._doDraw=function(t){},e}(Bs),Yd=function(t){function e(e,i){var r=t.call(this,e,i,"headerView")||this;return r._labelCell=new Ud(e),r.addChild(r._labelCell),r._valueCell=new Ud(e,!0),r.addChild(r._valueCell),r._closeView=new zd(e),r.addChild(r._closeView),r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.isClose=function(t){return this._closeView.isDom(t)},e.prototype._doMeasure=function(t,e,i){var r=this.model;return Ra.create(e,r.height)},e.prototype._doLayoutContent=function(t,e,i){var r=this.model,o=t.formView.options;this._labelCell.setBounds(0,0,t.labelWidth,i),this._labelCell.updateContent(r.labelCell,o.fieldLabel),this._valueCell.setBounds(t.labelWidth,0,t.valueWidth,i),this._valueCell.updateContent(r.valueCell,o.valueLabel),this._closeView.setBounds(0,0,i,i),this._closeView.visible=!this.formView.isItemEditing()},e.prototype._doDraw=function(t){},e}($d),qd=function(t){function e(e,i){var r=t.call(this,e,i,"footerView")||this;return r._editMode=!1,r._menuEnabled=!0,r._posVisible=!0,r._firstVisible=!0,r._prevVisible=!0,r._nextVisible=!0,r._lastVisible=!0,r._firstEnabled=!0,r._prevEnabled=!0,r._nextEnabled=!0,r._lastEnabled=!0,r._commitVisible=!0,r._cancelVisible=!0,r._checkEnabled=!0,r}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"editMode",{get:function(){return this._editMode},set:function(t){t!=this._editMode&&(this._editMode=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),e.prototype.isCheck=function(t){return t==this._checkView},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.$_createElements(e)},e.prototype._doMeasure=function(t,e,i){var r=this.model;return Ra.create(e,r.height)},e.prototype._doLayoutContent=function(t,e,i){var r,o=this.formView,n=o.container.gridView,s=o.options,a=o.currentRow;this._currView.textContent=a+1+"",this._totalView.textContent=n.itemCount+"",this._headView.style.left="0px",this._headView.style.top="0px",this._headView.style.height=i+"px";var l=(i-this._menuView.offsetHeight)/2;this._menuView.style.top=l+"px",this._footView.style.right="0px",this._footView.style.top="0px",this._footView.style.height=i+"px",l=(i-this._checkView.offsetHeight)/2,this._checkView.style.right="0px",this._checkView.style.top=l+"px",o.options.checkBarSync?this._checkView.style.visibility=n.checkBar.visible?"":"hidden":this._checkView.style.visibility="",this._cancelLabel.textContent=s.cancelLabel||"Cancel",this._commitLabel.textContent=s.saveLabel||"Save";var u=this._checkView.offsetWidth+30;l=(i-this._cancelLabel.offsetHeight)/2+1,this._cancelLabel.style.right=u+"px",this._cancelLabel.style.top=l+"px",u+=this._cancelLabel.offsetWidth+5,l=(i-this._cancelView.offsetHeight)/2,this._cancelView.style.right=u+"px",this._cancelView.style.top=l+"px",u+=this._cancelView.offsetWidth+16,l=(i-this._commitLabel.offsetHeight)/2+1,this._commitLabel.style.right=u+"px",this._commitLabel.style.top=l+"px",u+=this._commitLabel.offsetWidth+5,l=(i-this._commitView.offsetHeight)/2,this._commitView.style.right=u+"px",this._commitView.style.top=l+"px",r=this._posView.offsetWidth,l=(i-this._posView.offsetHeight)/2+1;var h=(e-r)/2,c=h+r;this._posView.style.left=h+"px",this._posView.style.top=l+"px",u=h-8,this._leftView.style.top="0px",this._leftView.style.height="100%",this._leftView.style.left=u+"px",u=8,l=(i-this._prevView.offsetHeight)/2,this._prevView.style.right=u+"px",this._prevView.style.top=l+"px",u+=this._prevView.offsetWidth+8,l=(i-this._firstView.offsetHeight)/2,this._firstView.style.right=u+"px",this._firstView.style.top=l+"px",this._rightView.style.top="0px",this._rightView.style.height="100%",c+=8,this._rightView.style.left=c+"px",u=8,l=(i-this._nextView.offsetHeight)/2,this._nextView.style.left=u+"px",this._nextView.style.top=l+"px",u+=this._nextView.offsetWidth+8,l=(i-this._lastView.offsetHeight)/2,this._lastView.style.left=u+"px",this._lastView.style.top=l+"px",this.invalidate()},e.prototype._doDraw=function(t){var e=this.formView,i=e.container.gridView,r=e.currentRow,o=i.getItem(r),n=i.isItemEditing(o),s=i.getFirstRow()!==o;s!=this._firstEnabled&&(this._firstEnabled=s,this._firstView.style.opacity=s?"":"0.3"),s!=this._prevEnabled&&(this._prevEnabled=s,this._prevView.style.opacity=s?"":"0.3"),(s=i.getLastRow()!==o)!=this._lastEnabled&&(this._lastEnabled=s,this._lastView.style.opacity=s?"":"0.3"),s!=this._nextEnabled&&(this._nextEnabled=s,this._nextView.style.opacity=s?"":"0.3");var a=!n;a!=this._firstVisible&&(this._firstVisible=a,this._firstView.style.opacity=a?"":"0"),a!=this._prevVisible&&(this._prevVisible=a,this._prevView.style.opacity=a?"":"0"),a!=this._lastVisible&&(this._lastVisible=a,this._lastView.style.opacity=a?"":"0"),a!=this._nextVisible&&(this._nextVisible=a,this._nextView.style.opacity=a?"":"0"),a!=this._posVisible&&(this._posVisible=a,this._posView.style.opacity=a?"":"0"),(a=n)!=this._commitVisible&&(this._commitVisible=a,this._commitView.style.opacity=a?"":"0",this._commitLabel.style.opacity=a?"":"0",this._commitView.style.pointerEvents=a?"":"none",this._commitLabel.style.pointerEvents=a?"":"none"),a!=this._cancelVisible&&(this._cancelVisible=a,this._cancelView.style.opacity=a?"":"0",this._cancelLabel.style.opacity=a?"":"0",this._cancelView.style.pointerEvents=a?"":"none",this._cancelLabel.style.pointerEvents=a?"":"none"),o&&(s=o.checked)!=this._checkEnabled&&(this._checkEnabled=s,this._checkView.style.opacity=s?"":"0.3")},e.prototype.$_createElements=function(t){var e=ct(t);t.appendChild(this._posView=this.$_createPosition(e)),t.appendChild(this._leftView=this.$_createLeft(e)),t.appendChild(this._rightView=this.$_createRight(e)),t.appendChild(this._headView=this.$_createHead(e)),t.appendChild(this._footView=this.$_createFoot(e))},e.prototype.$_setIconStyle=function(t){var e=t.style;return e.position="absolute",e.display="inline-block",t},e.prototype.$_createHead=function(t){var e=t.createElement("div");return e.className="rg-footer-form-head",e.style.position="absolute",e.appendChild(this._menuView=this.$_setIconStyle(t.createElement("span"))),this._menuView.className="rg-form-menu",e},e.prototype.$_createFoot=function(t){var e=t.createElement("div");return e.className="rg-footer-form-foot",e.style.position="absolute",e.appendChild(this._checkView=this.$_setIconStyle(t.createElement("span"))),this._checkView.className="rg-form-check",e.appendChild(this._cancelView=this.$_setIconStyle(t.createElement("span"))),this._cancelView.className="rg-form-cancel",e.appendChild(this._cancelLabel=this.$_setIconStyle(t.createElement("span"))),this._cancelLabel.className="rg-form-label",this._cancelLabel.textContent="Cancel",e.appendChild(this._commitView=this.$_setIconStyle(t.createElement("span"))),this._commitView.className="rg-form-commit",e.appendChild(this._commitLabel=this.$_setIconStyle(t.createElement("span"))),this._commitLabel.className="rg-form-label",this._commitLabel.textContent="Save",e},e.prototype.$_createPosition=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._currView=t.createElement("span")),this._currView.className="rg-form-position rg-form-position-current",this._currView.textContent="0",e.appendChild(this._slashView=t.createElement("span")),this._slashView.className="rg-form-position rg-form-position-slash",this._slashView.textContent="/",e.appendChild(this._totalView=t.createElement("span")),this._totalView.className="rg-form-position rg-form-position-total",this._totalView.textContent="0",e},e.prototype.$_createLeft=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._firstView=this.$_setIconStyle(t.createElement("span"))),this._firstView.className="rg-form-first",e.appendChild(this._prevView=this.$_setIconStyle(t.createElement("span"))),this._prevView.className="rg-form-prev",e},e.prototype.$_createRight=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._lastView=this.$_setIconStyle(t.createElement("span"))),this._lastView.className="rg-form-last",e.appendChild(this._nextView=this.$_setIconStyle(t.createElement("span"))),this._nextView.className="rg-form-next",e},e.prototype.$_elementClicked=function(t){var e,i=this.formView,r=i.model,o=i.container.gridView,n=i.currentRow;try{if(t===this._menuView&&this._menuEnabled){var s=r.footer.getPopupMenuName(o);s?o.popupMenuManager.show(s,t,null):i.visible=!1}else if(t===this._firstView&&this._firstEnabled)e=o.getFirstRow(),i.currentRow=e.index;else if(t===this._lastView&&this._lastEnabled)e=o.getLastRow(),i.currentRow=e.index;else if(t===this._prevView&&this._prevEnabled)e=o.getPrevRow(o.getItem(n)),i.currentRow=e.index;else if(t===this._nextView&&this._nextEnabled)e=o.getNextRow(o.getItem(n)),i.currentRow=e.index;else if(t!=this._commitLabel&&t!=this._commitView||!this._commitVisible){if(t!=this._cancelLabel&&t!=this._cancelView||!this._cancelVisible)return!1;if(e=o.getItem(n),(a=this.formView.options.cancelCallback)&&!1===a.call(this,o.handler,n,e))return;o.$_cancelItem(e,!0),i.options.autoClose&&i.close()}else{var a;if(e=o.getItem(n),(a=this.formView.options.commitCallback)&&!1===a.call(this,o.handler,n,e))return;o.$_commitItem(e,!0,!0),i.options.autoClose&&i.close()}}catch(t){alert(t)}return!0},e}($d),Kd=(function(t){function e(e){return t.call(this,e)||this}r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){}}(jd),function(t){function e(e){return t.call(this,e)||this}r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){}}(Bd),function(t){function e(e,i){var r=t.call(this,e)||this;return r.tcol=i,r}return r(e,t),e}(qa)),Xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.setColumn=function(t,e){return this._grid=t,this._columnObj=e,this},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e}(Vn),Qd=function(e){function i(t,i){var r=e.call(this,t,i,"bodyView")||this;return r._cells=[[],[]],r._rowPoints=[],r}return r(i,e),i.prototype._doDispose=function(){this._tbody=this._thead=this._table=null;for(var t=0;t<2;t++)for(var i=this._cells[t],r=0,o=i.length;r<o;r++)i[r].dispose(),i[r]=null;this._cells=null,e.prototype._doDispose.call(this)},i.prototype.bodyCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],r=0;r<i.length;r++){var o=i[r];if(o&&o.cell===t)return o}},i.prototype.bodyCellAt=function(t){return this._cells[1][t.vindex]},i.prototype.getValueCellRect=function(t,e){var i=this.formView,r=this._rowPoints,o=t.vindex;return(e=e||new $).set(i.labelWidth,r[o],i.valueWidth,r[o+1]-r[o]),e},i.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),r=i.style;return r.setProperty("table-layout","fixed","important"),r.setProperty("width","0px","important"),i.className="rg-form-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),this.$_initTable(),e},i.prototype._initDom=function(t){e.prototype._initDom.call(this,t),t.style.overflow="hidden"},i.prototype._doMeasure=function(t,e,i){return Ra.create(e,i)},i.prototype._doLayoutContent=function(t,e,i){var r=this.model;this.$_prepareRows(t,this._tbody),this.$_refreshCells(t.items,this._tbody),this.$_setCellsDisplay(this._cells,t.items),this.$_updateHead(t),this.$_updateRows(t,r)},i.prototype._doDraw=function(t){},i.prototype.$_initTable=function(){var t=ct(this._thead),e=this._thead,i=t.createElement("tr");e.appendChild(i),i.setAttribute("aria-hidden","true");var r=i.style;r.setProperty("border","0px none","important");for(var o=0;o<2;o++){var n=t.createElement("th");n.scope="col",(r=n.style).setProperty("visibility","hidden","important"),r.setProperty("margin","0px","important"),r.setProperty("padding","0px","important"),r.setProperty("font-size","0px","important"),r.setProperty("line-height","0px","important"),r.height="0px",i.appendChild(n)}},i.prototype.$_prepareRows=function(t,e){for(var i=ct(e),r=t.items.length;e.childElementCount<r;){var o=i.createElement("tr");o.$_view=this.$_hash;for(var n=0;n<2;n++){var s=i.createElement("td");s.className=0==n?"rg-form-label-cell":"rg-form-value-cell",o.appendChild(s);var a=i.createElement("div");s.appendChild(a)}e.appendChild(o)}for(;e.childElementCount>r;)e.removeChild(e.lastChild)},i.prototype.$_refreshCells=function(t,e){for(var i=this.formView.focusedIndex,r=this._cells,o=t.length,n=e.children,s=0;s<o;s++)for(var a=t[s],l=n[s].children,u=0;u<2;u++){var h=r[u][s];h?(h.cell,l[u]):h=r[u][s]=new Kd(l[u],u),h.formItem=a,h.trow=s,h.focused=s==i}for(u=0;u<2;u++){var c=this._cells[u];for(s=o;s<r.length;s++)c[u]=null}r.length=o},i.prototype.$_setCellsDisplay=function(t,e){for(var i=e.length,r=0;r<i;r++)for(var o=e[r],n=0;n<2;n++){var s=t[n][r];s.spanned=!1,o instanceof Id?0==n?(s.setColSpan(2),s.setVisible(!0)):s.clear(!1):(s.setColSpan(1),s.setVisible(!0))}},i.prototype.$_updateHead=function(t){var e=this._thead.firstElementChild.children,i=e[0].style;i.width=t.labelWidth+"px",(i=e[1].style).width=t.valueWidth+"px"},i.prototype.$_updateRows=function(t,e){for(var i=t.form,r=this.formView.container.gridView,o=this._tbody.rows,n=e.minRowHeight+"px",s=this._rowPoints=[0],a=0,l=o.length;a<l;a++){var u=i.getVisibleItem(a),h=o[a];h.style.height=n,h.$_row=a,u.$_prepareLayout(i,t.columnBinder,a),this.$_updateRow(t,r,u,a,h),s[a+1]=s[a]+h.getBoundingClientRect().height}},i.prototype.$_setLabelStyle=function(t,e){t.className=e?"rg-form-label-cell rg-form-label-focused":"rg-form-label-cell"},i.prototype.$_updateRow=function(t,e,i,r,o){var n=this._cells,s=o.children[0];o.children[1],i instanceof xd&&(s.firstElementChild.textContent=i.header.displayText,this.$_setLabelStyle(s,n[1][r].focused),this.$_updateValueCell(t,e,t.gridRow,i,this._cells[1][r]))},i.prototype.$_updateValueCell=function(t,e,i,r,o){var n=r instanceof Sd&&t.formView.$_getGridCell(r,i);if(n){var s=r;e.body.getCellFormatters(s._columnObj,o),this.$_renderColumnCell(t,e,i,s,n,o)}else this.$_renderDataCell(t,r,o)},i.prototype.$_createRenderer=function(t,e,i){if(e===Md.TYPE){var r=new Md;return i&&r.assignFrom(i),r}return t.delegate.createRenderer(e,i,null)},i.prototype.$_getButtonVisible=function(e,i,r){var o=!1;switch(r){case t.ButtonVisibility.ALWAYS:o=!0;break;case t.ButtonVisibility.HIDDEN:o=!1;break;case t.ButtonVisibility.VISIBLE:case t.ButtonVisibility.ROWFOCUSED:o=i.focused;break;case t.ButtonVisibility.DEFAULT:default:o=i.focused||i.mouseEntered}return o},i.prototype.$_buttonWidth=function(e,i,r){var o=0;if((e.button||r.button)!=t.CellButton.NONE){var n=i.grid,s=i,a=e.buttonVisibility||s.buttonVisibility;this.$_getButtonVisible(n,r,a)&&(o=n.body.cellButtonWidth)}return o},i.prototype.$_editButtonWidth=function(t,e,i,r){var o=0;if(!r.readonly&&e){var n=i.grid,s=r.editorType,a=n.delegate.getCellEditor(s),l=r.editor||i.editor;if(a.hasButton(n.displayOptions.showNativeEditButton,l)){var u=!1;if(rs.equalsTo(n.focusedIndex,e.index,i.layout)){var h=n.delegate.getCellEditor(s);u=!!h&&h.listing}(u||this.$_getButtonVisible(n,r,t.editButtonVisibility||i.editButtonVisibility))&&(o=n.body.editButtonWidth)}}return o},i.prototype.$_editButtonCount=function(t,e,i,r){var o=r.editorType;return i.grid.delegate.getCellEditor(o).buttonCount},i.prototype.$_editButtonVerti=function(t,e,i){if("number"===e.editorType){var r=e.editor||i.editor||{};return null==r.direction||"horizontal"!==r.direction}},i.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},i.prototype.$_renderColumnCell=function(t,e,i,r,o,n){var s,a,l=n.cell,u=r._columnObj,h=r.renderer||u.renderer;n.setEditor(null,r.editor||u.editor),"string"==typeof h?s=h:(s=h&&h.type||(u instanceof Ln?Ba.SERIES_TYPE:mo.TYPE),a=h);var c=!1;n.renderer2&&!n.rendererChanged&&n.renderer2.type==s||(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=this.$_createRenderer(t.formView,s,a),n.rendererChanged=!1,c=!0);var d=l.firstElementChild,p=n.renderer2,f=ct(d);!c&&p&&p._dom!=d&&(p.clearContent(),c=!0);var _,g=e.getItem(i),y=this.$_buttonWidth(r,u,n),m=this.$_editButtonWidth(r,g,u,n),b=m&&this.$_editButtonCount(r,g,u,n),v=m&&this.$_editButtonVerti(e,n,u),w=this.$_errorWidth(e,n),C=6+this.formView.$_getScrollBarWidth(),x=n.cellButton,I=n.editButtons,S=n.errorIcon;if(y>0?(x?_=x.style:(x=f.createElement("span"),n.cellButton=x,(_=x.style).position="absolute",_.display="inline-block",_.height="100%",_.top="0px"),n.buttonWidth<=0&&(l.appendChild(x),n.buttonWidth=y),_.right=C+"px",_.width=y+"px",n.resetButtonClass()):n.buttonWidth>0&&(l.removeChild(x),n.buttonWidth=0),m>0){if(!I||I&&I.length!=b){I&&I.forEach((function(t){l.removeChild(t)})),I=n.editButtons=[];for(var E=0;E<b;E++){var k=f.createElement("span");I.push(k),(_=k.style).position="absolute",_.display="inline-block",_.height="100%",_.top="0px",l.appendChild(k)}}var O=n.editorType,R=e.delegate.getCellEditor(O);I.forEach((function(t,e){R.setButtonStyle(t,e,v,y,m)||((_=t.style).right=C+y+e*m+"px",_.width=m+"px",n.resetEditClass(t,e))})),n.editWidth=m*(v?1:b)}else n.editWidth>0&&(I.forEach((function(t){l.removeChild(t)})),n.editWidth=0);w>0?(S?_=S.style:(S=f.createElement("span"),n.errorIcon=S,(_=S.style).position="absolute",_.display="inline-block",_.top="0px",_.height="100%"),n.errorWidth<=0&&(l.appendChild(S),n.errorWidth=w),_.right=C+y+n.editWidth+"px",_.width=w+"px",n.resetErrorClass()):n.errorWidth>0&&(l.removeChild(S),n.errorWidth=0);var P=p.styleName;c?p.initContent(o._index,d,P):p.checkClassName(P)&&(p.clearContent(),p.initContent(o._index,d,P)),p.renderCell(e,o,n);var D=o.isValueChanged()&&e.body._showChangeMarker;if(D!=n.valueChanged){if(D){var T=n.changedMarker;T||((T=n.changedMarker=f.createElement("div")).className="rg-changed-marker",T.style.position="absolute",T.style.display="block",T.style.top="0px",n.changedMarker=T),l.appendChild(T)}else n.changedMarker&&n.valueChanged&&l.removeChild(n.changedMarker);n.valueChanged=D}},i.prototype.$_renderDataCell=function(t,e,i){var r,o,n=i.cell,s=e.renderer;e instanceof Ed?r=Md.TYPE:"string"==typeof s?r=s:(r=s&&s.type||mo.TYPE,o=s);var a=!1;i.renderer2&&!i.rendererChanged&&i.renderer2.type==r||(i.renderer2&&i.renderer2.clearAndDispose(),i.renderer2=this.$_createRenderer(t.formView,r,o),i.rendererChanged=!1,a=!0);var l=n.firstElementChild,u=i.renderer2;!a&&u&&u._dom!=l&&(u.clearContent(),a=!0);var h=u.styleName;a?u.initFormContent(l,h):u.checkClassName(h)&&(u.clearContent(),u.initFormContent(l,h)),u instanceof Md&&(u.template=e.template,u.renderFormCell(t.formView,e))},i.prototype.$_focusedChanged=function(t,e){var i=this._tbody.rows;t>=0&&this.$_setLabelStyle(i[t].cells[0],!1),e>=0&&this.$_setLabelStyle(i[e].cells[0],!0)},i}($d),Jd=(function(t){function e(e,i){var r=t.call(this,e,i,"groupContainer")||this;return r._headerViews=[],r}r(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._headerViews;e<i.length;e++)i[e].dispose();this._headerViews=null,t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return""},e.prototype._doMeasure=function(t,e,i){return Ra.create(e,i)},e.prototype._doLayoutContent=function(t,e,i){},e.prototype._doDraw=function(t){}}($d),function(t){function e(e,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=null);var n=t.call(this,e,r,o)||this,s=n._containerDom.parentElement;return s.style.height&&(n._orgCssHeight=s.style.height),n._gridView&&(n._gridView.$_handler=i),n}return r(e,t),e.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"gridView",{get:function(){return this._gridView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formView",{get:function(){return this._formView||(this._formMarquee=new Vd(this.doc),this.addElement(this._formMarquee),this._formView=new Gd(this),this._formView.$_initialzie(),this.addElement(this._formView)),this._formView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightMeasurer",{get:function(){return this._heightMeasurer},enumerable:!0,configurable:!0}),e.prototype.setWatchTimer=function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayObserver=this._displayObserver||this.$_displayObserver.bind(this),t&&(this._watchTimer=setInterval(this._displayObserver,100))},e.prototype.recallHeight=function(){var t=this._containerDom.parentElement.style;this.gridView._loading||(this._orgCssHeight?t.height=this._orgCssHeight:t.removeProperty("height"))},e.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},e.prototype._doResized=function(e){t.prototype._doResized.call(this,e),this._gridView.$_containerResized()},e.prototype._isOutChildElement=function(t){var e=this.gridView,i="focusout"===t.type?t.relatedTarget:t.target;if(e.filterSelector.opened&&ft.isAncestorOf(e.filterSelector._element,i))return!0;try{if((o=i&&i.className||"").indexOf("rg-editor")>=0&&i.$_owner._grid.container!==this)return!1;if(o.indexOf("rg-root")>=0&&i!==this._containerDom)return!1}catch(t){}if(e.isEditing())for(var r=i,o=void 0;r;){if((o=r.className||"").indexOf("rg-")>=0)return!0;r=r.parentElement}return!1},e.prototype._doPrepareContainer=function(t,e,i){t.className="rg-root rg-grid",ft.isMobile()&&(t.style.touchAction="unset"),this._gridView=this._createGridView(e,i),this.addElement(this._gridView),this._activeView=this._gridView,this._heightMeasurer=new Zd(this.measurer),this._sizeInfo=new $(0,0,t.clientWidth,t.clientHeight)},e.prototype._createDefaultTool=function(){return new ud(this)},e.prototype._doLayout=function(t){var e=this._gridView,i=this._formView,r=this._formMarquee;if(i&&i.visible){if(this._activeView!==i){if(e.$_deactivateView(),i.$_activateView(),e.focusedRow>=0){var o=e.focusedItem;!o||o instanceof yr||(o=e.getNextRow(o)),o||(o=e.getFirstRow()),i.currentRow=o?o.index:-1}this._activeView=i}}else this._activeView===i&&(i&&i.$_deactivateView(),e.$_activateView(),i&&i.currentRow>=0&&e.setFocusedItem(i.currentRow),this._activeView=e);if(r&&(r.visible=i.visible),this._activeView==e||i.options.modal){var n=t.clone();e.setRect(n),n.x=n.y=0,e.$_layout(n)}if(e._dom.style.opacity=this._activeView!=e&&i.options.modal?i.options.modalOpacity+"":"",this._activeView===i){var s=t.clone();this._formView.options.padRect(s),this._formView.setRect(s),s.x=s.y=0,i.$_layout(e.delegate,s),r.setRect(t)}},e.prototype._doBeforeRender=function(){var t=this.gridView,e=t._dom;if(e&&e.scrollLeft>0){var i=e.scrollLeft;t.leftPos=i,e.scrollLeft=0}t._dataLoad&&this.recallHeight()},e.prototype._doAfterRender=function(){if(!this.gridView.fitSyncHeight()){var t=this._containerDom.parentElement;this._orgCssHeight=t.style.height}this._gridView.visible&&this._gridView.$_afterRender()},e.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e)),this._formView&&this._formView.visible&&(this._formView.options.padRect(e),this._formView.setRect(e),e.x=e.y=0,this._formView.$_prepareRender(e))},e.prototype._createGridView=function(t,e){return new ad(this,t,e)},e.prototype._resizeHandler=function(t){if(null==this._watchTimer){var e=this;this._resizeTimer=setTimeout((function(){e._displayObserver()}),100)}},e.prototype.$_displayObserver=function(){var t=this._containerDom,e=t.clientWidth,i=t.clientHeight,r=this._sizeInfo;e>0&&i>0&&(Math.abs(this._sizeInfo.width-e)>=1||Math.abs(this._sizeInfo.height-i)>=1)&&(this._gridView.fitSyncHeight()||(this._orgCssHeight=t.parentElement.style.height),r.width=e,r.height=i,this.invalidateLayout(),this._doResized(null))},e}(Fl)),Zd=function(t){function e(e){var i=t.call(this)||this;return i._bodyStyle="rg-body",i._headerStyle="rg-header",i._summaryStyle="rg-header-summary",i._footerStyle="rg-footer",i._dataRowStyle="rg-data-row",i._headerRowStyle="",i._summaryRowStyle="",i._footerRowStyle="",i._groupFooterStyle="rg-rowgroup-footer",i._dataCellStyle="rg-data-cell",i._headerCellStyle="rg-header-cell",i._summaryCellStyle="rg-header-summary-cell",i._footerCellStyle="rg-footer-cell",i._groupFooterCellStyle="rg-rowgroup-footer-cell",i._rowHeight=0,i._headerHeight=0,i._summaryHeight=0,i._footerHeight=0,i._gfooterHeight=0,i._dirty=!0,i._container=e,i.$_prepareElements(e),i}return r(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._dirty=!0},e.prototype.$_prepareElements=function(t){var e=ct(t),i=e.createElement("table");i.setAttribute("aria-hidden","true");var r=i.createCaption();r.textContent="grid measurer table",r.style.width=r.style.height="0px",r.style.padding="none",r.style.boxSizing="border-box",r.style.overflow="hidden",t.appendChild(i);var o=i.style;o.width="1000px",o.height="1px",o.left="-10000px",o.position="absolute",i.className="rg-table";var n=e.createElement("tbody");i.appendChild(n);var s=e.createElement("tr");n.appendChild(s);var a=e.createElement("td");a.className="rg-data-cell",s.appendChild(a);var l=e.createElement("div");a.appendChild(l),l[ft.TextProp]="AYwyhi\uc6b0\ub9ac\ud14c\ud06c"},e.prototype.$_measure=function(t,e,i){var r=this._container,o=this._container.firstElementChild.tBodies[0].rows[0],n=o.cells[0];return r.className=t,o.className=e,n.className=i,o.offsetHeight},e}(Ct),tp=function(e){function i(i){var r=e.call(this,i)||this;return r._levelIndent=16,r._lineVisible=!0,r._showCheckBox=!1,r._iconImagesRoot="",r._defaultIcon=-1,r._collapseWhenLeftKey=!0,r._collapseWhenCtrlKey=!0,r._expandWhenRightKey=!0,r._expandWhenCtrlKey=!0,r._iconVisible=!0,r._expanderIconStyle=t.TreeExpanderIconStyle.TRIANGLE,r._expandedIcon=-1,r._collapsedIcon=-1,r}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"levelIndent",{get:function(){return this._levelIndent},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){t!=this._collapseWhenLeftKey&&(this._collapseWhenLeftKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){t!=this._collapseWhenCtrlKey&&(this._collapseWhenCtrlKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){t!=this._expandWhenRightKey&&(this._expandWhenRightKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){t!=this._expandWhenCtrlKey&&(this._expandWhenCtrlKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"expanderIconStyle",{get:function(){return this._expanderIconStyle},set:function(t){t!=this._expanderIconStyle&&(this._expanderIconStyle=t,this._changed())},enumerable:!0,configurable:!0}),i}(Ea),ep=(function(t){function e(e,i){var r=t.call(this,e,i,"treeExpandHandle")||this;return r._expanded=!1,r.clickable=!0,r}r(e,t),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._createDom=function(){return null}}(jc),function(e){function i(t){var i=e.call(this)||this;return i._exclusive=!1,i.assignFrom(t),i}return r(i,e),i.prototype._doDispose=function(){this._dom.style.removeProperty("padding-left"),this._expander=this._check=this._icon=this._span=this._label=null,e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"type",{get:function(){return i.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"styleName",{get:function(){return i.STYLE_NAME},enumerable:!0,configurable:!0}),i.prototype._doInitContent=function(t){var e=ct(t),i=this._expander=e.createElement("span");t.appendChild(i);var r=this._check=e.createElement("input");r.type="checkbox",r.className="rg-tree-checkbox",r.style.display="inline-block",t.appendChild(r);var o=this._icon=e.createElement("img");o.className="rg-tree-icon",o.alt="",t.appendChild(o);var n=this._span=e.createElement("span");t.appendChild(n);var s=this._label=e.createElement("label");s.style.display="none",t.appendChild(s)},i.prototype._doRenderCell=function(e,r,o,n,s){var a=e.treeOptions,l=a.showCheckBox,u=a.levelIndent,h=this._expander,c=this._dom,d=this._check,p=this._icon,f=this._span,_=this._label,g=r.item,y=o.cell,m=a.expanderIconStyle===t.TreeExpanderIconStyle.SQUARE?" square":"";if(h.className=g.isLeaf?"rg-tree-leaf":g.expanded?"rg-tree-expanded"+m:"rg-tree-collapsed"+m,e.accessibility&&(g.isLeaf?y.removeAttribute("aria-expanded"):y.setAttribute("aria-expanded",g.expanded?"true":"false")),this._exclusive!=e.checkBar.exclusive&&(this._exclusive=e.checkBar.exclusive,d.setAttribute("type",this._exclusive?"radio":"checkbox"),d.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),l){d.parentElement||c.insertBefore(d,this._span),d.checked=g.checked;var b=d.id=i.FOR_ID+r.item.index;_.setAttribute("for",b),_[ft.TextProp]=this._makeText(e,r,o)+(d.checked?" checked":" unchecked")}else d.parentElement&&c.removeChild(d);if(a.iconVisible){p.parentElement||c.insertBefore(p,this._span);var v=e.getTreeIcon(g);v?(p.src=v,p.removeAttribute("height"),p.style.removeProperty("visibility")):(p.removeAttribute("src"),p.height=1,p.style.visibility="hidden")}else p.parentElement&&c.removeChild(p);f[ft.TextProp]=this._makeText(e,r,o),c.style.setProperty("padding-left",3+(g.level-1)*u+"px","important")},i.TYPE="tree",i.FOR_ID="$$-tree-check",i.STYLE="rg-tree-renderer",i.STYLE_NAME="rg-renderer "+i.STYLE,i}(yo)),ip=function(t){function e(e){return t.call(this,e,"treeItemView")||this}return r(e,t),e.prototype.isCheckBox=function(t){var e=t.className;return"rg-tree-checkbox"==e||"rg-tree-radio"==e},e.prototype._doLayoutContent=function(e){t.prototype._doLayoutContent.call(this,e)},e.prototype._createRenderer=function(e,i,r,o,n){var s=e.layoutManager,a=i.dataColumn.layout;return 0===s.getHorzColumnIndex(a)?new ep(o):t.prototype._createRenderer.call(this,e,i,r,o,n)},e.prototype.$_getDefaultRenderer=function(t,e){var i=t.layoutManager,r=e.dataColumn.layout;return 0===i.getHorzColumnIndex(r)?ep.TYPE:mo.TYPE},e}(Ga),rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(ip),op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(ip),np=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof ep},e.prototype.createRowElement=function(){return new ip(this.doc)},e}(Ka),sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof ep},e.prototype.createRowElement=function(){return new rp(this.doc)},e}(Xa),ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof ep},e.prototype.createRowElement=function(){return new op(this.doc)},e}(Qa),lp=function(t){function e(e){var i=t.call(this,e.doc)||this;return i._levelWidth=16,i._handleWidth=9,i._handleHeight=9,i._stroke="gray",i._linePool=[],i._lines=[],i._startIndex=-1,i._endIndex=-1,i._treeView=e,i}return r(e,t),e.prototype._doDispose=function(){this._linePool=null,this._lines=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},e.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,r=null;for(i=this._startIndex;i<=this._endIndex&&!(r=e.getItem(i));i++);if(r){var o=r.level;if(o>1||r.childIndex>0){for(var n=0;n<o;n++){var s=r.getAncestor(n);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(n+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}r.childIndex>0&&this.$_drawVertLine(t,this.$_borrowLine(),null,r,r.parent.level)}for(;i<=this._endIndex;i++){var a,l=(r=e.getItem(i)).parent;(n=r.childIndex)<l.count-1&&((a=l.getItem(n+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),r,a,l.level)),(l=r)&&l.expanded&&l.count>0&&((a=l.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),r,a)),this.$_drawHorzLine(t,this.$_borrowLine(),r)}}}},e.prototype._getCssSelector=function(){return"rg-tree-lines"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("pointer-events","none","important"),i.setProperty("overflow","hidden")},e.prototype._doDraw=function(t){},e.prototype.$_borrowLine=function(){var t=this._linePool.pop();return t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t)),t.style.display="inline-block",this._lines.push(t),t},e.prototype.$_hideAll=function(){for(var t=this._lines.length-1;t>=0;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},e.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var r=this._treeView.getItem(i);if(r&&r.level==t)return r}return null},e.prototype.$_setBounds=function(t,e,i,r,o){var n=t.style;n.left=3+e+"px",n.top=i+"px",n.width=1==r?"1px":r+"px",n.height=1==o?"1px":o+"px"},e.prototype.$_drawVertLine=function(t,e,i,r,o){var n=t.topIndex,s=o*this._levelWidth+this._levelWidth/2,a=0,l=this.height,u=this._handleHeight;if(i){var h=t.getItemBounds(i.index-n),c=i instanceof Go&&i.hasChildren?u+2:0;a=h.y+h.height/2+c/2+1}r&&(h=t.getItemBounds(r.index-n),c=r instanceof Go&&r.hasChildren?u:0,l=h.y+h.height/2-c/2),this.$_setBounds(e,s,a,1,l-a)},e.prototype.$_drawHorzLine=function(t,e,i){var r,o=t.topIndex,n=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth+1;i.hasChildren&&(n+=this._handleWidth/2+1);var a=t.getItemBounds(i.index-o);r=a.y+a.height/2,this.$_setBounds(e,n,r,s-n,1)},e.prototype.$_drawChildLine=function(t,e,i,r){var o,n=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-n);if(o=l.y+l.height/2+5,r){l=t.getItemBounds(r.index-n);var u=r.hasChildren?this._handleHeight:0;a=l.y+l.height/2-u/2}this.$_setBounds(e,s,o,1,a-o)},e}(As),up=function(t){function e(e){return t.call(this,e,"treeViewSelectionTool")||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doKeyDown=function(e){var i,r=this.focused.clone(),o=this.grid.treeOptions,n=e.which,s=e.ctrlKey||e.metaKey;if(r&&(i=r.item))switch(n){case 39:if(!s&&1==this.grid.visibleLayoutCount&&r.isRight&&o.expandWhenRightKey||s&&o.expandWhenCtrlKey){if(!i.expanded)return i.setExpanded(!0,!1,!1),!0;if(i.count>0)return r.down(),this.setFocused(r,!0,!0),!0}break;case 37:if(!s&&r.isLeft&&o.collapseWhenLeftKey||s&&o.collapseWhenCtrlKey){if(i.expanded)return i.setExpanded(!1,!1,!1),!0;if(!(i.parent instanceof Uo))return r.itemIndex=i.parent.index,this.setFocused(r,!0,!0),!0}}return t.prototype._doKeyDown.call(this,e)},e.prototype._doMouseDown=function(e){var i=e.mouseX,r=e.mouseY,o=e.altKey,n=this.grid,s=this.findElementAt(i,r,!1),a=this.mouseEventTarget;if(s instanceof ip&&Ga.isExpander(a)&&!o){var l=s._item;l instanceof Go&&(l.expanded?n.collapse(l,!1):n.expand(l,!1,!1))}t.prototype._doMouseDown.call(this,e)},e.prototype._doClick=function(e,i,r){i=i||e.mouseX,r=r||e.mouseY;var o=e.shiftKey,n=this.grid,s=(this.focused,this.findElementAt(i,r,!1)),a=this.mouseEventTarget;if(s instanceof ip&&s.isCheckBox(a))if(n.editOptions.checkable){var l=n.getItem(s.itemIndex);this._doCheck(a,l,o)}else e.preventDefault();t.prototype._doClick.call(this,e,i,r)},e.prototype._canMoveRowAt=function(t,e,i){var r=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),o=3+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<r.x+(t.isTreeCell(e)?o:20)){var n=this.grid.getSelectedItems();if(n.length>1)for(var s=n[0].level,a=1;a<n.length;a++)if(n[a].level<s)return!1;return!0}},e}(nh),hp=function(t){function e(e,i,r,o){return t.call(this,e,i,r,o)||this}return r(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"treeView",{get:function(){return this.gridView},enumerable:!0,configurable:!0}),e.prototype._createGridView=function(t,e){return new pp(this,t,e)},e.prototype._createDefaultTool=function(){return new up(this)},e}(Jd),cp=function(t){function e(){return t.call(this,"treeItemExpanderCell")||this}return r(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(Gr),dp=function(t){function e(){return t.call(this,"treeItemFooterCell")||this}return r(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.text)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(Gr),pp=function(e){function i(t,i,r){var o=e.call(this,t,i,r)||this;return o._expanderCell=new cp,o._footerCell=new dp,o._focusedRow=-1,o.itemSource=o._rs=o._createItemSource(),o}return r(i,e),i.prototype._doDispose=function(){e.prototype._doDispose.call(this)},Object.defineProperty(i.prototype,"treeOptions",{get:function(){return this._treeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"linesView",{get:function(){return this._linesView},enumerable:!0,configurable:!0}),i.prototype.isTree=function(){return!0},i.prototype._beforeChangeLayout=function(){},i.prototype.getLevels=function(t){return this._rs.getLevels(t)},i.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(rs.temp(this,t)),this._expanderCell},i.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},i.prototype.expand=function(t,e,i,r){this.isItemEditing(null)||this._rs.expand(t,e,i,r)},i.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},i.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},i.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},i.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var r=void 0;r=t.hasChildren&&t.expanded&&e.expandedIcon>-1?e.expandedIcon:t.hasChildren&&t.collapsed&&e.collapsedIcon>-1?e.collapsedIcon:t.iconIndex;var o=e.iconCallback;if(o){var n=o(this.handler,t.index,t.dataRow,r);if("string"==typeof n)return n;isNaN(n)||(r=n)}if((r<0||r>=i.length)&&(r=e.defaultIcon),r>=0&&r<i.length)return e.iconImagesRoot+i[r]}},i.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var r=this.getItem(e);r.checked&&t.push(r)}return t},i.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var r=this.getItem(e);r.checked&&t.push(r.index)}return t},i.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,r=this.itemCount;i<r;i++){var o=this.getItem(i);o.checked&&e.push(o.row)}}else e=this._rs.getCheckedRows();return e},i.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,r=this.itemCount;i<r;i++){var o=this.getItem(i);o.checked&&e.push(o.dataRow)}}else e=this._rs.getCheckedRowIds();return e},i.prototype.checkChildren=function(t,e,i,r,o,n){if(void 0===o&&(o=!0),void 0===n&&(n=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);o?l.checkable&&l.setChecked(e,n):l.setChecked(e,n),!i||!l.expanded&&r||this.checkChildren(l,e,!0,r,o,n)}},i.prototype.resetCheckables=function(){this._rs.resetCheckables()},i.prototype.applyCheckables=function(){this._rs.applyCheckables()},i.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.dataRow>=0?this.getItemOfRow(t.dataRow,!1):null},i.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(i.prototype,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!0,configurable:!0}),i.prototype._initStyles=function(){e.prototype._initStyles.call(this),this._treeOptions=new tp(this)},i.prototype._createItemSource=function(){return new Xo(!0)},i.prototype._doContentPanesCreated=function(){this._linesView=new lp(this),this.addElement(this._linesView)},i.prototype._createSidePane=function(){return e.prototype._createSidePane.call(this)},i.prototype._createLayoutManager=function(){return new fp(this)},i.prototype._createBodyView=function(t){return new np(this.doc,t)},i.prototype._createFixedBodyView=function(t){return new sp(this.doc,t)},i.prototype._createRightBodyView=function(t){return new ap(this.doc,t)},i.prototype._visualObjectChanged=function(t){e.prototype._visualObjectChanged.call(this,t)},i.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},i.prototype._doCanInsert=function(t,e,i){return t&&(t.count>0||!i||0==t.level||this.editOptions.appendable)},i.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},i.prototype.getSortFields=function(){return this._rs.getSortFields()},i.prototype.getSortDirections=function(){return this._rs.getSortDirections()},i.prototype.getSortCases=function(){return this._rs.getSortCases()},i.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},i.prototype._doColumnFiltersChanged=function(t,e){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e)},i.prototype.setOptions=function(t){if(t){var i=this._rs;void 0!==t.hideDeleted&&(i.hideDeleted=t.hideDeleted),void 0!==t.hideDeletedRows&&(i.hideDeleted=t.hideDeletedRows),void 0!==t.summaryMode&&(i.summaryMode=t.summaryMode),void 0!==t.sortMode&&(i.sortMode=t.sortMdoe),e.prototype.setOptions.call(this,t)}},i.prototype._doPrepareRender=function(t){var i=this._horzScrolled;e.prototype._doPrepareRender.call(this,t),i&&this.layoutManager.$_layoutLines()},i.prototype.$_doLayout=function(t,i){this._treeOptions,e.prototype.$_doLayout.call(this,t,i)},i.prototype.assignImageList=function(t){},i.prototype.refreshView=function(){e.prototype.refreshView.call(this)},i.prototype.getEditBounds=function(t,i){return e.prototype.getEditBounds.call(this,t,i)},i.prototype.updatePastedRow=function(t,e,i){if(t instanceof Go){var r=t.row;r&&r.update(e,i)}},i.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);e.rootRow.addChild(i,!1)}},Object.defineProperty(i.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!0,configurable:!0}),i.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},i.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},i.prototype.execute=function(t){this._rs.execute(t)},i.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},i.prototype.getFirstRow=function(){return null},i.prototype.getLastRow=function(){return null},i.prototype.getPrevRow=function(t){return null},i.prototype.getNextRow=function(t){return null},i.prototype.canMoveRows=function(t,e,i){if(i&&this.canMoveRow(e,!1)&&t&&t.length>0){var r=t[0].parent;if(r!==i.parent)return!1;for(var o=1,n=t.length;o<n;o++)if(r!==t[o].parent)return!1;var s=!1;for(o=0;o<t.length;o++){var a=t[o];a&&a.isDataRow&&(s=!0)}return s}},i.prototype._getMoveTarget=function(t,e,i,r){if("keydown"===t){var o=this.getItem(i),n=o.parent;if(o.childIndex+e.length>=n.children.length&&r>0||0===o.childIndex&&r<0)return;var s=this.getItem(i+r);if(o.level===s.level)return s;var a=o.childIndex+r;if(!n||a<0||a>=n.children.length)return;return n.children[a]}return this.getItem(i+r)},i.prototype._doMoveRows=function(t,e){var i=e&&e.dataId;if(i>=0){for(var r=[],o=0,n=t;o<n.length;o++){var s=n[o],a=s&&s.dataId;a>=0&&r.push(a)}if(r.length>0){var l=this.dataSource,u=l.rowsByIds(r,!1);if(u.length>0)return l.moveRows(u,l.rowById(i))}}return!1},i.prototype._fitLayoutWidth=function(e){if(!e.visible)return 0;var i,r=this.itemSource,o=this.getIndex(this.topIndex,e.firstColumn),n="",s=0;i=n=e.firstColumn.header.displayText;var a,l=this.getBodyCellAt(o,!1),u=l&&l.renderer2&&l.renderer2._dom,h=l&&l.renderer2 instanceof ep,c={0:ft.getTextLength(i)},d={0:i};if(u){var p=ht(u).getComputedStyle(u);if(p){n=p.paddingLeft;var f=parseInt(n.substr(0,n.indexOf("px")));s+=f>0?f:0,n=p.paddingRight,s+=(f=parseInt(n.substr(0,n.indexOf("px"))))>0?f:0,a={fontSize:p.fontSize,fontFamily:p.fontFamily,fontWeight:p.fontWeight,fontStyle:p.fontStyle}}}for(var _=0,g=r.itemCount;_<g;_++)o.itemIndex=_,c[w=h?o.item.level:0]=c[w]||0,n=this.getDisplayText(o),ft.getTextLength(n)>c[w]&&(c[w]=ft.getTextLength(n),d[w]=n);for(var y=0,m=0,b=0,v=Object.keys(c);b<v.length;b++){var w=v[b];y=h?parseInt(w)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6,y+=this.container.measureText("rg-data-cell",d[w],a),m=Math.max(m,y)}s+=m;var C=e.firstColumn,x=C.editor,I=this.delegate.getCellEditor(ea.getEditorType(x));return I.hasButton(this.displayOptions.showNativeEditButton,x)&&(s+=this.body.editButtonWidth*I.buttonCount),C.button!==t.CellButton.NONE&&(s+=this.body.cellButtonWidth),s},i.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},i.prototype.onItemProviderReset=function(t){this._currentRowId=-1,e.prototype.onItemProviderReset.call(this,t)},i.prototype.onTreeItemProviderItemChanged=function(t,e){this.invalidateLayout(),this.fireEvent(i.CHANGED,e)},i.prototype.onTreeItemProviderExpanding=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.EXPANDING,e)},i.prototype.onTreeItemProviderExpanded=function(t,e){this.fireEvent(i.EXPANDED,e)},i.prototype.onTreeItemProviderCollapsing=function(t,e){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(i.COLLAPSING,e)},i.prototype.onTreeItemProviderCollapsed=function(t,e){this.fireEvent(i.COLLAPSED,e)},i.EXPANDING="onTreeViewExpanding",i.EXPANDED="onTreeViewExpanded",i.COLLAPSING="onTreeViewCollapsing",i.COLLAPSED="onTreeViewCollapsed",i.CHANGED="onTreeViewChanged",i}(Zh),fp=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.layout=function(e){t.prototype.layout.call(this,e),this.$_layoutLines()},e.prototype.$_layoutLines=function(){var t=this.grid,e=t.linesView;if(e.visible=t.treeOptions.lineVisible){var i=this.fixedLayoutCount>0,r=(i?this.fixedBodyBounds:this.bodyBounds).clone();i?(r.y+=this.fixedContentBounds.y,r.x+=this.fixedContentBounds.x):(r.y+=this.contentBounds.y,r.x+=this.contentBounds.x),this.layoutCount>0?r.width=Math.max(0,this.getLayoutWidth(0)):r.width=0,e.setRect(r),e.levelWidth=16,e.setRange(t,this.topIndex,Math.min(t.itemCount,this.topIndex+this.itemCount)-1),e.layout(this)}},e}(il),_p=function(t){function e(){var e=t.call(this)||this;return e._columns=null,e}return r(e,t),e.prototype._doDispose=function(){this._columns=null,t.prototype._doDispose.call(this)},e.prototype.setColumns=function(t){this._columns=[];for(var e=0;e<t.length;e++)t[e].layout instanceof Vn&&this._columns.push(t[e].layout.firstColumn.name)},e.prototype.setItemIndex=function(t,e){this._itemIndex=t,this._startCol=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(t===e.ID_ROW)return String(this._itemIndex+1);throw new It("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(t==e.ID_EXCELCOLUMN){if(i<0||i>=this._columns.length)throw new It("Data field index out of bounds:"+i);return this._columns[i]}throw new It("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,r){if(t!=e.ID_EXCELCOLUMN)throw new It("Invalid identifier indexer: "+t);if(this._columns){var o=this._columns.indexOf(i);if(o<0||o>=this._columns.length)throw new It("Column is not exists:"+i);return _c.toColCaption(o+this._startCol)}},e.ID_EXCELCOLUMN=0,e.ID_ROW=1,e.IDENTS={excelcolumn:e.ID_EXCELCOLUMN,row:e.ID_ROW},e}(Dt),gp=function(e){function i(){var t=e.call(this)||this;return t._gridIndex=0,t._numberFormatId=0,t._textFormatId=49,t._dateFormatId=14,t._rowLevels=0,t._indents=0,t._indentWidth=3,t._seriesCell=new Xr,t._excelFormulaRuntime=new _p,t}return r(i,e),i.prototype.dispose=function(){return e.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer=this._linkRenderer&&this._linkRenderer.dispose(),this._templateRenderer=this._templateRenderer&&this._templateRenderer.dispose(),this._imageRenderer=this._imageRenderer&&this._imageRenderer.dispose(),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},i.prototype._progressCallback=function(t,e,i,r){var o=this._progressGrid,n=this._multiOptions;o&&o.setExportProgress(i,r+n.prepareProgress,n.progressMessage)},i.prototype.export=function(t,i){if(e.prototype.export.call(this,t,i),this._progressGrid=t,i){var r=this._multiOptions=i,o=this._multiOptions.exportGrids;if(o&&!(o.length<=0)){var n=ct(t.container._containerDiv).documentElement,s=new Ac(n);if(this._mergeHeads={},r.showProgress)this._allCount=this._prepareCount(r,o),this._progressMax=this._allCount+r.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),r.progressCallback?this.setProgress=r.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(r.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(s,r,this._gridIndex=0,function t(){var e=++this._gridIndex;e<r.exportGrids.length?this._exportGridAsync(s,r,e,t.bind(this)):(!i.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}.bind(this));else{for(var a=0,l=o.length;a<l;a++)this._exportGrid(s,o[a].options);this.save()}}}},i.prototype.buildBook=function(t){var e=this._exportOptions.grid;e.isTree()?this.buildTreeSheet(e,t):this.buildSheet(e,t)},i.prototype.buildSheet=function(t,e){var i=this._exportOptions,r=this._workbook,o=r.createSheet(this._sheetName,i),n=t.displayOptions;if(this._defaultHeight=n.rowHeight||n.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=0,i.allItems&&this._rowGrouped){this.allItems=t.itemSource.getAllItems();var s=t.layoutManager.fixedItemCount;if(s>0)for(var a=0;a<s;a++)this.allItems.splice(a,0,t.getItem(a))}else if(i.pagingAllItems&&t.paged){var l=t.itemSource;l instanceof $c&&(this.allItems=l.getPagingAllItems())}else i.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=t.getCheckedItems(!1));var u=this.allItems,h=u?u.length:t.itemCount;if(!this._rowGrouped){this._startItem=i.start>0?i.start:0;var c=i.count>0?i.count:h;h=c>0?this._startItem+c>h?h-this._startItem:c:h-this._startItem}this._indexItem=this._startItem,this._lastItem=this._startItem+h,this._currentRow=i.yOffset,o.setFirstCol(this._startCol=i.xOffset),this._prepareCommonStyles(t),this._buildColumns(t),o.createBorderEdges(lc.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildItems(t,function(){this.footer&&this.buildSummaryItem(t,!0),this._buildDocumentTail(r),this._buildUserCells(t,r),e&&e()}.bind(this))},i.prototype.buildHeader=function(t){for(var e=this._workbook,r=e.currentSheet,o=this._preparer,n=o.colCount,s=o.headerRowCount,a=t.header.heights||[],l=a&&a.length>0?t.header.minRowHeight:Math.max(t.header.height,t.header.minRowHeight*s)/s,u=[],h=0;h<s;h++)u.push(Math.max(a[h]||l,l)*i.LINE_HEIGHT);var c=this._indents,d=this._currentRow;r.setFirstRow(this._currentRow);var p,f=this._startCol,_=this._headerCellStyle,g=[];for(h=0;h<s;h++)g.push(r.borrowRow(d+h,u[h]));if(this.indicator){if((p=g[0]).addText(f,this.indicatorHead,_),s>1){for(h=1;h<s;h++)g[h].addBlank(f,_);r.addMerge(d,f,s,1)}f++}if(this.checkBar){if((p=g[0]).addText(f,this.checkBarHead,_),s>1){for(h=1;h<s;h++)g[h].addBlank(f,_);r.addMerge(d,f,s,1)}f++}if(c>0){for(var y=0;y<c;y++){for(h=0;h<s;h++)g[h].addBlank(y+f,this._indentHeadStyle);r.addMerge(d,y+f,s,1)}f+=c}for(h=0;h<s;h++){var m=d+h;for(p=g[h],y=0;y<n;y++){var b=o.getHeader(h,y),v=b&&b.layout,w=y+f;if(v.isProxy||b.spanned)p.addBlank(w,_);else{var C=v.displayText,x=this._preparer.documentCssStyles,I=v instanceof Vn?v.firstColumn.header:v.header,S=I.exportStyleName||I.styleName;_=this._headerCellStyle,S&&(_=this._parseStyles(e,this._inheritStyles([this._headerCssStyle,lc.getSelectorStyle(x,"."+S)]),!0)),p.addText(w,C,_);var E=0,k=v.getHeaderSpan()-1,O=v.parent,R=O&&O.vertical;if(k>0){var P=0,D=v.vindex+1;if(R)for(;P++<k&&P<s;)E+=O.getVisible(D++)._hspan,o.getHeader(h+P,y).spanned=!0;else for(;P++<k&&y+P<n&&D<O.visibleCount;)E+=O.getVisible(D++)._cspan,o.getHeader(h,y+P).spanned=!0}R?r.addMerge(m,w,v.hspan+E,v.cspan):r.addMerge(m,w,v.hspan,v.cspan+E)}}}this._currentRow+=s,this._exportOptions.applyFixed&&r.setFixedInfo(this._currentRow,void 0),r.setLastRow(this._currentRow-1)},i.prototype.buildSummaryItem=function(t,e){function r(t,i,r,n,s){var a=o.getCell(r.layout),l=this._exportOptions,u=a.value;if(u instanceof Date)l.datetimeCallback?(u=l.datetimeCallback(-1,r.name,u))instanceof Date?t.addDate(i,u,s):t.addText(i,u,s):t.addDate(i,u,s);else if(isNaN(u)){var h=e?r.getFooter(o._childIndex):r.getHeaderSummary(o._childIndex),c=h&&o.getCellFormatters(h,null),d=c?a.getDisplayText(c):u;t.addText(i,d||"",s)}else t.addNumber(i,u,s)}var o,n=this._workbook.currentSheet,s=this._preparer,a=s.colCount,l=s.dataRowCount,u=this._indents,h=e?t.footers:t.headerSummaries;if(h.visible){var c=h.visibleCount,d=c*l,p=this._currentRow;n.setFirstRow(this._currentRow);for(var f,_=this._startCol,g=t.layoutManager.getDataRowHeights(l),y=g.reduce((function(t,e){return t+e}),0),m=[],b=0;b<c;b++){var v=(o=h.getVisible(b)).height;v=-1===v?-1:v>0?v/l:Math.max(o.minHeight,t.heightMeasurer.summaryHeight,v);for(var w=0;w<l;w++)y>0&&g[w]>0?m.push(g[w]*o.height/y*i.LINE_HEIGHT):m.push(-1===v?-1:v*i.LINE_HEIGHT)}if(this.indicator){b=0;for(var C=0;b<c;b++)for(var x=0;x<l;x++)f=n.borrowRow(p+C,m[C]),e?0===C?f.addText(_,this.indicatorFoot,this._indicatorFootStyle):f.addBlank(_,this._indicatorFootStyle):0===C?f.addText(_,this.indicatorSummary,this._indicatorSumStyle):f.addBlank(_,this._indicatorSumStyle),C++;n.addMerge(p,_++,d,1)}if(this.checkBar){for(b=0,C=0;b<c;b++)for(x=0;x<l;x++)f=n.borrowRow(p+C,m[C]),e?0===C?f.addText(_,this.checkBarSummary,this._checkBarSumStyle):f.addBlank(_,this._checkBarSumStyle):0===C?f.addText(_,this.checkBarFoot,this._checkBarFootStyle):f.addBlank(_,this._checkBarFootStyle),C++;n.addMerge(p,_++,d,1)}if(u>0){for(var I=0;I<u;I++){for(b=0,C=0;b<c;b++)for(x=0;x<l;x++)(f=n.borrowRow(p+C,m[C])).addBlank(_+I,this._indentFootStyle),C++;n.addMerge(p,_+I,c*l,1)}_+=u}for(var S=p,E=(e?s.getFooterItem:s.getSummaryItem).bind(s),k=(w=0,0);w<c;w++)for(o=h.getVisible(w),b=0;b<l;b++,k++){for(f=n.borrowRow(S,m[k]),I=0;I<a;I++){var O=E(w*l+b,I),R=O.layout,P=R.firstColumn,D=I+_,T=R.firstColumn.$_hash,L=(e?this._columnFooterStyles:this._columnSummaryStyles)[T][w];if(R.isProxy||O.spanned)f.addBlank(D,L);else{var M=0,F=e?R.getFooterSpan(w)-1:R.getSummarySpan(w)-1,N=e?R.getFooterUserSpan(o._childIndex):R.getSummaryUserSpan(o._childIndex),V=R.parent,B=V&&V.vertical;if(N){var A=N.footerCount||0,$=A>0?A*l:N.rowspan||1,j=N.colspan||1;r.call(this,f,D,P,w,L);for(var H=0,W=0,G=0;G<$;G++){var U=(e?s._footerCells:s._summaryCells)[w*l+b+G];U&&H++;for(var z=0;U&&z<j;z++){var Y=U[I+z];Y&&(W=Math.max(W,z+1),Y.spanned=!0)}}($>1||j>1)&&n.addMerge(S,D,H,W)}else{if(F>0){var q=0,K=R.vindex+1;if(B)for(;q++<F&&q<l;)M+=V.getVisible(K++)._dspan,E(w*l+b+q,I).spanned=!0;else for(;q++<F&&I+q<a&&K<V.visibleCount;)M+=V.getVisible(K++)._cspan,E(w*l+b,I+q).spanned=!0}r.call(this,f,D,P,w,L),B?n.addMerge(S,D,R._dspan+M,R._cspan):n.addMerge(S,D,R._dspan,R._cspan+M)}}}S++}this._rowGrouped&&this._exportOptions.showLevelOutline&&n.setRowLevel(S,1),this._currentRow+=d,n.setLastRow(this._currentRow-1)}},i.prototype.buildItems=function(t,e){for(var i=this._exportOptions,r=i.showIndicatorRow(t),o=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,s=this._indexItem;s<n;s++){var a=o?o[s]:t.getItem(s);if(this._indicatorNo=r?a.isDataRow?a.dataRow+1:void 0:s+1,a instanceof yr)this.buildRow(t,a);else if(a instanceof ln)this.buildMergedGroupHeader(t,a);else if(a instanceof an||a instanceof vr)this._preparer.groupModel!=a.parent&&this._preparer.setGroupFooterItms(a.parent,i.allItems,t.rowGroup.mergeMode),a instanceof an?this.buildMergedGroupFooter(t,a):this.buildGroupFooter(t,a);else{if(!(a instanceof br))throw new Error("Unkown item type");this.buildGroupHeader(t,a)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},i.prototype.buildRow=function(e,r){var o,n,s=e.rowGroup,a=this._preparer,l=a.dataRowCount,u=a.colCount,h=e.layoutManager,c=this._columnMerged,d=this._mergeHeads,p=this._indents,f=this._workbook.currentSheet,_=this._currentRow;f.setFirstRow(this._currentRow);var g,y=this._startCol,m=e.displayOptions,b=m.rowHeightCallback;r.index>=0&&b&&(h.getRowHeightOfCallback(e,r.index),g=r.heights);var v=(g=g||h.getDataRowHeights(l)).reduce((function(t,e){return t+e}),0)||r.height;isNaN(v)&&(v=-1===m.rowHeight?-1:Math.max(m.rowHeight||0,m.minRowHeight*l)),v=-1===v?-1:v>0?v/l:v;for(var w=s.expandedAdornments===t.RowGroupAdornments.SUMMARY&&s.mergeMode,C=[],x=0;x<l;x++)C.push(f.borrowRow(_+x,-1===v?-1:(g[x]||v)*i.LINE_HEIGHT));for(this.indicator&&this._buildIndicatorCell(e,f,C,this._indicatorNo,_,y++,l),this.checkBar&&this._buildCheckBarCell(e,f,C,r.checked,_,y++,l),x=0;x<l;x++){var I=C[x];I._row=x;var S=_+x,E=y;for(o=0;o<p;o++)I.addBlank(E,this._indentBarStyle),E++;for(o=0;o<u;o++){var k=o+E,O=a.getItem(x,o),R=O.layout,P=R.firstColumn,D=P.$_hash,T=this._columnStyles[D];if(R.isProxy||O.spanned)I.addBlank(k,T);else{var L=R._dspan,M=!1;if(c){var F=os.tempItem(e,r,R),N=h.getMergeRoom(F);if(N)if(N.isHead(F)&&0==x||this._startItem>0&&r.index==this._startItem&&!w)T=this._buildValueCell(e,f,I,r,R,k,E),d[D]={startRow:S,style:T},M=!0;else{var V=d[D];I.addBlank(k,V.style||T),(N.isTail(F)||this._lastItem>0&&r.index==this._lastItem-1)&&(L=S-V.startRow+l,f.addMerge(V.startRow,k,L,1),delete d[D]),M=!0}else if(this.allItems&&!r.visible&&e.isGroupedColumn(P)&&this._mergedGrouped){for(I.addBlank(k,T),M=!0,n=r.parent;P.groupLevel!=n.level&&n;)n=n.parent;var B=d[D].startRow;switch(e.rowGroup.expandedAdornments){case t.RowGroupAdornments.NONE:r==n.firstItem&&r==n.lastDataItem?M=!1:r==n.firstItem?(T=this._buildValueCell(e,f,I,r,R,k,E),d[D]={startRow:S,style:T}):r==n.lastDataItem&&(L=S-B+l,f.addMerge(B,k,L,1));break;case t.RowGroupAdornments.BOTH:r==n.lastDataItem&&0==n.footerCount&&(L=S-B+l,f.addMerge(B,k,L,1));break;case t.RowGroupAdornments.HEADER:case t.RowGroupAdornments.SUMMARY:r==n.firstItem&&r==n.lastDataItem?d[D]?(L=S-B+l,f.addMerge(B,k,L,1),delete d[D]):M=!1:r==n.lastDataItem?(L=S-B+l,f.addMerge(B,k,L,1),delete d[D]):n.firstDataItem;break;case t.RowGroupAdornments.FOOTER:r==n.firstItem&&(T=this._buildValueCell(e,f,I,r,R,k,E),d[D]={startRow:S,style:T}),r==n.lastDataItem&&(n.footerCount>0||(L=S-d[D].startRow+l,f.addMerge(d[D].startRow,k,L,1),delete d[D]))}}}if(!M){var A=R.parent,$=A&&A.vertical,j=R.spanCallback,H=j?j(e.handler,R,r.index)-1:void 0;void 0===H&&(H=R.getDataSpan()-1);var W=0;if(H>0){var G=0,U=R.vindex+1;if($)for(;G++<H&&G<l;)W+=A.getVisible(U++)._dspan,a.getItem(x+G,o).spanned=!0;else for(;G++<H&&o+G<u&&U<A.visibleCount;)W+=A.getVisible(U++)._cspan,a.getItem(x,o+G).spanned=!0}this._buildValueCell(e,f,I,r,R,k,E),$?f.addMerge(S,k,R._dspan+W,R._cspan):f.addMerge(S,k,R._dspan,R._cspan+W)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&f.setRowLevel(S,r.level)}this._currentRow+=l,f.setLastRow(this._currentRow-1)},i.prototype.buildGroupHeader=function(t,e){var r=this._workbook,o=r.currentSheet,n=this._preparer,s=e.level-1,a=this._indentBarStyle,l=n.colCount,u=this._currentRow;o.setFirstRow(this._currentRow);var h=this._startCol,c=t.layoutManager.getDataRowHeights(n.dataRowCount).reduce((function(t,e){return t+e}),0);c=c||Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*n.dataRowCount);var d=this._exportOptions,p=o.borrowRow(u,c*i.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(t,o,p,this._indicatorNo,u,h++,1),this.checkBar&&this._buildCheckBarCell(t,o,p,e.checked,u,h++,1),d.indenting)for(var f=0;f<s;f++)p.addBlank(h,a),h++;var _=t.rowGroup.getHeaderText(e),g=this._groupHeaderStyle,y=this._preparer.documentCssStyles,m=this._dynamicStyles,b="groupheader-style=.rg-rowgroup-header-level-"+e.level;if(m[b])g=m[b];else{var v=lc.getSelectorStyle(y,".rg-rowgroup-header-level-"+e.level);v&&(g=this._extendStyles(r,g,v)),this._dynamicStyles[b]=g}p.addText(h,_,g),this._indents>0&&(l+=this._indents-(e.level-1));for(var w=1;w<l;w++)p.addBlank(w+h,g);o.addMerge(u,h,1,l),this._rowGrouped&&d.showLevelOutline&&o.setRowLevel(u,e.level),this._currentRow++,o.setLastRow(this._currentRow-1)},i.prototype.buildGroupFooter=function(e,r){function o(t,i,o,n){var s=Th.getValue(r,o),a=this._exportOptions;if(s instanceof Date)a.datetimeCallback?(s=a.datetimeCallback(r.index,o.name,s))instanceof Date?t.addDate(i,s,n):t.addText(i,s,n):t.addDate(i,s,n);else if(isNaN(s))if(s)t.addText(i,s,n);else{var l=void 0;if(r){var u=os.tempItem(e,r,o);l=e.getDisplayText(u)||""}else l=o.groupFooter.text||"";t.addText(i,l,n)}else t.addNumber(i,s,n)}var n,s,a,l=this._workbook.currentSheet,u=this._exportOptions,h=this._preparer,c=h.dataRowCount,d=h.colCount,p=this._groupFooterCellStyle,f=this._indentBarStyle,_=this._indents,g=r.level,y=this._currentRow;l.setFirstRow(this._currentRow);for(var m=this._startCol,b=e.rowGroup.expandedAdornments==t.RowGroupAdornments.SUMMARY,v=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/c,e.displayOptions.minTableRowHeight),w=e.layoutManager.getDataRowHeights(c),C=[],x=0;x<c;x++)C.push(l.borrowRow(y+x,(w[x]||v)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(e,l,C,this._indicatorNo,y,m++,c),this.checkBar&&this._buildCheckBarCell(e,l,C,r.checked,y,m++,c);var I=h.getGroupFooterCells(),S=r.vindex*c;for(x=0;x<c;x++){var E=y+x,k=m,O=C[x];if(_>0)for(var R=0;R<_;R++)b?R<g-2?O.addBlank(k,f):O.addBlank(k,p):O.addBlank(k,f),0==x&&c>1&&l.addMerge(E,k,c,1),k++;for(R=0;R<d;R++){n=R+k;var P=I[S+x][R],D=P.layout;if(s=D.firstColumn,a=this._columnGroupFooterStyles[s.$_hash][r.footerIndex],u.applyDynamicStyles){var T=os.tempItem(e,r,D),L=e.rowGroup.getFooterCell(T),M=L.getSummary();a=this.$_summaryStyleSet(L,M,a)}if(D.isProxy||P.spanned)O.addBlank(n,a);else{var F=D.parent,N=F&&F.vertical,V=0,B=0,A=D.getGroupFooterUserSpan(r.parent,r.footerIndex),$=A?0:D.getGroupFooterSpan(r.index,r.footerIndex)-1;if(A){var j=A.footerCount||0;V=j>0?j*c:A.rowspan||1,B=A.colspan||1,V=Math.min((r.parent.footerCount-r.vindex)*c,V),l.addMerge(E,n,V,B);for(var H=0;H<V;H++)for(var W=0;W<B;W++)I[S+H+x][R+W].spanned=!0}else if($>0){var G=0;if(T=D.vindex+1,N)for(;G++<$&&G<c;)V+=F.getVisible(T++)._dspan,I[S+G][R].spanned=!0;else for(;G++<$&&T<Math.min(d,F.visibleCount);)B+=F.getVisible(T++)._cspan,I[S+x][R+G].spanned=!0}o.call(this,O,n,s,a),!A&&l.addMerge(E,n,D._dspan+V,D._cspan+B)}this._rowGrouped&&u.showLevelOutline&&l.setRowLevel(E,r.level)}}this._currentRow+=c,l.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupHeader=function(t,e){var r=this._workbook.currentSheet,o=this._preparer,n=e.level,s=Math.max(t.displayOptions.rowHeight,t.displayOptions.minRowHeight,t.displayOptions.minTableRowHeight*o.dataRowCount),a=o.colCount,l=this._currentRow;r.setFirstRow(this._currentRow);var u=this._startCol,h=r.borrowRow(l,-1===s?-1:s*i.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(t,r,h,this._indicatorNo,l,u++,1),this.checkBar&&this._buildCheckBarCell(t,r,h,e.checked,l,u++,1);for(var c=0;c<n-1;c++){var d=o.getItem(0,u+c);h.addBlank(u+c,this._columnStyles[d.layout.firstColumn.$_hash])}var p=n-1,f=o.getItem(0,p).layout,_=f.firstColumn,g=this._buildValueCell(t,r,h,e.firstItem,f,u+p);this._mergeHeads[_.$_hash]={startRow:l,style:g};var y=t.rowGroup.getHeaderText(e);for(c=u+n,g=this._groupHeaderStyle,n<o.colCount&&h.addText(c++,y,g);c<a+u;c++)h.addBlank(c,g);a-n>1&&r.addMerge(l,n+u,1,a-n),this._currentRow++,r.setLastRow(this._currentRow-1)},i.prototype.buildMergedGroupFooter=function(e,r){function o(t,i,o,n){var s=Th.getValue(r,o),a=this._exportOptions;if(s instanceof Date)a.datetimeCallback?(s=a.datetimeCallback(r.index,o.name,s))instanceof Date?t.addDate(i,s,n):t.addText(i,s,n):t.addDate(i,s,n);else if(isNaN(s)){var l=os.tempItem(e,r,o),u=e.getDisplayText(l)||"";t.addText(i,u,n)}else t.addNumber(i,s,n)}var n,s,a,l,u=this._workbook.currentSheet,h=this._exportOptions,c=this._preparer,d=c.dataRowCount,p=c.colCount,f=r.level-1,_=this._currentRow;u.setFirstRow(this._currentRow);for(var g=this._startCol,y=e.rowGroup.expandedAdornments==t.RowGroupAdornments.SUMMARY,m=Math.max(Math.max(this._defaultHeight,e.displayOptions.minRowHeight)/d,e.displayOptions.minTableRowHeight),b=e.layoutManager.getDataRowHeights(d),v=[],w=e.layoutManager,C=0;C<d;C++){var x=u.borrowRow(_+C,(b[C]||m)*i.LINE_HEIGHT);x._row=C,v.push(x)}for(this.indicator&&this._buildIndicatorCell(e,u,v,this._indicatorNo,_,g++,d),this.checkBar&&this._buildCheckBarCell(e,u,v,r.checked,_,g++,d),n=0;n<f;n++){a=(T=c.getItem(0,n).layout).firstColumn;var I=this._mergeHeads[a.$_hash];l=I?I.style:this._columnStyles[a.$_hash];for(var S=r.parent;S&&a.groupLevel!==S.level;)S=S.parent;if(this.allItems||r.parent.expanded){for(C=0;C<d;C++)y&&0===C&&S&&S.getFooter(0)===r?(l=this._buildValueCell(e,u,v[C],r.parent.firstItem,T,g+n),this._mergeHeads[a.$_hash]={startRow:_,style:l}):v[C].addBlank(g+n,l);if(this._columnMerged)if(y)a.groupLevel;else{var E=this._mergeHeads[a.$_hash].startRow;if(r.visible){var k=os.tempItem(e,r,T),O=w.getMergeRoom(k);O&&O.isTail(k)&&u.addMerge(E,n+g,_+d-E,T._defColSpan)}else S&&S.last===r&&u.addMerge(E,n+g,_+d-E,T._defColSpan)}}else for(C=0;C<d;C++)this._buildValueCell(e,u,v[C],r.parent.firstItem,T,g+n)}var R=c.getGroupFooterCells(),P=r.vindex*d;for(C=0;C<d;C++){var D=_+C;for(n=f;n<p;n++){s=n+g;var T,L=R[P+C][n];if(a=(T=L.layout).firstColumn,T.isProxy||L.spanned)l=this._columnStyles[a.$_hash],v[C].addBlank(s,l);else{var M=T.parent,F=M&&M.vertical,N=0,V=0,B=T.getGroupFooterUserSpan(r.parent,r.footerIndex),A=B?0:T.getGroupFooterSpan(r.index,r.footerIndex)-1;if(B){var $=B.footerCount||0;N=$>0?$*d:B.rowspan||1,V=B.colspan||1,N=Math.min((r.parent.footerCount-r.vindex)*d,N),u.addMerge(D,s,N,V);for(var j=0;j<N;j++)for(var H=0;H<V;H++)R[P+j+C][H+n].spanned=!0}else if(A>0){var W=0,G=T.vindex+1;if(F)for(;W++<A&&W<d;)N+=M.getVisible(G++)._dspan,R[P+W][n].spanned=!0;else for(;W++<A&&G<Math.min(p-1,M.visibleCount);)V+=M.getVisible(G++)._cspan,R[P+C][n+W].spanned=!0}if(l=this._columnGroupFooterStyles[a.$_hash][r.footerIndex],h.applyDynamicStyles){G=os.tempItem(e,r,T);var U=e.rowGroup.getFooterCell(G),z=U.getSummary();l=this.$_summaryStyleSet(U,z,l)}o.call(this,v[C],s,a,l),!B&&u.addMerge(D,s,T._dspan+N,T._cspan+V)}this._rowGrouped&&h.showLevelOutline&&u.setRowLevel(D,f)}}this._currentRow+=d,u.setLastRow(this._currentRow-1)},i.prototype.buildTreeSheet=function(t,e){var i=this._exportOptions,r=this._workbook;i.allItems&&(this.allItems=t.getAllItems());var o=this.allItems,n=o?o.length:t.itemCount,s=r.createSheet(this._sheetName,i),a=t.displayOptions;if(this._defaultHeight=a.rowHeight||a.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=i.start>0?i.start:0;var l=i.count>0?i.count:n;n=l>0?this._startItem+l>n?n-this._startItem:l:n-this._startItem}this._lastItem=this._startItem+n,this._prepareCommonStyles(t),this._currentRow=i.yOffset,this._startCol=i.xOffset,this._buildColumns(t),s.createBorderEdges(lc.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(r),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildTreeItems(t,function(){this.footer&&this.buildSummaryItem(t,!0),this._buildDocumentTail(r),this._buildUserCells(t,r),e&&e()}.bind(this))},i.prototype.buildTreeItems=function(t,e){for(var i=this._exportOptions.showIndicatorRow(t),r=this.allItems,o=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,n=this._indexItem;n<o;n++){var s=r?r[n]:t.getItem(n);if(this._indicatorNo=s instanceof yr&&i?s.dataRow:n+1,!(s instanceof Go))throw new Error("Unkown tree item type");this.buildTreeRow(t,s),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=o,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildTreeItems(t,e)}.bind(this),0)},i.prototype.buildTreeRow=function(t,e){var r,o=this._workbook.currentSheet,n=this._preparer,s=n.dataRowCount,a=n.colCount,l=this._indents,u=e.level,h=this._currentRow;o.setFirstRow(this._currentRow);var c=this._startCol,d=t.displayOptions,p=t.layoutManager.getDataRowHeights(s),f=p.reduce((function(t,e){return t+e}),0)||e.height;isNaN(f)&&(f=(d.rowHeight||d.minRowHeight)*s),f=-1===f?-1:f>0?f/s:f;for(var _=[],g=0;g<s;g++)_.push(o.borrowRow(h+g,-1===f?-1:(p[g]||f)*i.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,o,_,this._indicatorNo,h,c++,s),this.checkBar&&this._buildCheckBarCell(t,o,_,e.checked,h,c++,s);var y=this._bodyCellStyle;for(g=0;g<s;g++){var m=_[g];m._row=g;var b=h+g,v=l>0?c+u-1:c,w=n.getItem(g,0),C=w.layout,x=C.firstColumn,I=this._columnStyles[x.$_hash],S=l>0?l-u+1:0;for(r=0;r<u-1;r++)m.addBlank(r+c,y);for(C.isProxy||w.spanned?m.addBlank(v,I):(this._buildValueCell(t,o,m,e,C,v,v),o.addMerge(b,v,C._dspan,C._defColSpan+S)),r=0;r<S;r++)m.addBlank(1+r+v,I);for(v=l>0?c+l:c,r=1;r<a;r++){var E=r+v;if(x=(C=(w=n.getItem(g,r)).layout).firstColumn,I=this._columnStyles[x.$_hash],C.isProxy||w.spanned)m.addBlank(E,I);else{var k=C.parent,O=k&&k.vertical,R=C.spanCallback,P=R?R(t.handler,C,e.index)-1:void 0;void 0===P&&(P=C.getDataSpan()-1);var D=0;if(P>0){var T=0,L=C.vindex+1;if(O)for(;T++<P&&T<s;)D+=k.getVisible(L++)._dspan,n.getItem(g+T,r).spanned=!0;else for(;T++<P&&r+T<a&&L<k.visibleCount;)D+=k.getVisible(L++)._cspan,n.getItem(g,r+T).spanned=!0}this._buildValueCell(t,o,m,e,C,E,v),O?o.addMerge(b,E,C._dspan+D,C._cspan):o.addMerge(b,E,C._dspan,C._cspan+D)}}this._exportOptions.showLevelOutline&&o.setRowLevel(h,e.level)}this._currentRow+=s,o.setLastRow(this._currentRow-1)},i.prototype.prepare=function(){},i.prototype.finallize=function(){},i.prototype.save=function(){var e=function(e){var l=new JSZip;if(e)for(var u=l.folder("xl/media"),h=Object.keys(e),c=0;c<h.length;c++){var d=e[h[c]];d.fileName&&d.buffer&&u.file(d.fileName,d.buffer)}var p=this._workbook.createParts();for(var f in p){var _=p[f];_.indexOf('xmlns=""')>=0&&(_=_.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),l.file(f,_)}if(s)l.generateAsync?l.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},(function(t){r.progressCallback&&r.progressCallback(null,"zip",100,t.percent)})).then((function(t){r.done&&"function"==typeof r.done&&r.done(),a.saveLocal(o,t,i)})):(r.done&&"function"==typeof r.done&&r.done(),a.saveLocal(o,l.generate({type:"blob",compression:"DEFLATE"}),i));else if(r.target===t.ExportTarget.STREAM)if(l.generateAsync)l.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){r.progressCallback&&r.progressCallback(null,"zip",100,t.percent)})).then((function(t){r.done&&"function"==typeof r.done&&r.done(t)}));else{var g=l.generate({type:"base64",compression:"DEFLATE"});r.done&&"function"==typeof r.done&&r.done(g)}else l.generateAsync?l.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){r.progressCallback&&r.progressCallback(null,"zip",100,t.percent)})).then((function(t){r.done&&"function"==typeof r.done&&r.done(),a.saveServer(o,t,r.url,i,n)})):(r.done&&"function"==typeof r.done&&r.done(),a.saveServer(o,l.generate({type:"base64",compression:"DEFLATE"}),r.url,i,n))}.bind(this),i=this.grid.doc,r=this._multiOptions,o=r.fileName,n=r.params,s="local"==r.target,a=this,l=this._workbook;if(JSZip.support.blob||!s)if(l.hasDrawing){var u=l.getImageMap();l.downloader.executeDownLoad(this,u,e)}else e();else alert("not supported on this browser")},i.prototype._prepareCount=function(t,e){for(var i=0,r=0,o=e.length;r<o;r++){var n=void 0,s=e[r].grid;if(s instanceof ad)if(t.allItems&&this._rowGrouped){n=s.itemSource.getAllItems();var a=s.layoutManager.fixedItemCount;if(a>0)for(var l=0;l<a;l++)n.splice(l,0,s.getItem(l))}else t.pagingAllItems&&s.paged?n=s.itemSource.getPagingAllItems():t.onlyCheckedItems&&!s.rowGrouped&&(n=s.getCheckedItems(!1));else s instanceof pp&&t.allItems&&(n=s.getAllItems());i+=n?n.length:s.itemCount}return i},i.prototype._inheritStyles=function(t){for(var e={length:0},i=0,r=t.length;i<r;i++)t[i]&&lc.extendCssStyle(t[i],e);return e},i.prototype._prepareCommonStyles=function(t){var e,i,r=this._preparer.documentCssStyles,o=lc.getSelectorStyle(r,"table"),n=lc.getSelectorStyle(r,"tr"),s=lc.getSelectorStyle(r,"td"),a=this._inheritStyles([o,n,s]),l=this._inheritStyles([lc.getSelectorStyle(r,".rg-root"),lc.getSelectorStyle(r,"html")]),u=lc.getSelectorStyle(r,".rg-header"),h=lc.getSelectorStyle(r,".rg-footer"),c=lc.getSelectorStyle(r,".rg-header-summary"),d=lc.getSelectorStyle(r,".rg-body"),p=lc.getSelectorStyle(r,".rg-fixed-body"),f=this._inheritStyles([lc.getSelectorStyle(r,".rg-root table"),lc.getSelectorStyle(r,".rg-root .rg-table"),lc.getSelectorStyle(r,".rg-root table tr"),lc.getSelectorStyle(r,".rg-root .rg-table tr"),lc.getSelectorStyle(r,".rg-root table tr td"),lc.getSelectorStyle(r,".rg-root .rg-table tr td"),lc.getSelectorStyle(r,".rg-root .rg-table td")]),_=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-header table"),lc.getSelectorStyle(r,".rg-header .rg-table"),lc.getSelectorStyle(r,".rg-header table tr"),lc.getSelectorStyle(r,".rg-header .rg-table tr"),lc.getSelectorStyle(r,".rg-header table tr td"),lc.getSelectorStyle(r,".rg-header .rg-table tr td")]),g=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-footer table"),lc.getSelectorStyle(r,".rg-footer .rg-table"),lc.getSelectorStyle(r,".rg-footer table tr"),lc.getSelectorStyle(r,".rg-footer .rg-table tr"),lc.getSelectorStyle(r,".rg-footer table tr td"),lc.getSelectorStyle(r,".rg-footer .rg-table tr td")]),y=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-header-summary table"),lc.getSelectorStyle(r,".rg-header-summary .rg-table"),lc.getSelectorStyle(r,".rg-header-summary table tr"),lc.getSelectorStyle(r,".rg-header-summary .rg-table tr"),lc.getSelectorStyle(r,".rg-header-summary table tr td"),lc.getSelectorStyle(r,".rg-header-summary .rg-table tr td")]),m=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-body table"),lc.getSelectorStyle(r,".rg-body .rg-table"),lc.getSelectorStyle(r,".rg-body table tr"),lc.getSelectorStyle(r,".rg-body .rg-table tr"),lc.getSelectorStyle(r,".rg-body table tr td"),lc.getSelectorStyle(r,".rg-body .rg-table tr td")]),b=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-fixed-body .rg-table"),lc.getSelectorStyle(r,".rg-fixed-body .rg-table tr"),lc.getSelectorStyle(r,".rg-fixed-body table tr"),lc.getSelectorStyle(r,".rg-fixed-body .rg-table tr td"),lc.getSelectorStyle(r,".rg-fixed-body table tr td"),lc.getSelectorStyle(r,".rg-fixed-body .rg-data-row")]),v=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-rowgroup-bar .rg-table"),lc.getSelectorStyle(r,".rg-rowgroup-bar .rg-table tr"),lc.getSelectorStyle(r,".rg-rowgroup-bar table tr"),lc.getSelectorStyle(r,".rg-rowgroup-bar .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowgroup-bar table tr td")]),w=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-rowgroup-head .rg-table"),lc.getSelectorStyle(r,".rg-rowgroup-head .rg-table tr"),lc.getSelectorStyle(r,".rg-rowgroup-head table tr"),lc.getSelectorStyle(r,".rg-rowgroup-head .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowgroup-head table tr td")]),C=this._inheritStyles([f,lc.getSelectorStyle(r,".rg-rowgroup-foot .rg-table"),lc.getSelectorStyle(r,".rg-rowgroup-foot .rg-table tr"),lc.getSelectorStyle(r,".rg-rowgroup-foot table tr"),lc.getSelectorStyle(r,".rg-rowgroup-foot .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowgroup-foot table tr td")]),x=this._inheritStyles([f,m]),I=lc.getSelectorStyle(r,".rg-header-cell"),S=lc.getSelectorStyle(r,".rg-footer-cell"),E=lc.getSelectorStyle(r,".rg-header-summary-cell"),k=lc.getSelectorStyle(r,".rg-data-cell"),O=lc.getSelectorStyle(r,".rg-rowgroup-header"),R=lc.getSelectorStyle(r,".rg-rowgroup-footer"),P=lc.getSelectorStyle(r,".rg-rowgroup-footer-cell"),D=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-rowgroup-head"),a,w]),T=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-rowgroup-foot"),a,C]),L=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-rowgroup-bar"),a,lc.getSelectorStyle(r,".rg-rowgroup-bar-cell"),v]),M=lc.getSelectorStyle(r,".rg-data-row"),F=lc.getSelectorStyle(r,".rg-fixed-row"),N=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-rowbarcontainer"),a,f,lc.getSelectorStyle(r,".rg-rowbarcontainer .rg-table tr"),lc.getSelectorStyle(r,".rg-rowbarcontainer table tr"),lc.getSelectorStyle(r,".rg-rowbarcontainer .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowbarcontainer table tr td"),lc.getSelectorStyle(r,".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell")]),V=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-foot"),a,f,lc.getSelectorStyle(r,".rg-foot .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowindicator-foot")]),B=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-sum"),a,f,lc.getSelectorStyle(r,".rg-sum .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowindicator-sum")]);this._indicatorCellStyle=this._parseStyles(this._workbook,N),this._indicatorFootStyle=this._parseStyles(this._workbook,V),this._indicatorSumStyle=this._parseStyles(this._workbook,B);var A=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-rowbarcontainer"),a,f,lc.getSelectorStyle(r,".rg-rowbarcontainer .rg-table tr"),lc.getSelectorStyle(r,".rg-rowbarcontainer table tr"),lc.getSelectorStyle(r,".rg-rowbarcontainer .rg-table tr td"),lc.getSelectorStyle(r,".rg-rowbarcontainer table tr td.rg-checkbar-cell")]),$=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-foot"),a,f,lc.getSelectorStyle(r,".rg-foot .rg-table tr td"),lc.getSelectorStyle(r,".rg-checkbar-foot")]),j=this._inheritStyles([l,lc.getSelectorStyle(r,".rg-sum"),a,f,lc.getSelectorStyle(r,".rg-sum .rg-table tr td"),lc.getSelectorStyle(r,".rg-checkbar-sum")]);this._checkBarCellStyle=this._parseStyles(this._workbook,A),this._checkBarFootStyle=this._parseStyles(this._workbook,$),this._checkBarSumStyle=this._parseStyles(this._workbook,j),i=(e=t.header.exportStyleName||t.header.styleName)?lc.getSelectorStyle(r,"."+e):null,i=this._headerCssStyle=this._inheritStyles([l,u,i,a,I,_]),this._headerCellStyle=this._parseStyles(this._workbook,i,!0),this._footerCellStyles=[];for(var H=0;H<t.footers.visibleCount;H++)i=(e=t.footers.getVisible(H).styleName)?lc.getSelectorStyle(r,"."+e):null,i=this._inheritStyles([l,h,i,a,S,g]),this._footerCellStyles.push(this._parseStyles(this._workbook,i,!0));for(this._summaryCellStyles=[],H=0;H<t.headerSummaries.visibleCount;H++)i=(e=t.headerSummaries.getVisible(H).styleName)?lc.getSelectorStyle(r,"."+e):null,i=this._inheritStyles([l,c,i,a,E,y]),this._summaryCellStyles.push(this._parseStyles(this._workbook,i,!0));if(this._groupFooterCellStyles=[],t instanceof ad)for(H=0;H<t.rowGroup.footers.count;H++){var W=t.rowGroup.footers.get(H);i=(e=W.exportStyleName||W.styleName)?lc.getSelectorStyle(r,"."+e):null,i=this._inheritStyles([l,R,i,a,P,x]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,i,!0))}i=this._cellCssStyle=this._inheritStyles([l,d,o,m,M,k]),this._bodyCellStyle=this._parseStyles(this._workbook,i,!1),i=this._inheritStyles([l,d,o,F,m,k]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,i,!1),i=this._fixedCellCssStyle=this._inheritStyles([l,p,o,M,b,k]),this._fixedCellStyle=this._parseStyles(this._workbook,i,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,this._inheritStyles([l,O])),this._groupFooterCellStyle=this._parseStyles(this._workbook,this._inheritStyles([l,o,R,P,m])),this._indentHeadStyle=this._parseStyles(this._workbook,D),this._indentFootStyle=this._parseStyles(this._workbook,T),this._indentBarStyle=this._parseStyles(this._workbook,L),this._dynamicStyles={}},i.prototype._exportGridAsync=function(t,e,i,r){if(void 0===r&&(r=null),i<e.exportGrids.length){var o=e.exportGrids[i];setTimeout(function(){this._exportGrid(t,o.options,function(){r()}.bind(this))}.bind(this))}},i.prototype._exportGrid=function(t,e,i){var r=e.grid;this._preparer=new uc(r,e),this._exportOptions=e,this.indicator=e.indicatorVisible(r)?r.rowIndicator:null,this.checkBar=e.checkBarVisible(r)?r.checkBar:null,this.header=e.headerVisible(r)?r.header:null,this.headerSummary=e.headerSummaryVisible(r)?r.headerSummary:null,this.footer=e.footerVisible(r)?r.footer:null,this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=e.sheetName,this._workbook=t,this.allItems=null,this.buildBook(function(){this._preparer&&this._preparer.dispose(),i&&i()}.bind(this))},i.prototype._changeFormatId=function(t,e,i){return t.changeFormatId(e,i)},i.prototype._parseStyles=function(t,e,i){return t.addStyle(e,!0,!0,!0,i)},i.prototype._extendStyles=function(t,e,i,r,o,n){return void 0===r&&(r=!0),t.extendStyle(e,i,r,o,n)},i.prototype.$_summaryStyleSet=function(t,e,i){var r=this._exportOptions,o=this._workbook,n=void 0;if(e){var s=e.exportStyleName||e.styleName,a=void 0;if(r.applyDynamicStyles)if(t instanceof ys){var l=new wn;s=(a=t.getCellStyle(t.getCell(e.column.layout),l,!1)).exportStyleName||a.styleName||s}else t instanceof Th&&(l=new Rn,s=(a=this.grid.rowGroup.getFooterCellStyle(t,l,!1)).exportStyleName||a.styleName||s);var u=void 0,h=void 0;if((u=a&&a.numberFormat||e.numberFormat)?u=hc.convertNumberFormat(u):(u=a&&a.datetimeFormat||e.datetimeFormat)&&(u=hc.convertDateFormat(u)),u&&((h=e.prefix)&&(u='"'+h+'"'+u),(h=e.suffix)&&(u=u+'"'+h+'"'),n=o.addNumberFormat(u)),s||void 0!==n){for(var c=this._preparer.documentCssStyles,d=s?s.trim().split(" "):[],p=[],f=0,_=d.length;f<_;f++)p.push(lc.getSelectorStyle(c,"."+d[f]));if(e.$_owner.type){var g=e.$_owner.type+"=styleName="+s+"formatId="+n,y=this._dynamicStyles;return y[g]||(y[g]=this._extendStyles(o,i,this._inheritStyles(p),!0,n)),y[g]}return this._extendStyles(o,i,this._inheritStyles(p),!0,n)}}return i},i.prototype._buildColumns=function(e){for(var r,o,n,s=this._exportOptions,a=this._workbook,l=a.currentSheet,u=this._preparer,h=0;h<this._startCol;h++)l.addColumn(-1,s.xOffsetWidth/i.PIXELS_PER_CHAR,null);if(this.indicator&&(n=Math.round(e.rowIndicator.minWidth/i.PIXELS_PER_CHAR),l.addColumn(e.rowIndicator.$_hash,n,null)),this.checkBar&&(n=Math.round(e.checkBar.width/i.PIXELS_PER_CHAR),l.addColumn(e.checkBar.$_hash,n,null)),s.indenting&&(e instanceof ad&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(e.rowGroup.expandedAdornments===t.RowGroupAdornments.SUMMARY?0:1):e instanceof pp&&(this._indents=this._rowLevels-1),this._indents>0))for(h=0;h<this._indents;h++)n=Math.max(this._indentWidth,1),l.addColumn(-1,n,null);var c=e.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};var d=u.colCount,p=u.dataRowCount,f=!1;for(h=0;h<p;h++)for(var _=0;_<d;_++){var g=u.getItem(h,_).layout;if(r=g.firstColumn,0===h&&(n=Math.round(g._cellWidth/i.PIXELS_PER_CHAR),l.addColumn(r.$_hash,n,null,s.hiddenColumns.indexOf(r.name)>=0)),o=r.$_hash,!this._columnStyles[o]){var y=e.dataSource;if(r instanceof Tn){var m=s.exportLink&&r.renderer&&r.renderer.type==Oo.TYPE&&!r.excelFormat,b=y.getField(r.dataIndex),v=this._textFormatId,w=b?b.dataType:t.ValueType.TEXT;w===t.ValueType.NUMBER?v=this._numberFormatId:w===t.ValueType.DATETIME&&(v=this._dateFormatId);var C=r.excelFormat,x=void 0;null!=C?v="number"==typeof C||parseInt(C)>0?parseInt(C):a.addNumberFormat(C):m?v=0:(w==t.ValueType.NUMBER?"string"==typeof(C=null===r.numberFormat?void 0:r.numberFormat||s.numberFormat||c.numberFormat)&&(C=hc.convertNumberFormat(C)):w==t.ValueType.DATETIME&&"string"==typeof(C=r.datetimeFormat||s.datetimeFormat||c.datetimeFormat)&&(C=hc.convertDateFormat(C)),C&&((x=r.prefix)&&(C='"'+x+'"'+C),(x=r.suffix)&&(C=C+'"'+x+'"'),v=a.addNumberFormat(C))),this._columnStyles[o]=this._changeFormatId(a,g.isFixed?this._fixedCellStyle:this._bodyCellStyle,v),this._columnFixedStyles[o]=this._changeFormatId(a,this._bodyFixedCellStyle,v),this._columnFooterStyles[o]=[],this._columnSummaryStyles[o]=[],this._columnGroupFooterStyles[o]=[];for(var I=0;I<e.footers.visibleCount;I++){var S=e.footers.getVisible(I),E=r.footers.get(S._childIndex);this._columnFooterStyles[o][I]=this.$_summaryStyleSet(S,E,this._footerCellStyles[I])}for(I=0;I<e.headerSummaries.visibleCount;I++){var k=e.headerSummaries.getVisible(I),O=r.headerSummaries.get(k._childIndex);this._columnSummaryStyles[o][I]=this.$_summaryStyleSet(k,O,this._summaryCellStyles[I])}if(e instanceof ad)for(I=0;I<e.rowGroup.footers.count;I++){var R=e.rowGroup.footers.get(I),P=r.groupFooters.get(R.index);this._columnGroupFooterStyles[o][I]=this.$_summaryStyleSet(null,P,this._groupFooterCellStyles[I])}}e instanceof ad&&(s.separateRows||s.onlyCheckedItems&&!e.rowGrouped||r instanceof Tn&&(r.mergeRule||e.rowGroup.mergeMode&&e.isGroupedColumn(r))&&(f=!0))}}this._columnMerged=f},i.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){for(var r=this._currentRow,o=this._startCol,n=void 0,s=t.currentSheet,a=0;a<e.spaceTop;a++){n=s.addRow(r+a,void 0);for(var l=0;l<i;l++)n.addBlank(o+l,void 0)}r+=e.spaceTop;var u=e.message,h=void 0;if(e.styleName){var c=this._preparer.documentCssStyles,d=[];e.styleName.split(" ").forEach((function(t){d.push(lc.getSelectorStyle(c,"."+t))})),h=this._parseStyles(t,this._inheritStyles(d),!0)}else h=this._parseStyles(t,e.cssStyle,!0);for(n=s.addRow(r,e.height),a=0;a<i;a++)0==a?(n.addText(o,u,h),s.addMerge(r,o,1,i)):n.addBlank(o+a,h);for(r++,a=0;a<e.spaceBottom;a++)for(n=s.addRow(r+a,void 0),l=0;l<i;l++)n.addBlank(o+l,void 0);r+=e.spaceBottom,this._currentRow=r}},i.prototype._buildDocumentTitle=function(t){var e=this._exportOptions,i=t,r=this._preparer.colCount;this.indicator&&r++,this.checkBar&&r++,r+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTitle,r),this._buildTitleCommon(i,e.documentSubtitle,r)},i.prototype._buildDocumentTail=function(t){var e=this._exportOptions,i=t,r=this._preparer.colCount;this.indicator&&r++,this.checkBar&&r++,r+=Math.max(this._indents,0),this._buildTitleCommon(i,e.documentTail,r)},i.prototype._buildIndicatorCell=function(t,e,i,r,o,n,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(n,r,a),s>1){for(var l=1;l<s;l++)i[l].addBlank(n,a);e.addMerge(o,n,s,1)}},i.prototype._buildCheckBarCell=function(t,e,i,r,o,n,s){var a=this._checkBarCellStyle,l=Array.isArray(i)?i[0]:i,u=this._exportOptions.checkMark;if(l.addText(n,r?u:"",a),s>1){for(var h=1;h<s;h++)i[h].addBlank(n,a);e.addMerge(o,n,s,1)}},i.prototype._buildValueCell=function(e,i,r,o,n,s,a){void 0===a&&(a=0);var l,u,h=this._workbook,c=o.index>=0&&o.index<e.fixedOptions.rowCount,d=e.body,p=this._exportOptions,f=os.tempItem(e,o,n),_=n.firstColumn,g=d.getRowStyle(o,c,!0,p.applyDynamicStyles),y=g.exportStyleName||g.styleName,m=_.exportStyleName||_.styleName;p.applyDynamicStyles&&(u=d.getIndexCellStyle(f,!1));var b,v=u&&u.renderer||_.renderer,w=(!n.isFixed&&c?this._columnFixedStyles[_.$_hash]:this._columnStyles[_.$_hash])||this._bodyCellStyle;if(p.applyFixed&&(!e.isTree()&&c&&i.setFixedInfo(r.index+1,void 0),n.$_fixed&&i.setFixedInfo(void 0,s+1)),_.blankWhenExport)r.addBlank(s,w);else if(_ instanceof Tn){var C=_.dataIndex,x=u&&u.cellProtectProps||_.cellProtectProps,I=e.dataSource.getField(C),S=p.exportLink&&!_.excelFormat&&_.renderer&&_.renderer.type==Oo.TYPE,E=p.exportTemplate&&_.renderer&&_.renderer.type===No.TYPE,k=!1!==p.exportImage&&v&&(v.type===wo.TYPE||v.type===xo.TYPE),O=(k=k&&(p.exportImage?!1!==v.exportImage:!!v.exportImage))&&v.type===xo.TYPE,R=k&&v.type===wo.TYPE,P=void 0;if(I){var D=o.getData(C);if(P=_.displayCallback,y||m||u||x){var T=void 0,L=void 0,M=[n.isFixed?this._fixedCellCssStyle:this._cellCssStyle];if(u&&"object"==typeof u){var F=u;T="string"==typeof(T=u.exportStyleName||u.styleName||m)?T:void 0;var N=void 0;if(L=u.excelFormat);else if(I.dataType==t.ValueType.NUMBER?L=(N=F.numberFormat)?hc.convertNumberFormat(N):void 0:I.dataType==t.ValueType.DATETIME&&(L=(N=F.datetimeFormat)?hc.convertDateFormat(N):void 0),L){var V=F.prefix;V&&(L='"'+V+'"'+L);var B=F.suffix;B&&(L=L+'"'+B+'"')}}else T="string"==typeof u?u:void 0;var A=this._preparer.documentCssStyles,$=this._dynamicStyles;if($[J=_.$_hash+"="+y+"="+m+"="+JSON.stringify(u)+"="+JSON.stringify(x)+"="+!0])w=$[J];else{var j=[];if(y){var H=y.trim().split(" ");Array.prototype.push.apply(j,H),n.isFixed&&H.forEach((function(t){j.push("rg-fixed-body ."+t)}))}m&&Array.prototype.push.apply(j,m.trim().split(" ")),T&&Array.prototype.push.apply(j,T.trim().split(" "));for(var W=0,G=j.length;W<G;W++)M.push(lc.getSelectorStyle(A,"."+j[W]));var U=void 0;L&&(U=h.addNumberFormat(L)),b=this._inheritStyles(M),S&&(b["font-decoration"]="underline",b.color="blue");var z=b.whiteSpace||b["white-space"],Y=null!=z&&"none"!=z&&"nowrap"!=z;w=this._extendStyles(h,w,b,Y,U,x),this._dynamicStyles[J]=w}}switch(I.dataType){case"number":(p.numberCallback||P)&&(D=p.numberCallback?p.numberCallback(o.index,_.name,D):P(e.handler,f.proxy(),D));var q=_.excelFormulaExprStatement,K=void 0;if(q){var X=this._excelFormulaRuntime;X.setItemIndex(r.index,a),X.setColumns(this._preparer._dataCells[r._row]),K=q.evaluate(X)}null!=D||K?"number"==typeof D?r.addNumber(s,D,w,K):r.addText(s,D,w):r.addBlank(s,w);break;case"datetime":case"date":D?p.datetimeCallback||P?(D=p.datetimeCallback?p.datetimeCallback(o.index,_.name,D):P(e.handler,f.proxy(),D))instanceof Date?r.addDate(s,D,w):r.addText(s,D,w):r.addDate(s,D,w):p.nullDateText?r.addText(s,p.nullDateText,w):r.addBlank(s,w);break;case"boolean":p.booleanCallback||P?(D=p.booleanCallback?p.booleanCallback(o.index,_.name,D):P(e.handler,f.proxy(),D),r.addText(s,D,w)):p.booleanFormatter?(D=p.booleanFormatter.formatValue(D),r.addText(s,D,w)):r.addBool(s,D,w);break;default:if(l=D||"",p.lookupDisplay&&(_.labelField||_.lookupDisplay))l=Yr.getText(o,_);else if(I.dataType===t.ValueType.OBJECT&&"object"==typeof D){var Q=_.objectKey||_.objectCallback,J=Q?_.objectKey:I.objectKey,Z=Q?_.objectCallback:I.objectCallback;l=Z&&"function"==typeof Z?Z(I.orgFieldName,o.dataRow,D):J&&D.hasOwnProperty(J)?D[J]:JSON.stringify(D)}else if(E){this._templateRenderer?this._templateRenderer.clearAndAssignFrom(_.renderer):this._templateRenderer=e.delegate.createRenderer(No.TYPE,_.renderer,null);var tt=this._templateRenderer._parser,et=_.renderer.callback,it=e.body.getCell(f,!1),rt=et?et.call(this,e.handler,it,-1,-1):tt.realize(e,it,null,this._templateRenderer.valueCallback);l=rt?rt.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""}else null!=D&&(l=_.textFormatter?_.textFormatter.getText(D):l);if("number"==typeof(l=p.textCallback?p.textCallback(o.index,_.name,l):P&&!_.textFormatter?P(e.handler,f.proxy(),D):l))r.addNumber(s,l,w);else if(l&&S)if(it=e.body.getCell(f,!1),this._linkRenderer?(this._linkRenderer.initOptions(),this._linkRenderer.assignFrom(_.renderer)):this._linkRenderer=e.delegate.createRenderer(Oo.TYPE,_.renderer,null),at=this._linkRenderer){var ot=at.$_getUrl(e,it);r.addLink(s,l,ot,w)}else r.addText(s,l,w);else if(R){it=e.body.getCell(f,!1),this._imageRenderer?(this._imageRenderer.initOptions(),this._imageRenderer.assignFrom(v)):this._imageRenderer=e.delegate.createRenderer(wo.TYPE,v,null);var nt=(at=this._imageRenderer).$_getImageUrl(e,it),st=i.getColumnWidth(it.dataColumn.$_hash);nt?r.addImage(s,l,st,t.IconLocation.CENTER,nt,w,-1,at.imageHeight):r.addText(s,l,w)}else if(O){var at;it=e.body.getCell(f,!1),this._iconRenderer?(this._iconRenderer.initOptions(),this._iconRenderer.assignFrom(v)):this._iconRenderer=e.delegate.createRenderer(xo.TYPE,v,null),nt=(at=this._iconRenderer).$_getIconUrl(e,it),st=i.getColumnWidth(it.dataColumn.$_hash),nt?r.addImage(s,l,st,at.iconLocation,nt,w,at.iconWidth,at.iconHeight):r.addText(s,l,w)}else l?r.addText(s,l,w):r.addBlank(s,w)}}else r.addBlank(s,w)}else if(_ instanceof Ln){var lt=_.renderer;if(lt&&lt.type&&lt.type!=Ba.TYPE){var ut=this._preparer;p.exportSeriesColumn&&Aa.interfaced(lt)&&ut.sparkColumns[_.$_hash]?r.addSparkLine(s,a,ut.sparkColumns[_.$_hash],w):r.addBlank(s,w)}else{this._seriesCell.setIndex(f);var ht=this._seriesCell.value;ht?(N=Xr.getText(ht,","),r.addText(s,N,w)):r.addBlank(s,w)}}return w},i.prototype._buildUserCells=function(t,e){var i=this,r=this._exportOptions,o=e.currentSheet,n=r.userCellsCallback,s=r.userCells||n&&n(t.handler,o.rowCount,o.colCount,o.name);if(ft.isArray(s)){var a=this._dynamicStyles,l=this._preparer.documentCssStyles,u=o.workbook.styles._styles._items[0],h=t.doc.createElement("userCell").style;s.forEach((function(t){var r,n,s;if(t.format&&(s=e.addNumberFormat(t.format)),t.styleName){var c=t.styleName;r="userCells;styleName="+c+";formatId="+s;var d=c?c.trim().split(" "):[];if(!(n=a[r])){for(var p=[],f=0,_=d.length;f<_;f++)p.push(lc.getSelectorStyle(l,"."+d[f]));var g=i._inheritStyles(p);n=a[r]=i._parseStyles(e,g,!!g.whiteSpace&&null),s&&(n._formatId=s)}}else if(t.styles){var y=ft.objectToCssText(t.styles);(n=a[r="userCells;styleName="+y+";formatId="+s])||(h.cssText=y,n=a[r]=i._parseStyles(e,h,!!h.whiteSpace&&null),s&&(n._formatId=s))}else s&&((n=a[r="userCells;styleName=undefined;formatId="+s])||(n=a[r]=i._extendStyles(e,u,{},!1,s)));n=n||u;var m=t.mergeRow||1,b=t.mergeCol||1,v=ft.makeArray(t.heights,!0);for(f=0;f<m;f++)for(var w=0;w<b;w++){var C=o.borrowRow(t.row+f,v[f]||t.height||-1);if(0===f&&0===w){var x=t.value;switch(typeof x){case"string":C.addText(t.col,x,n);break;case"number":C.addNumber(t.col,x,n,t.formula);break;case"boolean":C.addBool(t.col,null==x?null:+x,n);break;default:x instanceof Date&&C.addDate(t.col,x,n)}}else C.addBlank(t.col+w,n)}m*b>1&&o.addMerge(t.row,t.col,m,b)}))}},i.CSS_HEAD="rg-header",i.CSS_FOOT="rg-footer",i.CSS_BODY="rg-body",i.CSS_FIXED="rg-fixed-body",i.CSS_TABLE="rg-table",i.CSS_ROWGROUP_BAR="rg-rowgroup-bar",i.CSS_ROWGROUP_HEAD="rg-rowgroup-head",i.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",i.CSS_HEAD_CELL="rg-header-cell",i.CSS_INDICATOR="rg-rowindicator-cell",i.CSS_CHECK="rg-checkbar-cell",i.CSS_DATA_ROW="rg-data-row",i.PIXELS_PER_CHAR=7,i.LINE_HEIGHT=.75,i}(tc),yp=function(){function t(){}return t.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof Pn)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},t.getItemProxy=function(e,i){var r=e.parent,o={type:void 0,id:e.id,parentId:null==r?-1:r.id,itemIndex:e.index,index:e.index,dataRow:-1,checked:e.checked};return i&&(o.childIndex=e.childIndex,o.level=e.level),e instanceof yr?(o.type="row",o.dataRow=e.dataRow):e instanceof mr?(o.count=e.children.length,o.expanded=e.expanded,e instanceof br||e instanceof ln?(o.type="group",o.footerId=e.footer?e.footer.id:-1,e instanceof wr||i&&(o.firstItem=t.getItemProxy(e.firstItem),o.firstDataItem=t.getItemProxy(e.firstDataItem),o.dataRows=e.getRows())):e instanceof Go&&(o.type="tree",o.dataRow=e.dataRow?e.dataRow:-1)):e instanceof vr&&(o.type="footer"),o},t.getItemIndices=function(t){for(var e=[],i=0,r=t.length;i<r;i++)e.push(t[i].index);return e},t.getValues=function(t,e){var i={},r=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(e.dataRow>=0){if(e instanceof Go){var o=e.row,n=o.values;i.__rowId=o.rowId;for(var s=0,a=r.fieldCount;s<a;s++)i[r.getOrgFieldName(s)]=n[s]}else(i=r.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},t.getDisplayValues=function(t,e,i){var r=t.getDataColumns();if(e){for(var o=i?{}:e.getRowObject(),n=new Rn,s=0,a=r.length;s<a;s++){var l=r[s],u=e.index>=0?rs.temp(t,e.index,l):os.tempItem(t,e,l),h=t.body.getCell(u,!1);h._index=u,n.clear(),n.assign(l),t.body.getCellStyle(h,n);var c=n.toFormatter(null);o[i?l.name:l.fieldName]=Yr._getDisplayText(t,e,l,e.getData(l.dataIndex),c)}return o}},t.setValues=function(t,e,i,r){var o,n,s,a=e.dataSource,l=a.fieldCount;if(t.isItemEditing(e))if(e)e.values=i;else for(var u=0;u<l;u++){var h=a.getOrgFieldName(u);i.hasOwnProperty(h)&&e.setData(u,i[h])}else if((s=e.dataRow)>=0)if(a instanceof Xi){var c=a.rowById(s);if(c){if(o=c.values||[],Array.isArray(i)){u=0;for(var d=i.length;u<d&&!(n=!a.getField(u).equalValues(o[u],i[u]));u++);}else for(u=0;u<l&&(h=a.getOrgFieldName(u),!i.hasOwnProperty(h)||!(n=!a.getField(u).equalValues(o[u],i[h])));u++);if(!n)return;c.update(i,r)}}else if(a instanceof Ii){if(o=a.getRow(s),Array.isArray(i))for(u=0,d=i.length;u<d&&!(n=!a.getField(u).equalValues(o[u],i[u]));u++);else for(u=0;u<l&&(h=a.getOrgFieldName(u),!i.hasOwnProperty(h)||!(n=!a.getField(u).equalValues(o[u],i[h])));u++);if(!n)return;a.updateRow(s,i,r)}},t}(),mp=function(){function e(t,e,i){this.onViewActivated=null,this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onTopIndexChanging=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionCleared=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this._view=this._createView(t,e,i),this._listener=this._createListener(this._view)}return e.prototype.dispose=function(){this._view.dispose(),this._view=null,this._container&&this._container.dispose(),this._container=null},Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._view.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._view.redoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(t){this._view.scrollBarWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(t){this._view.scrollBarHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedOptions",{get:function(){return this._view.fixedOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayOptions",{get:function(){return this._view.displayOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatOptions",{get:function(){return this._view.formatOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editOptions",{get:function(){return this._view.editOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorOptions",{get:function(){return this._view.editorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyOptions",{get:function(){return this._view.copyOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pasteOptions",{get:function(){return this._view.pasteOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortingOptions",{get:function(){return this._view.sortingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteringOptions",{get:function(){return this._view.filteringOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mobileOptions",{get:function(){return this._view.mobileOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataDropOptions",{get:function(){return this._view.dataDropOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formOptions",{get:function(){return this.formView.options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowIndicator",{get:function(){return this._view.rowIndicator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateBar",{get:function(){return this._view.stateBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBar",{get:function(){return this._view.checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._view.header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._view.footer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footers",{get:function(){return this._view.footers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._view.headerSummary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._view.headerSummaries},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterPanel",{get:function(){return this._view.filterPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formView",{get:function(){return this._view.container.formView},enumerable:!0,configurable:!0}),e.prototype.ping=function(t){this._view instanceof Zh&&alert(t)},e.prototype.refresh=function(t){this._view.refreshView(t)},e.prototype.beginUpdate=function(){this._view.beginUpdate()},e.prototype.endUpdate=function(t){this._view.endUpdate(t)},e.prototype.isVisible=function(){return this._view.visible},e.prototype.setVisible=function(t){this._view.visible=t},e.prototype.getItemCount=function(){return this._view.itemCount},e.prototype.getDataRow=function(t){var e=this._view.getItem(t);return e?e.dataRow:-1},e.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,r=t.length;i<r;i++){var o=this._view.getItem(t[i]);o&&e.push(o.dataRow)}return e},e.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},e.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},e.prototype.removeColumn=function(t){return this._view.removeColumn(t)},e.prototype.restoreColumns=function(){this._view.restoreColumns()},e.prototype.getDataSource=function(){return this._dataDelegator},e.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},e.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},e.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries&&this.setHeaderSummaries(t.headerSummaries))},e.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},e.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},e.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},e.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},e.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},e.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},e.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},e.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},e.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},e.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},e.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},e.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},e.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},e.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},e.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},e.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},e.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},e.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},e.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},e.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},e.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},e.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},e.prototype.getFormOptions=function(){return this.formView.options.toProxy()},e.prototype.setFormOptions=function(t){this.formView.options.assignFrom(t)},e.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},e.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},e.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},e.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},e.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},e.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},e.prototype.getHeader=function(){return this._view.header.toProxy()},e.prototype.setHeader=function(t){this._view.header.assignFrom(t)},e.prototype.getFooter=function(){return this._view.footer.toProxy()},e.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},e.prototype.getFooters=function(){return this._view.footers.toProxy()},e.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},e.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},e.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},e.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},e.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},e.prototype.setFilterPanel=function(t){this._view.filterPanel.assignFrom(t)},e.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},e.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},e.prototype.orderBy=function(e,i,r){if(e){var o=[],n=[],s=[];e=ft.makeArray(e,!1),i=ft.makeArray(i,!0),r=ft.makeArray(r,!0);for(var a=0,l=e.length;a<l;a++)o.push(this._view.columnByField(e[a])),n.push(i[a]||t.SortDirection.ASCENDING),s.push(r[a]||t.SortCase.SENSITIVE);this._view.orderBy(o,n,s)}},e.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),r=e.getSortDirections();if(i&&(t=i.length)>0){for(var o=this._dataProvider,n=[],s=0;s<t;s++)n.push({fieldName:o.getFieldName(i[s]),orgFieldName:o.getOrgFieldName(i[s]),direction:r[s]});return n}return null},e.prototype.setFocus=function(){this._view.setFocus()},e.prototype.getColumn=function(t){return this._view.getColumn(t)},e.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},e.prototype.setColumns=function(t){this._view.setColumns(t)},e.prototype.addColumn=function(t,e){this._view.addColumn(t,e)},e.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},e.prototype.layoutByName=function(t){return this._view.layoutByName(t)},e.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},e.prototype.columnByName=function(t){return this._view.columnByName(t)},e.prototype.columnByField=function(t){return this._view.columnByField(t)},e.prototype.columnByTag=function(t){return this._view.columnByTag(t)},e.prototype.columnsByTag=function(t){return this._view.columnsByTag(t)},e.prototype.getColumnProperty=function(t,e){var i=yp.getColumn(this._view,t);if(i&&e)return i[e]instanceof Ct?i[e].toProxy():i[e]},e.prototype.setColumnProperty=function(t,e,i){var r=yp.getColumn(this._view,t);r&&e&&(r[e]instanceof Ct?r[e].assignFrom(i):r[e]=i)},e.prototype.setColumn=function(t){var e=yp.getColumn(this._view,t);e&&e.assignFrom(t)},e.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},e.prototype.setColumnLayout=function(t){("string"!=typeof t||(t=this._view.findColumnLayout(t)))&&(this._view.cellLayout=t)},e.prototype.getLayoutByColumn=function(t){var e=this._view.layoutByColumn(t);return e?e.toProxy():null},e.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},e.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},e.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},e.prototype.fitLayoutWidth=function(t,e,i,r){var o;return t?t instanceof Fn?o=t:"string"==typeof t?o=this.layoutByName(t):t.name&&(o=this.layoutByColumn(t.name)):null==t&&(o=this._view.activeCellLayout._root),o&&this._view.fitLayoutWidth(o,e,i,r)},e.prototype.setRowHeight=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this._view.setRowHeight(t,e,i)},e.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);if(isNaN(e)){var i=this._view.getItem(t);e=this._view.layoutManager.getItemHeight(i)}return e},e.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},e.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},e.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},e.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},e.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},e.prototype.mouseToIndex=function(t,e){var i=this._view.pointToIndex(null,t,e,!1);return i?i.proxy():null},e.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);var r=yp.getColumn(this._view,e),o=new rs(this._view,t,r);if(r&&o){var n=this._view.layoutManager,s=n.getBodyView(o),a=s.getCellRectAt(n,o,!0);if(a=a&&(i?s.boundsByScreen(a):s.boundsByContainer(a)))return{x:a.x,y:a.y,width:a.width,height:a.height}}return null},e.prototype.getIndexOfElement=function(t){var e=this._view.getCellViewOf(t),i=this._view.getDataCellIndex(e);return i?i.proxy():null},e.prototype.setColumnFilters=function(t,e){var i=yp.getColumn(this._view,t);i instanceof Tn&&i.setFilters(e)},e.prototype.clearColumnFilters=function(t){var e=yp.getColumn(this._view,t);e instanceof Tn&&e.clearFilters()},e.prototype.addColumnFilters=function(t,e,i){var r=yp.getColumn(this._view,t);r instanceof Tn&&r.addFilters(e,i)},e.prototype.removeColumnFilters=function(t,e){var i=yp.getColumn(this._view,t);i instanceof Tn&&i.removeFilters(e)},e.prototype.activateColumnFilters=function(t,e,i){var r=yp.getColumn(this._view,t);r instanceof Tn&&r.activateFilters(e,i)},e.prototype.activateAllColumnFilters=function(t,e){var i=yp.getColumn(this._view,t);i instanceof Tn&&i.activateAllFilters(e)},e.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);var r=yp.getColumn(this._view,t);r instanceof Tn&&(r.hideColumnFilters(e,i),this._view.closePopups())},e.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);var i=yp.getColumn(this._view,t);i instanceof Tn&&(i.hideAllColumnFilters(e),this._view.closePopups())},e.prototype.toggleColumnFilters=function(t,e){var i=yp.getColumn(this._view,t);i instanceof Tn&&i.toggleFilters(e)},e.prototype.toggleAllColumnFilters=function(t){var e=yp.getColumn(this._view,t);e instanceof Tn&&e.toggleAllFilters()},e.prototype.getColumnFilter=function(t,e){var i=yp.getColumn(this._view,t);return i instanceof Tn&&i.getFilter(e)?i.getFilter(e).toProxy():null},e.prototype.getColumnFilters=function(t){var e=yp.getColumn(this._view,t);if(e instanceof Tn){for(var i=e.autoFilter?e.autoFilters.items:e.filters.items,r=[],o=0,n=i.length;o<n;o++)r.push(i[o].toProxy());return r}return null},e.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);var i=yp.getColumn(this._view,t);if(i instanceof Tn){for(var r=i.getActiveFilters(e),o=[],n=0,s=r.length;n<s;n++)o.push(r[n].toProxy());return o}return null},e.prototype.isFiltered=function(t){if(t){var e=yp.getColumn(this._view,t);return e instanceof Tn&&e.isFiltered()}var i=this._view.getFilteredColumns();return i&&i.length>0},e.prototype.autoFiltersRefresh=function(t,e){t=t?ft.makeArray(t):this._view.getChildColumnNames(null);for(var i=0;i<t.length;i++){var r=yp.getColumn(this._view,t[i]);r instanceof Tn&&r.autoFilterRefresh(e)}},e.prototype.getValues=function(t){var e=this._view.getItem(t);return e?yp.getValues(this._view,e):null},e.prototype.getDisplayValues=function(t,e){var i=this._view.getItem(t);if(i)return yp.getDisplayValues(this._view,i,e)},e.prototype.getDisplayValuesOfRow=function(t,e){var i=this._view.getItemOfRow(t,!0);if(i)return yp.getDisplayValues(this._view,i,e)},e.prototype.getJsonRows=function(){return this._view.getJsonRows()},e.prototype.setValues=function(t,e,i){var r=this._view.getItem(t);r&&yp.setValues(this._view,r,e,i)},e.prototype.getValue=function(t,e){var i;if(i=this._view._clipboardManager.isPasting?this._view._clipboardManager.appendingIndex.item:this._view.getItem(t)){var r="string"==typeof e?this._dataProvider.getFieldIndex(e):e;return i.getData(r)}return null},e.prototype.setValue=function(t,e,i){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(t,e,i)},e.prototype.getEditValue=function(){return this._view.getEditCellValue()},e.prototype.setEditValue=function(t,e,i){void 0===i&&(i=!0),this._view.setEditCellValue(t,e,i)},e.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},e.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},e.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},e.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},e.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},e.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},e.prototype.setContextMenu=function(t){this._view.setContextMenu(t)},e.prototype.getSelection=function(t){void 0===t&&(t=0);var e=this._view.getSelection(t);return e?e.toProxy():null},e.prototype.getSelections=function(){var t=this._view.getSelections(),e=[];return t.forEach((function(t){e.push(t.toProxy())})),e},e.prototype.setSelection=function(t){t.style&&"string"==typeof t.style&&(this._view.clearAddSelection(!0,!1),this.addSelection(t))},e.prototype.addSelection=function(e){if(e.style&&"string"==typeof e.style){var i,r,o=ft.valueIn(e.style,t.SelectionStyle)?e.style:t.SelectionStyle.BLOCK,n=0,s=0;if(e.hasOwnProperty("startItem"))s=n=e.startItem;else if(e.hasOwnProperty("startRow"))s=n=this._view.getItemIndexOfRow(e.startRow);else if("singleColumn"!=o&&"columns"!=o)return;if(e.hasOwnProperty("endItem"))s=e.endItem;else if(e.hasOwnProperty("endRow"))s=this._view.getItemIndexOfRow(e.endRow);else if("singleColumn"!=o&&"columns"!=o)return;i=yp.getColumn(this._view,e.startColumn),r=yp.getColumn(this._view,e.endColumn);var a=new rs(this._view,n,i),l=new rs(this._view,s,r);this._view.selections.add(a,l,o)}},e.prototype.clearSelection=function(){this._view.clearAddSelection()},e.prototype.removeSelection=function(t){var e=this._view.selections.getItem(t);e&&this._view.selections.remove(e)},e.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},e.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},e.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},e.prototype.eraseSelection=function(){this._view.eraseSelection()},e.prototype.getSelectionData=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=0),e>=0&&e<this._view.selections.count?this._view.selections.getItem(e).getData(t):null},e.prototype.getSelectionsData=function(){var t=[],e=this._view.selections.getItems(),i={};return e.forEach((function(t){t.getData(-1).forEach((function(t){var e=t.__rowId;e>=0&&(i[e]=i[e]||{},ft.extendObj(t,i[e]))}))})),Object.keys(i).forEach((function(e){t.push(i[e])})),t},e.prototype.copyToClipboard=function(t,e){return void 0===e&&(e=!0),this._view.toClipboard(t,e)},e.prototype.commitEditor=function(t){void 0===t&&(t=!0),this._view.commitEditor(t)},e.prototype.commit=function(t){return this._view.commit(t)},e.prototype.cancel=function(){return this._view.cancel()},e.prototype.fillEditSearchItems=function(t,e,i,r){var o=yp.getColumn(this._view,t);this._view.fillEditSearchItems(o,e,i,r)},e.prototype.isItemEditing=function(){return this._view.isItemEditing()},e.prototype.isEditing=function(){return this._view.isEditing()},e.prototype.showEditor=function(t){void 0===t&&(t=!1),this._view.showEditor(null,null,t)},e.prototype.hideEditor=function(){this._view.hideEditor(!0)},e.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},e.prototype.setValidations=function(t){this._view.validations=t},e.prototype.validateCells=function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=!1),this._view.validateCells(t,e,i)},e.prototype.getInvalidCells=function(){return this._view.getInvalidCells()},e.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},e.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},e.prototype.getItemState=function(e){var i=this._view.getItem(e);if(i){var r=i.itemState;return r==t.ItemState.NORMAL&&this._view.focusedIndex.itemIndex==i.index&&(r=t.ItemState.FOCUSED),r}return null},e.prototype.showToast=function(t,e){this._view.showToast(t,e)},e.prototype.hideToast=function(t){this._view.hideToast(t)},e.prototype.setLookups=function(t){this._view.setLookups(t)},e.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},e.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},e.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},e.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},e.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},e.prototype.isCheckable=function(t){return this._view.isCheckable(t)},e.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},e.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},e.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},e.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},e.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},e.prototype.checkItem=function(t,e,i,r){void 0===e&&(e=!0),void 0===r&&(r=!0),this._view.checkItem(t,e,i,r)},e.prototype.checkRow=function(t,e,i,r){void 0===e&&(e=!0),void 0===r&&(r=!0),this._view.checkRow(t,e,i,r)},e.prototype.checkItems=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkItems(t,e,i)},e.prototype.checkRows=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkRows(t,e,i)},e.prototype.checkAll=function(t,e,i,r){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this._view.checkAll(t,e,i,r)},e.prototype.setAllCheck=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.setAllCheck(t,e)},e.prototype.isAllChecked=function(){return this._view.allChecked},e.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},e.prototype.applyCheckables=function(){this._view.applyCheckables()},e.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},e.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},e.prototype.getSummary=function(t,e){var i=this._view.summarizer,r="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==r)return null;switch(e){case"count":return i.getCount(r);case"sum":return i.getSum(r);case"max":return i.getMax(r);case"min":return i.getMin(r);case"avg":return i.getAvg(r);case"var":return i.getVar(r);case"varp":return i.getVarp(r);case"stdev":return i.getStdev(r);case"stdevp":return i.getStdevp(r);case"datacount":return i.getDataCount(r);case"dataavg":return i.getDataAvg(r)}},e.prototype.getModel=function(t,e){var i=this._view.getItem(t);return i&&yp.getItemProxy(i,e)},e.prototype.getModelAs=function(t,e,i){var r=this._view.getItem(t);switch(e){case"row":r=ft.cast(r,yr);break;case"group":r=ft.cast(r,mr);break;case"footer":r=ft.cast(r,vr);break;case"tree":r=ft.cast(r,Go)}return r?yp.getItemProxy(r,i):null},e.prototype.getGroupModel=function(t,e){var i=this._view.getItem(t);return!i||i instanceof mr||(i=i.parent instanceof wr?null:i.parent),i?yp.getItemProxy(i,e):null},e.prototype.getRootModel=function(t,e){if(!t||!this._view.isTree()&&!this._view.rowGrouped)return null;if(t){var i=this._view.getItem(t.index);if(i)return i.root?yp.getItemProxy(i.root,e):null}return null},e.prototype.getModels=function(t,e){if(t=ft.makeArray(t)){for(var i=[],r=0,o=t.length;r<o;r++){var n=this._view.getItem(t[r]);n&&i.push(yp.getItemProxy(n,e))}return i}},e.prototype.getModelOfRow=function(t,e){var i=this._view.getItemOfRow(t,!1);return i?yp.getItemProxy(i,e):null},e.prototype.getModelsOfRows=function(t,e){if(t=ft.makeArray(t)){for(var i=[],r=0,o=t.length;r<o;r++){var n=this._view.getItemOfRow(t[r],!1);n&&i.push(yp.getItemProxy(n,e))}return i}},e.prototype.getParentModel=function(t,e){var i;return t&&(i=this._view.getItemOfModel(t)),!i||i instanceof Sr||!this._view.isTree()&&!this._view.rowGrouped?null:yp.getItemProxy(i.parent,e)},e.prototype.getChildModel=function(t,e,i){var r=t&&this._view.getItemOfModel(t);if(r instanceof mr){var o=r.getItem(e);return o?yp.getItemProxy(o,i):null}return null},e.prototype.getChildModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof mr){for(var r=[],o=0,n=i.count;o<n;o++)r.push(yp.getItemProxy(i.children[o],e));return r}return null},e.prototype.getDescendantModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof mr){var r=i.getDescendants(!1),o=[];if(r)for(var n=0,s=r.length;n<s;n++)o.push(yp.getItemProxy(r[n],e));return o}return null},e.prototype.getGroupSummary=function(t,e,i){if(t){var r=this._view.getItemOfModel(t),o="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(r instanceof mr&&o>=0){var n={count:r.getNumber(o),sum:r.getSum(o),max:r.getMax(o),min:r.getMin(o),avg:r.getAvg(o),datacount:r.getDataCount(o),dataavg:r.getSum(o)/r.getDataCount(o)};return i&&(n.var=r.getVar(o,1),n.varp=r.getVar(o,0),n.stdev=r.getStdev(o,1),n.stdevp=r.getStdev(o,0)),n}}return null},e.prototype.getDistinctItemValues=function(e,i,r){return void 0===i&&(i=-1),void 0===r&&(r=t.SortDirection.ASCENDING),e=this._dataProvider.getFieldIndex(e),this._view.getDistinctItemValues(e,i,r)},e.prototype.showProgress=function(){this._view.showProgress()},e.prototype.setProgress=function(t,e,i,r){this._view.setProgress(t,e,i,r)},e.prototype.closeProgress=function(){this._view.closeProgress()},e.prototype.showLoading=function(t){this._view.showLoading(t)},e.prototype.closeLoading=function(){this._view.hideLoading()},e.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},e.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},e.prototype.resetSize=function(t){this._view.container.resetSize(t)},e.prototype.closeList=function(){this._view.closePopups()},e.prototype.exportGrid=function(t){if("csv"===t.type){var e=new rc(t);(new ec).export(this._view,e)}else"excel"===t.type&&(e=new oc(this._view,t),(new gp).export(this._view,e))},e.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(da.PAGE,t,0)},e.prototype.getTopItem=function(){return this._view.topIndex},e.prototype.setTopItem=function(t){void 0===t&&(t=0),this._view.topIndex=t},e.prototype.getLeftPos=function(){return this._view.leftPos},e.prototype.setLeftPos=function(t){this._view.leftPos=t},e.prototype.setLeftCol=function(t){this._view.leftCell=t},e.prototype.getContainer=function(){return this._view.container._containerDiv},e.prototype.destroy=function(){this.dispose()},e.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},e.prototype.undo=function(){return this._view.undo()},e.prototype.redo=function(){return this._view.redo()},e.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._view.clearCommandStack(t)},e.prototype._getView=function(){return this._view},e}(),bp=function(t){function e(e,i,r){var o=t.call(this,e,i,r)||this;return o.onPageChanging=null,o.onPageChanged=null,o.onPageCountChanged=null,o.onGrouping=null,o.onGrouped=null,o.onExpanding=null,o.onExpanded=null,o.onCollapsing=null,o.onCollapsed=null,i&&(o.shadowDom=o._view._shadowDom),o}return r(e,t),Object.defineProperty(e.prototype,"rowGroup",{get:function(){return this._view.rowGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupPanel",{get:function(){return this._view.groupPanelView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupingOptions",{get:function(){return this._view.groupingOptions},enumerable:!0,configurable:!0}),e.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},e.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},e.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},e.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},e.prototype.getOptions=function(){var e=t.prototype.getOptions.call(this);return e.grouping=this.groupingOptions,e.groupPanel=this.groupPanel,e},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e),e.grouping&&this._view.groupingOptions.assignFrom(e.grouping),e.groupPanel&&this._view.groupPanelView.assignFrom(e.groupPanel)},e.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},e.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},e.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},e.prototype.isGrouped=function(){return this._view.rowGrouped},e.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},e.prototype.getGroupFields=function(){return this._view.rowGroupFields},e.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var r=[],o=0,n=e.length;o<n;o++)r.push(t?i.getOrgFieldName(e[o]):i.getFieldName(e[o]));return r}return e}return null},e.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},e.prototype.getGroupLevel=function(t){return(t=this._dataProvider.getFieldIndex(t))>-1?this._view.getGroupLevel(t):-1},e.prototype.getGroupIndex=function(t){var e=this._view.getItem(t);if(e){var i=e.parent;return i?i.index:-1}return-1},e.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof mr},e.prototype.isParentVisible=function(t){var e=this._view.getItem(t);return e&&e.parent&&e.parent.visible},e.prototype.expandGroup=function(t,e,i,r){void 0===r&&(r=0);var o=this._view.getItem(t);o&&o instanceof mr&&this._view.expand(o,e,i,r)},e.prototype.collapseGroup=function(t,e,i){var r=this._view.getItem(t);r&&r instanceof mr&&this._view.collapse(r,e,i)},e.prototype.expandParent=function(t,e,i,r){void 0===r&&(r=0);var o=this._view.getItem(t);if(o){var n=o.parent;n&&n.expandable&&(n.collapsed||i)&&this._view.expand(n,e,i,r)}},e.prototype.collapseParent=function(t,e,i){var r=this._view.getItem(t);if(r){var o=r.parent;o&&o.collapsable&&o instanceof mr&&this._view.collapse(o,e,i)}},e.prototype.expandAll=function(t,e){void 0===t&&(t=!0),this._view.itemCount>0&&this._view.expandAll(t,e)},e.prototype.collapseAll=function(t){this._view.itemCount>0&&this._view.collapseAll(t)},e.prototype.layoutExpandAll=function(t){this._view.layoutExpandAll(!0,t)},e.prototype.layoutCollapseAll=function(t){this._view.layoutExpandAll(!1,t)},e.prototype.beginInsertRow=function(t,e){void 0===t&&(t=-1),this._view.insertAt(t,e)},e.prototype.beginAppendRow=function(){this._view.append()},e.prototype.beginUpdateRow=function(t){if(this._view.focusedIndex){var e=this._view.focusedIndex.clone();void 0!==t&&(e.itemIndex=t),this._view.edit(e)}},e.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._view.setPaging(t,e,i)},e.prototype.getPage=function(){return this._view.page},e.prototype.setPage=function(t,e){void 0===e&&(e=-1),this._view.setPage(t,e)},e.prototype.getPageCount=function(){return this._view.pageCount},e.prototype.setPageCount=function(t){this._view.pageCount=t},e.prototype.getPageOfDataRow=function(t){return this._view.getPageOfDataRow(t)},e.prototype.getCheckedItems=function(t){return void 0===t&&(t=!0),this._view.getCheckedItemIndices(!t)},e.prototype.getCheckedRows=function(t,e,i){return void 0===t&&(t=!0),this._view.getCheckedRows(t,e,i)},e.prototype.getMergedItems=function(t,e,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),this._view.getMergedItems(t,e,i,r)},e.prototype._createView=function(t,e,i){return(this._container=new Jd(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new Cp(this,t)},e}(mp),vp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onTreeItemExpanding=null,e.onTreeItemExpanded=null,e.onTreeItemCollapsing=null,e.onTreeItemCollapsed=null,e.onTreeItemChanged=null,e}return r(e,t),Object.defineProperty(e.prototype,"treeOptions",{get:function(){return this._view.treeOptions},enumerable:!0,configurable:!0}),e.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},e.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},e.prototype.getParent=function(t){var e=this._view.getItem(t);return e?e.parentIndex:-1},e.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],r=0,o=e.count;r<o;r++)i.push(e.getItem(r).index);return i}return null},e.prototype.getDescendants=function(t){var e=this._view.getItem(t);if(e){for(var i=[],r=e.getDescendants(!1),o=0,n=r.length;o<n;o++)i.push(r[o].index);return i}return null},e.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);var i=this._view.getItem(t);if(i){for(var r=[],o=i.getAncestors(),n=0,s=o.length;n<s;n++)!e&&o[n]instanceof Uo||r.push(o[n].index);return r}return null},e.prototype.expand=function(t,e,i,r){void 0===r&&(r=0);var o=this._view.getItem(t);o&&this._view.expand(o,e,i,r)},e.prototype.expandModel=function(t,e,i,r){void 0===r&&(r=0);var o=this._view.getItemOfModel(t);o&&this._view.expand(o,e,i,r)},e.prototype.collapse=function(t,e){var i=this._view.getItem(t);i&&this._view.collapse(i,e)},e.prototype.collapseModel=function(t,e){var i=this._view.getItemOfModel(t);i&&this._view.collapse(i,e)},e.prototype.expandAll=function(t){void 0===t&&(t=0),this._view.expandAll(t)},e.prototype.collapseAll=function(){this._view.collapseAll()},e.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},e.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},e.prototype.checkChildren=function(t,e,i,r,o,n){void 0===n&&(n=!0);var s=this._view.getItem(t);s&&this._view.checkChildren(s,e,i,r,o,n)},e.prototype._createView=function(t,e,i){return(this._container=new hp(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new xp(this,t)},e}(mp),wp=function(e){function i(t,i){var r=e.call(this)||this;return r._del=t,r._view=i,r._view.addListener(r),r}return r(i,e),i.prototype.dispose=function(){this._view.removeListener(this),this._view=null,this._del=null},i.prototype.onGridBaseViewActivated=function(t,e){this._del.onViewActivated?this._del.onViewActivated(this._del,e):ft.log("onViewActivated",e)},i.prototype.onGridBaseCurrentChanging=function(t,e,i){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),i.proxy()):(ft.log("onCurrentChanging",e,i),!0)},i.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):ft.log("onCurrentChanged",e)},i.prototype.onGridBaseCurrentRowChanged=function(t,e,i){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,i):ft.log("onCurrentRowChanged",e,i)},i.prototype.onGridBaseValidateCell=function(e,i,r,o){if(this._del.onValidateColumn){var n=i.itemIndex,s=i.item&&i.item.dataRow,a=this._del.onValidateColumn(this._del,i.column,r,o,n,s);if(a&&a.level&&a.message)throw new Jo(a.level,a.message,i.column,a.message);if("string"==typeof a||"number"==typeof a)throw new Jo(t.ValidationLevel.ERROR,a,i.column,a)}},i.prototype.onGridBaseValidateRow=function(e,i,r,o){if(this._del.onValidateRow){var n=this._del.onValidateRow(this._del,i.index,i.dataRow,r,o);if(n&&n.level&&n.message)throw new Jo(n.level,n.message,null,n.message);if("string"==typeof n||"number"==typeof n)throw new Jo(t.ValidationLevel.ERROR,n,null,n)}},i.prototype.onGridBaseValidationFail=function(t,e,i,r){if(!this._del.onValidationFail)return r;var o=this._del.onValidationFail(this._del,e,i,{level:r.level,message:r.message});return o&&o.level&&o.message?(r.level=o.level,r.message=o.message,r.userMessage=o.message,r):"string"==typeof o||"number"==typeof o?(r.message=o,r.userMessage=o,r):void 0},i.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):ft.log("onCellClicked: ",e)},i.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):ft.log("onCellDblClicked: ",e)},i.prototype.onGridBaseCellItemClicked=function(t,e,i){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),i):ft.log("onCellItemClicked: ",i)},i.prototype.onGridBaseColumnCheckedChanged=function(t,e,i){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,i):ft.log("onColumnCheckedChanged: ("+e.name+", "+i+")")},i.prototype.onGridBaseMenuItemClicked=function(t,e,i){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),i):ft.log("onMenuItemClicked: ",e.toProxy(),i)},i.prototype.onGridBaseContextMenuPopup=function(t,e,i,r){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,i,r):ft.log("onContextMenuPopup: x = ",e,", y = ",i,", clickData =",r)},i.prototype.onGridBaseContextMenuItemClicked=function(t,e,i){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),i):ft.log("onContextMenuItemClicked: ",e.toProxy(),i)},i.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):ft.log("onCellButtonClicked: ",e)},i.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):ft.log("onScrollToBottom")},i.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):ft.log("onTopItemIndexChanged: "+e)},i.prototype.onGridBaseTopIndexChanging=function(t,e,i,r,o){return this._del.onTopIndexChanging?this._del.onTopIndexChanging(this._del,e,i,r,o):ft.log("onTopItemIndexChanging: ",e,i,r,o)},i.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(ft.log("onRowsDeleting:",e),!0)},i.prototype.onGridBaseRowInserting=function(t,e,i){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,i);ft.log("onRowInserting: "+e,i)},i.prototype.onGridBaseSelectionCleared=function(t){this._del.onSelectionCleared?this._del.onSelectionCleared(this._del):ft.log("onSelectionCleared")},i.prototype.onGridBaseSelectionChanged=function(t,e){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del,e):ft.log("onSelectionChanged")},i.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):ft.log("onSelectionAdded: ",e)},i.prototype.onGridBaseSelectionEnded=function(t,e){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del,e):ft.log("onSelectionEnded")},i.prototype.onGridBaseShowEditor=function(t,e,i,r){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),i,r):ft.log("onShowEditor",e.proxy(),i,r)},i.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):ft.log("onHideEditor: ",e.proxy())},i.prototype.onGridBaseEditChange=function(t,e,i){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),i):ft.log("onEditChange: "+i,e.proxy())},i.prototype.onGridBaseGetEditValue=function(t,e,i){this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),i):ft.log("onGetEditValue: ",e,i)},i.prototype.onGridBaseEditCommit=function(t,e,i,r){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),i,r):(ft.log("onEditCommit",e.proxy(),i,r),!0)},i.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):ft.log("onEditCanceled",e.proxy())},i.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):ft.log("onItemEditCanceled: "+e.index+", "+e.itemState)},i.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(ft.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},i.prototype.onGridBaseEditSearch=function(t,e,i){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),i):ft.log("onEditSearch: "+i,e.proxy())},i.prototype.onGridBaseSearchCellButtonClick=function(t,e,i){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),i):(ft.log("onSearchCellButtonClick: "+i,e.proxy()),null)},i.prototype.onGridBaseCellEdited=function(t,e,i){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,i):ft.log("onCellEdited: "+e.index+", "+e.dataRow+", "+i)},i.prototype.onGridBaseEditRowChanged=function(t,e,i,r,o){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,i,r,o):ft.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+i+", "+r+" => "+o)},i.prototype.onGridBaseEditRowPasted=function(t,e,i,r,o){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,i,r,o):ft.log("onEditRowPasted: "+e.index+", "+e.dataRow,i,r,o)},i.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):ft.log("onRowsPasted: ",e)},i.prototype.onGridBaseCellPasting=function(t,e,i){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),i):ft.log("onCellPasting: ",e,i)},i.prototype.onGridBaseItemChecked=function(t,e,i){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,i):ft.log("onItemChecked",e.index,i)},i.prototype.onGridBaseItemsChecked=function(t,e,i){var r=yp.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,r,i):ft.log("onItemsChecked: "+i,r)},i.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):ft.log("onItemAllChecked: "+e)},i.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):ft.log("onErrorClicked: "+e)},i.prototype.onGridBaseSorting=function(t,e,i){for(var r=[],o=0,n=i.length;o<n;o++)r.push(i[o]?i[o].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,i):ft.log("onSorting: ",e,r)},i.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):ft.log("onSortingChanged")},i.prototype.onGridBaseFiltering=function(t){return this._del.onFiltering?this._del.onFiltering(this._del):ft.log("onFiltering")},i.prototype.onGridBaseFilteringChanged=function(t,e,i){var r=e?e.getOwner():null,o=i?i.toProxy():null,n=r?r.name:"",s=i?i.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,r,o):ft.log("onFilteringChanged: "+n+", "+s)},i.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):ft.keyLog("onKeyDown: "+e)},i.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):ft.keyLog("onKeyPress: "+e)},i.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):ft.keyLog("onKeyUp: "+e)},i.prototype.onGridBaseShowTooltip=function(t,e,i){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),i):(ft.log("onShowTooltip: "+i,e.proxy()),i)},i.prototype.onGridBaseShowHeaderTooltip=function(t,e,i){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,i):(ft.log("onShowHeaderTooltip: "+e.name+", "+i),i)},i.prototype.onGridBaseColumnPropertyChanged=function(t,e,i,r,o){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,i,r,o):ft.log("onColumnPropertyChanged: "+e.name+", "+i+", "+r+", "+o)},i.prototype.onGridBaseLayoutPropertyChanged=function(t,e,i,r,o){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,e,i,r,o):ft.log("onLayoutPropertyChanged: "+e.name+", "+i+", "+r+", "+o)},i.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):ft.log("onGridActivated")},i.prototype.onGridBasePaste=function(t,e,i){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),i);ft.log("onPaste: ",e)},i.prototype.onGridBaseCopy=function(t,e,i){var r;if(Array.isArray(e)?(r=[],e.forEach((function(t){r.push(t.toProxy())}))):r=e.toProxy(),this._del.onCopy)return this._del.onCopy(this._del,r,i);ft.log("onCopy: ",r)},i.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):ft.log("onPasted")},i.prototype.onGridBaseCommandStackChanged=function(t,e,i){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t.handler,e,i):ft.log("onCommandStackChanged: undoable "+e+", redoable "+i)},i.prototype.onGridBaseDataLoadComplated=function(t){this._del.onDataLoadComplated?this._del.onDataLoadComplated(t.handler):ft.log("onDataLoadComplated: ")},i}(or),Cp=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(ft.log("onPageChanging:"+e),!0)},e.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):ft.log("onPageChanged:"+e)},e.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):ft.log("onPageCountChanged:"+e)},e.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(ft.log("onGrouping",e),!0)},e.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):ft.log("onGrouped")},e.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.index):(ft.log("onExpanding: "+e.index),!0)},e.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.index):ft.log("onExpanded: "+e.index)},e.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.index):(ft.log("onCollapsing: "+e.index),!0)},e.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.index):ft.log("onCollapsed: "+e.index)},e}(wp),xp=function(t){function e(e,i){return t.call(this,e,i)||this}return r(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(ft.log("TreeItem expanding: "+e),!0)},e.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):ft.log("TreeItem expanded: "+e)},e.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(ft.log("TreeItem collapsing: "+e),!0)},e.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):ft.log("TreeItem collapsed: "+e)},e.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):ft.log("TreeItem item changed: "+e)},e}(wp),Ip=function(){function i(){}return i.getVersion=function(){return e.version},i.getLicenseType=function(){return e.license},i.getLicenseCode=function(){return e.code},i.getActiveGrid=function(){var t=Fl.getActiveGrid();return t&&t.handler},i.getGridInstance=function(t){var e=Fl.getGridInstance(t);return e&&e.handler},i.exportGrid=function(t){var e=t&&t.exportGrids;if(e){for(var i=this.getActiveGrid(),r=void 0,o=0;o<e.length;o++){var n=e[o].grid;if(n===i){r=n;break}r=r||n}if(r)return void r.exportGrid(t)}throw new Error("multiExport must have exportGrids.")},i.setDebug=function(t,e,i){ft.setDebugging(t,e,i)},i.setMobile=function(t){ft.setMobile(t)},i.setTablet=function(t){ft.setTablet(t)},Object.defineProperty(i,"ImageList",{get:function(){return hr},enumerable:!0,configurable:!0}),Object.defineProperty(i,"GridView",{get:function(){return bp},enumerable:!0,configurable:!0}),Object.defineProperty(i,"TreeView",{get:function(){return vp},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LocalDataProvider",{get:function(){return sr},enumerable:!0,configurable:!0}),Object.defineProperty(i,"LocalTreeDataProvider",{get:function(){return ar},enumerable:!0,configurable:!0}),Object.defineProperty(i,"ValueType",{get:function(){return t.ValueType},enumerable:!0,configurable:!0}),i}();!function(t){t.RECTANGLE="rectangle",t.TRIANLGE="triangle",t.INVERTED_TRIANLGE="itriangle",t.DIAMOND="diamond",t.UP_ARROW="uparrow",t.DOWN_ARROW="downarrow",t.LEFT_ARROW="leftarrow",t.RIGHT_ARROW="rightarrow",t.PLUS="plus",t.MINUS="minus",t.EQUAL="equal",t.STAR="star"}(t.PolygonShape||(t.PolygonShape={}));var Sp=e.version,Ep=e.license,kp=e.code;t.DataProviderBase=nr,t.GridBase=mp,t.GridView=bp,t.ImageList=hr,t.LocalDataProvider=sr,t.LocalTreeDataProvider=ar,t.TreeView=vp,t.VisualObject=Ar,t.default=Ip,t.gridLicenseCode=kp,t.gridLicenseType=Ep,t.gridVersion=Sp,Object.defineProperty(t,"__esModule",{value:!0})}(e)},813:function(t,e){"use strict";function i(t,e){var i=t.length;t.push(e);t:for(;0<i;){var r=i-1>>>1,o=t[r];if(!(0<n(o,e)))break t;t[r]=e,t[i]=o,i=r}}function r(t){return 0===t.length?null:t[0]}function o(t){if(0===t.length)return null;var e=t[0],i=t.pop();if(i!==e){t[0]=i;t:for(var r=0,o=t.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=t[a],u=a+1,h=t[u];if(0>n(l,i))u<o&&0>n(h,l)?(t[r]=h,t[u]=i,r=u):(t[r]=l,t[a]=i,r=a);else{if(!(u<o&&0>n(h,i)))break t;t[r]=h,t[u]=i,r=u}}}return e}function n(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],c=1,d=null,p=3,f=!1,_=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(t){for(var e=r(h);null!==e;){if(null===e.callback)o(h);else{if(!(e.startTime<=t))break;o(h),e.sortIndex=e.expirationTime,i(u,e)}e=r(h)}}function w(t){if(g=!1,v(t),!_)if(null!==r(u))_=!0,L(C);else{var e=r(h);null!==e&&M(w,e.startTime-t)}}function C(t,i){_=!1,g&&(g=!1,m(E),E=-1),f=!0;var n=p;try{for(v(i),d=r(u);null!==d&&(!(d.expirationTime>i)||t&&!R());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var a=s(d.expirationTime<=i);i=e.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&o(u),v(i)}else o(u);d=r(u)}if(null!==d)var l=!0;else{var c=r(h);null!==c&&M(w,c.startTime-i),l=!1}return l}finally{d=null,p=n,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,E=-1,k=5,O=-1;function R(){return!(e.unstable_now()-O<k)}function P(){if(null!==S){var t=e.unstable_now();O=t;var i=!0;try{i=S(!0,t)}finally{i?x():(I=!1,S=null)}}else I=!1}if("function"===typeof b)x=function(){b(P)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,T=D.port2;D.port1.onmessage=P,x=function(){T.postMessage(null)}}else x=function(){y(P,0)};function L(t){S=t,I||(I=!0,x())}function M(t,i){E=y((function(){t(e.unstable_now())}),i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){_||f||(_=!0,L(C))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var i=p;p=e;try{return t()}finally{p=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=p;p=t;try{return e()}finally{p=i}},e.unstable_scheduleCallback=function(t,o,n){var s=e.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?s+n:s:n=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:c++,callback:o,priorityLevel:t,startTime:n,expirationTime:a=n+a,sortIndex:-1},n>s?(t.sortIndex=n,i(h,t),null===r(u)&&t===r(h)&&(g?(m(E),E=-1):g=!0,M(w,n-s))):(t.sortIndex=a,i(u,t),_||f||(_=!0,L(C))),t},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(t){var e=p;return function(){var i=p;p=e;try{return t.apply(this,arguments)}finally{p=i}}}},296:function(t,e,i){"use strict";t.exports=i(813)}},e={};function i(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}i.m=t,i.d=function(t,e){for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.f={},i.e=function(t){return Promise.all(Object.keys(i.f).reduce((function(e,r){return i.f[r](t,e),e}),[]))},i.u=function(t){return"static/js/"+t+".b7c52895.chunk.js"},i.miniCssF=function(t){},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="coin:";i.l=function(r,o,n,s){if(t[r])t[r].push(o);else{var a,l;if(void 0!==n)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var c=u[h];if(c.getAttribute("src")==r||c.getAttribute("data-webpack")==e+n){a=c;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",e+n),a.src=r),t[r]=[o];var d=function(e,i){a.onerror=a.onload=null,clearTimeout(p);var o=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(t){return t(i)})),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/coinList/",function(){var t={179:0};i.f.j=function(e,r){var o=i.o(t,e)?t[e]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((function(i,r){o=t[e]=[i,r]}));r.push(o[2]=n);var s=i.p+i.u(e),a=new Error;i.l(s,(function(r){if(i.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",a.name="ChunkLoadError",a.type=n,a.request=s,o[1](a)}}),"chunk-"+e,e)}};var e=function(e,r){var o,n,s=r[0],a=r[1],l=r[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)l(i)}for(e&&e(r);u<s.length;u++)n=s[u],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0},r=self.webpackChunkcoin=self.webpackChunkcoin||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),function(){"use strict";var t=i(791),e=i(250);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(){o=function(){return t};var t={},e=Object.prototype,i=e.hasOwnProperty,n=Object.defineProperty||function(t,e,i){t[e]=i.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(P){h=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var o=e&&e.prototype instanceof f?e:f,s=Object.create(o.prototype),a=new k(r||[]);return n(s,"_invoke",{value:x(t,i,a)}),s}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(P){return{type:"throw",arg:P}}}t.wrap=c;var p={};function f(){}function _(){}function g(){}var y={};h(y,a,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(O([])));b&&b!==e&&i.call(b,a)&&(y=b);var v=g.prototype=f.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function o(n,s,a,l){var u=d(t[n],t,s);if("throw"!==u.type){var h=u.arg,c=h.value;return c&&"object"==r(c)&&i.call(c,"__await")?e.resolve(c.__await).then((function(t){o("next",t,a,l)}),(function(t){o("throw",t,a,l)})):e.resolve(c).then((function(t){h.value=t,a(h)}),(function(t){return o("throw",t,a,l)}))}l(u.arg)}var s;n(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){o(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function x(t,e,i){var r="suspendedStart";return function(o,n){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw n;return R()}for(i.method=o,i.arg=n;;){var s=i.delegate;if(s){var a=I(s,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var l=d(t,e,i);if("normal"===l.type){if(r=i.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r="completed",i.method="throw",i.arg=l.arg)}}}function I(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,I(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=d(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:R}}function R(){return{value:void 0,done:!0}}return _.prototype=g,n(v,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:_,configurable:!0}),_.displayName=h(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,h(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},w(C.prototype),h(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,i,r,o,n){void 0===n&&(n=Promise);var s=new C(c(e,i,r,o),n);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(v),h(v,u,"Generator"),h(v,a,(function(){return this})),h(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],s=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var a=i.call(n,"catchLoc"),l=i.call(n,"finallyLoc");if(a&&l){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var o=r.arg;E(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:O(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,i,r,o,n,s){try{var a=t[n](s),l=a.value}catch(u){return void i(u)}a.done?e(l):Promise.resolve(l).then(r,o)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,o,n=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(r=i.next()).done)&&(n.push(r.value),!e||n.length!==e);s=!0);}catch(l){a=!0,o=l}finally{try{s||null==i.return||i.return()}finally{if(a)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=i(401),u=[{fieldName:"name",dataType:l.ValueType.TEXT},{fieldName:"symbol",dataType:l.ValueType.TEXT},{fieldName:"quotes",dataType:l.ValueType.OBJECT,objectKey:"price"}],h=[{name:"name",fieldName:"name",width:"80",styles:{textAlignment:"center"},header:{text:"\uc885\ubaa9",showTooltip:!0,tooltip:'<span style="color: red;">\uc774\ub984</span>'},renderer:{type:"text",showTooltip:!0}},{fieldName:"symbol",name:"symbol",width:"80",styles:{textAlignment:"center"},header:{text:"\uae30\ud638",showTooltip:!0,tooltip:'<span style="color: red;">\uc774\ub984</span>'},renderer:{type:"text",showTooltip:!0}},{fieldName:"quotes",name:"quotes",objectKey:"price",width:"80",styles:{textAlignment:"center"},header:{text:"\uac00\uaca9(KRW)",showTooltip:!0,tooltip:'<span style="color: red;">\uc774\ub984</span>'},renderer:{type:"text",showTooltip:!0},displayCallback:function(t,e,i){return"\u20a9"+Number(i.KRW.price.toFixed()).toLocaleString()}},{fieldName:"quotes",name:"quotes",objectKey:"percent_change_1h",width:"80",styles:{textAlignment:"center"},header:{text:"\ubcc0\ub3d9\ub960(1\uc2dc\uac04)",showTooltip:!0,tooltip:'<span style="color: red;">\uc774\ub984</span>'},renderer:{type:"text",showTooltip:!0},displayCallback:function(t,e,i){return Number(i.KRW.percent_change_1h.toFixed(3)).toLocaleString()+"%"},styleCallback:function(t,e){var i={};return e.value.KRW.percent_change_24h.toString().includes("-")?i.styleName="minusColor":i.styleName="plusColor",i}},{fieldName:"quotes",name:"quotes",objectKey:"percent_change_24h",width:"80",styles:{textAlignment:"center"},header:{text:"\ubcc0\ub3d9\ub960(24\uc2dc\uac04)",showTooltip:!0,tooltip:'<span style="color: red;">\uc774\ub984</span>'},renderer:{type:"text",showTooltip:!0},displayCallback:function(t,e,i){return Number(i.KRW.percent_change_24h.toFixed(3)).toLocaleString()+"%"},styleCallback:function(t,e){var i={};return e.value.KRW.percent_change_24h.toString().includes("-")?i.styleName="minusColor":i.styleName="plusColor",i}},{fieldName:"quotes",name:"quotes",objectKey:"volume_24h",width:"80",styles:{textAlignment:"center"},header:{text:"\uac70\ub798\ub7c9(24\uc2dc\uac04)",showTooltip:!0,tooltip:'<span style="color: red;">\uc774\ub984</span>'},renderer:{type:"text",showTooltip:!0},displayCallback:function(t,e,i){return"\u20a9"+Number((i.KRW.volume_24h/1e12).toFixed(2))+"T"}}];function c(t,e){return function(){return t.apply(e,arguments)}}var d,p=Object.prototype.toString,f=Object.getPrototypeOf,_=(d=Object.create(null),function(t){var e=p.call(t);return d[e]||(d[e]=e.slice(8,-1).toLowerCase())}),g=function(t){return t=t.toLowerCase(),function(e){return _(e)===t}},y=function(t){return function(e){return typeof e===t}},m=Array.isArray,b=y("undefined");var v=g("ArrayBuffer");var w=y("string"),C=y("function"),x=y("number"),I=function(t){return null!==t&&"object"===typeof t},S=function(t){if("object"!==_(t))return!1;var e=f(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},E=g("Date"),k=g("File"),O=g("Blob"),R=g("FileList"),P=g("URLSearchParams");function D(t,e){var i,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.allOwnKeys,s=void 0!==n&&n;if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),m(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{var a,l=s?Object.getOwnPropertyNames(t):Object.keys(t),u=l.length;for(i=0;i<u;i++)a=l[i],e.call(null,t[a],a,t)}}function T(t,e){e=e.toLowerCase();for(var i,r=Object.keys(t),o=r.length;o-- >0;)if(e===(i=r[o]).toLowerCase())return i;return null}var L="undefined"===typeof self?"undefined"===typeof global?void 0:global:self,M=function(t){return!b(t)&&t!==L};var F,N=(F="undefined"!==typeof Uint8Array&&f(Uint8Array),function(t){return F&&t instanceof F}),V=g("HTMLFormElement"),B=function(t){var e=Object.prototype.hasOwnProperty;return function(t,i){return e.call(t,i)}}(),A=g("RegExp"),$=function(t,e){var i=Object.getOwnPropertyDescriptors(t),r={};D(i,(function(i,o){!1!==e(i,o,t)&&(r[o]=i)})),Object.defineProperties(t,r)},j={isArray:m,isArrayBuffer:v,isBuffer:function(t){return null!==t&&!b(t)&&null!==t.constructor&&!b(t.constructor)&&C(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||p.call(t)===e||C(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&v(t.buffer)},isString:w,isNumber:x,isBoolean:function(t){return!0===t||!1===t},isObject:I,isPlainObject:S,isUndefined:b,isDate:E,isFile:k,isBlob:O,isRegExp:A,isFunction:C,isStream:function(t){return I(t)&&C(t.pipe)},isURLSearchParams:P,isTypedArray:N,isFileList:R,forEach:D,merge:function t(){for(var e=M(this)&&this||{},i=e.caseless,r={},o=function(e,o){var n=i&&T(r,o)||o;S(r[n])&&S(e)?r[n]=t(r[n],e):S(e)?r[n]=t({},e):m(e)?r[n]=e.slice():r[n]=e},n=0,s=arguments.length;n<s;n++)arguments[n]&&D(arguments[n],o);return r},extend:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.allOwnKeys;return D(e,(function(e,r){i&&C(e)?t[r]=c(e,i):t[r]=e}),{allOwnKeys:o}),t},trim:function(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,i,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},toFlatObject:function(t,e,i,r){var o,n,s,a={};if(e=e||{},null==t)return e;do{for(n=(o=Object.getOwnPropertyNames(t)).length;n-- >0;)s=o[n],r&&!r(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==i&&f(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},kindOf:_,kindOfTest:g,endsWith:function(t,e,i){t=String(t),(void 0===i||i>t.length)&&(i=t.length),i-=e.length;var r=t.indexOf(e,i);return-1!==r&&r===i},toArray:function(t){if(!t)return null;if(m(t))return t;var e=t.length;if(!x(e))return null;for(var i=new Array(e);e-- >0;)i[e]=t[e];return i},forEachEntry:function(t,e){for(var i,r=(t&&t[Symbol.iterator]).call(t);(i=r.next())&&!i.done;){var o=i.value;e.call(t,o[0],o[1])}},matchAll:function(t,e){for(var i,r=[];null!==(i=t.exec(e));)r.push(i);return r},isHTMLForm:V,hasOwnProperty:B,hasOwnProp:B,reduceDescriptors:$,freezeMethods:function(t){$(t,(function(e,i){if(C(t)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;var r=t[i];C(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=function(){throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:function(t,e){var i={},r=function(t){t.forEach((function(t){i[t]=!0}))};return m(t)?r(t):r(String(t).split(e)),i},toCamelCase:function(t){return t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(t,e,i){return e.toUpperCase()+i}))},noop:function(){},toFiniteNumber:function(t,e){return t=+t,Number.isFinite(t)?t:e},findKey:T,global:L,isContextDefined:M,toJSONObject:function(t){var e=new Array(10);return function t(i,r){if(I(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;var o=m(i)?[]:{};return D(i,(function(e,i){var n=t(e,r+1);!b(n)&&(o[i]=n)})),e[r]=void 0,o}}return i}(t,0)}};function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,i){return e&&W(t.prototype,e),i&&W(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t,e,i,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),r&&(this.request=r),o&&(this.response=o)}j.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var z=U.prototype,Y={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(t){Y[t]={value:t}})),Object.defineProperties(U,Y),Object.defineProperty(z,"isAxiosError",{value:!0}),U.from=function(t,e,i,r,o,n){var s=Object.create(z);return j.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(function(t){return"isAxiosError"!==t})),U.call(s,t.message,e,i,r,o),s.cause=t,s.name=t.name,n&&Object.assign(s,n),s};var q=U,K=i(472);function X(t){return j.isPlainObject(t)||j.isArray(t)}function Q(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function J(t,e,i){return t?t.concat(e).map((function(t,e){return t=Q(t),!i&&e?"["+t+"]":t})).join(i?".":""):e}var Z=j.toFlatObject(j,{},null,(function(t){return/^is[A-Z]/.test(t)}));var tt=function(t,e,i){if(!j.isObject(t))throw new TypeError("target must be an object");e=e||new(K||FormData);var r,o=(i=j.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!j.isUndefined(e[t])}))).metaTokens,n=i.visitor||h,s=i.dots,a=i.indexes,l=(i.Blob||"undefined"!==typeof Blob&&Blob)&&((r=e)&&j.isFunction(r.append)&&"FormData"===r[Symbol.toStringTag]&&r[Symbol.iterator]);if(!j.isFunction(n))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(j.isDate(t))return t.toISOString();if(!l&&j.isBlob(t))throw new q("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(t)||j.isTypedArray(t)?l&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function h(t,i,r){var n=t;if(t&&!r&&"object"===typeof t)if(j.endsWith(i,"{}"))i=o?i:i.slice(0,-2),t=JSON.stringify(t);else if(j.isArray(t)&&function(t){return j.isArray(t)&&!t.some(X)}(t)||j.isFileList(t)||j.endsWith(i,"[]")&&(n=j.toArray(t)))return i=Q(i),n.forEach((function(t,r){!j.isUndefined(t)&&null!==t&&e.append(!0===a?J([i],r,s):null===a?i:i+"[]",u(t))})),!1;return!!X(t)||(e.append(J(r,i,s),u(t)),!1)}var c=[],d=Object.assign(Z,{defaultVisitor:h,convertValue:u,isVisitable:X});if(!j.isObject(t))throw new TypeError("data must be an object");return function t(i,r){if(!j.isUndefined(i)){if(-1!==c.indexOf(i))throw Error("Circular reference detected in "+r.join("."));c.push(i),j.forEach(i,(function(i,o){!0===(!(j.isUndefined(i)||null===i)&&n.call(e,i,j.isString(o)?o.trim():o,r,d))&&t(i,r?r.concat(o):[o])})),c.pop()}}(t),e};function et(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function it(t,e){this._pairs=[],t&&tt(t,this,e)}var rt=it.prototype;rt.append=function(t,e){this._pairs.push([t,e])},rt.toString=function(t){var e=t?function(e){return t.call(this,e,et)}:et;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var ot=it;function nt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function st(t,e,i){if(!e)return t;var r,o=i&&i.encode||nt,n=i&&i.serialize;if(r=n?n(e,i):j.isURLSearchParams(e)?e.toString():new ot(e,i).toString(o)){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}var at=function(){function t(){H(this,t),this.handlers=[]}return G(t,[{key:"use",value:function(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(t){j.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}]),t}(),lt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ut="undefined"!==typeof URLSearchParams?URLSearchParams:ot,ht=FormData,ct=function(){var t;return("undefined"===typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),dt={isBrowser:!0,classes:{URLSearchParams:ut,FormData:ht,Blob:Blob},isStandardBrowserEnv:ct,protocols:["http","https","file","blob","url","data"]};var pt=function(t){function e(t,i,r,o){var n=t[o++],s=Number.isFinite(+n),a=o>=t.length;return n=!n&&j.isArray(r)?r.length:n,a?(j.hasOwnProp(r,n)?r[n]=[r[n],i]:r[n]=i,!s):(r[n]&&j.isObject(r[n])||(r[n]=[]),e(t,i,r[n],o)&&j.isArray(r[n])&&(r[n]=function(t){var e,i,r={},o=Object.keys(t),n=o.length;for(e=0;e<n;e++)r[i=o[e]]=t[i];return r}(r[n])),!s)}if(j.isFormData(t)&&j.isFunction(t.entries)){var i={};return j.forEachEntry(t,(function(t,r){e(function(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map((function(t){return"[]"===t[0]?"":t[1]||t[0]}))}(t),r,i,0)})),i}return null},ft={"Content-Type":void 0};var _t={transitional:lt,adapter:["xhr","http"],transformRequest:[function(t,e){var i,r=e.getContentType()||"",o=r.indexOf("application/json")>-1,n=j.isObject(t);if(n&&j.isHTMLForm(t)&&(t=new FormData(t)),j.isFormData(t))return o&&o?JSON.stringify(pt(t)):t;if(j.isArrayBuffer(t)||j.isBuffer(t)||j.isStream(t)||j.isFile(t)||j.isBlob(t))return t;if(j.isArrayBufferView(t))return t.buffer;if(j.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(n){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return tt(t,new dt.classes.URLSearchParams,Object.assign({visitor:function(t,e,i,r){return dt.isNode&&j.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((i=j.isFileList(t))||r.indexOf("multipart/form-data")>-1){var s=this.env&&this.env.FormData;return tt(i?{"files[]":t}:t,s&&new s,this.formSerializer)}}return n||o?(e.setContentType("application/json",!1),function(t,e,i){if(j.isString(t))try{return(e||JSON.parse)(t),j.trim(t)}catch(r){if("SyntaxError"!==r.name)throw r}return(i||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||_t.transitional,i=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&j.isString(t)&&(i&&!this.responseType||r)){var o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(n){if(o){if("SyntaxError"===n.name)throw q.from(n,q.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dt.classes.FormData,Blob:dt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};j.forEach(["delete","get","head"],(function(t){_t.headers[t]={}})),j.forEach(["post","put","patch"],(function(t){_t.headers[t]=j.merge(ft)}));var gt=_t,yt=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mt=Symbol("internals");function bt(t){return t&&String(t).trim().toLowerCase()}function vt(t){return!1===t||null==t?t:j.isArray(t)?t.map(vt):String(t)}function wt(t,e,i,r){return j.isFunction(r)?r.call(this,e,i):j.isString(e)?j.isString(r)?-1!==e.indexOf(r):j.isRegExp(r)?r.test(e):void 0:void 0}var Ct=function(t,e){function i(t){H(this,i),t&&this.set(t)}return G(i,[{key:"set",value:function(t,e,i){var r=this;function o(t,e,i){var o=bt(e);if(!o)throw new Error("header name must be a non-empty string");var n=j.findKey(r,o);(!n||void 0===r[n]||!0===i||void 0===i&&!1!==r[n])&&(r[n||e]=vt(t))}var n=function(t,e){return j.forEach(t,(function(t,i){return o(t,i,e)}))};return j.isPlainObject(t)||t instanceof this.constructor?n(t,e):j.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z]+$/.test(t.trim())?n(function(t){var e,i,r,o={};return t&&t.split("\n").forEach((function(t){r=t.indexOf(":"),e=t.substring(0,r).trim().toLowerCase(),i=t.substring(r+1).trim(),!e||o[e]&&yt[e]||("set-cookie"===e?o[e]?o[e].push(i):o[e]=[i]:o[e]=o[e]?o[e]+", "+i:i)})),o}(t),e):null!=t&&o(e,t,i),this}},{key:"get",value:function(t,e){if(t=bt(t)){var i=j.findKey(this,t);if(i){var r=this[i];if(!e)return r;if(!0===e)return function(t){for(var e,i=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;e=r.exec(t);)i[e[1]]=e[2];return i}(r);if(j.isFunction(e))return e.call(this,r,i);if(j.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(t,e){if(t=bt(t)){var i=j.findKey(this,t);return!(!i||e&&!wt(0,this[i],i,e))}return!1}},{key:"delete",value:function(t,e){var i=this,r=!1;function o(t){if(t=bt(t)){var o=j.findKey(i,t);!o||e&&!wt(0,i[o],o,e)||(delete i[o],r=!0)}}return j.isArray(t)?t.forEach(o):o(t),r}},{key:"clear",value:function(){return Object.keys(this).forEach(this.delete.bind(this))}},{key:"normalize",value:function(t){var e=this,i={};return j.forEach(this,(function(r,o){var n=j.findKey(i,o);if(n)return e[n]=vt(r),void delete e[o];var s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(t,e,i){return e.toUpperCase()+i}))}(o):String(o).trim();s!==o&&delete e[o],e[s]=vt(r),i[s]=!0})),this}},{key:"concat",value:function(){for(var t,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(t=this.constructor).concat.apply(t,[this].concat(i))}},{key:"toJSON",value:function(t){var e=Object.create(null);return j.forEach(this,(function(i,r){null!=i&&!1!==i&&(e[r]=t&&j.isArray(i)?i.join(", "):i)})),e}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var e=a(t,2);return e[0]+": "+e[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(t){return t instanceof this?t:new this(t)}},{key:"concat",value:function(t){for(var e=new this(t),i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r.forEach((function(t){return e.set(t)})),e}},{key:"accessor",value:function(t){var e=(this[mt]=this[mt]={accessors:{}}).accessors,i=this.prototype;function r(t){var r=bt(t);e[r]||(!function(t,e){var i=j.toCamelCase(" "+e);["get","set","has"].forEach((function(r){Object.defineProperty(t,r+i,{value:function(t,i,o){return this[r].call(this,e,t,i,o)},configurable:!0})}))}(i,t),e[r]=!0)}return j.isArray(t)?t.forEach(r):r(t),this}}]),i}();Ct.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),j.freezeMethods(Ct.prototype),j.freezeMethods(Ct);var xt=Ct;function It(t,e){var i=this||gt,r=e||i,o=xt.from(r.headers),n=r.data;return j.forEach(t,(function(t){n=t.call(i,n,o.normalize(),e?e.status:void 0)})),o.normalize(),n}function St(t){return!(!t||!t.__CANCEL__)}function Et(t,e,i){q.call(this,null==t?"canceled":t,q.ERR_CANCELED,e,i),this.name="CanceledError"}j.inherits(Et,q,{__CANCEL__:!0});var kt=Et;var Ot=dt.isStandardBrowserEnv?{write:function(t,e,i,r,o,n){var s=[];s.push(t+"="+encodeURIComponent(e)),j.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),j.isString(r)&&s.push("path="+r),j.isString(o)&&s.push("domain="+o),!0===n&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Rt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var Pt=dt.isStandardBrowserEnv?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(t){var r=t;return e&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=r(window.location.href),function(e){var i=j.isString(e)?r(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0};var Dt=function(t,e){t=t||10;var i,r=new Array(t),o=new Array(t),n=0,s=0;return e=void 0!==e?e:1e3,function(a){var l=Date.now(),u=o[s];i||(i=l),r[n]=a,o[n]=l;for(var h=s,c=0;h!==n;)c+=r[h++],h%=t;if((n=(n+1)%t)===s&&(s=(s+1)%t),!(l-i<e)){var d=u&&l-u;return d?Math.round(1e3*c/d):void 0}}};function Tt(t,e){var i=0,r=Dt(50,250);return function(o){var n=o.loaded,s=o.lengthComputable?o.total:void 0,a=n-i,l=r(a);i=n;var u={loaded:n,total:s,progress:s?n/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&n<=s?(s-n)/l:void 0,event:o};u[e?"download":"upload"]=!0,t(u)}}var Lt={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,i){var r,o=t.data,n=xt.from(t.headers).normalize(),s=t.responseType;function a(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}j.isFormData(o)&&dt.isStandardBrowserEnv&&n.setContentType(!1);var l=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.set("Authorization","Basic "+btoa(u+":"+h))}var c=Rt(t.baseURL,t.url);function d(){if(l){var r=xt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?e(new q("Request failed with status code "+i.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):t(i)}((function(t){e(t),a()}),(function(t){i(t),a()}),{data:s&&"text"!==s&&"json"!==s?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:t,request:l}),l=null}}if(l.open(t.method.toUpperCase(),st(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(d)},l.onabort=function(){l&&(i(new q("Request aborted",q.ECONNABORTED,t,l)),l=null)},l.onerror=function(){i(new q("Network Error",q.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||lt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),i(new q(e,r.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,t,l)),l=null},dt.isStandardBrowserEnv){var p=(t.withCredentials||Pt(c))&&t.xsrfCookieName&&Ot.read(t.xsrfCookieName);p&&n.set(t.xsrfHeaderName,p)}void 0===o&&n.setContentType(null),"setRequestHeader"in l&&j.forEach(n.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),j.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),s&&"json"!==s&&(l.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&l.addEventListener("progress",Tt(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Tt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(r=function(e){l&&(i(!e||e.type?new kt(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r)));var f=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(c);f&&-1===dt.protocols.indexOf(f)?i(new q("Unsupported protocol "+f+":",q.ERR_BAD_REQUEST,t)):l.send(o||null)}))}};j.forEach(Lt,(function(t,e){if(t){try{Object.defineProperty(t,"name",{value:e})}catch(i){}Object.defineProperty(t,"adapterName",{value:e})}}));var Mt=function(t){for(var e,i,r=(t=j.isArray(t)?t:[t]).length,o=0;o<r&&(e=t[o],!(i=j.isString(e)?Lt[e.toLowerCase()]:e));o++);if(!i){if(!1===i)throw new q("Adapter ".concat(e," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(j.hasOwnProp(Lt,e)?"Adapter '".concat(e,"' is not available in the build"):"Unknown adapter '".concat(e,"'"))}if(!j.isFunction(i))throw new TypeError("adapter is not a function");return i};function Ft(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kt}function Nt(t){return Ft(t),t.headers=xt.from(t.headers),t.data=It.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Mt(t.adapter||gt.adapter)(t).then((function(e){return Ft(t),e.data=It.call(t,t.transformResponse,e),e.headers=xt.from(e.headers),e}),(function(e){return St(e)||(Ft(t),e&&e.response&&(e.response.data=It.call(t,t.transformResponse,e.response),e.response.headers=xt.from(e.response.headers))),Promise.reject(e)}))}var Vt=function(t){return t instanceof xt?t.toJSON():t};function Bt(t,e){e=e||{};var i={};function r(t,e,i){return j.isPlainObject(t)&&j.isPlainObject(e)?j.merge.call({caseless:i},t,e):j.isPlainObject(e)?j.merge({},e):j.isArray(e)?e.slice():e}function o(t,e,i){return j.isUndefined(e)?j.isUndefined(t)?void 0:r(void 0,t,i):r(t,e,i)}function n(t,e){if(!j.isUndefined(e))return r(void 0,e)}function s(t,e){return j.isUndefined(e)?j.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(i,o,n){return n in e?r(i,o):n in t?r(void 0,i):void 0}var l={url:n,method:n,data:n,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:function(t,e){return o(Vt(t),Vt(e),!0)}};return j.forEach(Object.keys(t).concat(Object.keys(e)),(function(r){var n=l[r]||o,s=n(t[r],e[r],r);j.isUndefined(s)&&n!==a||(i[r]=s)})),i}var At="1.2.0",$t={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){$t[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}}));var jt={};$t.transitional=function(t,e,i){function r(t,e){return"[Axios v1.2.0] Transitional option '"+t+"'"+e+(i?". "+i:"")}return function(i,o,n){if(!1===t)throw new q(r(o," has been removed"+(e?" in "+e:"")),q.ERR_DEPRECATED);return e&&!jt[o]&&(jt[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(i,o,n)}};var Ht={assertOptions:function(t,e,i){if("object"!==typeof t)throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),o=r.length;o-- >0;){var n=r[o],s=e[n];if(s){var a=t[n],l=void 0===a||s(a,n,t);if(!0!==l)throw new q("option "+n+" must be "+l,q.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new q("Unknown option "+n,q.ERR_BAD_OPTION)}},validators:$t},Wt=Ht.validators,Gt=function(){function t(e){H(this,t),this.defaults=e,this.interceptors={request:new at,response:new at}}return G(t,[{key:"request",value:function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{};var i,r=e=Bt(this.defaults,e),o=r.transitional,n=r.paramsSerializer,s=r.headers;void 0!==o&&Ht.assertOptions(o,{silentJSONParsing:Wt.transitional(Wt.boolean),forcedJSONParsing:Wt.transitional(Wt.boolean),clarifyTimeoutError:Wt.transitional(Wt.boolean)},!1),void 0!==n&&Ht.assertOptions(n,{encode:Wt.function,serialize:Wt.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase(),(i=s&&j.merge(s.common,s[e.method]))&&j.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete s[t]})),e.headers=xt.concat(i,s);var a=[],l=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(l=l&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));var u,h=[];this.interceptors.response.forEach((function(t){h.push(t.fulfilled,t.rejected)}));var c,d=0;if(!l){var p=[Nt.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,h),c=p.length,u=Promise.resolve(e);d<c;)u=u.then(p[d++],p[d++]);return u}c=a.length;var f=e;for(d=0;d<c;){var _=a[d++],g=a[d++];try{f=_(f)}catch(y){g.call(this,y);break}}try{u=Nt.call(this,f)}catch(y){return Promise.reject(y)}for(d=0,c=h.length;d<c;)u=u.then(h[d++],h[d++]);return u}},{key:"getUri",value:function(t){return st(Rt((t=Bt(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}]),t}();j.forEach(["delete","get","head","options"],(function(t){Gt.prototype[t]=function(e,i){return this.request(Bt(i||{},{method:t,url:e,data:(i||{}).data}))}})),j.forEach(["post","put","patch"],(function(t){function e(e){return function(i,r,o){return this.request(Bt(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}Gt.prototype[t]=e(),Gt.prototype[t+"Form"]=e(!0)}));var Ut=Gt,zt=function(){function t(e){if(H(this,t),"function"!==typeof e)throw new TypeError("executor must be a function.");var i;this.promise=new Promise((function(t){i=t}));var r=this;this.promise.then((function(t){if(r._listeners){for(var e=r._listeners.length;e-- >0;)r._listeners[e](t);r._listeners=null}})),this.promise.then=function(t){var e,i=new Promise((function(t){r.subscribe(t),e=t})).then(t);return i.cancel=function(){r.unsubscribe(e)},i},e((function(t,e,o){r.reason||(r.reason=new kt(t,e,o),i(r.reason))}))}return G(t,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}},{key:"unsubscribe",value:function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}}}],[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}]),t}();var Yt=function t(e){var i=new Ut(e),r=c(Ut.prototype.request,i);return j.extend(r,Ut.prototype,i,{allOwnKeys:!0}),j.extend(r,i,null,{allOwnKeys:!0}),r.create=function(i){return t(Bt(e,i))},r}(gt);Yt.Axios=Ut,Yt.CanceledError=kt,Yt.CancelToken=zt,Yt.isCancel=St,Yt.VERSION=At,Yt.toFormData=tt,Yt.AxiosError=q,Yt.Cancel=Yt.CanceledError,Yt.all=function(t){return Promise.all(t)},Yt.spread=function(t){return function(e){return t.apply(null,e)}},Yt.isAxiosError=function(t){return j.isObject(t)&&!0===t.isAxiosError},Yt.AxiosHeaders=xt,Yt.formToJSON=function(t){return pt(j.isHTMLForm(t)?new FormData(t):t)},Yt.default=Yt;var qt=Yt.create({baseURL:"https://api.coinpaprika.com"}),Kt=i(184);var Xt=function(){var e=a((0,t.useState)(null),2),i=(e[0],e[1],a((0,t.useState)(null),2)),r=(i[0],i[1],(0,t.useRef)(null));(0,t.useEffect)((function(){var t=r.current,e=new l.LocalDataProvider(!0),i=new l.GridView(t);return i.setDataSource(e),e.setFields(u),i.setColumns(h),i.displayOptions.fitStyle="even",i.displayOptions.rowHeight=40,s(e),function(){e.clearRows(),i.destroy(),e.destroy()}}),[]);var s=function(){var t,e=(t=o().mark((function t(e){var i,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qt.get("/v1/tickers?quotes=KRW");case 3:i=t.sent,r=i.data,console.log(r),e.fillJsonData(r,{fillMode:"set"}),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,i=arguments;return new Promise((function(r,o){var s=t.apply(e,i);function a(t){n(s,r,o,a,l,"next",t)}function l(t){n(s,r,o,a,l,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return(0,Kt.jsxs)("div",{className:"App",children:[(0,Kt.jsx)("h2",{children:"Coin List"}),(0,Kt.jsx)("div",{style:{height:"600px",width:"100%"},ref:r})]})},Qt=function(t){t&&t instanceof Function&&i.e(787).then(i.bind(i,787)).then((function(e){var i=e.getCLS,r=e.getFID,o=e.getFCP,n=e.getLCP,s=e.getTTFB;i(t),r(t),o(t),n(t),s(t)}))};e.createRoot(document.getElementById("root")).render((0,Kt.jsx)(Xt,{})),Qt()}()}();
//# sourceMappingURL=main.d74b9767.js.map